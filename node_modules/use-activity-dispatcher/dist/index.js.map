{"version":3,"file":"index.js","sources":["../src/utils.js","../src/index.js"],"sourcesContent":["export const IS_BROWSER =\n  (typeof window === 'undefined' ? 'undefined' : typeof window) === 'object';\n\nexport const DEFAULT_ELEMENT = IS_BROWSER ? document : {};\n\nexport const DEFAULT_EVENTS = [\n  'mousemove',\n  'keydown',\n  'wheel',\n  'DOMMouseScroll',\n  'mousewheel',\n  'mousedown',\n];\n","import { useEffect } from 'react';\n\nimport { DEFAULT_ELEMENT, DEFAULT_EVENTS, IS_BROWSER } from './utils';\n\nconst handleEvent = e => {\n  window.parent.postMessage(`iframe-${e.type}`, '*');\n};\n\nexport function useActivityDispatcher({\n  events = DEFAULT_EVENTS,\n  element = DEFAULT_ELEMENT,\n  capture = true,\n  passive = true,\n} = {}) {\n  const _bindEvents = () => {\n    if (!IS_BROWSER) {\n      return;\n    }\n\n    events.forEach(e => {\n      element.addEventListener(e, handleEvent, {\n        capture,\n        passive,\n      });\n    });\n  };\n\n  const _unbindEvents = (force = false) => {\n    if (!IS_BROWSER) {\n      return;\n    }\n\n    events.forEach(e => {\n      element.removeEventListener(e, handleEvent, {\n        capture,\n        passive,\n      });\n    });\n  };\n\n  useEffect(() => {\n    if (window.parent) {\n      _bindEvents();\n    }\n\n    return () => {\n      _unbindEvents();\n    };\n  }, []);\n}\n"],"names":["IS_BROWSER","window","DEFAULT_ELEMENT","document","DEFAULT_EVENTS","handleEvent","e","parent","postMessage","type","useActivityDispatcher","events","element","capture","passive","_bindEvents","forEach","addEventListener","_unbindEvents","removeEventListener","useEffect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAO,IAAMA,UAAU,GACrB,CAAC,OAAOC,MAAP,KAAkB,WAAlB,GAAgC,WAAhC,UAAqDA,MAArD,yCAAqDA,MAArD,CAAD,MAAkE,QAD7D;AAGA,IAAMC,eAAe,GAAGF,UAAU,GAAGG,QAAH,GAAc,EAAhD;AAEA,IAAMC,cAAc,GAAG,CAC5B,WAD4B,EAE5B,SAF4B,EAG5B,OAH4B,EAI5B,gBAJ4B,EAK5B,YAL4B,EAM5B,WAN4B,CAAvB;;ACDP,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAAC,CAAC,EAAI;AACvBL,EAAAA,MAAM,CAACM,MAAP,CAAcC,WAAd,kBAAoCF,CAAC,CAACG,IAAtC,GAA8C,GAA9C;AACD,CAFD;;AAIA,AAAO,SAASC,qBAAT,GAKC;AAAA,iFAAJ,EAAI;AAAA,yBAJNC,MAIM;AAAA,MAJNA,MAIM,4BAJGP,cAIH;AAAA,0BAHNQ,OAGM;AAAA,MAHNA,OAGM,6BAHIV,eAGJ;AAAA,0BAFNW,OAEM;AAAA,MAFNA,OAEM,6BAFI,IAEJ;AAAA,0BADNC,OACM;AAAA,MADNA,OACM,6BADI,IACJ;;AACN,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QAAI,CAACf,UAAL,EAAiB;AACf;AACD;;AAEDW,IAAAA,MAAM,CAACK,OAAP,CAAe,UAAAV,CAAC,EAAI;AAClBM,MAAAA,OAAO,CAACK,gBAAR,CAAyBX,CAAzB,EAA4BD,WAA5B,EAAyC;AACvCQ,QAAAA,OAAO,EAAPA,OADuC;AAEvCC,QAAAA,OAAO,EAAPA;AAFuC,OAAzC;AAID,KALD;AAMD,GAXD;;AAaA,MAAMI,aAAa,GAAG,SAAhBA,aAAgB,GAAmB;AAAA;AACvC,QAAI,CAAClB,UAAL,EAAiB;AACf;AACD;;AAEDW,IAAAA,MAAM,CAACK,OAAP,CAAe,UAAAV,CAAC,EAAI;AAClBM,MAAAA,OAAO,CAACO,mBAAR,CAA4Bb,CAA5B,EAA+BD,WAA/B,EAA4C;AAC1CQ,QAAAA,OAAO,EAAPA,OAD0C;AAE1CC,QAAAA,OAAO,EAAPA;AAF0C,OAA5C;AAID,KALD;AAMD,GAXD;;AAaAM,EAAAA,eAAS,CAAC,YAAM;AACd,QAAInB,MAAM,CAACM,MAAX,EAAmB;AACjBQ,MAAAA,WAAW;AACZ;;AAED,WAAO,YAAM;AACXG,MAAAA,aAAa;AACd,KAFD;AAGD,GARQ,EAQN,EARM,CAAT;AASD;;;;"}