{"ast":null,"code":"import React from'react';import{BitmapFont}from'pixi.js';import{Application}from'pixi.js-legacy';const AppWrapper=(WrappedComponent,options)=>class App extends React.Component{constructor(){super(...arguments);/**\n   * component ref\n   */this.ref=React.createRef();/**\n   * PIXI application\n   */this.app=new Application({antialias:true,// autoDensity: true,\nresolution:window.devicePixelRatio});this.updateResolution=()=>{this.app.renderer.resolution=window.devicePixelRatio;this.app.renderer.plugins.interaction.resolution=window.devicePixelRatio;this.app.renderer.emit('resolution-changed');};}componentDidMount(){if(options){const{mappingMethods}=options;if(mappingMethods){mappingMethods.forEach(methodName=>{this[methodName]=this.ref.current[methodName];});}}window.matchMedia('screen and (min-resolution: 2dppx)').addEventListener('change',this.updateResolution);// load default bitmap font\nBitmapFont.from('ALPHA_NUMERIC',{fontFamily:'Arial',fontSize:12,lineHeight:14,fill:'#FFFFFF',dropShadow:true,dropShadowAlpha:0.8,dropShadowBlur:2,dropShadowDistance:1});}componentWillUnmount(){this.app.destroy(true,{children:true,texture:true,baseTexture:true});window.matchMedia('screen and (min-resolution: 2dppx)').removeEventListener('change',this.updateResolution);}setCursor(cursor){this.app.view.style.cursor=cursor;}render(){return/*#__PURE__*/React.createElement(WrappedComponent,Object.assign({ref:this.ref},this.props,{app:this.app,setCursor:this.setCursor}));}};export default AppWrapper;","map":{"version":3,"names":["React","BitmapFont","Application","AppWrapper","WrappedComponent","options","App","Component","constructor","arguments","ref","createRef","app","antialias","resolution","window","devicePixelRatio","updateResolution","renderer","plugins","interaction","emit","componentDidMount","mappingMethods","forEach","methodName","current","matchMedia","addEventListener","from","fontFamily","fontSize","lineHeight","fill","dropShadow","dropShadowAlpha","dropShadowBlur","dropShadowDistance","componentWillUnmount","destroy","children","texture","baseTexture","removeEventListener","setCursor","cursor","view","style","render","createElement","Object","assign","props"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/shapes/wrapper/AppWrapper.tsx"],"sourcesContent":["import React from 'react';\nimport { BitmapFont } from 'pixi.js';\nimport { Application } from 'pixi.js-legacy';\nimport Cursor from '../../Cursor';\n\ninterface Options {\n  mappingMethods?: string[];\n}\n\nconst AppWrapper = (WrappedComponent: any, options?: Options) => class App extends React.Component {\n  /**\n   * component ref\n   */\n  ref = React.createRef<any>();\n\n  /**\n   * PIXI application\n   */\n  app = new Application({\n    antialias: true,\n    // autoDensity: true,\n    resolution: window.devicePixelRatio,\n  });\n\n  [param: string]: any;\n\n  componentDidMount() {\n    if (options) {\n      const { mappingMethods } = options;\n      if (mappingMethods) {\n        mappingMethods.forEach((methodName: string) => {\n          this[methodName] = this.ref.current[methodName];\n        });\n      }\n    }\n    window.matchMedia('screen and (min-resolution: 2dppx)').addEventListener('change', this.updateResolution);\n    // load default bitmap font\n    BitmapFont.from('ALPHA_NUMERIC', {\n      fontFamily: 'Arial',\n      fontSize: 12,\n      lineHeight: 14,\n      fill: '#FFFFFF',\n      dropShadow: true,\n      dropShadowAlpha: 0.8,\n      dropShadowBlur: 2,\n      dropShadowDistance: 1,\n    });\n  }\n\n  componentWillUnmount() {\n    this.app.destroy(true, {\n      children: true,\n      texture: true,\n      baseTexture: true,\n    });\n    window.matchMedia('screen and (min-resolution: 2dppx)').removeEventListener('change', this.updateResolution);\n  }\n\n  updateResolution = () => {\n    this.app.renderer.resolution = window.devicePixelRatio;\n    this.app.renderer.plugins.interaction.resolution = window.devicePixelRatio;\n    this.app.renderer.emit('resolution-changed');\n  };\n\n  setCursor(cursor: Cursor) {\n    this.app.view.style.cursor = cursor;\n  }\n\n  render() {\n    return (\n      <WrappedComponent\n        ref={this.ref}\n        {...this.props}\n        app={this.app}\n        setCursor={this.setCursor}\n      />\n    );\n  }\n};\n\nexport default AppWrapper;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,SAAS,CACpC,OAASC,WAAW,KAAQ,gBAAgB,CAO5C,KAAM,CAAAC,UAAU,CAAGA,CAACC,gBAAqB,CAAEC,OAAiB,GAAK,KAAM,CAAAC,GAAG,QAAS,CAAAN,KAAK,CAACO,SAAU,CAAAC,YAAA,WAAAC,SAAA,EACjG;AACF;AACA,KAFE,KAGAC,GAAG,CAAGV,KAAK,CAACW,SAAS,CAAM,CAAC,CAE5B;AACF;AACA,KAFE,KAGAC,GAAG,CAAG,GAAI,CAAAV,WAAW,CAAC,CACpBW,SAAS,CAAE,IAAI,CACf;AACAC,UAAU,CAAEC,MAAM,CAACC,gBACrB,CAAC,CAAC,MAoCFC,gBAAgB,CAAG,IAAM,CACvB,IAAI,CAACL,GAAG,CAACM,QAAQ,CAACJ,UAAU,CAAGC,MAAM,CAACC,gBAAgB,CACtD,IAAI,CAACJ,GAAG,CAACM,QAAQ,CAACC,OAAO,CAACC,WAAW,CAACN,UAAU,CAAGC,MAAM,CAACC,gBAAgB,CAC1E,IAAI,CAACJ,GAAG,CAACM,QAAQ,CAACG,IAAI,CAAC,oBAAoB,CAAC,CAC9C,CAAC,EApCDC,iBAAiBA,CAAA,CAAG,CAClB,GAAIjB,OAAO,CAAE,CACX,KAAM,CAAEkB,cAAe,CAAC,CAAGlB,OAAO,CAClC,GAAIkB,cAAc,CAAE,CAClBA,cAAc,CAACC,OAAO,CAAEC,UAAkB,EAAK,CAC7C,IAAI,CAACA,UAAU,CAAC,CAAG,IAAI,CAACf,GAAG,CAACgB,OAAO,CAACD,UAAU,CAAC,CACjD,CAAC,CAAC,CACJ,CACF,CACAV,MAAM,CAACY,UAAU,CAAC,oCAAoC,CAAC,CAACC,gBAAgB,CAAC,QAAQ,CAAE,IAAI,CAACX,gBAAgB,CAAC,CACzG;AACAhB,UAAU,CAAC4B,IAAI,CAAC,eAAe,CAAE,CAC/BC,UAAU,CAAE,OAAO,CACnBC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,EAAE,CACdC,IAAI,CAAE,SAAS,CACfC,UAAU,CAAE,IAAI,CAChBC,eAAe,CAAE,GAAG,CACpBC,cAAc,CAAE,CAAC,CACjBC,kBAAkB,CAAE,CACtB,CAAC,CAAC,CACJ,CAEAC,oBAAoBA,CAAA,CAAG,CACrB,IAAI,CAAC1B,GAAG,CAAC2B,OAAO,CAAC,IAAI,CAAE,CACrBC,QAAQ,CAAE,IAAI,CACdC,OAAO,CAAE,IAAI,CACbC,WAAW,CAAE,IACf,CAAC,CAAC,CACF3B,MAAM,CAACY,UAAU,CAAC,oCAAoC,CAAC,CAACgB,mBAAmB,CAAC,QAAQ,CAAE,IAAI,CAAC1B,gBAAgB,CAAC,CAC9G,CAQA2B,SAASA,CAACC,MAAc,CAAE,CACxB,IAAI,CAACjC,GAAG,CAACkC,IAAI,CAACC,KAAK,CAACF,MAAM,CAAGA,MAAM,CACrC,CAEAG,MAAMA,CAAA,CAAG,CACP,mBACEhD,KAAA,CAAAiD,aAAA,CAAC7C,gBAAgB,CAAA8C,MAAA,CAAAC,MAAA,EACfzC,GAAG,CAAE,IAAI,CAACA,GAAI,EACV,IAAI,CAAC0C,KAAK,EACdxC,GAAG,CAAE,IAAI,CAACA,GAAI,CACdgC,SAAS,CAAE,IAAI,CAACA,SAAU,EAC3B,CAAC,CAEN,CACF,CAAC,CAED,cAAe,CAAAzC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}