{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/toolbar/ViewScale.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Tooltip } from 'antd';\nimport { MinusCircleFilled, PlusCircleFilled, Aim } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ViewMode } from '../../types';\nconst ViewScale = observer(({\n  onViewReset,\n  setViewScale\n}) => {\n  const [scale, setScale] = useState('');\n  useEffect(() => {\n    // set initial scale\n    setScale(`${store.config.viewScale.toFixed(2)}x`);\n    // watch changes\n    const reactionDisposer = reaction(() => store.config.viewScale, viewScale => {\n      setScale(`${viewScale.toFixed(2)}x`);\n    });\n    return () => {\n      reactionDisposer();\n    };\n  }, []);\n  const handleScaleChange = () => {\n    const scaleValue = parseFloat(scale);\n    if (!Number.isNaN(scaleValue)) {\n      setViewScale(scaleValue);\n    }\n  };\n  const {\n    viewMode,\n    viewScale\n  } = store.config;\n  const disabled = !store.initialized || viewMode === ViewMode.GRID;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"view-scale\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"bottom\",\n    title: i18n.translate('TOOLBAR_TIP_ZOOM_OUT'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('operation-icon', {\n      'operation-icon--disabled': disabled\n    }),\n    onClick: () => setViewScale(viewScale / 2),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MinusCircleFilled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    disabled: disabled,\n    value: scale,\n    onChange: e => setScale(e.target.value),\n    onBlur: handleScaleChange,\n    onKeyUp: e => {\n      if (e.key === 'Enter') {\n        handleScaleChange();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"bottom\",\n    title: i18n.translate('TOOLBAR_TIP_ZOOM_IN'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('operation-icon', {\n      'operation-icon--disabled': disabled\n    }),\n    onClick: () => setViewScale(viewScale * 2),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PlusCircleFilled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"bottom\",\n    title: i18n.translate('TOOLBAR_TIP_CENTER'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('operation-icon', {\n      'operation-icon--disabled': disabled\n    }),\n    onClick: onViewReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Aim, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }))));\n});\nexport default ViewScale;","map":{"version":3,"names":["React","useState","useEffect","reaction","observer","cx","Tooltip","MinusCircleFilled","PlusCircleFilled","Aim","store","i18n","ViewMode","ViewScale","onViewReset","setViewScale","scale","setScale","config","viewScale","toFixed","reactionDisposer","handleScaleChange","scaleValue","parseFloat","Number","isNaN","viewMode","disabled","initialized","GRID","createElement","Fragment","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","placement","title","translate","onClick","value","onChange","e","target","onBlur","onKeyUp","key"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/toolbar/ViewScale.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Tooltip } from 'antd';\nimport { MinusCircleFilled, PlusCircleFilled, Aim } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ViewMode } from '../../types';\n\ninterface ViewScaleProps {\n  onViewReset: () => void;\n  setViewScale: (scale: number) => void;\n}\n\nconst ViewScale = observer(({ onViewReset, setViewScale }: ViewScaleProps) => {\n  const [scale, setScale] = useState('');\n\n  useEffect(() => {\n    // set initial scale\n    setScale(`${store.config.viewScale.toFixed(2)}x`);\n    // watch changes\n    const reactionDisposer = reaction(\n      () => store.config.viewScale,\n      (viewScale) => {\n        setScale(`${viewScale.toFixed(2)}x`);\n      },\n    );\n    return () => {\n      reactionDisposer();\n    };\n  }, []);\n\n  const handleScaleChange = () => {\n    const scaleValue = parseFloat(scale);\n    if (!Number.isNaN(scaleValue)) {\n      setViewScale(scaleValue);\n    }\n  };\n\n  const { viewMode, viewScale } = store.config;\n  const disabled = !store.initialized || viewMode === ViewMode.GRID;\n  return (\n    <>\n      <div className=\"view-scale\">\n        <Tooltip placement=\"bottom\" title={i18n.translate('TOOLBAR_TIP_ZOOM_OUT')}>\n          <div\n            className={cx('operation-icon', {\n              'operation-icon--disabled': disabled,\n            })}\n            onClick={() => setViewScale(viewScale / 2)}\n          >\n            <MinusCircleFilled />\n          </div>\n        </Tooltip>\n        <input\n          disabled={disabled}\n          value={scale}\n          onChange={(e) => setScale(e.target.value)}\n          onBlur={handleScaleChange}\n          onKeyUp={(e) => {\n            if (e.key === 'Enter') {\n              handleScaleChange();\n            }\n          }}\n        />\n        <Tooltip placement=\"bottom\" title={i18n.translate('TOOLBAR_TIP_ZOOM_IN')}>\n          <div\n            className={cx('operation-icon', {\n              'operation-icon--disabled': disabled,\n            })}\n            onClick={() => setViewScale(viewScale * 2)}\n          >\n            <PlusCircleFilled />\n          </div>\n        </Tooltip>\n      </div>\n      <Tooltip placement=\"bottom\" title={i18n.translate('TOOLBAR_TIP_CENTER')}>\n        <div\n          className={cx('operation-icon', {\n            'operation-icon--disabled': disabled,\n          })}\n          onClick={onViewReset}\n        >\n          <Aim />\n        </div>\n      </Tooltip>\n    </>\n  );\n});\n\nexport default ViewScale;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}