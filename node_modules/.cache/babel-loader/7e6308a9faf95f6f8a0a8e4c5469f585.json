{"ast":null,"code":"import React,{useMemo,useState}from'react';import{connect}from'react-redux';import cx from'classnames';import{Radio}from'antd';import{setLineRole}from'../../../redux/action';import{translate}from'../../../constants';import{isAnnotationReadonly}from'../../../../../utils/tool-mode';import'./LineRoleRadio.scss';import{Down}from'../../../../common/icons';const LineRoleRadio=props=>{const{index,role,currentRoles,annotateDisabled,ontology}=props;const foldable=ontology.size>7;const[fold,setFold]=useState(foldable);const allRoles=useMemo(()=>{const roles=[];[...ontology].forEach((_ref,i)=>{let[key,value]=_ref;if(fold&&role===key&&i>=7){roles.unshift({class_name:key,display_color:value});}else{roles.push({class_name:key,display_color:value});}if(fold){roles.splice(7);}});return roles;},[ontology,fold,role]);const handleRadioChange=e=>{props.setLineRole({lineIndex:index,role:e.target.value});};return/*#__PURE__*/React.createElement(\"div\",{className:\"line-role-radio-container\"},allRoles.length===1&&allRoles[0].class_name==='none'?null:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"label\",{className:\"line-role-radio-title\",htmlFor:\"role\"},\"\".concat(translate('role')).concat(props.index+1).concat(props.index===0?\"(\".concat(translate('primary'),\")\"):'',\": \")),/*#__PURE__*/React.createElement(Radio.Group,{value:role,buttonStyle:\"solid\",className:\"line-role-radio-group\",onChange:e=>handleRadioChange(e),disabled:isAnnotationReadonly(props.toolMode)||annotateDisabled},allRoles.map((value,index2)=>/*#__PURE__*/React.createElement(Radio.Button,{// eslint-disable-next-line react/no-array-index-key\nkey:\"line-role-radio-button-\".concat(index2),className:\"line-role-radio-button\",value:value.class_name,disabled:currentRoles.indexOf(value.class_name)>=0&&role!==value.class_name},/*#__PURE__*/React.createElement(\"div\",{className:\"line-role-radio-color\",style:{backgroundColor:value.display_color}}),value.class_name)),foldable&&/*#__PURE__*/React.createElement(\"div\",{className:cx('line-role-radio-button fold',{active:!fold}),onClick:()=>{setFold(!fold);}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon\"},/*#__PURE__*/React.createElement(Down,null))))));};const mapStateToProps=state=>({ontology:state.ontology,toolMode:state.toolMode,annotateDisabled:state.annotateDisabled});const mapDispatchToProps={setLineRole};export default connect(mapStateToProps,mapDispatchToProps)(LineRoleRadio);","map":{"version":3,"names":["React","useMemo","useState","connect","cx","Radio","setLineRole","translate","isAnnotationReadonly","Down","LineRoleRadio","props","index","role","currentRoles","annotateDisabled","ontology","foldable","size","fold","setFold","allRoles","roles","forEach","_ref","i","key","value","unshift","class_name","display_color","push","splice","handleRadioChange","e","lineIndex","target","createElement","className","length","Fragment","htmlFor","concat","Group","buttonStyle","onChange","disabled","toolMode","map","index2","Button","indexOf","style","backgroundColor","active","onClick","mapStateToProps","state","mapDispatchToProps"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/SegmentDetail/LineRoleRadio/LineRoleRadio.jsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\nimport { Radio } from 'antd';\nimport { setLineRole } from '../../../redux/action';\nimport { translate } from '../../../constants';\nimport { isAnnotationReadonly } from '../../../../../utils/tool-mode';\nimport './LineRoleRadio.scss';\nimport { Down } from '../../../../common/icons';\n\nconst LineRoleRadio = (props) => {\n  const { index, role, currentRoles, annotateDisabled, ontology } = props;\n  const foldable = ontology.size > 7;\n  const [fold, setFold] = useState(foldable);\n  const allRoles = useMemo(() => {\n    const roles = [];\n    [...ontology].forEach(([key, value], i) => {\n      if (fold && role === key && i >= 7) {\n        roles.unshift({ class_name: key, display_color: value });\n      } else {\n        roles.push({ class_name: key, display_color: value });\n      }\n      if (fold) {\n        roles.splice(7);\n      }\n    });\n    return roles;\n  }, [ontology, fold, role]);\n  const handleRadioChange = (e) => {\n    props.setLineRole({\n      lineIndex: index,\n      role: e.target.value,\n    });\n  };\n  return (\n    <div className=\"line-role-radio-container\">\n      {allRoles.length === 1 && allRoles[0].class_name === 'none' ? null : (\n        <>\n          <label className=\"line-role-radio-title\" htmlFor=\"role\">{`${translate('role')}${props.index + 1}${props.index === 0 ? `(${translate('primary')})` : ''}: `}</label>\n          <Radio.Group\n            value={role}\n            buttonStyle=\"solid\"\n            className=\"line-role-radio-group\"\n            onChange={(e) => handleRadioChange(e)}\n            disabled={isAnnotationReadonly(props.toolMode) || annotateDisabled}\n          >\n            {allRoles.map((value, index2) => (\n              <Radio.Button\n                // eslint-disable-next-line react/no-array-index-key\n                key={`line-role-radio-button-${index2}`}\n                className=\"line-role-radio-button\"\n                value={value.class_name}\n                disabled={currentRoles.indexOf(value.class_name) >= 0 && role !== value.class_name}\n              >\n                <div\n                  className=\"line-role-radio-color\"\n                  style={{ backgroundColor: value.display_color }}\n                />\n                {value.class_name}\n              </Radio.Button>\n            ))}\n            {foldable && (\n              <div\n                className={cx('line-role-radio-button fold', { active: !fold })}\n                onClick={() => { setFold(!fold); }}\n              >\n                <div className=\"icon\"><Down /></div>\n              </div>\n            )}\n          </Radio.Group>\n        </>\n      )}\n    </div>\n  );\n};\n\nLineRoleRadio.propTypes = {\n  setLineRole: PropTypes.func,\n};\n\nconst mapStateToProps = (state) => ({\n  ontology: state.ontology,\n  toolMode: state.toolMode,\n  annotateDisabled: state.annotateDisabled,\n});\nconst mapDispatchToProps = {\n  setLineRole,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(LineRoleRadio);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}