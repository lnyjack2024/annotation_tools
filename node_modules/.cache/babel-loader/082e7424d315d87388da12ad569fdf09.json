{"ast":null,"code":"import React,{useState}from'react';import{observer}from'mobx-react';import cx from'classnames';import{Up}from'../../../common/icons';import store from'../../store/RootStore';import i18n from'../../locales';const GlobalInfo=observer(()=>{const[collapsed,setCollapsed]=useState(false);const{currentFrame,frameCount,isSingleCamera,cameraCount}=store.frame;const{instances}=store.instance;let instanceCount=0;let shapesCount=0;let currentShapesCount=0;Object.values(instances).forEach(_ref=>{let{isEmpty,items}=_ref;if(!isEmpty){instanceCount+=1;Object.values(items).forEach(_ref2=>{let{cameras}=_ref2;Object.values(cameras).forEach(_ref3=>{let{frames}=_ref3;shapesCount+=Object.keys(frames).length;if(frames[currentFrame]){currentShapesCount+=1;}});});}});return/*#__PURE__*/React.createElement(\"div\",{className:cx('collapse-panel',{collapsed})},/*#__PURE__*/React.createElement(\"div\",{className:\"collapse-panel-title\",onClick:()=>setCollapsed(!collapsed)},/*#__PURE__*/React.createElement(\"div\",{className:\"collapse-panel-collapse-icon\"},/*#__PURE__*/React.createElement(Up,null)),i18n.translate('GLOBAL_INFO')),store.initialized&&/*#__PURE__*/React.createElement(\"div\",{className:\"collapse-panel-content\"},/*#__PURE__*/React.createElement(\"div\",null,i18n.translate('GLOBAL_INFO_FRAME',{values:{frame:currentFrame+1,count:frameCount}})),!isSingleCamera&&/*#__PURE__*/React.createElement(\"div\",{className:\"value-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-label\"},i18n.translate('GLOBAL_INFO_CAMERA')),/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-value\"},i18n.translate('GLOBAL_INFO_CAMERA_COUNT',{values:{count:cameraCount}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"value-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-label\"},i18n.translate('GLOBAL_INFO_INSTANCE')),/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-value\"},i18n.translate('GLOBAL_INFO_INSTANCE_COUNT',{values:{count:instanceCount}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"value-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-label\"},i18n.translate('GLOBAL_INFO_SHAPE')),/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-value\"},i18n.translate('GLOBAL_INFO_SHAPE_COUNT',{values:{count:shapesCount}}))),frameCount>1&&/*#__PURE__*/React.createElement(\"div\",{className:\"value-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-label\"},i18n.translate('GLOBAL_INFO_SHAPE_FRAME')),/*#__PURE__*/React.createElement(\"div\",{className:\"value-item-value\"},i18n.translate('GLOBAL_INFO_SHAPE_FRAME_COUNT',{values:{count:currentShapesCount}})))));});export default GlobalInfo;","map":{"version":3,"names":["React","useState","observer","cx","Up","store","i18n","GlobalInfo","collapsed","setCollapsed","currentFrame","frameCount","isSingleCamera","cameraCount","frame","instances","instance","instanceCount","shapesCount","currentShapesCount","Object","values","forEach","_ref","isEmpty","items","_ref2","cameras","_ref3","frames","keys","length","createElement","className","onClick","translate","initialized","count"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/GlobalInfo.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Up } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\n\nconst GlobalInfo = observer(() => {\n  const [collapsed, setCollapsed] = useState(false);\n\n  const { currentFrame, frameCount, isSingleCamera, cameraCount } = store.frame;\n  const { instances } = store.instance;\n\n  let instanceCount = 0;\n  let shapesCount = 0;\n  let currentShapesCount = 0;\n  Object.values(instances).forEach(({ isEmpty, items }) => {\n    if (!isEmpty) {\n      instanceCount += 1;\n      Object.values(items).forEach(({ cameras }) => {\n        Object.values(cameras).forEach(({ frames }) => {\n          shapesCount += Object.keys(frames).length;\n          if (frames[currentFrame]) {\n            currentShapesCount += 1;\n          }\n        });\n      });\n    }\n  });\n\n  return (\n    <div\n      className={cx('collapse-panel', {\n        collapsed,\n      })}\n    >\n      <div className=\"collapse-panel-title\" onClick={() => setCollapsed(!collapsed)}>\n        <div className=\"collapse-panel-collapse-icon\">\n          <Up />\n        </div>\n        {i18n.translate('GLOBAL_INFO')}\n      </div>\n      {store.initialized && (\n        <div className=\"collapse-panel-content\">\n          <div>{i18n.translate('GLOBAL_INFO_FRAME', { values: { frame: currentFrame + 1, count: frameCount } })}</div>\n          {!isSingleCamera && (\n            <div className=\"value-item\">\n              <div className=\"value-item-label\">{i18n.translate('GLOBAL_INFO_CAMERA')}</div>\n              <div className=\"value-item-value\">{i18n.translate('GLOBAL_INFO_CAMERA_COUNT', { values: { count: cameraCount } })}</div>\n            </div>\n          )}\n          <div className=\"value-item\">\n            <div className=\"value-item-label\">{i18n.translate('GLOBAL_INFO_INSTANCE')}</div>\n            <div className=\"value-item-value\">{i18n.translate('GLOBAL_INFO_INSTANCE_COUNT', { values: { count: instanceCount } })}</div>\n          </div>\n          <div className=\"value-item\">\n            <div className=\"value-item-label\">{i18n.translate('GLOBAL_INFO_SHAPE')}</div>\n            <div className=\"value-item-value\">{i18n.translate('GLOBAL_INFO_SHAPE_COUNT', { values: { count: shapesCount } })}</div>\n          </div>\n          {frameCount > 1 && (\n            <div className=\"value-item\">\n              <div className=\"value-item-label\">{i18n.translate('GLOBAL_INFO_SHAPE_FRAME')}</div>\n              <div className=\"value-item-value\">{i18n.translate('GLOBAL_INFO_SHAPE_FRAME_COUNT', { values: { count: currentShapesCount } })}</div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default GlobalInfo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}