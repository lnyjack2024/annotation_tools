{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/collapse/Collapse.tsx\";\nimport React, { useMemo, useState } from 'react';\nimport { CaretRightOutlined } from '@ant-design/icons';\nimport './Collapse.scss';\nconst HEADER_HEIGHT = 32;\nexport const Panel = ({\n  children,\n  title,\n  isOpen,\n  height,\n  onHeaderClick,\n  contentRef\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"collapse-panel\",\n  style: {\n    height\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"collapse-panel-header\",\n  style: {\n    height: HEADER_HEIGHT\n  },\n  onClick: onHeaderClick,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  className: \"collapse-panel-icon\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(CaretRightOutlined, {\n  rotate: isOpen ? 90 : 0,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 9\n  }\n})), /*#__PURE__*/React.createElement(\"span\", {\n  className: \"collapse-panel-title\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 7\n  }\n}, title)), isOpen && /*#__PURE__*/React.createElement(\"div\", {\n  ref: contentRef,\n  className: \"collapse-panel-content\",\n  style: {\n    height: `calc(100% - ${HEADER_HEIGHT}px)`\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 7\n  }\n}, children));\nexport default ({\n  children\n}) => {\n  const [openPanels, setOpenPanels] = useState(children.map(() => true));\n  const rowsCount = useMemo(() => children.reduce((acc, curr) => acc + curr.props.rows, 0), [children]);\n  const closedPanels = children.filter((_, index) => !openPanels[index]);\n  const closedPanelRows = closedPanels.reduce((acc, curr) => acc + curr.props.rows, 0);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, children.map((child, index) => {\n    const isOpen = openPanels[index];\n    const height = isOpen ? `calc(${(child.props.rows + closedPanelRows) / rowsCount * 100}% - ${HEADER_HEIGHT * closedPanels.length}px)` : undefined;\n    return React.cloneElement(child, {\n      ...child.props,\n      key: child.props.title,\n      isOpen,\n      height,\n      onHeaderClick: () => {\n        if (children.length > 1) {\n          const panels = [...openPanels];\n          panels[index] = !panels[index];\n          setOpenPanels(panels);\n        }\n      }\n    });\n  }));\n};","map":{"version":3,"names":["React","useMemo","useState","CaretRightOutlined","HEADER_HEIGHT","Panel","children","title","isOpen","height","onHeaderClick","contentRef","createElement","className","style","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","rotate","ref","openPanels","setOpenPanels","map","rowsCount","reduce","acc","curr","props","rows","closedPanels","filter","_","index","closedPanelRows","child","length","undefined","cloneElement","key","panels"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/collapse/Collapse.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { CaretRightOutlined } from '@ant-design/icons';\nimport './Collapse.scss';\n\nconst HEADER_HEIGHT = 32;\n\ninterface CollapsePanelProps {\n  children: React.ReactNode;\n  title: string;\n  rows?: number;\n  isOpen?: boolean;\n  height?: string | number;\n  onHeaderClick?: () => void;\n  contentRef?: React.RefObject<HTMLDivElement>;\n}\n\nexport const Panel = ({ children, title, isOpen, height, onHeaderClick, contentRef }: CollapsePanelProps) => (\n  <div\n    className=\"collapse-panel\"\n    style={{ height }}\n  >\n    <div\n      className=\"collapse-panel-header\"\n      style={{ height: HEADER_HEIGHT }}\n      onClick={onHeaderClick}\n    >\n      <span className=\"collapse-panel-icon\">\n        <CaretRightOutlined rotate={isOpen ? 90 : 0} />\n      </span>\n      <span className=\"collapse-panel-title\">\n        {title}\n      </span>\n    </div>\n    {isOpen && (\n      <div\n        ref={contentRef}\n        className=\"collapse-panel-content\"\n        style={{ height: `calc(100% - ${HEADER_HEIGHT}px)` }}\n      >\n        {children}\n      </div>\n    )}\n  </div>\n);\n\nexport default ({ children }: { children: JSX.Element[] }) => {\n  const [openPanels, setOpenPanels] = useState(children.map(() => true));\n  const rowsCount = useMemo(() => children.reduce((acc, curr) => acc + curr.props.rows, 0), [children]);\n\n  const closedPanels = children.filter((_, index) => !openPanels[index]);\n  const closedPanelRows = closedPanels.reduce((acc, curr) => acc + curr.props.rows, 0);\n  return (\n    <div className=\"collapse\">\n      {children.map((child, index) => {\n        const isOpen = openPanels[index];\n        const height = isOpen\n          ? `calc(${((child.props.rows + closedPanelRows) / rowsCount) * 100}% - ${HEADER_HEIGHT * closedPanels.length}px)`\n          : undefined;\n        return React.cloneElement(child, {\n          ...child.props,\n          key: child.props.title,\n          isOpen,\n          height,\n          onHeaderClick: () => {\n            if (children.length > 1) {\n              const panels = [...openPanels];\n              panels[index] = !panels[index];\n              setOpenPanels(panels);\n            }\n          },\n        });\n      })}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}