{"ast":null,"code":"/* eslint-disable react/no-array-index-key */ /* eslint-disable no-bitwise */ /* eslint-disable no-undef */import React,{useEffect,useMemo,useRef,useState}from'react';import{connect}from'react-redux';import'./LineText.scss';import{Input,Tooltip,notification}from'antd';import{setLineText}from'../../../redux/action';import{translate,tagType,shortText}from'../../../constants';import{isAnnotationReadonly}from'../../../../../utils/tool-mode';import TagIcon from'../../common/Icons/TagIcon';import StandaloneTagIcon from'../../common/Icons/StandaloneTagIcon';import{containsRTLLanguage,escapeRegExp}from'../../../../../utils';notification.config({top:60});const LineText=props=>{const textareaRef=useRef();const[translation,setTranslation]=useState('');const[isSelectedTag,setIsSelectedTag]=useState(false);const{text,lineIndex,tagGroup}=props;useEffect(()=>{if(text!==translation){setTranslation(text);}},[text]);const handleTextChange=value=>{setTranslation(value);props.setLineText({text:value,videoIndex:null,segmentIndex:null,lineIndex});};const handleTagClick=(group,tag)=>{if(isAnnotationReadonly(props.toolMode)||props.annotateDisabled){return;}const domTextArea=textareaRef.current.resizableTextArea.textArea;const txt=domTextArea.value;const before=txt.substring(0,domTextArea.selectionStart);const selected=txt.substring(domTextArea.selectionStart,domTextArea.selectionEnd);const after=txt.substring(domTextArea.selectionEnd);let newTxt=domTextArea.value;let newSelection=before===null||before===void 0?void 0:before.length;if(group.type===tagType.standalone){var _tag$text;newSelection+=(_tag$text=tag.text)===null||_tag$text===void 0?void 0:_tag$text.length;newTxt=\"\".concat(before).concat(tag.text).concat(after);}else if(group.type===tagType.tag){var _tag$prefix,_tag$suffix;newSelection+=((_tag$prefix=tag.prefix)===null||_tag$prefix===void 0?void 0:_tag$prefix.length)+(selected===null||selected===void 0?void 0:selected.length)+(selected.length===0?0:(_tag$suffix=tag.suffix)===null||_tag$suffix===void 0?void 0:_tag$suffix.length);newTxt=\"\".concat(before).concat(tag.prefix).concat(selected).concat(tag.suffix).concat(after);}domTextArea.value=newTxt;handleTextChange(newTxt);domTextArea.focus();domTextArea.setSelectionRange(newSelection,newSelection);};const handleTagShortcut=e=>{if(e.ctrlKey&&e.shiftKey&&e.key){e.preventDefault();tagGroup.forEach(group=>{group.tags.forEach(tag=>{var _tag$shortcut;if(e.key.toUpperCase()===((_tag$shortcut=tag.shortcut)===null||_tag$shortcut===void 0?void 0:_tag$shortcut.toUpperCase())){handleTagClick(group,tag);}});});}};const textTags=useMemo(()=>{var _tagGroup$find,_tagGroup$find2;/**\n     *  {\n     *    \"text\": \"#4\"\n     *    \"name\": \"#4\"\n     *  },\n     */const standaloneTags=(tagGroup===null||tagGroup===void 0?void 0:(_tagGroup$find=tagGroup.find(t=>t.type===tagType.standalone))===null||_tagGroup$find===void 0?void 0:_tagGroup$find.tags)||[];/**\n     *  {\n     *    \"prefix\": \"【\",\n     *    \"suffix\": \"】\",\n     *    \"name\": \"【】\"\n     *  },\n     */const tags=(tagGroup===null||tagGroup===void 0?void 0:(_tagGroup$find2=tagGroup.find(t=>t.type===tagType.tag))===null||_tagGroup$find2===void 0?void 0:_tagGroup$find2.tags)||[];const tagArray=[];if(!!translation&&(standaloneTags.length>0||tags.length>0)){for(let i=0;i<standaloneTags.length;i+=1){const tag=standaloneTags[i].text;const regexp=new RegExp(escapeRegExp(tag),'g');const list=[...translation.matchAll(regexp)];tagArray.push(...list.map(m=>({text:tag,start:m.index,end:m.index+tag.length})));}for(let i=0;i<tags.length;i+=1){const{prefix,suffix,name}=tags[i];const prefixRegexp=new RegExp(escapeRegExp(prefix),'g');const suffixRegexp=new RegExp(escapeRegExp(suffix),'g');const prefixs=[...translation.matchAll(prefixRegexp)];const suffixs=[...translation.matchAll(suffixRegexp)];const prefixList=prefixs.map(m=>({text:name,start:m.index,end:m.index+prefix.length}));const suffixList=suffixs.map(m=>({text:name,start:m.index,end:m.index+suffix.length}));for(let n=prefixList.length-1;n>=0;n-=1){const prefixTag=prefixList[n];const suffixTagIndex=suffixList.findIndex(s=>prefixTag.start<s.start);if(suffixTagIndex>=0){const suffixTag=suffixList[suffixTagIndex];tagArray.push({...prefixTag,end:suffixTag.end});suffixList.splice(suffixTagIndex,1);}else{tagArray.push(prefixTag);}}if(suffixList.length>0){tagArray.push(...suffixList);}}}return tagArray.sort((a,b)=>b.start-a.start);},[translation,tagGroup]);const handleClick=()=>{if(isSelectedTag){setIsSelectedTag(false);return;}const domTextArea=textareaRef.current.resizableTextArea.textArea;const{selectionStart,selectionEnd,value}=domTextArea;if(selectionStart===selectionEnd&&selectionStart>0&&selectionEnd<value.length){const selectedTag=textTags.find(s=>selectionStart>=s.start&&selectionEnd<s.end);if(selectedTag){domTextArea.setSelectionRange(selectedTag.start,selectedTag.end);}}};return/*#__PURE__*/React.createElement(\"div\",{className:\"line-text-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"line-text-head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"line-text-content-title\"},\"\".concat(translate('content'),\":\"))),/*#__PURE__*/React.createElement(Input.TextArea,{ref:textareaRef,className:\"line-text\",value:translation,autoSize:{minRows:6},onChange:e=>handleTextChange(e.target.value),autoComplete:\"off\",disabled:isAnnotationReadonly(props.toolMode)||props.annotateDisabled,onFocus:()=>{window.disableLongAudioHotKeys=true;},onBlur:()=>{window.disableLongAudioHotKeys=false;setIsSelectedTag(false);},onKeyDown:e=>{handleTagShortcut(e);},dir:containsRTLLanguage(translation)?'rtl':'ltr',onClick:handleClick}),/*#__PURE__*/React.createElement(\"div\",null,tagGroup.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"tags-group-shortcut\"},translate('TAG_SHORTCUT'),\": ctrl+shift+[key]\"),tagGroup.map(group=>/*#__PURE__*/React.createElement(\"div\",{key:\"tags-group-\".concat(group.name),className:\"tags-group\"},/*#__PURE__*/React.createElement(Tooltip,{title:group.name},/*#__PURE__*/React.createElement(\"div\",{className:\"tags-group-tag-icon\"},group.type===tagType.tag&&/*#__PURE__*/React.createElement(TagIcon,{size:16,viewBox:\"0 0 16 16\"}),group.type===tagType.standalone&&/*#__PURE__*/React.createElement(StandaloneTagIcon,{size:16,viewBox:\"0 0 16 16\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"tags-group-tags\"},group.tags.map((tag,idx)=>/*#__PURE__*/React.createElement(Tooltip,{overlayClassName:\"tooltip\",key:\"tags-group-tag-\".concat(group.name,\"-\").concat(tag.name,\"-\").concat(idx),title:\"\".concat(translate('TAG'),\": \").concat(tag.prefix?tag.prefix:'').concat(tag.suffix?tag.suffix:'').concat(tag.text?tag.text:'',\" \").concat(tag.shortcut?\"\".concat(translate('TAG_SHORTCUT'),\": ctrl+shift+\").concat(tag.shortcut):'')},/*#__PURE__*/React.createElement(\"span\",{className:\"tags-group-tag tags-group-tag-\".concat(group.type,\" tags-group-tag-\").concat(isAnnotationReadonly(props.toolMode)||props.annotateDisabled?'disabled':'enabled'),key:\"tags-group-tag-\".concat(group.name,\"-\").concat(tag.name,\"-\").concat(idx),onClick:()=>handleTagClick(group,tag)},\"\".concat(shortText(tag.name,50)).concat(tag.shortcut?\" [\".concat(tag.shortcut,\"]\"):'')))))))));};const mapStateToProps=state=>({toolMode:state.toolMode,tagGroup:state.tagGroup,wavesurfers:state.wavesurfers,autoTranscription:state.autoTranscription,autoTranscriptionLanguage:state.autoTranscriptionLanguage,autoTranscriptionEndpoint:state.autoTranscriptionEndpoint,jobId:state.jobId,videos:state.videos,currentVideo:state.currentVideo,wordTimestamps:state.wordTimestamps,annotateDisabled:state.annotateDisabled,jobProxy:state.jobProxy});const mapDispatchToProps={setLineText};export default connect(mapStateToProps,mapDispatchToProps)(LineText);","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","connect","Input","Tooltip","notification","setLineText","translate","tagType","shortText","isAnnotationReadonly","TagIcon","StandaloneTagIcon","containsRTLLanguage","escapeRegExp","config","top","LineText","props","textareaRef","translation","setTranslation","isSelectedTag","setIsSelectedTag","text","lineIndex","tagGroup","handleTextChange","value","videoIndex","segmentIndex","handleTagClick","group","tag","toolMode","annotateDisabled","domTextArea","current","resizableTextArea","textArea","txt","before","substring","selectionStart","selected","selectionEnd","after","newTxt","newSelection","length","type","standalone","_tag$text","concat","_tag$prefix","_tag$suffix","prefix","suffix","focus","setSelectionRange","handleTagShortcut","e","ctrlKey","shiftKey","key","preventDefault","forEach","tags","_tag$shortcut","toUpperCase","shortcut","textTags","_tagGroup$find","_tagGroup$find2","standaloneTags","find","t","tagArray","i","regexp","RegExp","list","matchAll","push","map","m","start","index","end","name","prefixRegexp","suffixRegexp","prefixs","suffixs","prefixList","suffixList","n","prefixTag","suffixTagIndex","findIndex","s","suffixTag","splice","sort","a","b","handleClick","selectedTag","createElement","className","TextArea","ref","autoSize","minRows","onChange","target","autoComplete","disabled","onFocus","window","disableLongAudioHotKeys","onBlur","onKeyDown","dir","onClick","title","size","viewBox","idx","overlayClassName","mapStateToProps","state","wavesurfers","autoTranscription","autoTranscriptionLanguage","autoTranscriptionEndpoint","jobId","videos","currentVideo","wordTimestamps","jobProxy","mapDispatchToProps"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/SegmentDetail/LineText/LineText.jsx"],"sourcesContent":["/* eslint-disable react/no-array-index-key */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-undef */\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport './LineText.scss';\nimport { Input, Tooltip, notification } from 'antd';\nimport { setLineText } from '../../../redux/action';\nimport { translate, tagType, shortText } from '../../../constants';\nimport { isAnnotationReadonly } from '../../../../../utils/tool-mode';\nimport TagIcon from '../../common/Icons/TagIcon';\nimport StandaloneTagIcon from '../../common/Icons/StandaloneTagIcon';\nimport {containsRTLLanguage, escapeRegExp } from '../../../../../utils';\n\nnotification.config({ top: 60 });\n\nconst LineText = (props) => {\n  const textareaRef = useRef();\n  const [translation, setTranslation] = useState('');\n  const [isSelectedTag, setIsSelectedTag] = useState(false);\n  const { text, lineIndex, tagGroup } = props;\n\n  useEffect(() => {\n    if (text !== translation) {\n      setTranslation(text);\n    }\n  }, [text]);\n\n  const handleTextChange = (value) => {\n    setTranslation(value);\n    props.setLineText({\n      text: value,\n      videoIndex: null,\n      segmentIndex: null,\n      lineIndex,\n    });\n  };\n\n  const handleTagClick = (group, tag) => {\n    if (isAnnotationReadonly(props.toolMode) || props.annotateDisabled) {\n      return;\n    }\n    const domTextArea = textareaRef.current.resizableTextArea.textArea;\n    const txt = domTextArea.value;\n    const before = txt.substring(0, domTextArea.selectionStart);\n    const selected = txt.substring(domTextArea.selectionStart, domTextArea.selectionEnd);\n    const after = txt.substring(domTextArea.selectionEnd);\n    let newTxt = domTextArea.value;\n    let newSelection = before?.length;\n    if (group.type === tagType.standalone) {\n      newSelection += tag.text?.length;\n      newTxt = `${before}${tag.text}${after}`;\n    } else if (group.type === tagType.tag) {\n      newSelection += tag.prefix?.length + selected?.length + (selected.length === 0 ? 0 : tag.suffix?.length);\n      newTxt = `${before}${tag.prefix}${selected}${tag.suffix}${after}`;\n    }\n    domTextArea.value = newTxt;\n    handleTextChange(newTxt);\n    domTextArea.focus();\n    domTextArea.setSelectionRange(newSelection, newSelection);\n  };\n\n  const handleTagShortcut = (e) => {\n    if (e.ctrlKey && e.shiftKey && e.key) {\n      e.preventDefault();\n      tagGroup.forEach((group) => {\n        group.tags.forEach((tag) => {\n          if (e.key.toUpperCase() === tag.shortcut?.toUpperCase()) {\n            handleTagClick(group, tag);\n          }\n        });\n      });\n    }\n  };\n\n  const textTags = useMemo(() => {\n    /**\n     *  {\n     *    \"text\": \"#4\"\n     *    \"name\": \"#4\"\n     *  },\n     */\n    const standaloneTags = tagGroup?.find((t) => t.type === tagType.standalone)?.tags || [];\n    /**\n     *  {\n     *    \"prefix\": \"【\",\n     *    \"suffix\": \"】\",\n     *    \"name\": \"【】\"\n     *  },\n     */\n    const tags = tagGroup?.find((t) => t.type === tagType.tag)?.tags || [];\n    const tagArray = [];\n    if (!!translation && (standaloneTags.length > 0 || tags.length > 0)) {\n      for (let i = 0; i < standaloneTags.length; i += 1) {\n        const tag = standaloneTags[i].text;\n        const regexp = new RegExp(escapeRegExp(tag), 'g');\n        const list = [...translation.matchAll(regexp)];\n        tagArray.push(...list.map((m) => ({\n          text: tag,\n          start: m.index,\n          end: m.index + tag.length\n        })));\n      }\n\n      for (let i = 0; i < tags.length; i += 1) {\n        const { prefix, suffix, name } = tags[i];\n        const prefixRegexp = new RegExp(escapeRegExp(prefix), 'g');\n        const suffixRegexp = new RegExp(escapeRegExp(suffix), 'g');\n        const prefixs = [...translation.matchAll(prefixRegexp)];\n        const suffixs = [...translation.matchAll(suffixRegexp)];\n        const prefixList = prefixs.map((m) => ({\n          text: name,\n          start: m.index,\n          end: m.index + prefix.length\n        }));\n        const suffixList = suffixs.map((m) => ({\n          text: name,\n          start: m.index,\n          end: m.index + suffix.length\n        }));\n        for (let n = prefixList.length - 1; n >= 0; n -= 1) {\n          const prefixTag = prefixList[n];\n          const suffixTagIndex = suffixList.findIndex((s) => prefixTag.start < s.start);\n          if (suffixTagIndex >= 0) {\n            const suffixTag = suffixList[suffixTagIndex];\n            tagArray.push({\n              ...prefixTag,\n              end: suffixTag.end\n            });\n            suffixList.splice(suffixTagIndex, 1);\n          } else {\n            tagArray.push(prefixTag);\n          }\n        }\n        if (suffixList.length > 0) {\n          tagArray.push(...suffixList);\n        }\n      }\n    }\n    return tagArray.sort((a, b) => b.start - a.start);\n  }, [translation, tagGroup]);\n\n  const handleClick = () => {\n    if (isSelectedTag) {\n      setIsSelectedTag(false);\n      return;\n    }\n    const domTextArea = textareaRef.current.resizableTextArea.textArea;\n    const { selectionStart, selectionEnd, value } = domTextArea;\n    if (selectionStart === selectionEnd && selectionStart > 0 && selectionEnd < value.length) {\n      const selectedTag = textTags.find((s) => selectionStart >= s.start && selectionEnd < s.end);\n      if (selectedTag) {\n        domTextArea.setSelectionRange(selectedTag.start, selectedTag.end);\n      }\n    }\n  };\n\n  return (\n    <div className=\"line-text-container\">\n      <div className=\"line-text-head\">\n        <div className=\"line-text-content-title\">{`${translate('content')}:`}</div>\n      </div>\n      <Input.TextArea\n        ref={textareaRef}\n        className=\"line-text\"\n        value={translation}\n        autoSize={{ minRows: 6 }}\n        onChange={(e) => handleTextChange(e.target.value)}\n        autoComplete=\"off\"\n        disabled={isAnnotationReadonly(props.toolMode) || props.annotateDisabled}\n        onFocus={() => { window.disableLongAudioHotKeys = true; }}\n        onBlur={() => { window.disableLongAudioHotKeys = false; setIsSelectedTag(false); }}\n        onKeyDown={(e) => { handleTagShortcut(e); }}\n        dir={containsRTLLanguage(translation) ? 'rtl' : 'ltr'}\n        onClick={handleClick}\n      />\n      <div>\n        {\n          tagGroup.length > 0 && (\n            <div className=\"tags-group-shortcut\">\n              {translate('TAG_SHORTCUT')}\n              : ctrl+shift+[key]\n            </div>\n          )\n        }\n        {\n          tagGroup.map((group) => (\n            <div key={`tags-group-${group.name}`} className=\"tags-group\">\n              <Tooltip\n                title={group.name}\n              >\n                <div className=\"tags-group-tag-icon\">\n                  {\n                    group.type === tagType.tag && <TagIcon size={16} viewBox=\"0 0 16 16\" />\n                  }\n                  {\n                    group.type === tagType.standalone && <StandaloneTagIcon size={16} viewBox=\"0 0 16 16\" />\n                  }\n                </div>\n              </Tooltip>\n              <div className=\"tags-group-tags\">\n                {\n                group.tags.map((tag, idx) => (\n                  <Tooltip\n                    overlayClassName=\"tooltip\"\n                    key={`tags-group-tag-${group.name}-${tag.name}-${idx}`}\n                    title={`${translate('TAG')}: ${tag.prefix ? tag.prefix : ''}${tag.suffix ? tag.suffix : ''}${tag.text ? tag.text : ''} ${tag.shortcut ? `${translate('TAG_SHORTCUT')}: ctrl+shift+${tag.shortcut}` : ''}`}\n                  >\n                    <span\n                      className={`tags-group-tag tags-group-tag-${group.type} tags-group-tag-${isAnnotationReadonly(props.toolMode) || props.annotateDisabled ? 'disabled' : 'enabled'}`}\n                      key={`tags-group-tag-${group.name}-${tag.name}-${idx}`}\n                      onClick={() => handleTagClick(group, tag)}\n                    >\n                      {`${shortText(tag.name, 50)}${tag.shortcut ? ` [${tag.shortcut}]` : ''}`}\n                    </span>\n                  </Tooltip>\n                ))\n              }\n              </div>\n            </div>\n          ))\n        }\n      </div>\n    </div>\n  );\n};\n\nLineText.propTypes = {\n  setLineText: PropTypes.func,\n  text: PropTypes.string,\n  lineIndex: PropTypes.number,\n};\nconst mapStateToProps = (state) => ({\n  toolMode: state.toolMode,\n  tagGroup: state.tagGroup,\n  wavesurfers: state.wavesurfers,\n  autoTranscription: state.autoTranscription,\n  autoTranscriptionLanguage: state.autoTranscriptionLanguage,\n  autoTranscriptionEndpoint: state.autoTranscriptionEndpoint,\n  jobId: state.jobId,\n  videos: state.videos,\n  currentVideo: state.currentVideo,\n  wordTimestamps: state.wordTimestamps,\n  annotateDisabled: state.annotateDisabled,\n  jobProxy: state.jobProxy,\n});\nconst mapDispatchToProps = {\n  setLineText,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(LineText);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}