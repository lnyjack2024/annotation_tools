{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/FrameAttributes.tsx\";\nimport React, { useMemo, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { parseFields } from '../../utils';\nimport { Pencil } from '../../../common/icons';\nimport AttributeValueItem from './AttributeValueItem';\nimport store from '../../store/RootStore';\nimport './FrameAttributes.scss';\nconst FrameAttributes = observer(({\n  camera,\n  cameraIndex\n}) => {\n  var _attributes$camera;\n  const ref = useRef(null);\n  const fieldsMap = useMemo(() => parseFields(store.frame.frameConfig), [store.frame.frameConfig]);\n  const {\n    currentCamera,\n    currentFrame,\n    isSingleCamera,\n    attributes,\n    frameConfig\n  } = store.frame;\n  const {\n    attributes: frameAttributes = {}\n  } = ((_attributes$camera = attributes[camera]) === null || _attributes$camera === void 0 ? void 0 : _attributes$camera[currentFrame]) || {};\n  const fieldKeys = Object.keys(fieldsMap);\n  const attrKeys = Object.keys(frameAttributes);\n  const legacyKeys = attrKeys.filter(key => !fieldKeys.includes(key));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: cx('frame-attributes', {\n      selected: !isSingleCamera && currentCamera === camera\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, !isSingleCamera && frameConfig && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, `C${cameraIndex + 1}-${camera}`, !store.readonly && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse-panel-icon\",\n    onClick: e => {\n      e.stopPropagation();\n      store.config.setFrameAttributesModalVisible(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Pencil, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 15\n    }\n  }))), [...fieldKeys, ...legacyKeys].map(key => attrKeys.includes(key) && /*#__PURE__*/React.createElement(AttributeValueItem, {\n    key: key,\n    fieldName: key,\n    fieldsMap: fieldsMap,\n    values: frameAttributes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  })));\n});\nexport default FrameAttributes;","map":{"version":3,"names":["React","useMemo","useRef","observer","cx","parseFields","Pencil","AttributeValueItem","store","FrameAttributes","camera","cameraIndex","_attributes$camera","ref","fieldsMap","frame","frameConfig","currentCamera","currentFrame","isSingleCamera","attributes","frameAttributes","fieldKeys","Object","keys","attrKeys","legacyKeys","filter","key","includes","createElement","className","selected","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","readonly","onClick","e","stopPropagation","config","setFrameAttributesModalVisible","map","fieldName","values"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/FrameAttributes.tsx"],"sourcesContent":["import React, { useMemo, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { parseFields } from '../../utils';\nimport { Pencil } from '../../../common/icons';\nimport AttributeValueItem from './AttributeValueItem';\nimport store from '../../store/RootStore';\nimport './FrameAttributes.scss';\n\nconst FrameAttributes = observer((\n  { camera, cameraIndex }:\n  {\n    camera: string;\n    cameraIndex: number;\n  }\n) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const fieldsMap = useMemo(() => parseFields(store.frame.frameConfig), [store.frame.frameConfig]);\n  const { currentCamera, currentFrame, isSingleCamera, attributes, frameConfig } = store.frame;\n  const { attributes: frameAttributes = {} } = attributes[camera]?.[currentFrame] || {};\n  const fieldKeys = Object.keys(fieldsMap);\n\n  const attrKeys = Object.keys(frameAttributes);\n  const legacyKeys = attrKeys.filter((key) => !fieldKeys.includes(key));\n\n  return (\n    <div\n      ref={ref}\n      className={cx('frame-attributes', {\n        selected: !isSingleCamera && currentCamera === camera,\n      })}\n    >\n      {!isSingleCamera && frameConfig && (\n        <div className=\"title\">\n          {`C${cameraIndex + 1}-${camera}`}\n          {!store.readonly && (\n            <div\n              className=\"collapse-panel-icon\"\n              onClick={(e) => {\n                e.stopPropagation();\n                store.config.setFrameAttributesModalVisible(true);\n              }}\n            >\n              <Pencil />\n            </div>\n          )}\n        </div>\n      )}\n      {\n        [...fieldKeys, ...legacyKeys].map((key) => attrKeys.includes(key) && (\n          <AttributeValueItem\n            key={key}\n            fieldName={key}\n            fieldsMap={fieldsMap}\n            values={frameAttributes}\n          />\n        ))\n      }\n    </div>\n  );\n});\n\nexport default FrameAttributes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}