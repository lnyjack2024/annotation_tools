{"ast":null,"code":"import React,{forwardRef,useImperativeHandle,useState,useMemo,useEffect,useReducer,useContext}from'react';import{observer}from'mobx-react';import{Checkbox,Tooltip}from'antd';import{ArrowRightOutlined}from'@ant-design/icons';import cx from'classnames';import{Check2Icon,CheckIcon,DeleteReview}from'src/components/common/icons';import localMessage from'../../locale';import store from'../../store/RootStore';import{ReviewItemResult,ReviewMode}from'../../types';import{generateConfigKeyByKeys,getConfigByKeys}from'../../utils/helper';import{isConnection}from'../../store/tag_mode';import{isReviewDone,setReviewState}from'../../store/reworkReviewState';import{TextToolContext}from'../../TextAnnotationApp';const ValidationPanelReviews=observer(forwardRef((_ref,ref)=>{let{showConfirmModal}=_ref;const[checkedKeys,setCheckedKeys]=useState([]);const[checkedAll,setCheckedAll]=useState(false);const[indeterminate,setIndeterminate]=useState(true);const[,forceUpdate]=useReducer(x=>x+1,0,()=>0);const{moveFocusToTag,deleteReviewItemById,deleteReviewItemsById}=useContext(TextToolContext);const reviews=store.review.allReviews.filter(r=>r.result!==ReviewItemResult.PASS);const noRelatedTag=localMessage('VALIDATION_REVIEW_NO_TAG');const noRelatedText=localMessage('VALIDATION_REVIEW_NO_TEXT');useImperativeHandle(ref,()=>({deleteItemsBySelected}));const allReviewIds=useMemo(()=>reviews.map(reviewItem=>reviewItem.id)||[],[reviews]);useEffect(()=>{setIndeterminate(!!checkedKeys.length&&checkedKeys.length<allReviewIds.length);setCheckedAll(checkedKeys.length===allReviewIds.length);},[checkedKeys,allReviewIds]);// delete item directly\nconst onDeleteReviewItem=reviewId=>{deleteReviewItemById(reviewId);setCheckedKeys([]);};// delete selected items\nconst deleteItemsBySelected=()=>{deleteReviewItemsById(checkedKeys);setCheckedKeys([]);};const deleteAllReviewItemsHandler=()=>{if(Object.keys(checkedKeys).length===0){return;}showConfirmModal(Object.keys(checkedKeys).length);};const onSelectItem=(checked,reviewItem)=>{let newCheckedRes=[...checkedKeys];if(checked){newCheckedRes.push(reviewItem.id);}else{newCheckedRes=newCheckedRes.filter(id=>id!==reviewItem.id);}setCheckedKeys(newCheckedRes);};const onCheckAllChange=checked=>{setCheckedAll(checked);if(!checked){setCheckedKeys([]);return;}setCheckedKeys(allReviewIds);};const checkReviewState=(id,state)=>{setReviewState(id,state);forceUpdate();};const descriptionIcon=review=>{if(store.reviewable&&store.config.reviewMode===ReviewMode.LABELING){const reviewState=isReviewDone(review.id);if(reviewState){return/*#__PURE__*/React.createElement(Tooltip,{placement:\"left\",title:localMessage('VALIDATION_REVIEW_UN_RESOLVE')},/*#__PURE__*/React.createElement(\"span\",{className:\"action check\"},/*#__PURE__*/React.createElement(Check2Icon,{onClick:()=>checkReviewState(review.id,!reviewState)})));}return/*#__PURE__*/React.createElement(Tooltip,{placement:\"left\",title:localMessage('VALIDATION_REVIEW_RESOLVE')},/*#__PURE__*/React.createElement(\"span\",{className:\"action check\"},/*#__PURE__*/React.createElement(CheckIcon,{onClick:()=>checkReviewState(review.id,!reviewState)})));}return null;};return/*#__PURE__*/React.createElement(React.Fragment,null,store.review.passedCount>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"tips\"},localMessage('VALIDATION_REVIEW_PASSED_AMOUNT',{values:{count:store.review.passedCount}})),store.config.reviewMode===ReviewMode.REVIEW&&store.reviewable&&/*#__PURE__*/React.createElement(\"div\",{className:\"selected-operation-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"selected-all\"},/*#__PURE__*/React.createElement(Checkbox,{onChange:e=>onCheckAllChange(e.target.checked),checked:checkedAll,indeterminate:indeterminate},localMessage('COMMON_SELECT_ALL'))),/*#__PURE__*/React.createElement(\"div\",{className:\"selected-operation-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"selected-info\"},localMessage('VALIDATION_REVIEW_SELECT_AMOUNT',{values:{checkedResLength:Object.keys(checkedKeys).length}})),/*#__PURE__*/React.createElement(\"span\",{className:\"unselect-all\",onClick:()=>setCheckedKeys([])},localMessage('COMMON_CLEAR')),/*#__PURE__*/React.createElement(\"span\",{className:cx('delete-all',{isDisable:Object.keys(checkedKeys).length===0}),onClick:deleteAllReviewItemsHandler},localMessage('delete')))),reviews.map(r=>{var _r$type;const ontologyItemInfo=store.ontology.getItemById(r.id);let textStr=\"\\u3010\".concat(noRelatedText,\"\\u3011\");let displayColor;let tagName=noRelatedTag;if(ontologyItemInfo){const{keys,type,value}=ontologyItemInfo;tagName=r.result===ReviewItemResult.MISSING?value:generateConfigKeyByKeys(keys);const config=getConfigByKeys(store.ontology.ontologyConfigMap,keys);if(config){displayColor=config.color;}if(isConnection(type)){let fromText=noRelatedText;let toText=noRelatedText;const{fromId,toId}=ontologyItemInfo;const fromOntologyItemInfo=store.ontology.getItemById(fromId);const toOntologyItemInfo=store.ontology.getItemById(toId);if(fromOntologyItemInfo){fromText=fromOntologyItemInfo.text||noRelatedText;}if(toOntologyItemInfo){toText=toOntologyItemInfo.text||noRelatedText;}textStr=\"\\u3010\".concat(fromText,\"\\u3011 => \\u3010\").concat(toText,\"\\u3011\");}else{textStr=\"\\u3010\".concat(ontologyItemInfo.text||noRelatedText,\"\\u3011\");}}return/*#__PURE__*/React.createElement(\"div\",{key:r.id,className:\"warning-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"warning-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"warning-title-left\"},store.config.reviewMode===ReviewMode.REVIEW&&store.reviewable&&/*#__PURE__*/React.createElement(Checkbox,{checked:checkedKeys.includes(r.id),onChange:e=>onSelectItem(e.target.checked,r)}),/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cat-color-dot\",style:{backgroundColor:displayColor||'#DC4624'}}),tagName),r.result===ReviewItemResult.REJECT&&/*#__PURE__*/React.createElement(\"span\",{className:\"result-tag\"},localMessage('VALIDATION_REVIEW_REJECT_TAG')),r.result===ReviewItemResult.MISSING&&/*#__PURE__*/React.createElement(\"span\",{className:\"result-tag\"},localMessage('VALIDATION_REVIEW_MISSING_TAG'))),/*#__PURE__*/React.createElement(\"div\",{className:\"warning-title-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"action\",onClick:async()=>{// focus and jump\nif(!ontologyItemInfo){return;}moveFocusToTag(ontologyItemInfo);}},/*#__PURE__*/React.createElement(ArrowRightOutlined,null)),descriptionIcon(r))),/*#__PURE__*/React.createElement(\"div\",{className:\"warning-msg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"warning-msg-detail\"},store.config.reviewMode===ReviewMode.REVIEW&&/*#__PURE__*/React.createElement(\"span\",{className:\"action\",onClick:()=>{onDeleteReviewItem(r.id);}},/*#__PURE__*/React.createElement(DeleteReview,null)),textStr?\"\".concat(textStr):''),/*#__PURE__*/React.createElement(\"div\",null,(_r$type=r.type)===null||_r$type===void 0?void 0:_r$type.join(';')),/*#__PURE__*/React.createElement(\"div\",{className:\"img-container\"// eslint-disable-next-line react/no-danger\n,dangerouslySetInnerHTML:{__html:r.comment||''}})));}));}));export default ValidationPanelReviews;","map":{"version":3,"names":["React","forwardRef","useImperativeHandle","useState","useMemo","useEffect","useReducer","useContext","observer","Checkbox","Tooltip","ArrowRightOutlined","cx","Check2Icon","CheckIcon","DeleteReview","localMessage","store","ReviewItemResult","ReviewMode","generateConfigKeyByKeys","getConfigByKeys","isConnection","isReviewDone","setReviewState","TextToolContext","ValidationPanelReviews","_ref","ref","showConfirmModal","checkedKeys","setCheckedKeys","checkedAll","setCheckedAll","indeterminate","setIndeterminate","forceUpdate","x","moveFocusToTag","deleteReviewItemById","deleteReviewItemsById","reviews","review","allReviews","filter","r","result","PASS","noRelatedTag","noRelatedText","deleteItemsBySelected","allReviewIds","map","reviewItem","id","length","onDeleteReviewItem","reviewId","deleteAllReviewItemsHandler","Object","keys","onSelectItem","checked","newCheckedRes","push","onCheckAllChange","checkReviewState","state","descriptionIcon","reviewable","config","reviewMode","LABELING","reviewState","createElement","placement","title","className","onClick","Fragment","passedCount","values","count","REVIEW","onChange","e","target","checkedResLength","isDisable","_r$type","ontologyItemInfo","ontology","getItemById","textStr","concat","displayColor","tagName","type","value","MISSING","ontologyConfigMap","color","fromText","toText","fromId","toId","fromOntologyItemInfo","toOntologyItemInfo","text","key","includes","style","backgroundColor","REJECT","join","dangerouslySetInnerHTML","__html","comment"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/editable-text/components/validationPanel/validationPanelReviews.tsx"],"sourcesContent":["import React, { forwardRef, useImperativeHandle, useState, useMemo, useEffect, useReducer, useContext } from 'react';\nimport { observer } from 'mobx-react';\nimport { Checkbox, Tooltip } from 'antd';\nimport { ArrowRightOutlined } from '@ant-design/icons';\nimport { CheckboxChangeEvent } from 'antd/lib/checkbox';\nimport cx from 'classnames';\nimport { Check2Icon, CheckIcon, DeleteReview } from 'src/components/common/icons';\nimport localMessage from '../../locale';\n\nimport store from '../../store/RootStore';\nimport { ConnectionItem, InsertionItem, LabelItem, MissingItem, ReviewItemResult, ReviewMode, ReviewResultItem, ReviewResultType } from '../../types';\nimport { generateConfigKeyByKeys, getConfigByKeys } from '../../utils/helper';\nimport { isConnection } from '../../store/tag_mode';\nimport { isReviewDone, setReviewState } from '../../store/reworkReviewState';\nimport { TextToolContext } from '../../TextAnnotationApp';\n\ninterface ValidationPanelReviewsProps {\n  showConfirmModal: (arg: number) => void\n}\n\nexport interface ValidationPanelReviewsHandle {\n  deleteItemsBySelected: () => void;\n}\n\nconst ValidationPanelReviews = observer(forwardRef(({ showConfirmModal }: ValidationPanelReviewsProps, ref) => {\n  const [checkedKeys, setCheckedKeys] = useState<string[]>([]);\n  const [checkedAll, setCheckedAll] = useState<boolean>(false);\n  const [indeterminate, setIndeterminate] = useState(true);\n  const [, forceUpdate] = useReducer(\n    (x) => x + 1,\n    0,\n    () => 0,\n  );\n  const { moveFocusToTag, deleteReviewItemById, deleteReviewItemsById } = useContext(TextToolContext);\n  const reviews = store.review.allReviews.filter((r) => r.result !== ReviewItemResult.PASS);\n  const noRelatedTag = localMessage('VALIDATION_REVIEW_NO_TAG');\n  const noRelatedText = localMessage('VALIDATION_REVIEW_NO_TEXT');\n  useImperativeHandle(ref, () => ({\n    deleteItemsBySelected\n  }));\n\n  const allReviewIds = useMemo(() => reviews.map((reviewItem: ReviewResultItem) => reviewItem.id) || [], [reviews]);\n\n  useEffect(() => {\n    setIndeterminate(!!checkedKeys.length && checkedKeys.length < allReviewIds.length);\n    setCheckedAll(checkedKeys.length === allReviewIds.length);\n  }, [checkedKeys, allReviewIds]);\n\n  // delete item directly\n  const onDeleteReviewItem = (reviewId: string) => {\n    deleteReviewItemById(reviewId);\n    setCheckedKeys([]);\n  };\n\n  // delete selected items\n  const deleteItemsBySelected = () => {\n    deleteReviewItemsById(checkedKeys);\n    setCheckedKeys([]);\n  };\n\n  const deleteAllReviewItemsHandler = () => {\n    if (Object.keys(checkedKeys).length === 0) {\n      return;\n    }\n    showConfirmModal(Object.keys(checkedKeys).length);\n  };\n\n  const onSelectItem = (checked: boolean, reviewItem: ReviewResultItem) => {\n    let newCheckedRes = [...checkedKeys];\n    if (checked) {\n      newCheckedRes.push(reviewItem.id);\n    } else {\n      newCheckedRes = newCheckedRes.filter(((id) => id !== reviewItem.id));\n    }\n    setCheckedKeys(newCheckedRes);\n  };\n\n  const onCheckAllChange = (checked: boolean) => {\n    setCheckedAll(checked);\n\n    if (!checked) {\n      setCheckedKeys([]);\n      return;\n    }\n    setCheckedKeys(allReviewIds);\n  };\n\n  const checkReviewState = (id: string, state: boolean) => {\n    setReviewState(id, state);\n    forceUpdate();\n  };\n\n  const descriptionIcon = (review: { id: any; comment?: string; result?: ReviewResultType; type?: string[]; }) => {\n    if (store.reviewable && store.config.reviewMode === ReviewMode.LABELING) {\n      const reviewState = isReviewDone(review.id);\n      if (reviewState) {\n        return (\n\n          <Tooltip placement=\"left\" title={localMessage('VALIDATION_REVIEW_UN_RESOLVE')}>\n            <span className=\"action check\">\n              <Check2Icon onClick={() => checkReviewState(review.id, !reviewState)} />\n            </span>\n          </Tooltip>\n        );\n      }\n      return (\n        <Tooltip placement=\"left\" title={localMessage('VALIDATION_REVIEW_RESOLVE')}>\n          <span className=\"action check\">\n            <CheckIcon onClick={() => checkReviewState(review.id, !reviewState)} />\n          </span>\n        </Tooltip>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <>\n      {store.review.passedCount > 0 && (\n        <div className=\"tips\">\n          {localMessage('VALIDATION_REVIEW_PASSED_AMOUNT', { values: { count: store.review.passedCount } })}\n        </div>\n      )}\n      {store.config.reviewMode === ReviewMode.REVIEW && store.reviewable && (\n        <div className=\"selected-operation-container\">\n          <div className=\"selected-all\">\n            <Checkbox\n              onChange={(e: CheckboxChangeEvent) => onCheckAllChange(e.target.checked)}\n              checked={checkedAll}\n              indeterminate={indeterminate}\n            >\n              {localMessage('COMMON_SELECT_ALL')}\n            </Checkbox>\n          </div>\n          <div className=\"selected-operation-right\">\n            <span className=\"selected-info\">\n              {localMessage('VALIDATION_REVIEW_SELECT_AMOUNT', { values: { checkedResLength: Object.keys(checkedKeys).length } })}\n            </span>\n            <span\n              className=\"unselect-all\"\n              onClick={() => setCheckedKeys([])}\n            >\n              {localMessage('COMMON_CLEAR')}\n            </span>\n            <span\n              className={cx('delete-all', { isDisable: Object.keys(checkedKeys).length === 0 })}\n              onClick={deleteAllReviewItemsHandler}\n            >\n              {localMessage('delete')}\n            </span>\n          </div>\n        </div>\n      )}\n      {reviews.map((r) => {\n        const ontologyItemInfo = store.ontology.getItemById(r.id);\n        let textStr = `【${noRelatedText}】`;\n        let displayColor;\n        let tagName = noRelatedTag;\n        if (ontologyItemInfo) {\n          const { keys, type, value } = ontologyItemInfo;\n          tagName = r.result === ReviewItemResult.MISSING ? value : generateConfigKeyByKeys(keys);\n          const config = getConfigByKeys(store.ontology.ontologyConfigMap, keys);\n          if (config) {\n            displayColor = config.color;\n          }\n          if (isConnection(type)) {\n            let fromText = noRelatedText;\n            let toText = noRelatedText;\n\n            const { fromId, toId } = ontologyItemInfo as ConnectionItem;\n            const fromOntologyItemInfo = store.ontology.getItemById(fromId);\n            const toOntologyItemInfo = store.ontology.getItemById(toId);\n            if (fromOntologyItemInfo) {\n              fromText = (fromOntologyItemInfo as (MissingItem | LabelItem | InsertionItem)).text || noRelatedText;\n            }\n            if (toOntologyItemInfo) {\n              toText = (toOntologyItemInfo as (MissingItem | LabelItem | InsertionItem)).text || noRelatedText;\n            }\n            textStr = `【${fromText}】 => 【${toText}】`;\n          } else {\n            textStr = `【${(ontologyItemInfo as (MissingItem | LabelItem | InsertionItem)).text || noRelatedText}】`;\n          }\n        }\n        return (\n          <div\n            key={r.id}\n            className=\"warning-item\"\n          >\n            <div className=\"warning-title\">\n              <div className=\"warning-title-left\">\n                {store.config.reviewMode === ReviewMode.REVIEW && store.reviewable && (\n                  <Checkbox\n                    checked={checkedKeys.includes(r.id)}\n                    onChange={(e: CheckboxChangeEvent) => onSelectItem(e.target.checked, r)}\n                  />\n                )}\n                <div className=\"name\">\n                  <div\n                    className=\"cat-color-dot\"\n                    style={{ backgroundColor: displayColor || '#DC4624' }}\n                  />\n                  {tagName}\n                </div>\n                {r.result === ReviewItemResult.REJECT && <span className=\"result-tag\">{localMessage('VALIDATION_REVIEW_REJECT_TAG')}</span>}\n                {r.result === ReviewItemResult.MISSING && <span className=\"result-tag\">{localMessage('VALIDATION_REVIEW_MISSING_TAG')}</span>}\n              </div>\n              <div className=\"warning-title-right\">\n                <span\n                  className=\"action\"\n                  onClick={async () => {\n                    // focus and jump\n                    if (!ontologyItemInfo) {\n                      return;\n                    }\n                    moveFocusToTag(ontologyItemInfo);\n                  }}\n                >\n                  <ArrowRightOutlined />\n                </span>\n\n                {descriptionIcon(r)}\n              </div>\n            </div>\n            <div className=\"warning-msg\">\n              <div className=\"warning-msg-detail\">\n\n                {\n                  store.config.reviewMode === ReviewMode.REVIEW && (\n                    (\n                      <span\n                        className=\"action\"\n                        onClick={() => {\n                          onDeleteReviewItem(r.id);\n                        }}\n                      >\n                        <DeleteReview />\n                      </span>\n                    )\n                  )\n                }\n                {textStr ? `${textStr}` : ''}\n              </div>\n              <div>{r.type?.join(';')}</div>\n              <div\n                className=\"img-container\"\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{ __html: r.comment || '' }}\n              />\n            </div>\n          </div>\n        );\n      })}\n    </>\n  );\n}));\nexport default ValidationPanelReviews;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}