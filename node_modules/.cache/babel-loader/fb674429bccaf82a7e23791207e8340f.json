{"ast":null,"code":"import React from'react';import{observer}from'mobx-react';import{toJS}from'mobx';import{Button}from'antd';import{PlusOutlined}from'@ant-design/icons';import Instruction from'../../common/llm/instruction/Instruction';import ChatItem,{ChatItemType}from'../../common/llm/chat/ChatItem';import store from'../store';import i18n from'../locales';const Content=observer(()=>/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Instruction,{value:toJS(store.instruction)}),store.dialogue.map(dialogueItem=>{var _store$selectedDialog;const selected=dialogueItem.id===((_store$selectedDialog=store.selectedDialogueItem)===null||_store$selectedDialog===void 0?void 0:_store$selectedDialog.id);const valueEditable=!store.readonly&&(!dialogueItem.original||store.editable);return/*#__PURE__*/React.createElement(ChatItem,Object.assign({key:dialogueItem.id,type:dialogueItem.type,label:dialogueItem.type===ChatItemType.A?'B':'A',value:toJS(dialogueItem.value),onValueChange:value=>store.updateDialogueItem(dialogueItem,value),originalValue:toJS(dialogueItem.originalValue),error:selected&&store.hasError,selected:selected,onSelect:()=>store.selectDialogueItem(dialogueItem),valueEditable:valueEditable,valueEditing:selected&&store.isEditing,onValueEdit:()=>store.editDialogueItem(dialogueItem)},dialogueItem.type===ChatItemType.A&&{rankingType:store.rankingType,rankingOptions:toJS(store.rankingOptions),rankEditable:!store.readonly&&store.ranking,rankEditing:selected&&store.isRanking,onRankEdit:()=>store.rankDialogueItem(dialogueItem),rank:toJS(dialogueItem.rank),onRankChange:rank=>store.saveRank(dialogueItem,rank),attributesEditable:!store.readonly,itemAttributesConfig:store.itemAttributesConfig,attributesEditing:selected&&store.isItemAttributesEditing,attributes:toJS(dialogueItem.attributes),onItemAttributesEdit:()=>store.onItemAttributesEdit(dialogueItem),onItemAttributesChange:attributes=>store.saveItemAttributes(dialogueItem,attributes),onItemAttributesDelete:()=>store.deleteItemAttributes(dialogueItem)}));}),store.initialized&&!store.readonly&&store.addible&&/*#__PURE__*/React.createElement(ChatItem,{type:store.nextDialogueItemType,label:store.nextDialogueItemType===ChatItemType.A?'B':'A',error:store.isAdding&&store.hasError,selected:store.isAdding,valueEditing:store.isAdding,noValueContent:/*#__PURE__*/React.createElement(\"div\",{className:\"llm-chat-item-content-container\"},/*#__PURE__*/React.createElement(Button,{style:{marginTop:store.canAddDialogueItem?4:0},disabled:!store.canAddDialogueItem,icon:/*#__PURE__*/React.createElement(PlusOutlined,null),onClick:store.addDialogueItem},i18n.translate('CHAT_ITEM_ADD')),!store.canAddDialogueItem&&/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:12,color:'#99A0B2',marginTop:4,width:'100%',display:'flex',justifyContent:'inherit'}},i18n.translate('CHAT_ITEM_MEET_LIMIT')))})));export default Content;","map":{"version":3,"names":["React","observer","toJS","Button","PlusOutlined","Instruction","ChatItem","ChatItemType","store","i18n","Content","createElement","Fragment","value","instruction","dialogue","map","dialogueItem","_store$selectedDialog","selected","id","selectedDialogueItem","valueEditable","readonly","original","editable","Object","assign","key","type","label","A","onValueChange","updateDialogueItem","originalValue","error","hasError","onSelect","selectDialogueItem","valueEditing","isEditing","onValueEdit","editDialogueItem","rankingType","rankingOptions","rankEditable","ranking","rankEditing","isRanking","onRankEdit","rankDialogueItem","rank","onRankChange","saveRank","attributesEditable","itemAttributesConfig","attributesEditing","isItemAttributesEditing","attributes","onItemAttributesEdit","onItemAttributesChange","saveItemAttributes","onItemAttributesDelete","deleteItemAttributes","initialized","addible","nextDialogueItemType","isAdding","noValueContent","className","style","marginTop","canAddDialogueItem","disabled","icon","onClick","addDialogueItem","translate","fontSize","color","width","display","justifyContent"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/dialogue/components/Content.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { Button } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport Instruction from '../../common/llm/instruction/Instruction';\nimport ChatItem, { ChatItemType } from '../../common/llm/chat/ChatItem';\nimport store from '../store';\nimport i18n from '../locales';\n\nconst Content: React.FC = observer(() => (\n  <>\n    <Instruction value={toJS(store.instruction)} />\n    {store.dialogue.map((dialogueItem) => {\n      const selected = dialogueItem.id === store.selectedDialogueItem?.id;\n      const valueEditable = !store.readonly && (!dialogueItem.original || store.editable);\n      return (\n        <ChatItem\n          key={dialogueItem.id}\n          type={dialogueItem.type}\n          label={dialogueItem.type === ChatItemType.A ? 'B' : 'A'}\n          value={toJS(dialogueItem.value)}\n          onValueChange={(value) => store.updateDialogueItem(dialogueItem, value)}\n          originalValue={toJS(dialogueItem.originalValue)}\n          error={selected && store.hasError}\n          selected={selected}\n          onSelect={() => store.selectDialogueItem(dialogueItem)}\n          valueEditable={valueEditable}\n          valueEditing={selected && store.isEditing}\n          onValueEdit={() => store.editDialogueItem(dialogueItem)}\n          {...dialogueItem.type === ChatItemType.A && {\n            rankingType: store.rankingType,\n            rankingOptions: toJS(store.rankingOptions),\n            rankEditable: !store.readonly && store.ranking,\n            rankEditing: selected && store.isRanking,\n            onRankEdit: () => store.rankDialogueItem(dialogueItem),\n            rank: toJS(dialogueItem.rank),\n            onRankChange: (rank) => store.saveRank(dialogueItem, rank),\n            attributesEditable: !store.readonly,\n            itemAttributesConfig: store.itemAttributesConfig,\n            attributesEditing: selected && store.isItemAttributesEditing,\n            attributes: toJS(dialogueItem.attributes),\n            onItemAttributesEdit: () => store.onItemAttributesEdit(dialogueItem),\n            onItemAttributesChange: (attributes) => store.saveItemAttributes(dialogueItem, attributes),\n            onItemAttributesDelete: () => store.deleteItemAttributes(dialogueItem),\n          }}\n        />\n      );\n    })}\n    {store.initialized && !store.readonly && store.addible && (\n      <ChatItem\n        type={store.nextDialogueItemType}\n        label={store.nextDialogueItemType === ChatItemType.A ? 'B' : 'A'}\n        error={store.isAdding && store.hasError}\n        selected={store.isAdding}\n        valueEditing={store.isAdding}\n        noValueContent={(\n          <div className=\"llm-chat-item-content-container\">\n            <Button\n              style={{ marginTop: store.canAddDialogueItem ? 4 : 0 }}\n              disabled={!store.canAddDialogueItem}\n              icon={<PlusOutlined />}\n              onClick={store.addDialogueItem}\n            >\n              {i18n.translate('CHAT_ITEM_ADD')}\n            </Button>\n            {!store.canAddDialogueItem && (\n              <div\n                style={{\n                  fontSize: 12,\n                  color: '#99A0B2',\n                  marginTop: 4,\n                  width: '100%',\n                  display: 'flex',\n                  justifyContent: 'inherit',\n                }}\n              >\n                {i18n.translate('CHAT_ITEM_MEET_LIMIT')}\n              </div>\n            )}\n          </div>\n        )}\n      />\n    )}\n  </>\n));\n\nexport default Content;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}