{"ast":null,"code":"/* eslint-disable no-return-await */ /* eslint-disable react/forbid-prop-types */ /* eslint-disable class-methods-use-this */import React from'react';import{connect}from'react-redux';import{cloneDeep,isEqual}from'lodash';import{message,notification,Modal}from'antd';import LayoutWrapper from'../../common/layout/LayoutWrapper';import{initPayloadState,setCurrentSegment,setErrorMsg,setWordTimestamps,setVideoLoaded,setLoadReviewEnabled,setResults}from'../redux/action';import TaskNavigation from'./TaskNavigation/TaskNavigation';import AudioComp from'./AudioComp/AudioComp';import VideoComp from'./VideoComp/VideoComp';import SegmentNavigation from'./SegmentNavigation/SegmentNavigation';import SegmentAbstract from'./SegmentAbstract/SegmentAbstract';import SegmentDetail from'./SegmentDetail/SegmentDetail';import Validation from'./Validation/Validation';import GlobalAttributes from'./GlobalAttributes/GlobalAttributes';import'./VideoAnnotationApp.scss';import{isReviewEditable,isPreview,isAnnotationReadonly}from'../../../utils/tool-mode';import{translate,validateForm,ValidDurationMode,SegmentMode}from'../constants';import{fetchResultByUrl,getFileExtension,getWords}from'../../../utils';import{verifyCurrentForm,isInput}from'../redux/reducer/segmentController';import{initPayload,handleLawToWav}from'../redux/reducer/connectController';import AutoSaver from'../../common/AutoSaver';notification.config({top:60});class VideoAnnotationApp extends React.Component{constructor(props){super(props);this.loadAlaws=async audios=>{let loadAlaw=false;const videos=cloneDeep(audios);for(let i=0;i<videos.length;i+=1){const{url}=videos[i];const tail=getFileExtension(url);if(tail==='alaw'||tail==='ulaw'){loadAlaw=true;// eslint-disable-next-line no-await-in-loop\nvideos[i].url=await handleLawToWav(url,tail,i);videos[i].loaded=true;}}if(loadAlaw){this.props.setVideoLoaded({videos});}};this.onSave=async()=>{if(isPreview(this.props.toolMode)){return;}try{if(!isAnnotationReadonly(this.props.toolMode)){await this.saveResult();}if(isReviewEditable(this.props.toolMode)){await this.saveReviews();}notification.success({message:translate('saveSuccess')});}catch(e){notification.error({message:(e===null||e===void 0?void 0:e.message)||translate('saveFailure')});}};this.setCurrentSegment=data=>{const{index}=data;this.props.setCurrentSegment(data);if(this.props.results[0][index]){if(this.segmentAbstract.listRef){this.segmentAbstract.listRef.scrollToRow(index);}if(this.segmentNavigation.gridRef){this.segmentNavigation.gridRef.scrollToCell({rowIndex:Math.floor(index/this.segmentNavigation.gridRef.props.columnCount)});}}};this.segmentIsValid=(attributes,content,invalidOptions)=>{let isValid=true;if(this.props.validDuration===ValidDurationMode.translations){const index=content.findIndex(c=>c.text&&c.text.trim()!=='');if(index<0){isValid=false;}}else{const keyAttributeValue=attributes[this.props.keyAttribute.name];if(keyAttributeValue&&invalidOptions.includes(keyAttributeValue)){isValid=false;}}return isValid;};this.getTimeStatistics=annotationResults=>{const objects={summary:[],duration:0,// file duration\nvalidDuration:0,annotationDuration:0,// annotation duration\napprovedValidDuration:0,rejectedValidDuration:0,annotationWordCount:0,annotatedCount:0,validAnnotatedCount:0,incrementDuration:0};const reviews=this.extractReviews();const{videos,lastResults:reviewResults}=this.props;const lastAnnotationResults=cloneDeep(reviewResults);for(let m=0;m<videos.length;m+=1){const{duration,attributes}=videos[m];objects.duration+=duration*1000;const isValidField=this.props.globalConfig.fields.find(f=>f.name==='is_valid');if(isValidField){const invalid=(attributes===null||attributes===void 0?void 0:attributes.is_valid)==='invalid';if(objects.validAudios===undefined){objects.validAudios=[];objects.invalidAudios=[];}if(invalid){objects.invalidAudios.push(m);}else{objects.validAudios.push(m);}}}const invalidOptions=this.props.keyAttribute.options.filter(o=>o.isValid===false).map(o=>o.value);for(let i=0;i<videos.length;i+=1){const results=annotationResults[i];const review=reviews[i];const{duration}=videos[i];for(let j=0;j<results.length;j+=1){const{attributes,id,start,end,content}=results[j];if(start>=duration)break;const time=(end-start)*1000;const isValid=this.segmentIsValid(attributes,content,invalidOptions);// changed segment\nconst lastResults=lastAnnotationResults[i];const equal=isEqual(results[j],lastResults[id]);const incrementDuration=isValid&&!equal?time:0;delete lastResults[id];objects.incrementDuration+=incrementDuration;for(let index=0;index<content.length;index+=1){const{text}=content[index];const words=getWords(text,[]);objects.annotationWordCount+=words.length;}objects.annotatedCount+=1;objects.annotationDuration+=time;// valid time statistic\nif(isValid){var _review$id,_review$id2;objects.validDuration+=time;objects.validAnnotatedCount+=1;if((review===null||review===void 0?void 0:(_review$id=review[id])===null||_review$id===void 0?void 0:_review$id.qaChecked)===true){objects.approvedValidDuration+=time;}else if((review===null||review===void 0?void 0:(_review$id2=review[id])===null||_review$id2===void 0?void 0:_review$id2.qaChecked)===false){objects.rejectedValidDuration+=time;}}}}// removed segment\nfor(let m=0;m<lastAnnotationResults.length;m+=1){const keys=Object.keys(lastAnnotationResults[m]);for(let n=0;n<keys.length;n+=1){const{start,end,content=[],attributes={}}=lastAnnotationResults[m][keys[n]];const isValid=this.segmentIsValid(attributes,content,invalidOptions);if(isValid){objects.incrementDuration+=(end-start)*1000;}}}return{...objects,duration:Number(objects.duration.toFixed(2)),validDuration:Number(objects.validDuration.toFixed(2)),annotationDuration:Number(objects.annotationDuration.toFixed(2)),approvedValidDuration:Number(objects.approvedValidDuration.toFixed(2)),rejectedValidDuration:Number(objects.rejectedValidDuration.toFixed(2)),incrementDuration:Number(objects.incrementDuration.toFixed(2))};};this.clearAll=()=>{var _this$audioRef,_this$audioRef$curren;(_this$audioRef=this.audioRef)===null||_this$audioRef===void 0?void 0:(_this$audioRef$curren=_this$audioRef.current)===null||_this$audioRef$curren===void 0?void 0:_this$audioRef$curren.clearAll();};/**\n   * load latest data of advance job\n   */this.loadAdvanceJobData=e=>{var _e$result;const{results}=this.props;const reviews=this.extractReviews();const newResults=((_e$result=e.result)===null||_e$result===void 0?void 0:_e$result.results)||results;this.appendReviews(newResults,e.reviews||reviews);this.props.setResults({results:newResults});if(e.result){var _this$audioRef2,_this$audioRef2$curre;(_this$audioRef2=this.audioRef)===null||_this$audioRef2===void 0?void 0:(_this$audioRef2$curre=_this$audioRef2.current)===null||_this$audioRef2$curre===void 0?void 0:_this$audioRef2$curre.renderSegments();}};this.state={ready:false};window.disableLongAudioHotKeys=true;this.validator=React.createRef();this.audioRef=React.createRef();this.saverRef=React.createRef();}componentDidMount(){// initialize the annotations and reviews\nthis.props.jobProxy.loadResult().then(async result=>{// TODO: review the implementation of the init function\n// handle old and new result format, old - array, new object with results and auditId\nlet annotationResult=[];if(Array.isArray(result)){annotationResult=result;}else if(result&&result.results){annotationResult=result.results;if(result.auditId){this.props.jobProxy.setAuditId(result.auditId);}}const reviews=(await this.props.jobProxy.loadReviews())||{};this.appendReviews(annotationResult,reviews);try{if(!this.props.payload.audio){this.props.setErrorMsg({errorMsg:translate('AUDIO_SOURCE_ERROR')});return;}const payload=await initPayload(this.props.state,{...this.props.payload,review_from:annotationResult,result});this.props.initPayloadState(payload);await this.initWordTimestamps();this.setState({ready:true});this.props.renderComplete();window.disableLongAudioHotKeys=false;this.loadAlaws(payload.videos);this.props.setLoadReviewEnabled(this.props.jobProxy.loadReviewEnabled);}catch(e){console.log('Error',e);this.props.setErrorMsg({errorMsg:e===null||e===void 0?void 0:e.toString()});}}).catch(()=>{this.props.setErrorMsg({errorMsg:translate('ANNOTATION_DATA_LOAD_ERROR')});}).then(()=>{// check temp saved data\nif(this.props.jobProxy.savedDataLoadError){Modal.confirm({title:translate('TEMP_SAVED_LOAD_ERROR'),okText:translate('TEMP_SAVED_LOAD_ERROR_OK'),cancelText:translate('TEMP_SAVED_LOAD_ERROR_CANCEL'),autoFocusButton:null,onOk:()=>{var _this$saverRef$curren;// set temp saved to true to disable leave check\n(_this$saverRef$curren=this.saverRef.current)===null||_this$saverRef$curren===void 0?void 0:_this$saverRef$curren.setTempSaved(true);window.location.reload();},onCancel:()=>{// set to false to enable result save\nthis.props.jobProxy.savedDataLoadError=false;}});}});window.addEventListener('keydown',async e=>{if(window.disableLongAudioHotKeys)return;if(isInput())return;if(e.keyCode===83){// s\nif(e.altKey||e.metaKey)return;if(e.ctrlKey){e.preventDefault();this.onSave();}}});}componentWillUnmount(){}async initWordTimestamps(){const wordTimestamps=await Promise.all(this.props.wordTimestampUrls.map(async url=>await this.parseWords(url)));this.props.setWordTimestamps({wordTimestamps});}async parseWords(wordUrl){if(wordUrl){try{const ret=await fetchResultByUrl(wordUrl);ret.words.sort((a,b)=>a<b?-1:1);return ret;}catch(e){console.log(\"failed to load word from \".concat(wordUrl),e);}}return[];}appendReviews(result,reviews){if(!result)return;result.forEach((videoSegments,videoIdx)=>{const videoReviews=reviews[videoIdx]||{};videoSegments.forEach(segment=>{if(Object.keys(reviews).length>0){delete segment.qaChecked;delete segment.qaComment;delete segment.qaReason;delete segment.qaWorkerName;}const segmentReview=videoReviews[segment.id];if(segmentReview){segment.qaChecked=segmentReview.qaChecked;segment.qaComment=segmentReview.qaComment;segment.qaReason=segmentReview.qaReason;segment.qaWorkerName=segmentReview.qaWorkerName;}});});}isLineCountMatched(source,target){if(typeof source==='string'&&source.length>0){return target&&source.split(/\\r\\n|\\r|\\n/).length===target.split(/\\r\\n|\\r|\\n/).length;}return true;}async saveResult(){let isSubmit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this.state.ready){throw new Error(\"\".concat(translate('TOOL_NOT_INITIALIZED')));}const invalidOptions=this.props.keyAttribute.options.filter(o=>o.isValid===false).map(o=>o.value);const annotationResults=cloneDeep(this.props.results);const annotationVideos=cloneDeep(this.props.videos);let validAudios;let invalidAudios;for(let i=0;i<annotationVideos.length;i+=1){const video=annotationVideos[i];delete video.originAttributes;delete video.defaultAttributes;video.url=video.source||video.url;delete video.source;if(isSubmit&&video.duration===undefined){throw new Error(\"\".concat(translate('AUDIO_NOT_COMPLETE'),\" No: \").concat(i+1,\" \"));}}if(isSubmit&&this.props.globalConfig&&Array.isArray(this.props.globalConfig.fields)&&this.props.globalConfig.fields.length>0){annotationResults.forEach((_,index)=>{const{attributes}=annotationVideos[index];// global attributes check\nif(!attributes||!validateForm(this.props.globalConfig,attributes)){throw new Error(translate('GLOBAL_ATTR_MISS'));}// remove invalid audio results\nconst invalid=(attributes||{}).is_valid==='invalid';if(!this.props.invalidAnnotatable&&invalid){annotationResults[index]=[];}const isValidField=this.props.globalConfig.fields.find(f=>f.name==='is_valid');if(isValidField){if(validAudios===undefined){validAudios=[];invalidAudios=[];}if(invalid){invalidAudios.push(index);}else{validAudios.push(index);}}});}const isContinuous=this.props.segmentMode===SegmentMode.continuous;const minLen=Math.min(this.props.minSegmentLength,0);for(let currentVideo=0;currentVideo<annotationResults.length;currentVideo+=1){const video=annotationVideos[currentVideo];const audio=annotationResults[currentVideo].filter(s=>s.start<video.duration);const segmentsMap={};let prevEnd=0;for(let n=0;n<audio.length;n+=1){const{qaChecked,qaComment,qaReason,qaWorkerName,...oldsSegment}=audio[n];let segment=oldsSegment;if(segment.end-segment.start<=minLen){// eslint-disable-next-line no-continue\ncontinue;}if(this.props.lineConfig||this.props.segmentConfig){// required field check\nif(isSubmit){const varifyRes=verifyCurrentForm({...this.props,currentVideo,currentSegment:n});if(varifyRes.result===true){const{qaChecked:qaCh,qaComment:qaCo,qaReason:qaRe,qaWorkerName:qaWname,...newSegment}=varifyRes.data;segment={...segment,...newSegment};}else{throw new Error(varifyRes.error);}}// set segment valid\nif(this.props.validDuration===ValidDurationMode.translations){const index=segment.content.findIndex(c=>c.text&&c.text.trim()!=='');if(index>=0){segment.isValid=true;}else{segment.isValid=false;}}else{const keyAttributeValue=segment.attributes[this.props.keyAttribute.name];if(keyAttributeValue&&invalidOptions.includes(keyAttributeValue)){segment.isValid=false;}else{segment.isValid=true;}}}if(isContinuous&&segment.start!==prevEnd){segment.start=prevEnd;}if(isContinuous&&n===audio.length-1){segment.end=video.duration;}prevEnd=segment.end;if(Array.isArray(segment.content)){segment.content.forEach((l,i)=>{var _l$text;l.text=(_l$text=l.text)===null||_l$text===void 0?void 0:_l$text.trim();if(isSubmit){if(this.props.client==='hw-translation'){if(!this.isLineCountMatched(segment.attributes.source,l.text)){const err=\"\".concat(translate('DATA_ERROR_LINE_COUNT_MISMATCH'),\". Segment: \").concat(n+1);notification.error({message:err});throw new Error(err);}}}});}segmentsMap[segment.id]=segment;}annotationResults[currentVideo]=Object.values(segmentsMap);}// custom validation\nif(isSubmit&&this.props.submitCheck&&this.validator.current){const{hasCustomError,blockSubmitErrors}=await this.validator.current.handleValidate();if(hasCustomError){throw new Error(translate('VALIDATION_CUSTOM_ERROR'));}const errorVideos=[];blockSubmitErrors.forEach((errors,index)=>{if(errors.length>0){errorVideos.push(index);}});if(errorVideos.length>0){throw new Error(\"\".concat(translate('VALIDATION_SUBMIT_FAIL')).concat(errorVideos.map(i=>i+1).join(', ')));}}const statData=this.getTimeStatistics(annotationResults);const statistics=await this.props.jobProxy.saveResultStat(statData);return this.props.jobProxy.saveResult({results:annotationResults,audios:annotationVideos,keyAttribute:this.props.keyAttribute,auditId:this.props.jobProxy.auditFileId,statistics,templateConfig:this.props.jobProxy.templateConfig,...(validAudios&&{validAudios,invalidAudios})},isSubmit);}saveReviews(){let isSubmit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const reviews=this.extractReviews();return this.props.jobProxy.saveReviews(reviews,isSubmit);}extractReviews(){return this.props.results.map((audio,m)=>{const segmentReviews={};audio.forEach((segment,n)=>{segmentReviews[segment.id]={qaChecked:segment.qaChecked,qaComment:segment.qaComment,qaReason:segment.qaReason,qaWorkerName:segment.qaWorkerName,label:\"audio\".concat(m,\"-\").concat(n)};});return segmentReviews;});}render(){const{currentVideo,videos,errorMsg,audioErrorMsg}=this.props;if(errorMsg){return/*#__PURE__*/React.createElement(\"div\",{className:\"error-message\"},errorMsg);}return/*#__PURE__*/React.createElement(LayoutWrapper,{className:\"video-annotation-container\",loading:this.props.loading},videos.length&&this.state.ready?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AutoSaver,{ref:this.saverRef,data:this.props.results,save:()=>this.onSave(),onSaved:()=>message.success(translate('AUTO_SAVE_SUCCESS'))}),/*#__PURE__*/React.createElement(TaskNavigation,{setCurrentSegment:this.setCurrentSegment,clearAll:this.clearAll,onSave:this.onSave}),(audioErrorMsg===null||audioErrorMsg===void 0?void 0:audioErrorMsg[currentVideo])?/*#__PURE__*/React.createElement(\"div\",{className:\"error-container\"},audioErrorMsg===null||audioErrorMsg===void 0?void 0:audioErrorMsg[currentVideo]):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AudioComp,{ref:this.audioRef,setCurrentSegment:this.setCurrentSegment}),/*#__PURE__*/React.createElement(\"div\",{className:\"right-component-wrapper\"},/*#__PURE__*/React.createElement(VideoComp,null),/*#__PURE__*/React.createElement(SegmentNavigation,{setCurrentSegment:this.setCurrentSegment,ref:r=>{this.segmentNavigation=r;}})),/*#__PURE__*/React.createElement(\"div\",{className:\"left-component-wrapper\"},/*#__PURE__*/React.createElement(GlobalAttributes,null),/*#__PURE__*/React.createElement(SegmentAbstract,{setCurrentSegment:this.setCurrentSegment// eslint-disable-next-line no-return-assign\n,ref:r=>this.segmentAbstract=r})),/*#__PURE__*/React.createElement(SegmentDetail,{setCurrentSegment:this.setCurrentSegment}),/*#__PURE__*/React.createElement(Validation,{ref:this.validator,jobProxy:this.props.jobProxy,saveResult:()=>this.saveResult()}))):null);}}const mapStateToProps=state=>({videos:state.videos,currentVideo:state.currentVideo,results:state.results,lastResults:state.lastResults,segmentMode:state.segmentMode,toolMode:state.toolMode,errorMsg:state.errorMsg,audioErrorMsg:state.audioErrorMsg,currentSegment:state.currentSegment,segmentConfig:state.segmentConfig,lineConfig:state.lineConfig,keyAttribute:state.keyAttribute,client:state.client,wordTimestampUrls:state.wordTimestampUrls,submitCheck:state.submitCheck,invalidAnnotatable:state.invalidAnnotatable,globalConfig:state.globalConfig,loading:state.loading,validDuration:state.validDuration,minSegmentLength:state.minSegmentLength,state});const mapDispatchToProps={initPayloadState,setCurrentSegment,setErrorMsg,setWordTimestamps,setVideoLoaded,setLoadReviewEnabled,setResults};export default connect(mapStateToProps,mapDispatchToProps,null,{forwardRef:true})(VideoAnnotationApp);","map":{"version":3,"names":["React","connect","cloneDeep","isEqual","message","notification","Modal","LayoutWrapper","initPayloadState","setCurrentSegment","setErrorMsg","setWordTimestamps","setVideoLoaded","setLoadReviewEnabled","setResults","TaskNavigation","AudioComp","VideoComp","SegmentNavigation","SegmentAbstract","SegmentDetail","Validation","GlobalAttributes","isReviewEditable","isPreview","isAnnotationReadonly","translate","validateForm","ValidDurationMode","SegmentMode","fetchResultByUrl","getFileExtension","getWords","verifyCurrentForm","isInput","initPayload","handleLawToWav","AutoSaver","config","top","VideoAnnotationApp","Component","constructor","props","loadAlaws","audios","loadAlaw","videos","i","length","url","tail","loaded","onSave","toolMode","saveResult","saveReviews","success","e","error","data","index","results","segmentAbstract","listRef","scrollToRow","segmentNavigation","gridRef","scrollToCell","rowIndex","Math","floor","columnCount","segmentIsValid","attributes","content","invalidOptions","isValid","validDuration","translations","findIndex","c","text","trim","keyAttributeValue","keyAttribute","name","includes","getTimeStatistics","annotationResults","objects","summary","duration","annotationDuration","approvedValidDuration","rejectedValidDuration","annotationWordCount","annotatedCount","validAnnotatedCount","incrementDuration","reviews","extractReviews","lastResults","reviewResults","lastAnnotationResults","m","isValidField","globalConfig","fields","find","f","invalid","is_valid","validAudios","undefined","invalidAudios","push","options","filter","o","map","value","review","j","id","start","end","time","equal","words","_review$id","_review$id2","qaChecked","keys","Object","n","Number","toFixed","clearAll","_this$audioRef","_this$audioRef$curren","audioRef","current","loadAdvanceJobData","_e$result","newResults","result","appendReviews","_this$audioRef2","_this$audioRef2$curre","renderSegments","state","ready","window","disableLongAudioHotKeys","validator","createRef","saverRef","componentDidMount","jobProxy","loadResult","then","annotationResult","Array","isArray","auditId","setAuditId","loadReviews","payload","audio","errorMsg","review_from","initWordTimestamps","setState","renderComplete","loadReviewEnabled","console","log","toString","catch","savedDataLoadError","confirm","title","okText","cancelText","autoFocusButton","onOk","_this$saverRef$curren","setTempSaved","location","reload","onCancel","addEventListener","keyCode","altKey","metaKey","ctrlKey","preventDefault","componentWillUnmount","wordTimestamps","Promise","all","wordTimestampUrls","parseWords","wordUrl","ret","sort","a","b","concat","forEach","videoSegments","videoIdx","videoReviews","segment","qaComment","qaReason","qaWorkerName","segmentReview","isLineCountMatched","source","target","split","isSubmit","arguments","Error","annotationVideos","video","originAttributes","defaultAttributes","_","invalidAnnotatable","isContinuous","segmentMode","continuous","minLen","min","minSegmentLength","currentVideo","s","segmentsMap","prevEnd","oldsSegment","lineConfig","segmentConfig","varifyRes","currentSegment","qaCh","qaCo","qaRe","qaWname","newSegment","l","_l$text","client","err","values","submitCheck","hasCustomError","blockSubmitErrors","handleValidate","errorVideos","errors","join","statData","statistics","saveResultStat","auditFileId","templateConfig","segmentReviews","label","render","audioErrorMsg","createElement","className","loading","Fragment","ref","save","onSaved","r","mapStateToProps","mapDispatchToProps","forwardRef"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/VideoAnnotationApp.jsx"],"sourcesContent":["/* eslint-disable no-return-await */\n/* eslint-disable react/forbid-prop-types */\n/* eslint-disable class-methods-use-this */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { cloneDeep, isEqual } from 'lodash';\nimport { message, notification, Modal } from 'antd';\nimport LayoutWrapper from '../../common/layout/LayoutWrapper';\nimport { initPayloadState, setCurrentSegment, setErrorMsg, setWordTimestamps, setVideoLoaded, setLoadReviewEnabled, setResults } from '../redux/action';\nimport TaskNavigation from './TaskNavigation/TaskNavigation';\nimport AudioComp from './AudioComp/AudioComp';\nimport VideoComp from './VideoComp/VideoComp';\nimport SegmentNavigation from './SegmentNavigation/SegmentNavigation';\nimport SegmentAbstract from './SegmentAbstract/SegmentAbstract';\nimport SegmentDetail from './SegmentDetail/SegmentDetail';\nimport Validation from './Validation/Validation';\nimport GlobalAttributes from './GlobalAttributes/GlobalAttributes';\nimport './VideoAnnotationApp.scss';\nimport { isReviewEditable, isPreview, isAnnotationReadonly } from '../../../utils/tool-mode';\nimport { translate, validateForm, ValidDurationMode, SegmentMode } from '../constants';\nimport { fetchResultByUrl, getFileExtension, getWords } from '../../../utils';\nimport { verifyCurrentForm, isInput } from '../redux/reducer/segmentController';\nimport { initPayload, handleLawToWav } from '../redux/reducer/connectController';\nimport AutoSaver from '../../common/AutoSaver';\n\nnotification.config({ top: 60 });\n\nclass VideoAnnotationApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ready: false,\n    };\n    window.disableLongAudioHotKeys = true;\n\n    this.validator = React.createRef();\n    this.audioRef = React.createRef();\n    this.saverRef = React.createRef();\n  }\n\n  componentDidMount() {\n    // initialize the annotations and reviews\n    this.props.jobProxy.loadResult().then(async (result) => {\n      // TODO: review the implementation of the init function\n\n      // handle old and new result format, old - array, new object with results and auditId\n      let annotationResult = [];\n      if (Array.isArray(result)) {\n        annotationResult = result;\n      } else if (result && result.results) {\n        annotationResult = result.results;\n        if (result.auditId) {\n          this.props.jobProxy.setAuditId(result.auditId);\n        }\n      }\n      const reviews = await this.props.jobProxy.loadReviews() || {};\n      this.appendReviews(annotationResult, reviews);\n      try {\n        if (!this.props.payload.audio) {\n          this.props.setErrorMsg({ errorMsg: translate('AUDIO_SOURCE_ERROR') });\n          return;\n        }\n        const payload = await initPayload(this.props.state, { ...this.props.payload, review_from: annotationResult, result });\n        this.props.initPayloadState(payload);\n        await this.initWordTimestamps();\n        this.setState({ ready: true });\n        this.props.renderComplete();\n        window.disableLongAudioHotKeys = false;\n        this.loadAlaws(payload.videos);\n        this.props.setLoadReviewEnabled(this.props.jobProxy.loadReviewEnabled);\n      } catch (e) {\n        console.log('Error', e);\n        this.props.setErrorMsg({ errorMsg: e?.toString() });\n      }\n    }).catch(() => {\n      this.props.setErrorMsg({ errorMsg: translate('ANNOTATION_DATA_LOAD_ERROR') });\n    }).then(() => {\n      // check temp saved data\n      if (this.props.jobProxy.savedDataLoadError) {\n        Modal.confirm({\n          title: translate('TEMP_SAVED_LOAD_ERROR'),\n          okText: translate('TEMP_SAVED_LOAD_ERROR_OK'),\n          cancelText: translate('TEMP_SAVED_LOAD_ERROR_CANCEL'),\n          autoFocusButton: null,\n          onOk: () => {\n            // set temp saved to true to disable leave check\n            this.saverRef.current?.setTempSaved(true);\n            window.location.reload();\n          },\n          onCancel: () => {\n            // set to false to enable result save\n            this.props.jobProxy.savedDataLoadError = false;\n          },\n        });\n      }\n    });\n\n    window.addEventListener('keydown', async (e) => {\n      if (window.disableLongAudioHotKeys) return;\n      if (isInput()) return;\n      if (e.keyCode === 83) { // s\n        if (e.altKey || e.metaKey) return;\n        if (e.ctrlKey) {\n          e.preventDefault();\n          this.onSave();\n        }\n      }\n    });\n  }\n\n  componentWillUnmount() {\n\n  }\n\n  loadAlaws = async (audios) => {\n    let loadAlaw = false;\n    const videos = cloneDeep(audios);\n    for (let i = 0; i < videos.length; i += 1) {\n      const { url } = videos[i];\n      const tail = getFileExtension(url);\n      if (tail === 'alaw' || tail === 'ulaw') {\n        loadAlaw = true;\n        // eslint-disable-next-line no-await-in-loop\n        videos[i].url = await handleLawToWav(url, tail, i);\n        videos[i].loaded = true;\n      }\n    }\n    if (loadAlaw) {\n      this.props.setVideoLoaded({ videos });\n    }\n  };\n\n  async initWordTimestamps() {\n    const wordTimestamps = await Promise.all(this.props.wordTimestampUrls.map(async (url) => await this.parseWords(url)));\n    this.props.setWordTimestamps({ wordTimestamps });\n  }\n\n  async parseWords(wordUrl) {\n    if (wordUrl) {\n      try {\n        const ret = await fetchResultByUrl(wordUrl);\n        ret.words.sort((a, b) => (a < b ? -1 : 1));\n        return ret;\n      } catch (e) {\n        console.log(`failed to load word from ${wordUrl}`, e);\n      }\n    }\n    return [];\n  };\n\n  onSave = async () => {\n    if (isPreview(this.props.toolMode)) {\n      return;\n    }\n    try {\n      if (!isAnnotationReadonly(this.props.toolMode)) {\n        await this.saveResult();\n      }\n      if (isReviewEditable(this.props.toolMode)) {\n        await this.saveReviews();\n      }\n      notification.success({ message: translate('saveSuccess') });\n    } catch (e) {\n      notification.error({ message: e?.message || translate('saveFailure') });\n    }\n  };\n\n  appendReviews(result, reviews) {\n    if (!result) return;\n    result.forEach((videoSegments, videoIdx) => {\n      const videoReviews = reviews[videoIdx] || {};\n      videoSegments.forEach((segment) => {\n        if (Object.keys(reviews).length > 0) {\n          delete segment.qaChecked;\n          delete segment.qaComment;\n          delete segment.qaReason;\n          delete segment.qaWorkerName;\n        }\n        const segmentReview = videoReviews[segment.id];\n        if (segmentReview) {\n          segment.qaChecked = segmentReview.qaChecked;\n          segment.qaComment = segmentReview.qaComment;\n          segment.qaReason = segmentReview.qaReason;\n          segment.qaWorkerName = segmentReview.qaWorkerName;\n        }\n      });\n    });\n  }\n\n  isLineCountMatched(source, target) {\n    if (typeof source === 'string' && source.length > 0) {\n      return target && source.split(/\\r\\n|\\r|\\n/).length === target.split(/\\r\\n|\\r|\\n/).length;\n    }\n    return true;\n  }\n\n  async saveResult(isSubmit = false) {\n    if (!this.state.ready) {\n      throw new Error(`${translate('TOOL_NOT_INITIALIZED')}`);\n    }\n    const invalidOptions = this.props.keyAttribute.options.filter((o) => o.isValid === false).map((o) => o.value);\n    const annotationResults = cloneDeep(this.props.results);\n    const annotationVideos = cloneDeep(this.props.videos);\n    let validAudios;\n    let invalidAudios;\n    for (let i = 0; i < annotationVideos.length; i += 1) {\n      const video = annotationVideos[i];\n      delete video.originAttributes;\n      delete video.defaultAttributes;\n      video.url = video.source || video.url;\n      delete video.source;\n      if (isSubmit && video.duration === undefined) {\n        throw new Error(`${translate('AUDIO_NOT_COMPLETE')} No: ${i + 1} `);\n      }\n    }\n    if (isSubmit && this.props.globalConfig && Array.isArray(this.props.globalConfig.fields) && this.props.globalConfig.fields.length > 0) {\n      annotationResults.forEach((_, index) => {\n        const { attributes } = annotationVideos[index];\n        // global attributes check\n        if (!attributes || !validateForm(this.props.globalConfig, attributes)) {\n          throw new Error(translate('GLOBAL_ATTR_MISS'));\n        }\n        // remove invalid audio results\n        const invalid = (attributes || {}).is_valid === 'invalid';\n        if (!this.props.invalidAnnotatable && invalid) {\n          annotationResults[index] = [];\n        }\n        const isValidField = this.props.globalConfig.fields.find((f) => f.name === 'is_valid');\n        if (isValidField) {\n          if (validAudios === undefined) {\n            validAudios = [];\n            invalidAudios = [];\n          }\n          if (invalid) {\n            invalidAudios.push(index);\n          } else {\n            validAudios.push(index);\n          }\n        }\n      });\n    }\n    const isContinuous = this.props.segmentMode === SegmentMode.continuous;\n    const minLen = Math.min(this.props.minSegmentLength, 0);\n    for (let currentVideo = 0; currentVideo < annotationResults.length; currentVideo += 1) {\n      const video = annotationVideos[currentVideo];\n      const audio = annotationResults[currentVideo].filter((s) => s.start < video.duration);\n      const segmentsMap = {};\n      let prevEnd = 0;\n      for (let n = 0; n < audio.length; n += 1) {\n        const { qaChecked, qaComment, qaReason, qaWorkerName, ...oldsSegment } = audio[n];\n        let segment = oldsSegment;\n        if (segment.end - segment.start <= minLen) {\n          // eslint-disable-next-line no-continue\n          continue;\n        }\n        if (this.props.lineConfig || this.props.segmentConfig) {\n          // required field check\n          if (isSubmit) {\n            const varifyRes = verifyCurrentForm({\n              ...this.props,\n              currentVideo,\n              currentSegment: n\n            });\n            if (varifyRes.result === true) {\n              const { qaChecked: qaCh, qaComment: qaCo, qaReason: qaRe, qaWorkerName: qaWname, ...newSegment } = varifyRes.data;\n              segment = {\n                ...segment,\n                ...newSegment,\n              };\n            } else {\n              throw new Error(varifyRes.error);\n            }\n          }\n\n          // set segment valid\n          if (this.props.validDuration === ValidDurationMode.translations) {\n            const index = segment.content.findIndex((c) => c.text && c.text.trim() !== '');\n            if (index >= 0) {\n              segment.isValid = true;\n            } else {\n              segment.isValid = false;\n            }\n          } else {\n            const keyAttributeValue = segment.attributes[this.props.keyAttribute.name];\n            if (keyAttributeValue && invalidOptions.includes(keyAttributeValue)) {\n              segment.isValid = false;\n            } else {\n              segment.isValid = true;\n            }\n          }\n        }\n        if (isContinuous && segment.start !== prevEnd) {\n          segment.start = prevEnd;\n        }\n        if (isContinuous && n === audio.length - 1) {\n          segment.end = video.duration;\n        }\n\n        prevEnd = segment.end;\n        if (Array.isArray(segment.content)) {\n          segment.content.forEach((l, i) => {\n            l.text = l.text?.trim();\n            if (isSubmit) {\n              if (this.props.client === 'hw-translation') {\n                if (!this.isLineCountMatched(segment.attributes.source, l.text)) {\n                  const err = `${translate('DATA_ERROR_LINE_COUNT_MISMATCH')}. Segment: ${n + 1}`;\n                  notification.error({ message: err });\n                  throw new Error(err);\n                }\n              }\n            }\n          });\n        }\n        segmentsMap[segment.id] = segment;\n      }\n      annotationResults[currentVideo] = Object.values(segmentsMap);\n    }\n\n    // custom validation\n    if (isSubmit && this.props.submitCheck && this.validator.current) {\n      const { hasCustomError, blockSubmitErrors } = await this.validator.current.handleValidate();\n      if (hasCustomError) {\n        throw new Error(translate('VALIDATION_CUSTOM_ERROR'));\n      }\n      const errorVideos = [];\n      blockSubmitErrors.forEach((errors, index) => {\n        if (errors.length > 0) {\n          errorVideos.push(index);\n        }\n      });\n      if (errorVideos.length > 0) {\n        throw new Error(`${translate('VALIDATION_SUBMIT_FAIL')}${errorVideos.map((i) => i + 1).join(', ')}`);\n      }\n    }\n\n    const statData = this.getTimeStatistics(annotationResults);\n    const statistics = await this.props.jobProxy.saveResultStat(statData);\n    return this.props.jobProxy.saveResult({\n      results: annotationResults,\n      audios: annotationVideos,\n      keyAttribute: this.props.keyAttribute,\n      auditId: this.props.jobProxy.auditFileId,\n      statistics,\n      templateConfig: this.props.jobProxy.templateConfig,\n      ...validAudios && {\n        validAudios,\n        invalidAudios,\n      },\n    }, isSubmit);\n  }\n\n  saveReviews(isSubmit = false) {\n    const reviews = this.extractReviews();\n    return this.props.jobProxy.saveReviews(reviews, isSubmit);\n  }\n\n  extractReviews() {\n    return this.props.results.map((audio, m) => {\n      const segmentReviews = {};\n      audio.forEach((segment, n) => {\n        segmentReviews[segment.id] = {\n          qaChecked: segment.qaChecked,\n          qaComment: segment.qaComment,\n          qaReason: segment.qaReason,\n          qaWorkerName: segment.qaWorkerName,\n          label: `audio${m}-${n}`\n        };\n      });\n      return segmentReviews;\n    });\n  }\n\n  setCurrentSegment = (data) => {\n    const { index } = data;\n    this.props.setCurrentSegment(data);\n    if (this.props.results[0][index]) {\n      if (this.segmentAbstract.listRef) {\n        this.segmentAbstract.listRef.scrollToRow(index);\n      }\n      if (this.segmentNavigation.gridRef) {\n        this.segmentNavigation.gridRef.scrollToCell({ rowIndex: Math.floor(index / this.segmentNavigation.gridRef.props.columnCount) });\n      }\n    }\n  };\n\n  segmentIsValid = (attributes, content, invalidOptions) => {\n    let isValid = true;\n    if (this.props.validDuration === ValidDurationMode.translations) {\n      const index = content.findIndex((c) => c.text && c.text.trim() !== '');\n      if (index < 0) {\n        isValid = false;\n      }\n    } else {\n      const keyAttributeValue = attributes[this.props.keyAttribute.name];\n      if (keyAttributeValue && invalidOptions.includes(keyAttributeValue)) {\n        isValid = false;\n      }\n    }\n    return isValid;\n  };\n\n  getTimeStatistics = (annotationResults) => {\n    const objects = {\n      summary: [],\n      duration: 0, // file duration\n      validDuration: 0,\n      annotationDuration: 0, // annotation duration\n      approvedValidDuration: 0,\n      rejectedValidDuration: 0,\n      annotationWordCount: 0,\n      annotatedCount: 0,\n      validAnnotatedCount: 0,\n      incrementDuration: 0,\n    };\n    const reviews = this.extractReviews();\n    const { videos, lastResults: reviewResults } = this.props;\n    const lastAnnotationResults = cloneDeep(reviewResults);\n\n    for (let m = 0; m < videos.length; m += 1) {\n      const { duration, attributes } = videos[m];\n      objects.duration += duration * 1000;\n      const isValidField = this.props.globalConfig.fields.find((f) => f.name === 'is_valid');\n      if (isValidField) {\n        const invalid = attributes?.is_valid === 'invalid';\n        if (objects.validAudios === undefined) {\n          objects.validAudios = [];\n          objects.invalidAudios = [];\n        }\n        if (invalid) {\n          objects.invalidAudios.push(m);\n        } else {\n          objects.validAudios.push(m);\n        }\n      }\n    }\n    const invalidOptions = this.props.keyAttribute.options.filter((o) => o.isValid === false).map((o) => o.value);\n    for (let i = 0; i < videos.length; i += 1) {\n      const results = annotationResults[i];\n      const review = reviews[i];\n      const { duration } = videos[i];\n      for (let j = 0; j < results.length; j += 1) {\n        const { attributes, id, start, end, content } = results[j];\n        if (start >= duration) break;\n        const time = (end - start) * 1000;\n        const isValid = this.segmentIsValid(attributes, content, invalidOptions);\n\n        // changed segment\n        const lastResults = lastAnnotationResults[i];\n        const equal = isEqual(results[j], lastResults[id]);\n        const incrementDuration = (isValid && !equal) ? time : 0;\n        delete lastResults[id];\n        objects.incrementDuration += incrementDuration;\n        for (let index = 0; index < content.length; index += 1) {\n          const { text } = content[index];\n          const words = getWords(text, []);\n          objects.annotationWordCount += words.length;\n        }\n        objects.annotatedCount += 1;\n        objects.annotationDuration += time;\n        // valid time statistic\n        if (isValid) {\n          objects.validDuration += time;\n          objects.validAnnotatedCount += 1;\n          if (review?.[id]?.qaChecked === true) {\n            objects.approvedValidDuration += time;\n          } else if (review?.[id]?.qaChecked === false) {\n            objects.rejectedValidDuration += time;\n          }\n        }\n      }\n    }\n\n    // removed segment\n    for (let m = 0; m < lastAnnotationResults.length; m += 1) {\n      const keys = Object.keys(lastAnnotationResults[m]);\n      for (let n = 0; n < keys.length; n += 1) {\n        const { start, end, content = [], attributes = {} } = lastAnnotationResults[m][keys[n]];\n        const isValid = this.segmentIsValid(attributes, content, invalidOptions);\n        if (isValid) {\n          objects.incrementDuration += (end - start) * 1000;\n        }\n      }\n    }\n    return {\n      ...objects,\n      duration: Number(objects.duration.toFixed(2)),\n      validDuration: Number(objects.validDuration.toFixed(2)),\n      annotationDuration: Number(objects.annotationDuration.toFixed(2)),\n      approvedValidDuration: Number(objects.approvedValidDuration.toFixed(2)),\n      rejectedValidDuration: Number(objects.rejectedValidDuration.toFixed(2)),\n      incrementDuration: Number(objects.incrementDuration.toFixed(2)),\n    };\n  };\n\n  clearAll = () => {\n    this.audioRef?.current?.clearAll();\n  };\n\n  /**\n   * load latest data of advance job\n   */\n  loadAdvanceJobData = (e) => {\n    const { results } = this.props;\n    const reviews = this.extractReviews();\n    const newResults = e.result?.results || results;\n    this.appendReviews(newResults, e.reviews || reviews);\n    this.props.setResults({ results: newResults });\n    if (e.result) {\n      this.audioRef?.current?.renderSegments();\n    }\n  };\n\n  render() {\n    const { currentVideo, videos, errorMsg, audioErrorMsg } = this.props;\n    if (errorMsg) {\n      return (\n        <div className=\"error-message\">{errorMsg}</div>\n      );\n    }\n\n    return (\n      <LayoutWrapper className=\"video-annotation-container\" loading={this.props.loading}>\n        {(videos.length && this.state.ready) ? (\n          <>\n            <AutoSaver\n              ref={this.saverRef}\n              data={this.props.results}\n              save={() => this.onSave()}\n              onSaved={() => message.success(translate('AUTO_SAVE_SUCCESS'))}\n            />\n            <TaskNavigation\n              setCurrentSegment={this.setCurrentSegment}\n              clearAll={this.clearAll}\n              onSave={this.onSave}\n            />\n            { audioErrorMsg?.[currentVideo] ? (\n              <div className=\"error-container\">\n                {audioErrorMsg?.[currentVideo]}\n              </div>\n            ) : (\n              <>\n                <AudioComp\n                  ref={this.audioRef}\n                  setCurrentSegment={this.setCurrentSegment}\n                />\n                <div className=\"right-component-wrapper\">\n                  <VideoComp />\n                  <SegmentNavigation\n                    setCurrentSegment={this.setCurrentSegment}\n                    ref={(r) => { this.segmentNavigation = r; }}\n                  />\n                </div>\n                <div className=\"left-component-wrapper\">\n                  <GlobalAttributes />\n                  <SegmentAbstract\n                    setCurrentSegment={this.setCurrentSegment}\n                    // eslint-disable-next-line no-return-assign\n                    ref={(r) => this.segmentAbstract = r}\n                  />\n                </div>\n                <SegmentDetail setCurrentSegment={this.setCurrentSegment} />\n                <Validation\n                  ref={this.validator}\n                  jobProxy={this.props.jobProxy}\n                  saveResult={() => this.saveResult()}\n                />\n              </>\n            )}\n          </>\n        ) : null}\n      </LayoutWrapper>\n    );\n  }\n}\n\nVideoAnnotationApp.propTypes = {\n  initPayloadState: PropTypes.func.isRequired,\n  renderComplete: PropTypes.func,\n  jobProxy: PropTypes.object,\n};\n\nconst mapStateToProps = (state) => ({\n  videos: state.videos,\n  currentVideo: state.currentVideo,\n  results: state.results,\n  lastResults: state.lastResults,\n  segmentMode: state.segmentMode,\n  toolMode: state.toolMode,\n  errorMsg: state.errorMsg,\n  audioErrorMsg: state.audioErrorMsg,\n  currentSegment: state.currentSegment,\n  segmentConfig: state.segmentConfig,\n  lineConfig: state.lineConfig,\n  keyAttribute: state.keyAttribute,\n  client: state.client,\n  wordTimestampUrls: state.wordTimestampUrls,\n  submitCheck: state.submitCheck,\n  invalidAnnotatable: state.invalidAnnotatable,\n  globalConfig: state.globalConfig,\n  loading: state.loading,\n  validDuration: state.validDuration,\n  minSegmentLength: state.minSegmentLength,\n  state,\n});\nconst mapDispatchToProps = {\n  initPayloadState,\n  setCurrentSegment,\n  setErrorMsg,\n  setWordTimestamps,\n  setVideoLoaded,\n  setLoadReviewEnabled,\n  setResults,\n};\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(VideoAnnotationApp);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}