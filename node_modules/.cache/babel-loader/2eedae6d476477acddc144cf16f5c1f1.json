{"ast":null,"code":"import React,{useRef}from'react';import{observer}from'mobx-react';import cx from'classnames';import AttributeValueItem from'./AttributeValueItem';import ShapeIcon from'../sidebar/ShapeIcon';import store from'../../store/RootStore';import i18n from'../../locales';import'./InstanceAttributes.scss';const InstanceItemAttributes=observer(_ref=>{let{instanceItem,fieldsMap}=_ref;// FIXME: use current camera cause multiple cameras not supported yet\nconst{currentCamera,currentFrame,isSingleCamera,cameraNames}=store.frame;const cameraData=instanceItem.cameras[currentCamera];const{frames={}}=cameraData||{};const frameData=frames[currentFrame];const{attributes}=frameData||{};const{shapeType}=frameData||frames[cameraData===null||cameraData===void 0?void 0:cameraData.getNearestKeyFrame(currentFrame)]||{};const isEmpty=!frameData;const fieldKeys=Object.keys(fieldsMap||{});// refs\nconst ref=useRef(null);const attrKeys=Object.keys(attributes||{});const legacyKeys=attrKeys.filter(key=>!fieldKeys.includes(key));return/*#__PURE__*/React.createElement(\"div\",{className:\"section\",ref:ref},/*#__PURE__*/React.createElement(\"div\",{className:cx('section-title',{empty:isEmpty})},/*#__PURE__*/React.createElement(\"div\",{className:\"section-title__icon\",style:{color:instanceItem.categoryItemRef.displayColor}},/*#__PURE__*/React.createElement(ShapeIcon,{shapeType:shapeType})),/*#__PURE__*/React.createElement(\"div\",{className:\"section-title__label\"},\"\".concat(instanceItem.itemLabel).concat(isSingleCamera?'':\"-C\".concat(cameraNames.indexOf(currentCamera)+1)),isEmpty&&i18n.translate('EMPTY_LABEL'))),[...fieldKeys,...legacyKeys].map(key=>attrKeys.includes(key)&&/*#__PURE__*/React.createElement(AttributeValueItem,{key:key,fieldName:key,fieldsMap:fieldsMap,values:attributes})));});export default InstanceItemAttributes;","map":{"version":3,"names":["React","useRef","observer","cx","AttributeValueItem","ShapeIcon","store","i18n","InstanceItemAttributes","_ref","instanceItem","fieldsMap","currentCamera","currentFrame","isSingleCamera","cameraNames","frame","cameraData","cameras","frames","frameData","attributes","shapeType","getNearestKeyFrame","isEmpty","fieldKeys","Object","keys","ref","attrKeys","legacyKeys","filter","key","includes","createElement","className","empty","style","color","categoryItemRef","displayColor","concat","itemLabel","indexOf","translate","map","fieldName","values"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/InstanceItemAttributes.tsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { FieldConfig } from '../../types';\nimport AttributeValueItem from './AttributeValueItem';\nimport ShapeIcon from '../sidebar/ShapeIcon';\nimport InstanceItem from '../../model/InstanceItem';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './InstanceAttributes.scss';\n\ninterface InstanceItemAttributesProps {\n  instanceItem: InstanceItem;\n  fieldsMap: { [fieldName: string]: FieldConfig };\n}\n\nconst InstanceItemAttributes = observer(({ instanceItem, fieldsMap }: InstanceItemAttributesProps) => {\n  // FIXME: use current camera cause multiple cameras not supported yet\n  const { currentCamera, currentFrame, isSingleCamera, cameraNames } = store.frame;\n  const cameraData = instanceItem.cameras[currentCamera];\n  const { frames = {} } = cameraData || {};\n  const frameData = frames[currentFrame];\n  const { attributes } = frameData || {};\n  const { shapeType } = frameData || frames[cameraData?.getNearestKeyFrame(currentFrame)] || {};\n  const isEmpty = !frameData;\n  const fieldKeys = Object.keys(fieldsMap || {});\n\n  // refs\n  const ref = useRef<HTMLDivElement>(null);\n\n  const attrKeys = Object.keys(attributes || {});\n  const legacyKeys = attrKeys.filter((key) => !fieldKeys.includes(key));\n\n  return (\n    <div className=\"section\" ref={ref}>\n      <div\n        className={cx('section-title', {\n          empty: isEmpty,\n        })}\n      >\n        <div\n          className=\"section-title__icon\"\n          style={{ color: instanceItem.categoryItemRef.displayColor }}\n        >\n          <ShapeIcon shapeType={shapeType} />\n        </div>\n        <div className=\"section-title__label\">\n          {`${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraNames.indexOf(currentCamera) + 1}`}`}\n          {isEmpty && i18n.translate('EMPTY_LABEL')}\n        </div>\n      </div>\n      {[...fieldKeys, ...legacyKeys].map((key) => attrKeys.includes(key) && (\n        <AttributeValueItem\n          key={key}\n          fieldName={key}\n          fieldsMap={fieldsMap}\n          values={attributes}\n        />\n      ))}\n    </div>\n  );\n});\n\nexport default InstanceItemAttributes;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,KAAQ,OAAO,CACrC,OAASC,QAAQ,KAAQ,YAAY,CACrC,MAAO,CAAAC,EAAE,KAAM,YAAY,CAE3B,MAAO,CAAAC,kBAAkB,KAAM,sBAAsB,CACrD,MAAO,CAAAC,SAAS,KAAM,sBAAsB,CAE5C,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CACzC,MAAO,CAAAC,IAAI,KAAM,eAAe,CAChC,MAAO,2BAA2B,CAOlC,KAAM,CAAAC,sBAAsB,CAAGN,QAAQ,CAACO,IAAA,EAA8D,IAA7D,CAAEC,YAAY,CAAEC,SAAuC,CAAC,CAAAF,IAAA,CAC/F;AACA,KAAM,CAAEG,aAAa,CAAEC,YAAY,CAAEC,cAAc,CAAEC,WAAY,CAAC,CAAGT,KAAK,CAACU,KAAK,CAChF,KAAM,CAAAC,UAAU,CAAGP,YAAY,CAACQ,OAAO,CAACN,aAAa,CAAC,CACtD,KAAM,CAAEO,MAAM,CAAG,CAAC,CAAE,CAAC,CAAGF,UAAU,EAAI,CAAC,CAAC,CACxC,KAAM,CAAAG,SAAS,CAAGD,MAAM,CAACN,YAAY,CAAC,CACtC,KAAM,CAAEQ,UAAW,CAAC,CAAGD,SAAS,EAAI,CAAC,CAAC,CACtC,KAAM,CAAEE,SAAU,CAAC,CAAGF,SAAS,EAAID,MAAM,CAACF,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEM,kBAAkB,CAACV,YAAY,CAAC,CAAC,EAAI,CAAC,CAAC,CAC7F,KAAM,CAAAW,OAAO,CAAG,CAACJ,SAAS,CAC1B,KAAM,CAAAK,SAAS,CAAGC,MAAM,CAACC,IAAI,CAAChB,SAAS,EAAI,CAAC,CAAC,CAAC,CAE9C;AACA,KAAM,CAAAiB,GAAG,CAAG3B,MAAM,CAAiB,IAAI,CAAC,CAExC,KAAM,CAAA4B,QAAQ,CAAGH,MAAM,CAACC,IAAI,CAACN,UAAU,EAAI,CAAC,CAAC,CAAC,CAC9C,KAAM,CAAAS,UAAU,CAAGD,QAAQ,CAACE,MAAM,CAAEC,GAAG,EAAK,CAACP,SAAS,CAACQ,QAAQ,CAACD,GAAG,CAAC,CAAC,CAErE,mBACEhC,KAAA,CAAAkC,aAAA,QAAKC,SAAS,CAAC,SAAS,CAACP,GAAG,CAAEA,GAAI,eAChC5B,KAAA,CAAAkC,aAAA,QACEC,SAAS,CAAEhC,EAAE,CAAC,eAAe,CAAE,CAC7BiC,KAAK,CAAEZ,OACT,CAAC,CAAE,eAEHxB,KAAA,CAAAkC,aAAA,QACEC,SAAS,CAAC,qBAAqB,CAC/BE,KAAK,CAAE,CAAEC,KAAK,CAAE5B,YAAY,CAAC6B,eAAe,CAACC,YAAa,CAAE,eAE5DxC,KAAA,CAAAkC,aAAA,CAAC7B,SAAS,EAACiB,SAAS,CAAEA,SAAU,CAAE,CAC/B,CAAC,cACNtB,KAAA,CAAAkC,aAAA,QAAKC,SAAS,CAAC,sBAAsB,KAAAM,MAAA,CAC/B/B,YAAY,CAACgC,SAAS,EAAAD,MAAA,CAAG3B,cAAc,CAAG,EAAE,MAAA2B,MAAA,CAAQ1B,WAAW,CAAC4B,OAAO,CAAC/B,aAAa,CAAC,CAAG,CAAC,CAAE,EAC/FY,OAAO,EAAIjB,IAAI,CAACqC,SAAS,CAAC,aAAa,CACrC,CACF,CAAC,CACL,CAAC,GAAGnB,SAAS,CAAE,GAAGK,UAAU,CAAC,CAACe,GAAG,CAAEb,GAAG,EAAKH,QAAQ,CAACI,QAAQ,CAACD,GAAG,CAAC,eAChEhC,KAAA,CAAAkC,aAAA,CAAC9B,kBAAkB,EACjB4B,GAAG,CAAEA,GAAI,CACTc,SAAS,CAAEd,GAAI,CACfrB,SAAS,CAAEA,SAAU,CACrBoC,MAAM,CAAE1B,UAAW,CACpB,CACF,CACE,CAAC,CAEV,CAAC,CAAC,CAEF,cAAe,CAAAb,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module"}