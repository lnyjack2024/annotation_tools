{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/keypoint/components/Attributes.tsx\";\nimport React, { useMemo, useState, useImperativeHandle } from 'react';\nimport EasyForm from '@appen-china/easy-form';\nimport Modal from '../../common/modal/Modal';\nconst Attributes = React.forwardRef(({\n  readonly,\n  config,\n  values,\n  onValuesChange\n}, ref) => {\n  const [visible, setVisible] = useState(false);\n  const [title, setTitle] = useState('');\n\n  // fields with initial value\n  const fieldsWithInitialValue = useMemo(() => ((config === null || config === void 0 ? void 0 : config.fields) || []).map(field => ({\n    ...field,\n    readonly: readonly || field.readonly,\n    ...(values && values[field.name] !== undefined && {\n      defaultValue: values[field.name]\n    })\n  })), [config, values]);\n  useImperativeHandle(ref, () => ({\n    modalVisible: visible,\n    showModal: tit => {\n      setVisible(true);\n      setTitle(tit);\n    }\n  }));\n  const handleValuesChange = v => {\n    setVisible(false);\n    onValuesChange({\n      ...v\n    });\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    className: \"attributes-form\",\n    visible: visible,\n    draggable: false,\n    closable: false,\n    dragId: \"keypoint-attributes\",\n    onClose: () => {\n      handleValuesChange({});\n    },\n    title: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(EasyForm, {\n    theme: \"dark\",\n    fields: fieldsWithInitialValue,\n    conditions: config === null || config === void 0 ? void 0 : config.conditions,\n    effects: config === null || config === void 0 ? void 0 : config.effects,\n    rules: config === null || config === void 0 ? void 0 : config.rules,\n    onSubmit: handleValuesChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }));\n});\nexport default Attributes;","map":{"version":3,"names":["React","useMemo","useState","useImperativeHandle","EasyForm","Modal","Attributes","forwardRef","readonly","config","values","onValuesChange","ref","visible","setVisible","title","setTitle","fieldsWithInitialValue","fields","map","field","name","undefined","defaultValue","modalVisible","showModal","tit","handleValuesChange","v","createElement","className","draggable","closable","dragId","onClose","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","theme","conditions","effects","rules","onSubmit"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/keypoint/components/Attributes.tsx"],"sourcesContent":["import React, { useMemo, useState, useImperativeHandle } from 'react';\nimport EasyForm from '@appen-china/easy-form';\nimport { Field, Condition, Effect, Rule } from '@appen-china/easy-form/es/types';\nimport Modal from '../../common/modal/Modal';\n\ninterface AttributesProps {\n  readonly: boolean;\n  config: {\n    fields: Field[];\n    conditions?: Condition[];\n    effects?: Effect[];\n    rules?: Rule[];\n  } | null;\n  values: any;\n  onValuesChange: (values: any) => void;\n}\n\nexport interface AttributesHandle {\n  modalVisible: boolean;\n  showModal: (title: string) => void;\n}\n\nconst Attributes = React.forwardRef<AttributesHandle, AttributesProps>(({\n  readonly,\n  config,\n  values,\n  onValuesChange,\n}, ref) => {\n  const [visible, setVisible] = useState(false);\n  const [title, setTitle] = useState('');\n\n  // fields with initial value\n  const fieldsWithInitialValue = useMemo(() => (config?.fields || []).map((field) => ({\n    ...field,\n    readonly: readonly || field.readonly,\n    ...values && values[field.name] !== undefined && {\n      defaultValue: values[field.name],\n    }\n  })), [config, values]);\n\n  useImperativeHandle(ref, () => ({\n    modalVisible: visible,\n    showModal: (tit: string) => {\n      setVisible(true);\n      setTitle(tit);\n    },\n  }));\n\n  const handleValuesChange = (v: any) => {\n    setVisible(false);\n    onValuesChange({ ...v });\n  };\n\n  return (\n    <Modal\n      className=\"attributes-form\"\n      visible={visible}\n      draggable={false}\n      closable={false}\n      dragId=\"keypoint-attributes\"\n      onClose={() => {\n        handleValuesChange({});\n      }}\n      title={title}\n    >\n      <EasyForm\n        theme=\"dark\"\n        fields={fieldsWithInitialValue}\n        conditions={config?.conditions}\n        effects={config?.effects}\n        rules={config?.rules}\n        onSubmit={handleValuesChange}\n      />\n    </Modal>\n  );\n});\n\nexport default Attributes;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,OAAO,EAAEC,QAAQ,EAAEC,mBAAmB,QAAQ,OAAO;AACrE,OAAOC,QAAQ,MAAM,wBAAwB;AAE7C,OAAOC,KAAK,MAAM,0BAA0B;AAmB5C,MAAMC,UAAU,GAAGN,KAAK,CAACO,UAAU,CAAoC,CAAC;EACtEC,QAAQ;EACRC,MAAM;EACNC,MAAM;EACNC;AACF,CAAC,EAAEC,GAAG,KAAK;EACT,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;;EAEtC;EACA,MAAMe,sBAAsB,GAAGhB,OAAO,CAAC,MAAM,CAAC,CAAAQ,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAES,MAAM,KAAI,EAAE,EAAEC,GAAG,CAAEC,KAAK,KAAM;IAClF,GAAGA,KAAK;IACRZ,QAAQ,EAAEA,QAAQ,IAAIY,KAAK,CAACZ,QAAQ;IACpC,IAAGE,MAAM,IAAIA,MAAM,CAACU,KAAK,CAACC,IAAI,CAAC,KAAKC,SAAS,IAAI;MAC/CC,YAAY,EAAEb,MAAM,CAACU,KAAK,CAACC,IAAI;IACjC,CAAC;EACH,CAAC,CAAC,CAAC,EAAE,CAACZ,MAAM,EAAEC,MAAM,CAAC,CAAC;EAEtBP,mBAAmB,CAACS,GAAG,EAAE,OAAO;IAC9BY,YAAY,EAAEX,OAAO;IACrBY,SAAS,EAAGC,GAAW,IAAK;MAC1BZ,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAACU,GAAG,CAAC;IACf;EACF,CAAC,CAAC,CAAC;EAEH,MAAMC,kBAAkB,GAAIC,CAAM,IAAK;IACrCd,UAAU,CAAC,KAAK,CAAC;IACjBH,cAAc,CAAC;MAAE,GAAGiB;IAAE,CAAC,CAAC;EAC1B,CAAC;EAED,oBACE5B,KAAA,CAAA6B,aAAA,CAACxB,KAAK;IACJyB,SAAS,EAAC,iBAAiB;IAC3BjB,OAAO,EAAEA,OAAQ;IACjBkB,SAAS,EAAE,KAAM;IACjBC,QAAQ,EAAE,KAAM;IAChBC,MAAM,EAAC,qBAAqB;IAC5BC,OAAO,EAAEA,CAAA,KAAM;MACbP,kBAAkB,CAAC,CAAC,CAAC,CAAC;IACxB,CAAE;IACFZ,KAAK,EAAEA,KAAM;IAAAoB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEbxC,KAAA,CAAA6B,aAAA,CAACzB,QAAQ;IACPqC,KAAK,EAAC,MAAM;IACZvB,MAAM,EAAED,sBAAuB;IAC/ByB,UAAU,EAAEjC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEiC,UAAW;IAC/BC,OAAO,EAAElC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEkC,OAAQ;IACzBC,KAAK,EAAEnC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEmC,KAAM;IACrBC,QAAQ,EAAElB,kBAAmB;IAAAQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC9B,CACI,CAAC;AAEZ,CAAC,CAAC;AAEF,eAAelC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}