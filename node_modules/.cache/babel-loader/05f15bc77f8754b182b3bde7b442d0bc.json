{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/multi-channel/components/Sidebar/InstanceItem.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { Approve, Reject } from '../../../common/icons';\nimport { ReviewResult } from '../../types';\nimport { verifyCurrentForm } from '../../utils';\nconst InstanceItem = ({\n  instance,\n  selectedInstanceId,\n  currentTime,\n  index\n}) => {\n  var _store$review$reviews;\n  const {\n    color,\n    id,\n    start,\n    end,\n    label,\n    text,\n    attributes\n  } = instance;\n  const [tags, setTags] = useState([]);\n  useEffect(() => {\n    const verifyRes = verifyCurrentForm(store.ontology.segmentConfig, instance, index);\n    if (verifyRes.result === true) {\n      setTags(attributes ? Object.entries(attributes) : []);\n    } else {\n      setTags([['error', i18n.translate('INSTANCE_LABEL_ERROR')]]);\n    }\n  }, [instance]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('side-instances-item', {\n      selected: id === selectedInstanceId,\n      active: currentTime >= start && currentTime <= end\n    }),\n    id: `side-instances-${id}`,\n    onClick: () => {\n      store.instance.setSelectedInstance(id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instance-number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, index + 1), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instance-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instance-info-attributes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"dot\",\n    style: {\n      background: color\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }), label), tags.map(([key, val]) => /*#__PURE__*/React.createElement(\"span\", {\n    className: cx('label', {\n      error: key === 'error'\n    }),\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, val))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('instance-info-text', {\n      error: !text\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, text || i18n.translate('NOT_TRANSCRIBED')), store.review.reviewsMap[id] && /*#__PURE__*/React.createElement(React.Fragment, null, store.review.reviewsMap[id].result === ReviewResult.REJECT && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"qc-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, `${i18n.translate('QC_REJECT_LABEL')}：${((_store$review$reviews = store.review.reviewsMap[id].type) === null || _store$review$reviews === void 0 ? void 0 : _store$review$reviews.join(',')) || ''};${store.review.reviewsMap[id].comment || ''}`), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"qc-icon reject\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Reject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 45\n    }\n  }))), store.review.reviewsMap[id].result === ReviewResult.APPROVE && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"qc-icon approve\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Approve, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 46\n    }\n  })))));\n};\nexport default observer(InstanceItem);","map":{"version":3,"names":["React","useEffect","useState","observer","cx","store","i18n","Approve","Reject","ReviewResult","verifyCurrentForm","InstanceItem","instance","selectedInstanceId","currentTime","index","_store$review$reviews","color","id","start","end","label","text","attributes","tags","setTags","verifyRes","ontology","segmentConfig","result","Object","entries","translate","createElement","className","selected","active","onClick","setSelectedInstance","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","background","map","key","val","error","review","reviewsMap","Fragment","REJECT","type","join","comment","APPROVE"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/multi-channel/components/Sidebar/InstanceItem.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { Approve, Reject } from '../../../common/icons';\nimport { Instance, ReviewResult } from '../../types';\nimport { verifyCurrentForm } from '../../utils';\n\ninterface InstanceProps {\n  instance: Instance,\n  selectedInstanceId?: string;\n  currentTime: number;\n  index: number;\n}\nconst InstanceItem = ({ instance, selectedInstanceId, currentTime, index }: InstanceProps) => {\n  const { color, id, start, end, label, text, attributes } = instance;\n  const [tags, setTags] = useState<string[][]>([]);\n\n  useEffect(() => {\n    const verifyRes = verifyCurrentForm(store.ontology.segmentConfig, instance, index);\n    if (verifyRes.result === true) {\n      setTags(attributes ? Object.entries(attributes) : []);\n    } else {\n      setTags([['error', i18n.translate('INSTANCE_LABEL_ERROR')]]);\n    }\n  }, [instance]);\n  return (\n    <div\n      className={cx('side-instances-item', {\n        selected: id === selectedInstanceId,\n        active: currentTime >= start && currentTime <= end,\n      })}\n      id={`side-instances-${id}`}\n      onClick={() => { store.instance.setSelectedInstance(id); }}\n    >\n      <div className=\"instance-number\">{index + 1}</div>\n      <div className=\"instance-info\">\n        <div className=\"instance-info-attributes\">\n          <span className=\"label\">\n            <span className=\"dot\" style={{ background: color }} />\n            {label}\n          </span>\n          {tags.map(([key, val]) => (\n            <span className={cx('label', { error: key === 'error' })} key={key}>\n              {val}\n            </span>\n          ))}\n        </div>\n        <div className={cx('instance-info-text', { error: !text })}>{text || i18n.translate('NOT_TRANSCRIBED')}</div>\n        {store.review.reviewsMap[id] && (\n        <>\n          {store.review.reviewsMap[id].result === ReviewResult.REJECT && (\n          <>\n            <div className=\"qc-info\">\n              {`${i18n.translate('QC_REJECT_LABEL')}：${store.review.reviewsMap[id].type?.join(',') || ''};${store.review.reviewsMap[id].comment || ''}`}\n            </div>\n            <div className=\"qc-icon reject\"><Reject /></div>\n          </>\n          )}\n          {store.review.reviewsMap[id].result === ReviewResult.APPROVE && (\n            <div className=\"qc-icon approve\"><Approve /></div>\n          )}\n        </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default observer(InstanceItem);\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,YAAY;AACrC,OAAOC,EAAE,MAAM,YAAY;AAC3B,OAAOC,KAAK,MAAM,uBAAuB;AACzC,OAAOC,IAAI,MAAM,eAAe;AAChC,SAASC,OAAO,EAAEC,MAAM,QAAQ,uBAAuB;AACvD,SAAmBC,YAAY,QAAQ,aAAa;AACpD,SAASC,iBAAiB,QAAQ,aAAa;AAQ/C,MAAMC,YAAY,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,kBAAkB;EAAEC,WAAW;EAAEC;AAAqB,CAAC,KAAK;EAAA,IAAAC,qBAAA;EAC5F,MAAM;IAAEC,KAAK;IAAEC,EAAE;IAAEC,KAAK;IAAEC,GAAG;IAAEC,KAAK;IAAEC,IAAI;IAAEC;EAAW,CAAC,GAAGX,QAAQ;EACnE,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGvB,QAAQ,CAAa,EAAE,CAAC;EAEhDD,SAAS,CAAC,MAAM;IACd,MAAMyB,SAAS,GAAGhB,iBAAiB,CAACL,KAAK,CAACsB,QAAQ,CAACC,aAAa,EAAEhB,QAAQ,EAAEG,KAAK,CAAC;IAClF,IAAIW,SAAS,CAACG,MAAM,KAAK,IAAI,EAAE;MAC7BJ,OAAO,CAACF,UAAU,GAAGO,MAAM,CAACC,OAAO,CAACR,UAAU,CAAC,GAAG,EAAE,CAAC;IACvD,CAAC,MAAM;MACLE,OAAO,CAAC,CAAC,CAAC,OAAO,EAAEnB,IAAI,CAAC0B,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;IAC9D;EACF,CAAC,EAAE,CAACpB,QAAQ,CAAC,CAAC;EACd,oBACEZ,KAAA,CAAAiC,aAAA;IACEC,SAAS,EAAE9B,EAAE,CAAC,qBAAqB,EAAE;MACnC+B,QAAQ,EAAEjB,EAAE,KAAKL,kBAAkB;MACnCuB,MAAM,EAAEtB,WAAW,IAAIK,KAAK,IAAIL,WAAW,IAAIM;IACjD,CAAC,CAAE;IACHF,EAAE,EAAE,kBAAkBA,EAAE,EAAG;IAC3BmB,OAAO,EAAEA,CAAA,KAAM;MAAEhC,KAAK,CAACO,QAAQ,CAAC0B,mBAAmB,CAACpB,EAAE,CAAC;IAAE,CAAE;IAAAqB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE3D5C,KAAA,CAAAiC,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE7B,KAAK,GAAG,CAAO,CAAC,eAClDf,KAAA,CAAAiC,aAAA;IAAKC,SAAS,EAAC,eAAe;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC5B5C,KAAA,CAAAiC,aAAA;IAAKC,SAAS,EAAC,0BAA0B;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACvC5C,KAAA,CAAAiC,aAAA;IAAMC,SAAS,EAAC,OAAO;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrB5C,KAAA,CAAAiC,aAAA;IAAMC,SAAS,EAAC,KAAK;IAACW,KAAK,EAAE;MAAEC,UAAU,EAAE7B;IAAM,CAAE;IAAAsB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,EACrDvB,KACG,CAAC,EACNG,IAAI,CAACuB,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,kBACnBjD,KAAA,CAAAiC,aAAA;IAAMC,SAAS,EAAE9B,EAAE,CAAC,OAAO,EAAE;MAAE8C,KAAK,EAAEF,GAAG,KAAK;IAAQ,CAAC,CAAE;IAACA,GAAG,EAAEA,GAAI;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAChEK,GACG,CACP,CACE,CAAC,eACNjD,KAAA,CAAAiC,aAAA;IAAKC,SAAS,EAAE9B,EAAE,CAAC,oBAAoB,EAAE;MAAE8C,KAAK,EAAE,CAAC5B;IAAK,CAAC,CAAE;IAAAiB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEtB,IAAI,IAAIhB,IAAI,CAAC0B,SAAS,CAAC,iBAAiB,CAAO,CAAC,EAC5G3B,KAAK,CAAC8C,MAAM,CAACC,UAAU,CAAClC,EAAE,CAAC,iBAC5BlB,KAAA,CAAAiC,aAAA,CAAAjC,KAAA,CAAAqD,QAAA,QACGhD,KAAK,CAAC8C,MAAM,CAACC,UAAU,CAAClC,EAAE,CAAC,CAACW,MAAM,KAAKpB,YAAY,CAAC6C,MAAM,iBAC3DtD,KAAA,CAAAiC,aAAA,CAAAjC,KAAA,CAAAqD,QAAA,qBACErD,KAAA,CAAAiC,aAAA;IAAKC,SAAS,EAAC,SAAS;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACrB,GAAGtC,IAAI,CAAC0B,SAAS,CAAC,iBAAiB,CAAC,IAAI,EAAAhB,qBAAA,GAAAX,KAAK,CAAC8C,MAAM,CAACC,UAAU,CAAClC,EAAE,CAAC,CAACqC,IAAI,cAAAvC,qBAAA,uBAAhCA,qBAAA,CAAkCwC,IAAI,CAAC,GAAG,CAAC,KAAI,EAAE,IAAInD,KAAK,CAAC8C,MAAM,CAACC,UAAU,CAAClC,EAAE,CAAC,CAACuC,OAAO,IAAI,EAAE,EACpI,CAAC,eACNzD,KAAA,CAAAiC,aAAA;IAAKC,SAAS,EAAC,gBAAgB;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAAC5C,KAAA,CAAAiC,aAAA,CAACzB,MAAM;IAAA+B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAM,CAC/C,CACD,EACAvC,KAAK,CAAC8C,MAAM,CAACC,UAAU,CAAClC,EAAE,CAAC,CAACW,MAAM,KAAKpB,YAAY,CAACiD,OAAO,iBAC1D1D,KAAA,CAAAiC,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAAC5C,KAAA,CAAAiC,aAAA,CAAC1B,OAAO;IAAAgC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAM,CAEnD,CAEC,CACF,CAAC;AAEV,CAAC;AAED,eAAezC,QAAQ,CAACQ,YAAY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}