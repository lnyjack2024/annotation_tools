{"ast":null,"code":"import React,{useState}from'react';import{observer}from'mobx-react';import{Collapse}from'antd';import{CaretRightOutlined}from'@ant-design/icons';import cx from'classnames';import i18n from'../../locales';import ValidationItem from'./ValidationItem';import{Warning,Sync}from'../../../common/icons';import store from'../../store';import{ValidationType}from'../../types';const ValidationPanel=observer(()=>{var _store$validation2,_store$validation3,_store$validation4;const[activeKey,setActiveKey]=useState([ValidationType.SCRIPT]);const titles={[ValidationType.SCRIPT]:i18n.translate('VALIDATION_TYPE_SCRIPT')};const renderWarnings=type=>{var _store$validation;const warnings=(_store$validation=store.validation)===null||_store$validation===void 0?void 0:_store$validation.warnings.filter(w=>w.type===type);if(!warnings||warnings.length<=0){return null;}return/*#__PURE__*/React.createElement(Collapse.Panel,{key:type,header:titles[type],extra:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"result-count\"},warnings.length))},warnings.map(warning=>/*#__PURE__*/React.createElement(ValidationItem,{key:warning.id,warning:warning})));};return/*#__PURE__*/React.createElement(\"div\",{className:\"scroller\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-validation-header\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Warning,null),/*#__PURE__*/React.createElement(\"span\",{style:{paddingLeft:8}},i18n.translate('VALIDATION_TITLE',{values:{count:(_store$validation2=store.validation)===null||_store$validation2===void 0?void 0:_store$validation2.warningCount}}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:cx('icon-button',{spinning:(_store$validation3=store.validation)===null||_store$validation3===void 0?void 0:_store$validation3.checking}),onClick:(_store$validation4=store.validation)===null||_store$validation4===void 0?void 0:_store$validation4.sync},/*#__PURE__*/React.createElement(Sync,null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-validation-content\"},/*#__PURE__*/React.createElement(Collapse,{activeKey:activeKey,onChange:activeKeys=>setActiveKey(activeKeys),ghost:true,expandIcon:_ref=>{let{isActive}=_ref;return/*#__PURE__*/React.createElement(CaretRightOutlined,{style:{...(isActive?{top:11,transform:'rotate(90deg)',color:'rgba(0, 0, 0, 0.6)'}:{color:'rgba(0, 0, 0, 0.4)'})}});}},Object.values(ValidationType).map(type=>renderWarnings(type)))));});export default ValidationPanel;","map":{"version":3,"names":["React","useState","observer","Collapse","CaretRightOutlined","cx","i18n","ValidationItem","Warning","Sync","store","ValidationType","ValidationPanel","_store$validation2","_store$validation3","_store$validation4","activeKey","setActiveKey","SCRIPT","titles","translate","renderWarnings","type","_store$validation","warnings","validation","filter","w","length","createElement","Panel","key","header","extra","className","map","warning","id","style","paddingLeft","values","count","warningCount","spinning","checking","onClick","sync","onChange","activeKeys","ghost","expandIcon","_ref","isActive","top","transform","color","Object"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/question-answering/components/validationPanel/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport { Collapse } from 'antd';\nimport { CaretRightOutlined } from '@ant-design/icons';\nimport cx from 'classnames';\nimport i18n from '../../locales';\nimport ValidationItem from './ValidationItem';\nimport { Warning, Sync } from '../../../common/icons';\nimport store from '../../store';\nimport { ValidationType } from '../../types';\n\nconst ValidationPanel = observer(() => {\n  const [activeKey, setActiveKey] = useState<ValidationType | ValidationType[]>([ValidationType.SCRIPT]);\n  const titles = {\n    [ValidationType.SCRIPT]: i18n.translate('VALIDATION_TYPE_SCRIPT'),\n  };\n  const renderWarnings = (type: ValidationType) => {\n    const warnings = store.validation?.warnings.filter((w) => w.type === type);\n    if (!warnings || warnings.length <= 0) {\n      return null;\n    }\n    return (\n      <Collapse.Panel\n        key={type}\n        header={titles[type]}\n        extra={(\n          <div>\n            <span className=\"result-count\">\n              {warnings.length}\n            </span>\n          </div>\n        )}\n      >\n        {warnings.map((warning) => <ValidationItem key={warning.id} warning={warning} />)}\n      </Collapse.Panel>\n    );\n  };\n  return (\n    <div className=\"scroller\">\n      <div className=\"sidebar-validation-header\">\n        <div>\n          <Warning />\n          <span style={{ paddingLeft: 8 }}>\n            {i18n.translate('VALIDATION_TITLE', { values: { count: store.validation?.warningCount } })}\n          </span>\n        </div>\n        <div>\n          <div\n            className={cx('icon-button', {\n              spinning: store.validation?.checking,\n            })}\n            onClick={store.validation?.sync}\n          >\n            <Sync />\n          </div>\n        </div>\n      </div>\n      <div className=\"sidebar-validation-content\">\n        <Collapse\n          activeKey={activeKey}\n          onChange={(activeKeys) => setActiveKey(activeKeys as (ValidationType | ValidationType[]))}\n          ghost\n          expandIcon={({ isActive }) => (\n            <CaretRightOutlined\n              style={{\n                ...isActive ? {\n                  top: 11,\n                  transform: 'rotate(90deg)',\n                  color: 'rgba(0, 0, 0, 0.6)',\n                } : {\n                  color: 'rgba(0, 0, 0, 0.4)',\n                },\n              }}\n            />\n          )}\n        >\n          {Object.values(ValidationType).map((type) => renderWarnings(type))}\n        </Collapse>\n      </div>\n\n    </div>\n  );\n});\n\nexport default ValidationPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}