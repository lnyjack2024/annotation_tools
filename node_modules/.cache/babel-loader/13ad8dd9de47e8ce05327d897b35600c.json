{"ast":null,"code":"import React,{useState}from'react';import{observer}from'mobx-react';import cx from'classnames';import{PlusCircleFilled}from'@ant-design/icons';import ShapeLabel from'./ShapeLabel';import InstanceItemMenu from'./InstanceItemMenu';import InstanceItemReviewIcon from'./InstanceItemReviewIcon';import store from'../../store/RootStore';const CameraInstanceItem=observer(_ref=>{let{item,camera,cameraIndex}=_ref;const[hovered,setHovered]=useState(false);const[menuVisible,setMenuVisible]=useState(false);const[menuPosition,setMenuPosition]=useState({x:-1,y:-1});const{currentCamera,currentFrame}=store.frame;const{frames}=item.cameras[camera];const currentFrameData=frames[currentFrame];const isHidden=!currentFrameData;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:cx('sidebar-category-instance__item',{hidden:isHidden,selected:item.selected&&currentCamera===camera}),onMouseDown:()=>{store.instance.selectInstanceItem(item,true);},onMouseEnter:()=>setHovered(true),onMouseLeave:()=>setHovered(false),onContextMenu:e=>{e.preventDefault();store.instance.selectInstanceItem(item);if(!isHidden){setMenuPosition({x:e.clientX,y:e.clientY});setMenuVisible(true);}}},/*#__PURE__*/React.createElement(ShapeLabel,{item:item,camera:camera,cameraIndex:cameraIndex}),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-category-action\"},!store.readonly&&isHidden&&hovered&&/*#__PURE__*/React.createElement(PlusCircleFilled,{style:{cursor:'pointer'},onClick:()=>store.addToCurrentFrame(item,camera)}),!store.isLabeling&&!isHidden&&/*#__PURE__*/React.createElement(InstanceItemReviewIcon,{item:item,camera:camera}))),/*#__PURE__*/React.createElement(InstanceItemMenu,{instanceItem:item,camera:camera,position:menuPosition,visible:menuVisible,onClose:()=>setMenuVisible(false)}));});export default CameraInstanceItem;","map":{"version":3,"names":["React","useState","observer","cx","PlusCircleFilled","ShapeLabel","InstanceItemMenu","InstanceItemReviewIcon","store","CameraInstanceItem","_ref","item","camera","cameraIndex","hovered","setHovered","menuVisible","setMenuVisible","menuPosition","setMenuPosition","x","y","currentCamera","currentFrame","frame","frames","cameras","currentFrameData","isHidden","createElement","Fragment","className","hidden","selected","onMouseDown","instance","selectInstanceItem","onMouseEnter","onMouseLeave","onContextMenu","e","preventDefault","clientX","clientY","readonly","style","cursor","onClick","addToCurrentFrame","isLabeling","instanceItem","position","visible","onClose"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/CameraInstanceItem.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { PlusCircleFilled } from '@ant-design/icons';\nimport ShapeLabel from './ShapeLabel';\nimport InstanceItemMenu from './InstanceItemMenu';\nimport InstanceItemReviewIcon from './InstanceItemReviewIcon';\nimport InstanceItem from '../../model/InstanceItem';\nimport store from '../../store/RootStore';\n\ninterface CameraInstanceItemProps {\n  item: InstanceItem;\n  camera: string;\n  cameraIndex: number;\n}\n\nconst CameraInstanceItem = observer(({ item, camera, cameraIndex }: CameraInstanceItemProps) => {\n  const [hovered, setHovered] = useState(false);\n  const [menuVisible, setMenuVisible] = useState(false);\n  const [menuPosition, setMenuPosition] = useState({ x: -1, y: -1 });\n\n  const { currentCamera, currentFrame } = store.frame;\n  const { frames } = item.cameras[camera];\n  const currentFrameData = frames[currentFrame];\n  const isHidden = !currentFrameData;\n  return (\n    <>\n      <div\n        className={cx('sidebar-category-instance__item', {\n          hidden: isHidden,\n          selected: item.selected && currentCamera === camera,\n        })}\n        onMouseDown={() => {\n          store.instance.selectInstanceItem(item, true);\n        }}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n        onContextMenu={(e) => {\n          e.preventDefault();\n          store.instance.selectInstanceItem(item);\n          if (!isHidden) {\n            setMenuPosition({ x: e.clientX, y: e.clientY });\n            setMenuVisible(true);\n          }\n        }}\n      >\n        <ShapeLabel item={item} camera={camera} cameraIndex={cameraIndex} />\n        <div className=\"sidebar-category-action\">\n          {!store.readonly && isHidden && hovered && (\n            <PlusCircleFilled\n              style={{ cursor: 'pointer' }}\n              onClick={() => store.addToCurrentFrame(item, camera)}\n            />\n          )}\n          {!store.isLabeling && !isHidden && (\n            <InstanceItemReviewIcon item={item} camera={camera} />\n          )}\n        </div>\n      </div>\n      <InstanceItemMenu\n        instanceItem={item}\n        camera={camera}\n        position={menuPosition}\n        visible={menuVisible}\n        onClose={() => setMenuVisible(false)}\n      />\n    </>\n  );\n});\n\nexport default CameraInstanceItem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}