{"ast":null,"code":"/* eslint-disable valid-jsdoc */\n/**\n * Returns the `requestAnimationFrame` function for the browser, or a shim with\n * `setTimeout` if the function is not found\n *\n * @return {function} Available `requestAnimationFrame` function for the browser\n */\nexport const requestAnimationFrame = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || (callback => setTimeout(callback, 1000 / 60))).bind(window);\nexport const cancelAnimationFrame = (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || (callback => clearTimeout(callback))).bind(window);\n\n/**\n * Create a function which will be called at the next requestAnimationFrame\n * cycle\n *\n * @param {function} func The function to call\n *\n * @return {func} The function wrapped within a requestAnimationFrame\n */\nexport function frame(func) {\n  return (...args) => requestAnimationFrame(() => func(...args));\n}\nexport const timeInterval = pxPerSec => {\n  let retVal = 1;\n  if (pxPerSec >= 1000) {\n    retVal = 0.01;\n  } else if (pxPerSec >= 500) {\n    retVal = 0.02;\n  } else if (pxPerSec >= 100) {\n    retVal = 0.1;\n  } else if (pxPerSec >= 50) {\n    retVal = 0.2;\n  } else if (pxPerSec >= 10) {\n    retVal = 1;\n  } else if (pxPerSec >= 5) {\n    retVal = 12;\n  } else if (pxPerSec >= 1) {\n    retVal = 24;\n  } else if (pxPerSec >= 0.5) {\n    retVal = 120;\n  } else if (pxPerSec >= 0.01) {\n    retVal = 600;\n  } else {\n    retVal = Math.ceil(1 / pxPerSec) * 60;\n  }\n  return retVal;\n};\nexport const formatTimeCallback = (secs, pxPerSec) => {\n  let seconds = Number(secs);\n  const minutes = Math.floor(seconds / 60);\n  seconds %= 60;\n\n  // fill up seconds with zeroes\n  let secondsStr = Math.round(seconds).toString();\n  if (pxPerSec >= 25 * 10) {\n    secondsStr = seconds.toFixed(2);\n  } else if (pxPerSec >= 25 * 1) {\n    secondsStr = seconds.toFixed(1);\n  }\n  secondsStr = seconds >= 10 ? secondsStr : `0${secondsStr}`;\n  return `${minutes || '00'}:${secondsStr}`;\n};\n\n/**\n * Apply a map of styles to an element\n *\n * @param {HTMLElement} el The element that the styles will be applied to\n * @param {Object} styles The map of propName: attribute, both are used as-is\n *\n * @return {HTMLElement} el\n */\nexport const setStyle = (el, styles) => {\n  Object.keys(styles).forEach(prop => {\n    if (el.style[prop] !== styles[prop]) {\n      el.style[prop] = styles[prop];\n    }\n  });\n  return el;\n};\nexport const fittingString = (_ctx, _str, maxWidth) => {\n  let str = _str;\n  let strWidth = _ctx.measureText(str).width;\n  const ellipsis = '…';\n  const ellipsisWidth = _ctx.measureText(ellipsis).width;\n  if (strWidth + ellipsisWidth <= maxWidth) {\n    return str;\n  }\n  let len = str.length;\n  while (strWidth + ellipsisWidth >= maxWidth && len > 0) {\n    str = str.slice(0, len);\n    strWidth = _ctx.measureText(str).width;\n    len -= 1;\n  }\n  return str + ellipsis;\n};\nexport function isPowerOfTwo(nums) {\n  return (nums & nums - 1) === 0;\n}","map":{"version":3,"names":["requestAnimationFrame","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","bind","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","frame","func","args","timeInterval","pxPerSec","retVal","Math","ceil","formatTimeCallback","secs","seconds","Number","minutes","floor","secondsStr","round","toString","toFixed","setStyle","el","styles","Object","keys","forEach","prop","style","fittingString","_ctx","_str","maxWidth","str","strWidth","measureText","width","ellipsis","ellipsisWidth","len","length","slice","isPowerOfTwo","nums"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/common/Wave/utils/index.ts"],"sourcesContent":["/* eslint-disable valid-jsdoc */\n/**\n * Returns the `requestAnimationFrame` function for the browser, or a shim with\n * `setTimeout` if the function is not found\n *\n * @return {function} Available `requestAnimationFrame` function for the browser\n */\nexport const requestAnimationFrame = (\n  window.requestAnimationFrame ||\n  (window as any).webkitRequestAnimationFrame ||\n  (window as any).mozRequestAnimationFrame ||\n  (window as any).oRequestAnimationFrame ||\n  (window as any).msRequestAnimationFrame ||\n  ((callback) => setTimeout(callback, 1000 / 60))\n).bind(window);\n\nexport const cancelAnimationFrame = (\n  window.cancelAnimationFrame ||\n  (window as any).webkitCancelAnimationFrame ||\n  (window as any).mozCancelAnimationFrame ||\n  (window as any).oCancelAnimationFrame ||\n  (window as any).msCancelAnimationFrame ||\n  ((callback) => clearTimeout(callback))\n).bind(window);\n\n/**\n * Create a function which will be called at the next requestAnimationFrame\n * cycle\n *\n * @param {function} func The function to call\n *\n * @return {func} The function wrapped within a requestAnimationFrame\n */\nexport function frame(func: any) {\n  return (...args: any) => requestAnimationFrame(() => func(...args));\n}\n\nexport const timeInterval = (pxPerSec: number) => {\n  let retVal = 1;\n  if (pxPerSec >= 1000) {\n    retVal = 0.01;\n  } else if (pxPerSec >= 500) {\n    retVal = 0.02;\n  } else if (pxPerSec >= 100) {\n    retVal = 0.1;\n  } else if (pxPerSec >= 50) {\n    retVal = 0.2;\n  } else if (pxPerSec >= 10) {\n    retVal = 1;\n  } else if (pxPerSec >= 5) {\n    retVal = 12;\n  } else if (pxPerSec >= 1) {\n    retVal = 24;\n  } else if (pxPerSec >= 0.5) {\n    retVal = 120;\n  } else if (pxPerSec >= 0.01) {\n    retVal = 600;\n  } else {\n    retVal = Math.ceil(1 / pxPerSec) * 60;\n  }\n  return retVal;\n};\n\nexport const formatTimeCallback = (secs: number, pxPerSec: number) => {\n  let seconds = Number(secs);\n  const minutes = Math.floor(seconds / 60);\n  seconds %= 60;\n\n  // fill up seconds with zeroes\n  let secondsStr = Math.round(seconds).toString();\n  if (pxPerSec >= 25 * 10) {\n    secondsStr = seconds.toFixed(2);\n  } else if (pxPerSec >= 25 * 1) {\n    secondsStr = seconds.toFixed(1);\n  }\n  secondsStr = seconds >= 10 ? secondsStr : `0${secondsStr}`;\n  return `${minutes || '00'}:${secondsStr}`;\n};\n\n/**\n * Apply a map of styles to an element\n *\n * @param {HTMLElement} el The element that the styles will be applied to\n * @param {Object} styles The map of propName: attribute, both are used as-is\n *\n * @return {HTMLElement} el\n */\nexport const setStyle = (el: HTMLElement, styles: {[key: string]: any}) => {\n  Object.keys(styles).forEach((prop) => {\n    if ((el.style as any)[prop] !== styles[prop]) {\n      (el.style as any)[prop] = styles[prop];\n    }\n  });\n  return el;\n};\n\nexport const fittingString = (_ctx: CanvasRenderingContext2D, _str: string, maxWidth: number) => {\n  let str = _str;\n  let strWidth = _ctx.measureText(str).width;\n  const ellipsis = '…';\n  const ellipsisWidth = _ctx.measureText(ellipsis).width;\n  if ((strWidth + ellipsisWidth) <= maxWidth) {\n    return str;\n  }\n  let len = str.length;\n  while ((strWidth + ellipsisWidth) >= maxWidth && len > 0) {\n    str = str.slice(0, len);\n    strWidth = _ctx.measureText(str).width;\n    len -= 1;\n  }\n  return str + ellipsis;\n};\n\nexport function isPowerOfTwo(nums: number) {\n  return (nums & nums - 1) === 0;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}