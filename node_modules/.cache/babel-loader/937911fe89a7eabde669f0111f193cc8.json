{"ast":null,"code":"import React from'react';import{observer}from'mobx-react';import{getReviewRelatedInstanceInfo}from'./ReviewModal';import store from'../../store/RootStore';import i18n from'../../locales';import'./ReviewComment.scss';import{ReviewResult}from'../../types';const commentWidth=348;const ReviewComment=observer(()=>{var _hoveredReview$type;const{reviewLayerOffset,hoveredReview,hoveredAnchor}=store.review;if(!hoveredReview||!hoveredAnchor){return null;}const{x,y}=hoveredAnchor.container.toGlobal({x:hoveredReview.x,y:hoveredReview.y});const left=x+reviewLayerOffset.x;const top=y+reviewLayerOffset.y;let cLeft=left+32;if(cLeft+commentWidth>document.body.clientWidth){cLeft=left-commentWidth-32;}const cTop=top-32;return/*#__PURE__*/React.createElement(\"div\",{className:\"review-comment\",style:{width:commentWidth,left:cLeft,top:cTop}},/*#__PURE__*/React.createElement(\"div\",{className:\"review-comment-title\"},hoveredReview.result===ReviewResult.APPROVE&&i18n.translate('REVIEW_APPROVE_TITLE'),hoveredReview.result===ReviewResult.REJECT&&i18n.translate('REVIEW_REJECT_TITLE'),hoveredReview.result===ReviewResult.SUSPEND&&i18n.translate('REVIEW_SUSPEND_TITLE')),/*#__PURE__*/React.createElement(\"div\",{className:\"review-comment-content\"},\"[\".concat(getReviewRelatedInstanceInfo(hoveredReview).infoStr,\"] \"),\"[\".concat(i18n.translate('FRAME_ATTRIBUTES_FRAME',{values:{frame:store.frame.currentFrame+1}}),\"]\"),(_hoveredReview$type=hoveredReview.type)===null||_hoveredReview$type===void 0?void 0:_hoveredReview$type.join(';'),/*#__PURE__*/React.createElement(\"div\",{className:\"img-container\"// eslint-disable-next-line react/no-danger\n,dangerouslySetInnerHTML:{__html:hoveredReview.comment||''}})));});export default ReviewComment;","map":{"version":3,"names":["React","observer","getReviewRelatedInstanceInfo","store","i18n","ReviewResult","commentWidth","ReviewComment","_hoveredReview$type","reviewLayerOffset","hoveredReview","hoveredAnchor","review","x","y","container","toGlobal","left","top","cLeft","document","body","clientWidth","cTop","createElement","className","style","width","result","APPROVE","translate","REJECT","SUSPEND","concat","infoStr","values","frame","currentFrame","type","join","dangerouslySetInnerHTML","__html","comment"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/review/ReviewComment.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { getReviewRelatedInstanceInfo } from './ReviewModal';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './ReviewComment.scss';\nimport { ReviewResult } from '../../types';\n\nconst commentWidth = 348;\n\nconst ReviewComment = observer(() => {\n  const { reviewLayerOffset, hoveredReview, hoveredAnchor } = store.review;\n\n  if (!hoveredReview || !hoveredAnchor) {\n    return null;\n  }\n\n  const { x, y } = hoveredAnchor.container.toGlobal({ x: hoveredReview.x, y: hoveredReview.y });\n  const left = x + reviewLayerOffset.x;\n  const top = y + reviewLayerOffset.y;\n  let cLeft = left + 32;\n  if (cLeft + commentWidth > document.body.clientWidth) {\n    cLeft = left - commentWidth - 32;\n  }\n  const cTop = top - 32;\n  return (\n    <div className=\"review-comment\" style={{ width: commentWidth, left: cLeft, top: cTop }}>\n      <div className=\"review-comment-title\">\n        {hoveredReview.result === ReviewResult.APPROVE && i18n.translate('REVIEW_APPROVE_TITLE')}\n        {hoveredReview.result === ReviewResult.REJECT && i18n.translate('REVIEW_REJECT_TITLE')}\n        {hoveredReview.result === ReviewResult.SUSPEND && i18n.translate('REVIEW_SUSPEND_TITLE')}\n      </div>\n      <div className=\"review-comment-content\">\n        {`[${getReviewRelatedInstanceInfo(hoveredReview).infoStr}] `}\n        {`[${i18n.translate('FRAME_ATTRIBUTES_FRAME', { values: { frame: store.frame.currentFrame + 1 } })}]`}\n        {hoveredReview.type?.join(';')}\n        <div\n          className=\"img-container\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: hoveredReview.comment || '' }}\n        />\n      </div>\n    </div>\n  );\n});\n\nexport default ReviewComment;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,YAAY,CACrC,OAASC,4BAA4B,KAAQ,eAAe,CAC5D,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CACzC,MAAO,CAAAC,IAAI,KAAM,eAAe,CAChC,MAAO,sBAAsB,CAC7B,OAASC,YAAY,KAAQ,aAAa,CAE1C,KAAM,CAAAC,YAAY,CAAG,GAAG,CAExB,KAAM,CAAAC,aAAa,CAAGN,QAAQ,CAAC,IAAM,KAAAO,mBAAA,CACnC,KAAM,CAAEC,iBAAiB,CAAEC,aAAa,CAAEC,aAAc,CAAC,CAAGR,KAAK,CAACS,MAAM,CAExE,GAAI,CAACF,aAAa,EAAI,CAACC,aAAa,CAAE,CACpC,MAAO,KAAI,CACb,CAEA,KAAM,CAAEE,CAAC,CAAEC,CAAE,CAAC,CAAGH,aAAa,CAACI,SAAS,CAACC,QAAQ,CAAC,CAAEH,CAAC,CAAEH,aAAa,CAACG,CAAC,CAAEC,CAAC,CAAEJ,aAAa,CAACI,CAAE,CAAC,CAAC,CAC7F,KAAM,CAAAG,IAAI,CAAGJ,CAAC,CAAGJ,iBAAiB,CAACI,CAAC,CACpC,KAAM,CAAAK,GAAG,CAAGJ,CAAC,CAAGL,iBAAiB,CAACK,CAAC,CACnC,GAAI,CAAAK,KAAK,CAAGF,IAAI,CAAG,EAAE,CACrB,GAAIE,KAAK,CAAGb,YAAY,CAAGc,QAAQ,CAACC,IAAI,CAACC,WAAW,CAAE,CACpDH,KAAK,CAAGF,IAAI,CAAGX,YAAY,CAAG,EAAE,CAClC,CACA,KAAM,CAAAiB,IAAI,CAAGL,GAAG,CAAG,EAAE,CACrB,mBACElB,KAAA,CAAAwB,aAAA,QAAKC,SAAS,CAAC,gBAAgB,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAErB,YAAY,CAAEW,IAAI,CAAEE,KAAK,CAAED,GAAG,CAAEK,IAAK,CAAE,eACrFvB,KAAA,CAAAwB,aAAA,QAAKC,SAAS,CAAC,sBAAsB,EAClCf,aAAa,CAACkB,MAAM,GAAKvB,YAAY,CAACwB,OAAO,EAAIzB,IAAI,CAAC0B,SAAS,CAAC,sBAAsB,CAAC,CACvFpB,aAAa,CAACkB,MAAM,GAAKvB,YAAY,CAAC0B,MAAM,EAAI3B,IAAI,CAAC0B,SAAS,CAAC,qBAAqB,CAAC,CACrFpB,aAAa,CAACkB,MAAM,GAAKvB,YAAY,CAAC2B,OAAO,EAAI5B,IAAI,CAAC0B,SAAS,CAAC,sBAAsB,CACpF,CAAC,cACN9B,KAAA,CAAAwB,aAAA,QAAKC,SAAS,CAAC,wBAAwB,MAAAQ,MAAA,CAChC/B,4BAA4B,CAACQ,aAAa,CAAC,CAACwB,OAAO,WAAAD,MAAA,CACnD7B,IAAI,CAAC0B,SAAS,CAAC,wBAAwB,CAAE,CAAEK,MAAM,CAAE,CAAEC,KAAK,CAAEjC,KAAK,CAACiC,KAAK,CAACC,YAAY,CAAG,CAAE,CAAE,CAAC,CAAC,OAAA7B,mBAAA,CACjGE,aAAa,CAAC4B,IAAI,UAAA9B,mBAAA,iBAAlBA,mBAAA,CAAoB+B,IAAI,CAAC,GAAG,CAAC,cAC9BvC,KAAA,CAAAwB,aAAA,QACEC,SAAS,CAAC,eACV;AAAA,CACAe,uBAAuB,CAAE,CAAEC,MAAM,CAAE/B,aAAa,CAACgC,OAAO,EAAI,EAAG,CAAE,CAClE,CACE,CACF,CAAC,CAEV,CAAC,CAAC,CAEF,cAAe,CAAAnC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module"}