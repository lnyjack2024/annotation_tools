{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/relationship/RelationshipModal.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { Switch } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './RelationshipModal.scss';\nconst relationshipModalWidth = 348;\nconst RelationshipModal = observer(() => {\n  const {\n    relationshipModalVisible\n  } = store.config;\n  const {\n    editingRelationship,\n    editingConnection\n  } = store.relationship;\n  if (!relationshipModalVisible || !editingRelationship || !editingConnection) {\n    return null;\n  }\n  const textBox = editingConnection.text.getBoundingClientRect();\n  const lineBox = editingConnection.line.getBoundingClientRect();\n  let left = textBox.right + 12;\n  let top = textBox.top - 12;\n  if (textBox.top < lineBox.top) {\n    top = textBox.top - 180;\n  }\n  if (top < 72) {\n    top = textBox.bottom - 12;\n  }\n  if (left + relationshipModalWidth > window.innerWidth) {\n    left = textBox.left - relationshipModalWidth - 12;\n  }\n  const {\n    options\n  } = store.relationship;\n  const {\n    fromInstanceItem,\n    toInstanceItem,\n    fromCamera,\n    toCamera,\n    relationship\n  } = editingRelationship;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-modal-mask\",\n    onClick: store.relationship.finishUpdate,\n    onContextMenu: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-modal\",\n    style: {\n      width: relationshipModalWidth,\n      left,\n      top\n    },\n    onClick: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, i18n.translate('RELATIONSHIP_MODAL_TITLE')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-connection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-connection-line__start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-connection-line__end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-connection-switch\",\n    onClick: store.relationship.switch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-items-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-items-item__dot\",\n    style: {\n      backgroundColor: fromInstanceItem.categoryItemRef.displayColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }), `${fromInstanceItem.label}${store.frame.isSingleCamera ? '' : `-${fromCamera}`}`), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"relationship-items-select\",\n    value: relationship,\n    onChange: e => store.relationship.updateName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, options.map(o => /*#__PURE__*/React.createElement(\"option\", {\n    key: o.name,\n    value: o.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, o.name))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-items-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-items-item__dot\",\n    style: {\n      backgroundColor: toInstanceItem.categoryItemRef.displayColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }), `${toInstanceItem.label}${store.frame.isSingleCamera ? '' : `-${toCamera}`}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-btn\",\n    onClick: store.relationship.deleteFromCurrentFrame,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, i18n.translate('COMMON_DELETE')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-btn save\",\n    onClick: store.relationship.finishUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, i18n.translate('COMMON_SAVE'))))));\n});\nexport default RelationshipModal;","map":{"version":3,"names":["React","observer","Switch","store","i18n","relationshipModalWidth","RelationshipModal","relationshipModalVisible","config","editingRelationship","editingConnection","relationship","textBox","text","getBoundingClientRect","lineBox","line","left","right","top","bottom","window","innerWidth","options","fromInstanceItem","toInstanceItem","fromCamera","toCamera","createElement","className","onClick","finishUpdate","onContextMenu","e","preventDefault","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","width","stopPropagation","translate","switch","backgroundColor","categoryItemRef","displayColor","label","frame","isSingleCamera","value","onChange","updateName","target","map","o","key","name","deleteFromCurrentFrame"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/relationship/RelationshipModal.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { Switch } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './RelationshipModal.scss';\n\nconst relationshipModalWidth = 348;\n\nconst RelationshipModal = observer(() => {\n  const { relationshipModalVisible } = store.config;\n  const { editingRelationship, editingConnection } = store.relationship;\n  if (!relationshipModalVisible || !editingRelationship || !editingConnection) {\n    return null;\n  }\n\n  const textBox = editingConnection.text.getBoundingClientRect();\n  const lineBox = editingConnection.line.getBoundingClientRect();\n\n  let left = textBox.right + 12;\n  let top = textBox.top - 12;\n  if (textBox.top < lineBox.top) {\n    top = textBox.top - 180;\n  }\n  if (top < 72) {\n    top = textBox.bottom - 12;\n  }\n  if (left + relationshipModalWidth > window.innerWidth) {\n    left = textBox.left - relationshipModalWidth - 12;\n  }\n\n  const { options } = store.relationship;\n  const { fromInstanceItem, toInstanceItem, fromCamera, toCamera, relationship } = editingRelationship;\n  return (\n    <div\n      className=\"relationship-modal-mask\"\n      onClick={store.relationship.finishUpdate}\n      onContextMenu={(e) => e.preventDefault()}\n    >\n      <div\n        className=\"relationship-modal\"\n        style={{ width: relationshipModalWidth, left, top }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"relationship-modal-title\">\n          {i18n.translate('RELATIONSHIP_MODAL_TITLE')}\n        </div>\n        <div className=\"relationship-modal-content\">\n          <div className=\"relationship-info\">\n            <div className=\"relationship-connection\">\n              <div className=\"relationship-connection-line__start\" />\n              <div className=\"relationship-connection-line__end\" />\n              <div\n                className=\"relationship-connection-switch\"\n                onClick={store.relationship.switch}\n              >\n                <Switch />\n              </div>\n            </div>\n            <div className=\"relationship-items\">\n              <div className=\"relationship-items-item\">\n                <div\n                  className=\"relationship-items-item__dot\"\n                  style={{ backgroundColor: fromInstanceItem.categoryItemRef.displayColor }}\n                />\n                {`${fromInstanceItem.label}${store.frame.isSingleCamera ? '' : `-${fromCamera}`}`}\n              </div>\n              <select\n                className=\"relationship-items-select\"\n                value={relationship}\n                onChange={(e) => store.relationship.updateName(e.target.value)}\n              >\n                {options.map((o) => (\n                  <option key={o.name} value={o.name}>{o.name}</option>\n                ))}\n              </select>\n              <div className=\"relationship-items-item\">\n                <div\n                  className=\"relationship-items-item__dot\"\n                  style={{ backgroundColor: toInstanceItem.categoryItemRef.displayColor }}\n                />\n                {`${toInstanceItem.label}${store.frame.isSingleCamera ? '' : `-${toCamera}`}`}\n              </div>\n            </div>\n          </div>\n          <div className=\"relationship-action\">\n            <div\n              className=\"relationship-btn\"\n              onClick={store.relationship.deleteFromCurrentFrame}\n            >\n              {i18n.translate('COMMON_DELETE')}\n            </div>\n            <div\n              className=\"relationship-btn save\"\n              onClick={store.relationship.finishUpdate}\n            >\n              {i18n.translate('COMMON_SAVE')}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default RelationshipModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}