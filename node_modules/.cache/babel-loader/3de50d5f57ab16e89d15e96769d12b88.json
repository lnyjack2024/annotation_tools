{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/Validation/Validation.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Validator from '../../../common/validator/Validator';\nimport { translate, formatTimestamp } from '../../constants';\nimport { isAnnotationReadonly } from '../../../../utils/tool-mode';\nimport { setCurrentSegment } from '../../redux/action';\nimport './Validation.scss';\nconst WarningNameHeight = 28;\nconst ValidationTypes = {\n  custom: 'custom'\n};\nconst ValidationTypeTitles = {\n  [ValidationTypes.custom]: translate('VALIDATION_CUSTOM')\n};\nclass Validation extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      warnings: [],\n      errors: {}\n    };\n    this.runScriptValidation = async resultLink => {\n      const scriptResults = [];\n      let hasScriptError = false;\n      try {\n        var _this$props$jobProxy$, _this$props$jobProxy;\n        const validateResults = (await ((_this$props$jobProxy$ = (_this$props$jobProxy = this.props.jobProxy).validateContent) === null || _this$props$jobProxy$ === void 0 ? void 0 : _this$props$jobProxy$.call(_this$props$jobProxy, resultLink, this.props.jobProxy.flowData))) || [];\n        validateResults.forEach(result => {\n          var _result$data;\n          const out = JSON.parse((result === null || result === void 0 ? void 0 : (_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.out_str) || '{}');\n          if ((result === null || result === void 0 ? void 0 : result.status_code) === 200 && Array.isArray(out)) {\n            out.forEach(item => {\n              scriptResults.push({\n                id: item.id,\n                message: item.message,\n                frames: item.frames,\n                info: {\n                  ...item.info\n                },\n                blockSubmit: item.blockSubmit\n              });\n            });\n          } else {\n            hasScriptError = true;\n          }\n        });\n      } catch (error) {\n        hasScriptError = true;\n        console.log('script validation error', error);\n      }\n      return {\n        scriptResults,\n        hasScriptError\n      };\n    };\n    this.handleValidate = async () => {\n      // generate result link\n      let resultLink = '';\n      if (typeof this.props.jobProxy.reviewFrom === 'string') {\n        resultLink = this.props.jobProxy.reviewFrom;\n      }\n      if (!isAnnotationReadonly(this.props.jobProxy.toolMode)) {\n        try {\n          resultLink = await this.props.saveResult();\n        } catch (e) {\n          resultLink = '';\n        }\n      }\n\n      // run script validation\n      const {\n        scriptResults,\n        hasScriptError\n      } = this.props.scriptCheck ? await this.runScriptValidation(resultLink) : {\n        scriptResults: [],\n        hasScriptError: false\n      };\n      const warnings = Array.from({\n        length: this.props.allResults.length\n      }).map(() => []);\n      [...scriptResults].forEach(warning => {\n        const {\n          frames,\n          info = {}\n        } = warning;\n        let videoIndex = 0; // default video index is 0\n        if (info.videoIndex !== undefined && Number(info.videoIndex) >= 0) {\n          // if video index provided in info, use it\n          videoIndex = Number(info.videoIndex);\n        } else if (Array.isArray(frames) && frames.length > 0 && Number(frames[0]) >= 0) {\n          // if video index not provided, try to get from frames\n          videoIndex = Number(frames[0]);\n        }\n        warnings[videoIndex].push({\n          ...warning,\n          type: ValidationTypes.custom\n        });\n      });\n      this.setState({\n        warnings,\n        errors: {\n          [ValidationTypes.custom]: hasScriptError ? translate('VALIDATION_CUSTOM_ERROR') : ''\n        }\n      });\n      return {\n        hasCustomError: false,\n        blockSubmitErrors: warnings.map(videoWarnings => videoWarnings.filter(warning => warning.type === ValidationTypes.custom && warning.blockSubmit === true))\n      };\n    };\n    this.handleAction = warning => {\n      const segResultIndex = this.props.allResults[this.props.currentVideo].findIndex(r => r.id === warning.id);\n      if (segResultIndex < 0) {\n        return;\n      }\n      this.props.setCurrentSegment({\n        index: segResultIndex\n      });\n    };\n    this.renderWarningTitle = warning => {\n      const currentResults = this.props.allResults[this.props.currentVideo];\n      const segResultIndex = currentResults.findIndex(r => r.id === warning.id);\n      if (segResultIndex < 0) {\n        return translate('VALIDATION_ITEM_INVALID');\n      }\n      const {\n        start,\n        end,\n        content\n      } = currentResults[segResultIndex];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"seg-bar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }\n      }, content.map((c, i) => {\n        const color = c.role === 'none' ? 'rgba(255, 255, 255, 0.6)' : this.props.ontology.get(c.role);\n        const radiusLT = i === 0;\n        const radiusLB = i === content.length - 1;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: c.role,\n          className: \"seg-bar-item\",\n          style: {\n            background: color,\n            height: WarningNameHeight / content.length,\n            ...(radiusLT && {\n              borderTopLeftRadius: '2px'\n            }),\n            ...(radiusLB && {\n              borderBottomLeftRadius: '2px'\n            })\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }\n        });\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"seg-index\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }\n      }, segResultIndex + 1), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"seg-time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }\n      }, `${(end - start).toFixed(3)}s (${formatTimestamp(start)}-${formatTimestamp(end)})`));\n    };\n  }\n  get hasValidation() {\n    return this.props.scriptCheck;\n  }\n  render() {\n    const {\n      allResults,\n      currentVideo\n    } = this.props;\n    const {\n      warnings,\n      errors\n    } = this.state;\n    return this.hasValidation && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"audio-validation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Validator, {\n      containerWidth: 420,\n      containerHeight: \"calc(100% - 282px)\",\n      validationTypes: ValidationTypeTitles,\n      warnings: warnings[currentVideo] || [],\n      errors: errors,\n      onValidate: this.handleValidate,\n      renderWarningTitle: this.renderWarningTitle,\n      showWarningAction: w => allResults[currentVideo].findIndex(r => r.id === w.id) >= 0,\n      onWarningAction: this.handleAction,\n      titleFormatter: count => `${count} ${translate('VALIDATION_TITLE')}`,\n      checkingMsgFormatter: () => translate('VALIDATION_CHECKING'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }));\n  }\n}\nconst mapStateToProps = state => ({\n  scriptCheck: state.scriptCheck,\n  ontology: state.ontology,\n  allResults: state.results,\n  currentVideo: state.currentVideo\n});\nconst mapDispatchToProps = {\n  setCurrentSegment\n};\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true\n})(Validation);","map":{"version":3,"names":["React","connect","Validator","translate","formatTimestamp","isAnnotationReadonly","setCurrentSegment","WarningNameHeight","ValidationTypes","custom","ValidationTypeTitles","Validation","Component","constructor","args","state","warnings","errors","runScriptValidation","resultLink","scriptResults","hasScriptError","_this$props$jobProxy$","_this$props$jobProxy","validateResults","props","jobProxy","validateContent","call","flowData","forEach","result","_result$data","out","JSON","parse","data","out_str","status_code","Array","isArray","item","push","id","message","frames","info","blockSubmit","error","console","log","handleValidate","reviewFrom","toolMode","saveResult","e","scriptCheck","from","length","allResults","map","warning","videoIndex","undefined","Number","type","setState","hasCustomError","blockSubmitErrors","videoWarnings","filter","handleAction","segResultIndex","currentVideo","findIndex","r","index","renderWarningTitle","currentResults","start","end","content","createElement","Fragment","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","c","i","color","role","ontology","get","radiusLT","radiusLB","key","style","background","height","borderTopLeftRadius","borderBottomLeftRadius","toFixed","hasValidation","render","containerWidth","containerHeight","validationTypes","onValidate","showWarningAction","w","onWarningAction","titleFormatter","count","checkingMsgFormatter","mapStateToProps","results","mapDispatchToProps","forwardRef"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/Validation/Validation.jsx"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport Validator from '../../../common/validator/Validator';\nimport { translate, formatTimestamp } from '../../constants';\nimport { isAnnotationReadonly } from '../../../../utils/tool-mode';\nimport { setCurrentSegment } from '../../redux/action';\nimport './Validation.scss';\n\nconst WarningNameHeight = 28;\nconst ValidationTypes = {\n  custom: 'custom',\n};\nconst ValidationTypeTitles = {\n  [ValidationTypes.custom]: translate('VALIDATION_CUSTOM'),\n};\n\nclass Validation extends React.Component {\n  state = {\n    warnings: [],\n    errors: {},\n  };\n\n  get hasValidation() {\n    return this.props.scriptCheck;\n  }\n\n  runScriptValidation = async (resultLink) => {\n    const scriptResults = [];\n    let hasScriptError = false;\n    try {\n      const validateResults = await this.props.jobProxy.validateContent?.(resultLink, this.props.jobProxy.flowData) || [];\n      validateResults.forEach((result) => {\n        const out = JSON.parse(result?.data?.out_str || '{}');\n        if (result?.status_code === 200 && Array.isArray(out)) {\n          out.forEach((item) => {\n            scriptResults.push({\n              id: item.id,\n              message: item.message,\n              frames: item.frames,\n              info: { ...item.info },\n              blockSubmit: item.blockSubmit,\n            });\n          });\n        } else {\n          hasScriptError = true;\n        }\n      });\n    } catch (error) {\n      hasScriptError = true;\n      console.log('script validation error', error);\n    }\n    return { scriptResults, hasScriptError };\n  };\n\n  handleValidate = async () => {\n    // generate result link\n    let resultLink = '';\n    if (typeof this.props.jobProxy.reviewFrom === 'string') {\n      resultLink = this.props.jobProxy.reviewFrom;\n    }\n    if (!isAnnotationReadonly(this.props.jobProxy.toolMode)) {\n      try {\n        resultLink = await this.props.saveResult();\n      } catch (e) {\n        resultLink = '';\n      }\n    }\n\n    // run script validation\n    const { scriptResults, hasScriptError } = this.props.scriptCheck ?\n      await this.runScriptValidation(resultLink) :\n      { scriptResults: [], hasScriptError: false };\n\n    const warnings = Array.from({ length: this.props.allResults.length }).map(() => []);\n\n    [...scriptResults].forEach((warning) => {\n      const { frames, info = {} } = warning;\n\n      let videoIndex = 0; // default video index is 0\n      if (info.videoIndex !== undefined && Number(info.videoIndex) >= 0) {\n        // if video index provided in info, use it\n        videoIndex = Number(info.videoIndex);\n      } else if (Array.isArray(frames) && frames.length > 0 && Number(frames[0]) >= 0) {\n        // if video index not provided, try to get from frames\n        videoIndex = Number(frames[0]);\n      }\n\n      warnings[videoIndex].push({\n        ...warning,\n        type: ValidationTypes.custom,\n      });\n    });\n\n    this.setState({\n      warnings,\n      errors: {\n        [ValidationTypes.custom]: (hasScriptError) ? translate('VALIDATION_CUSTOM_ERROR') : '',\n      },\n    });\n\n    return {\n      hasCustomError: false,\n      blockSubmitErrors: warnings.map((videoWarnings) => videoWarnings.filter((warning) => warning.type === ValidationTypes.custom && warning.blockSubmit === true)),\n    };\n  };\n\n  handleAction = (warning) => {\n    const segResultIndex = this.props.allResults[this.props.currentVideo].findIndex((r) => r.id === warning.id);\n    if (segResultIndex < 0) {\n      return;\n    }\n    this.props.setCurrentSegment({ index: segResultIndex });\n  };\n\n  renderWarningTitle = (warning) => {\n    const currentResults = this.props.allResults[this.props.currentVideo];\n    const segResultIndex = currentResults.findIndex((r) => r.id === warning.id);\n    if (segResultIndex < 0) {\n      return translate('VALIDATION_ITEM_INVALID');\n    }\n    const { start, end, content } = currentResults[segResultIndex];\n    return (\n      <>\n        <div className=\"seg-bar\">\n          {content.map((c, i) => {\n            const color = c.role === 'none' ? 'rgba(255, 255, 255, 0.6)' : this.props.ontology.get(c.role);\n            const radiusLT = i === 0;\n            const radiusLB = i === content.length - 1;\n            return (\n              <div\n                key={c.role}\n                className=\"seg-bar-item\"\n                style={{\n                  background: color,\n                  height: WarningNameHeight / content.length,\n                  ...radiusLT && { borderTopLeftRadius: '2px' },\n                  ...radiusLB && { borderBottomLeftRadius: '2px' },\n                }}\n              />\n            );\n          })}\n        </div>\n        <span className=\"seg-index\">{segResultIndex + 1}</span>\n        <span className=\"seg-time\">\n          {`${(end - start).toFixed(3)}s (${formatTimestamp(start)}-${formatTimestamp(end)})`}\n        </span>\n      </>\n    );\n  };\n\n  render() {\n    const { allResults, currentVideo } = this.props;\n    const { warnings, errors } = this.state;\n    return this.hasValidation && (\n      <div className=\"audio-validation\">\n        <Validator\n          containerWidth={420}\n          containerHeight=\"calc(100% - 282px)\"\n          validationTypes={ValidationTypeTitles}\n          warnings={warnings[currentVideo] || []}\n          errors={errors}\n          onValidate={this.handleValidate}\n          renderWarningTitle={this.renderWarningTitle}\n          showWarningAction={(w) => allResults[currentVideo].findIndex((r) => r.id === w.id) >= 0}\n          onWarningAction={this.handleAction}\n          titleFormatter={(count) => `${count} ${translate('VALIDATION_TITLE')}`}\n          checkingMsgFormatter={() => translate('VALIDATION_CHECKING')}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  scriptCheck: state.scriptCheck,\n  ontology: state.ontology,\n  allResults: state.results,\n  currentVideo: state.currentVideo,\n});\nconst mapDispatchToProps = {\n  setCurrentSegment,\n};\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Validation);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}