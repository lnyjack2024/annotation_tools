{"ast":null,"code":"import React from'react';import cx from'classnames';import Draggable from'react-draggable';import{CloseOutlined}from'@ant-design/icons';import'./Modal.scss';const getPosition=dragId=>{try{const position=JSON.parse(localStorage.getItem(dragId||'modal-posistion')||'{}');return{x:position.x||0,y:position.y||0};}catch(error){return{x:0,y:0};}};const savePosition=(x,y,dragId)=>{localStorage.setItem(dragId||'modal-posistion',JSON.stringify({x,y}));};class Modal extends React.PureComponent{renderContent(){const{className,title,closable,onClose,children}=this.props;return/*#__PURE__*/React.createElement(\"div\",{className:\"annotation-tools-modal \".concat(className)},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},title,closable!==false&&/*#__PURE__*/React.createElement(\"div\",{className:\"close\",onClick:onClose},/*#__PURE__*/React.createElement(CloseOutlined,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},children));}render(){const{visible,draggable,dragId,maskClosable,onClose,onMaskClick}=this.props;return visible&&/*#__PURE__*/React.createElement(\"div\",{className:cx('annotation-tools-mask',{draggable})},/*#__PURE__*/React.createElement(\"div\",{className:\"annotation-tools-layer\",onClick:e=>{e.preventDefault();if(onMaskClick){onMaskClick();}if(maskClosable){onClose();}}}),draggable?/*#__PURE__*/React.createElement(Draggable,{handle:\".title\",bounds:\"parent\",defaultPosition:getPosition(dragId),onStop:(_,data)=>savePosition(data.x,data.y,dragId)},this.renderContent()):this.renderContent());}}export default Modal;","map":{"version":3,"names":["React","cx","Draggable","CloseOutlined","getPosition","dragId","position","JSON","parse","localStorage","getItem","x","y","error","savePosition","setItem","stringify","Modal","PureComponent","renderContent","className","title","closable","onClose","children","props","createElement","concat","onClick","render","visible","draggable","maskClosable","onMaskClick","e","preventDefault","handle","bounds","defaultPosition","onStop","_","data"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/modal/Modal.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\nimport Draggable from 'react-draggable';\nimport { CloseOutlined } from '@ant-design/icons';\nimport './Modal.scss';\n\nconst getPosition = (dragId?: string) => {\n  try {\n    const position = JSON.parse(localStorage.getItem(dragId || 'modal-posistion') || '{}');\n    return { x: position.x || 0, y: position.y || 0 };\n  } catch (error) {\n    return { x: 0, y: 0 };\n  }\n};\nconst savePosition = (x: number, y: number, dragId?: string) => {\n  localStorage.setItem(dragId || 'modal-posistion', JSON.stringify({ x, y }));\n};\n\ninterface ModalProps {\n  children: React.ReactNode;\n  visible: boolean;\n  draggable?: boolean;\n  dragId?: string;\n  title?: string;\n  className?: string;\n  closable?: boolean;\n  maskClosable?: boolean;\n  onClose: () => void;\n  onMaskClick?: () => void;\n}\n\nclass Modal extends React.PureComponent<ModalProps> {\n  renderContent() {\n    const { className, title, closable, onClose, children } = this.props;\n    return (\n      <div className={`annotation-tools-modal ${className}`}>\n        <div className=\"title\">\n          {title}\n          {closable !== false && (\n            <div className=\"close\" onClick={onClose}>\n              <CloseOutlined />\n            </div>\n          )}\n        </div>\n        <div className=\"content\">\n          {children}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { visible, draggable, dragId, maskClosable, onClose, onMaskClick } = this.props;\n    return visible && (\n      <div className={cx('annotation-tools-mask', { draggable })}>\n        <div\n          className=\"annotation-tools-layer\"\n          onClick={(e) => {\n            e.preventDefault();\n            if (onMaskClick) {\n              onMaskClick();\n            }\n            if (maskClosable) {\n              onClose();\n            }\n          }}\n        />\n        {draggable ? (\n          <Draggable\n            handle=\".title\"\n            bounds=\"parent\"\n            defaultPosition={getPosition(dragId)}\n            onStop={(_, data) => savePosition(data.x, data.y, dragId)}\n          >\n            {this.renderContent()}\n          </Draggable>\n        ) : this.renderContent()}\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}