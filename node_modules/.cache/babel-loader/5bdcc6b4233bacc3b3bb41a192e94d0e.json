{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/dialogue/components/Content.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { Button } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport Instruction from '../../common/llm/instruction/Instruction';\nimport ChatItem, { ChatItemType } from '../../common/llm/chat/ChatItem';\nimport store from '../store';\nimport i18n from '../locales';\nconst Content = observer(() => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Instruction, {\n  value: toJS(store.instruction),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }\n}), store.dialogue.map(dialogueItem => {\n  var _store$selectedDialog;\n  const selected = dialogueItem.id === ((_store$selectedDialog = store.selectedDialogueItem) === null || _store$selectedDialog === void 0 ? void 0 : _store$selectedDialog.id);\n  const valueEditable = !store.readonly && (!dialogueItem.original || store.editable);\n  return /*#__PURE__*/React.createElement(ChatItem, Object.assign({\n    key: dialogueItem.id,\n    type: dialogueItem.type,\n    label: dialogueItem.type === ChatItemType.A ? 'B' : 'A',\n    value: toJS(dialogueItem.value),\n    onValueChange: value => store.updateDialogueItem(dialogueItem, value),\n    originalValue: toJS(dialogueItem.originalValue),\n    error: selected && store.hasError,\n    selected: selected,\n    onSelect: () => store.selectDialogueItem(dialogueItem),\n    valueEditable: valueEditable,\n    valueEditing: selected && store.isEditing,\n    onValueEdit: () => store.editDialogueItem(dialogueItem)\n  }, dialogueItem.type === ChatItemType.A && {\n    rankingType: store.rankingType,\n    rankingOptions: toJS(store.rankingOptions),\n    rankEditable: !store.readonly && store.ranking,\n    rankEditing: selected && store.isRanking,\n    onRankEdit: () => store.rankDialogueItem(dialogueItem),\n    rank: toJS(dialogueItem.rank),\n    onRankChange: rank => store.saveRank(dialogueItem, rank),\n    attributesEditable: !store.readonly,\n    itemAttributesConfig: store.itemAttributesConfig,\n    attributesEditing: selected && store.isItemAttributesEditing,\n    attributes: toJS(dialogueItem.attributes),\n    onItemAttributesEdit: () => store.onItemAttributesEdit(dialogueItem),\n    onItemAttributesChange: attributes => store.saveItemAttributes(dialogueItem, attributes),\n    onItemAttributesDelete: () => store.deleteItemAttributes(dialogueItem)\n  }, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 9\n    }\n  }));\n}), store.initialized && !store.readonly && store.addible && /*#__PURE__*/React.createElement(ChatItem, {\n  type: store.nextDialogueItemType,\n  label: store.nextDialogueItemType === ChatItemType.A ? 'B' : 'A',\n  error: store.isAdding && store.hasError,\n  selected: store.isAdding,\n  valueEditing: store.isAdding,\n  noValueContent: /*#__PURE__*/React.createElement(\"div\", {\n    className: \"llm-chat-item-content-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      marginTop: store.canAddDialogueItem ? 4 : 0\n    },\n    disabled: !store.canAddDialogueItem,\n    icon: /*#__PURE__*/React.createElement(PlusOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    }),\n    onClick: store.addDialogueItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, i18n.translate('CHAT_ITEM_ADD')), !store.canAddDialogueItem && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: 12,\n      color: '#99A0B2',\n      marginTop: 4,\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'inherit'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }, i18n.translate('CHAT_ITEM_MEET_LIMIT'))),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 7\n  }\n})));\nexport default Content;","map":{"version":3,"names":["React","observer","toJS","Button","PlusOutlined","Instruction","ChatItem","ChatItemType","store","i18n","Content","createElement","Fragment","value","instruction","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","dialogue","map","dialogueItem","_store$selectedDialog","selected","id","selectedDialogueItem","valueEditable","readonly","original","editable","Object","assign","key","type","label","A","onValueChange","updateDialogueItem","originalValue","error","hasError","onSelect","selectDialogueItem","valueEditing","isEditing","onValueEdit","editDialogueItem","rankingType","rankingOptions","rankEditable","ranking","rankEditing","isRanking","onRankEdit","rankDialogueItem","rank","onRankChange","saveRank","attributesEditable","itemAttributesConfig","attributesEditing","isItemAttributesEditing","attributes","onItemAttributesEdit","onItemAttributesChange","saveItemAttributes","onItemAttributesDelete","deleteItemAttributes","initialized","addible","nextDialogueItemType","isAdding","noValueContent","className","style","marginTop","canAddDialogueItem","disabled","icon","onClick","addDialogueItem","translate","fontSize","color","width","display","justifyContent"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/dialogue/components/Content.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { Button } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport Instruction from '../../common/llm/instruction/Instruction';\nimport ChatItem, { ChatItemType } from '../../common/llm/chat/ChatItem';\nimport { LLMModel } from '../../common/llm/types';\nimport store from '../store';\nimport i18n from '../locales';\n\nconst Content: React.FC = observer(() => (\n  <>\n    <Instruction value={toJS(store.instruction)} />\n    {store.dialogue.map((dialogueItem) => {\n      const selected = dialogueItem.id === store.selectedDialogueItem?.id;\n      const valueEditable = !store.readonly && (!dialogueItem.original || store.editable);\n      return (\n        <ChatItem\n          key={dialogueItem.id}\n          type={dialogueItem.type}\n          label={dialogueItem.type === ChatItemType.A ? 'B' : 'A'}\n          value={toJS(dialogueItem.value)}\n          onValueChange={(value) => store.updateDialogueItem(dialogueItem, value)}\n          originalValue={toJS(dialogueItem.originalValue)}\n          error={selected && store.hasError}\n          selected={selected}\n          onSelect={() => store.selectDialogueItem(dialogueItem)}\n          valueEditable={valueEditable}\n          valueEditing={selected && store.isEditing}\n          onValueEdit={() => store.editDialogueItem(dialogueItem)}\n          {...dialogueItem.type === ChatItemType.A && {\n            rankingType: store.rankingType,\n            rankingOptions: toJS(store.rankingOptions),\n            rankEditable: !store.readonly && store.ranking,\n            rankEditing: selected && store.isRanking,\n            onRankEdit: () => store.rankDialogueItem(dialogueItem),\n            rank: toJS(dialogueItem.rank),\n            onRankChange: (rank) => store.saveRank(dialogueItem, rank),\n            attributesEditable: !store.readonly,\n            itemAttributesConfig: store.itemAttributesConfig,\n            attributesEditing: selected && store.isItemAttributesEditing,\n            attributes: toJS(dialogueItem.attributes),\n            onItemAttributesEdit: () => store.onItemAttributesEdit(dialogueItem),\n            onItemAttributesChange: (attributes) => store.saveItemAttributes(dialogueItem, attributes),\n            onItemAttributesDelete: () => store.deleteItemAttributes(dialogueItem),\n          }}\n        />\n      );\n    })}\n    {store.initialized && !store.readonly && store.addible && (\n      <ChatItem\n        type={store.nextDialogueItemType}\n        label={store.nextDialogueItemType === ChatItemType.A ? 'B' : 'A'}\n        error={store.isAdding && store.hasError}\n        selected={store.isAdding}\n        valueEditing={store.isAdding}\n        noValueContent={(\n          <div className=\"llm-chat-item-content-container\">\n            <Button\n              style={{ marginTop: store.canAddDialogueItem ? 4 : 0 }}\n              disabled={!store.canAddDialogueItem}\n              icon={<PlusOutlined />}\n              onClick={store.addDialogueItem}\n            >\n              {i18n.translate('CHAT_ITEM_ADD')}\n            </Button>\n            {!store.canAddDialogueItem && (\n              <div\n                style={{\n                  fontSize: 12,\n                  color: '#99A0B2',\n                  marginTop: 4,\n                  width: '100%',\n                  display: 'flex',\n                  justifyContent: 'inherit',\n                }}\n              >\n                {i18n.translate('CHAT_ITEM_MEET_LIMIT')}\n              </div>\n            )}\n          </div>\n        )}\n      />\n    )}\n  </>\n));\n\nexport default Content;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,IAAI,QAAQ,MAAM;AAC3B,SAASC,MAAM,QAAQ,MAAM;AAC7B,SAASC,YAAY,QAAQ,mBAAmB;AAChD,OAAOC,WAAW,MAAM,0CAA0C;AAClE,OAAOC,QAAQ,IAAIC,YAAY,QAAQ,gCAAgC;AAEvE,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,IAAI,MAAM,YAAY;AAE7B,MAAMC,OAAiB,GAAGT,QAAQ,CAAC,mBACjCD,KAAA,CAAAW,aAAA,CAAAX,KAAA,CAAAY,QAAA,qBACEZ,KAAA,CAAAW,aAAA,CAACN,WAAW;EAACQ,KAAK,EAAEX,IAAI,CAACM,KAAK,CAACM,WAAW,CAAE;EAAAC,MAAA;EAAAC,QAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA;AAAA,CAAE,CAAC,EAC9CZ,KAAK,CAACa,QAAQ,CAACC,GAAG,CAAEC,YAAY,IAAK;EAAA,IAAAC,qBAAA;EACpC,MAAMC,QAAQ,GAAGF,YAAY,CAACG,EAAE,OAAAF,qBAAA,GAAKhB,KAAK,CAACmB,oBAAoB,cAAAH,qBAAA,uBAA1BA,qBAAA,CAA4BE,EAAE;EACnE,MAAME,aAAa,GAAG,CAACpB,KAAK,CAACqB,QAAQ,KAAK,CAACN,YAAY,CAACO,QAAQ,IAAItB,KAAK,CAACuB,QAAQ,CAAC;EACnF,oBACE/B,KAAA,CAAAW,aAAA,CAACL,QAAQ,EAAA0B,MAAA,CAAAC,MAAA;IACPC,GAAG,EAAEX,YAAY,CAACG,EAAG;IACrBS,IAAI,EAAEZ,YAAY,CAACY,IAAK;IACxBC,KAAK,EAAEb,YAAY,CAACY,IAAI,KAAK5B,YAAY,CAAC8B,CAAC,GAAG,GAAG,GAAG,GAAI;IACxDxB,KAAK,EAAEX,IAAI,CAACqB,YAAY,CAACV,KAAK,CAAE;IAChCyB,aAAa,EAAGzB,KAAK,IAAKL,KAAK,CAAC+B,kBAAkB,CAAChB,YAAY,EAAEV,KAAK,CAAE;IACxE2B,aAAa,EAAEtC,IAAI,CAACqB,YAAY,CAACiB,aAAa,CAAE;IAChDC,KAAK,EAAEhB,QAAQ,IAAIjB,KAAK,CAACkC,QAAS;IAClCjB,QAAQ,EAAEA,QAAS;IACnBkB,QAAQ,EAAEA,CAAA,KAAMnC,KAAK,CAACoC,kBAAkB,CAACrB,YAAY,CAAE;IACvDK,aAAa,EAAEA,aAAc;IAC7BiB,YAAY,EAAEpB,QAAQ,IAAIjB,KAAK,CAACsC,SAAU;IAC1CC,WAAW,EAAEA,CAAA,KAAMvC,KAAK,CAACwC,gBAAgB,CAACzB,YAAY;EAAE,GACpDA,YAAY,CAACY,IAAI,KAAK5B,YAAY,CAAC8B,CAAC,IAAI;IAC1CY,WAAW,EAAEzC,KAAK,CAACyC,WAAW;IAC9BC,cAAc,EAAEhD,IAAI,CAACM,KAAK,CAAC0C,cAAc,CAAC;IAC1CC,YAAY,EAAE,CAAC3C,KAAK,CAACqB,QAAQ,IAAIrB,KAAK,CAAC4C,OAAO;IAC9CC,WAAW,EAAE5B,QAAQ,IAAIjB,KAAK,CAAC8C,SAAS;IACxCC,UAAU,EAAEA,CAAA,KAAM/C,KAAK,CAACgD,gBAAgB,CAACjC,YAAY,CAAC;IACtDkC,IAAI,EAAEvD,IAAI,CAACqB,YAAY,CAACkC,IAAI,CAAC;IAC7BC,YAAY,EAAGD,IAAI,IAAKjD,KAAK,CAACmD,QAAQ,CAACpC,YAAY,EAAEkC,IAAI,CAAC;IAC1DG,kBAAkB,EAAE,CAACpD,KAAK,CAACqB,QAAQ;IACnCgC,oBAAoB,EAAErD,KAAK,CAACqD,oBAAoB;IAChDC,iBAAiB,EAAErC,QAAQ,IAAIjB,KAAK,CAACuD,uBAAuB;IAC5DC,UAAU,EAAE9D,IAAI,CAACqB,YAAY,CAACyC,UAAU,CAAC;IACzCC,oBAAoB,EAAEA,CAAA,KAAMzD,KAAK,CAACyD,oBAAoB,CAAC1C,YAAY,CAAC;IACpE2C,sBAAsB,EAAGF,UAAU,IAAKxD,KAAK,CAAC2D,kBAAkB,CAAC5C,YAAY,EAAEyC,UAAU,CAAC;IAC1FI,sBAAsB,EAAEA,CAAA,KAAM5D,KAAK,CAAC6D,oBAAoB,CAAC9C,YAAY;EACvE,CAAC;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACF,CAAC;AAEN,CAAC,CAAC,EACDZ,KAAK,CAAC8D,WAAW,IAAI,CAAC9D,KAAK,CAACqB,QAAQ,IAAIrB,KAAK,CAAC+D,OAAO,iBACpDvE,KAAA,CAAAW,aAAA,CAACL,QAAQ;EACP6B,IAAI,EAAE3B,KAAK,CAACgE,oBAAqB;EACjCpC,KAAK,EAAE5B,KAAK,CAACgE,oBAAoB,KAAKjE,YAAY,CAAC8B,CAAC,GAAG,GAAG,GAAG,GAAI;EACjEI,KAAK,EAAEjC,KAAK,CAACiE,QAAQ,IAAIjE,KAAK,CAACkC,QAAS;EACxCjB,QAAQ,EAAEjB,KAAK,CAACiE,QAAS;EACzB5B,YAAY,EAAErC,KAAK,CAACiE,QAAS;EAC7BC,cAAc,eACZ1E,KAAA,CAAAW,aAAA;IAAKgE,SAAS,EAAC,iCAAiC;IAAA5D,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9CpB,KAAA,CAAAW,aAAA,CAACR,MAAM;IACLyE,KAAK,EAAE;MAAEC,SAAS,EAAErE,KAAK,CAACsE,kBAAkB,GAAG,CAAC,GAAG;IAAE,CAAE;IACvDC,QAAQ,EAAE,CAACvE,KAAK,CAACsE,kBAAmB;IACpCE,IAAI,eAAEhF,KAAA,CAAAW,aAAA,CAACP,YAAY;MAAAW,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CAAE;IACvB6D,OAAO,EAAEzE,KAAK,CAAC0E,eAAgB;IAAAnE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE9BX,IAAI,CAAC0E,SAAS,CAAC,eAAe,CACzB,CAAC,EACR,CAAC3E,KAAK,CAACsE,kBAAkB,iBACxB9E,KAAA,CAAAW,aAAA;IACEiE,KAAK,EAAE;MACLQ,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,SAAS;MAChBR,SAAS,EAAE,CAAC;MACZS,KAAK,EAAE,MAAM;MACbC,OAAO,EAAE,MAAM;MACfC,cAAc,EAAE;IAClB,CAAE;IAAAzE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEDX,IAAI,CAAC0E,SAAS,CAAC,sBAAsB,CACnC,CAEJ,CACL;EAAApE,MAAA;EAAAC,QAAA;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA;AAAA,CACH,CAEH,CACH,CAAC;AAEF,eAAeV,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}