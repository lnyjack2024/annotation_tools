{"ast":null,"code":"import { makeAutoObservable } from 'mobx';\nimport screenfull from 'screenfull';\nclass SettingStore {\n  constructor(rootStore) {\n    this.rootStore = void 0;\n    this.zoom = 1;\n    this.loading = true;\n    this.isFullScreen = false;\n    this.sideBarVisible = false;\n    this.customCheck = [];\n    this.scriptCheck = false;\n    this.submitCheck = false;\n    this.screenfull = screenfull;\n    this.reviewVisible = false;\n    this.reviewId = 'phonetic-qa-form';\n    makeAutoObservable(this, {\n      rootStore: false,\n      customCheck: false,\n      scriptCheck: false,\n      submitCheck: false,\n      reviewId: false\n    }, {\n      autoBind: true\n    });\n    this.rootStore = rootStore;\n  }\n  setFullScreen(full) {\n    this.isFullScreen = full;\n  }\n\n  /**\n   * init by payload\n   * @param payload\n   */\n  init(payload) {\n    // parse validator\n    if (typeof payload.custom_check === 'string') {\n      const scriptIds = payload.custom_check.split(',').map(i => i.trim()).filter(i => !!i);\n      if (scriptIds.length > 0) {\n        this.customCheck = scriptIds;\n      }\n    }\n\n    // parse submit check config\n    this.scriptCheck = payload.script_check === 'true' || payload.script_check === true;\n\n    // parse submit check config\n    this.submitCheck = payload.submit_check === 'true' || payload.submit_check === true;\n  }\n\n  /**\n   * set sideBar visibility\n   * @param visible boolean\n   */\n  setSideBarVisible(visible) {\n    this.sideBarVisible = visible;\n    this.rootStore.analyse.updatePlacement({\n      margin: visible ? 69 : 120\n    });\n  }\n\n  /**\n   * set zoom\n   */\n  setZoom(newZoom) {\n    const {\n      placement: {\n        duration\n      }\n    } = this.rootStore.analyse;\n    let zoom = newZoom;\n    if (zoom < 1) {\n      zoom = 1;\n    }\n    if (duration / zoom < 0.15) {\n      zoom = Math.floor(duration / 0.15);\n    }\n    this.zoom = zoom;\n  }\n\n  /**\n   * set loading\n   */\n  setLoading(loading) {\n    this.loading = loading;\n  }\n\n  /**\n   * set review modal visible\n   */\n  setReviewVisible(visible) {\n    if (this.reviewVisible !== visible) {\n      this.reviewVisible = visible;\n    }\n  }\n}\nexport default SettingStore;","map":{"version":3,"names":["makeAutoObservable","screenfull","SettingStore","constructor","rootStore","zoom","loading","isFullScreen","sideBarVisible","customCheck","scriptCheck","submitCheck","reviewVisible","reviewId","autoBind","setFullScreen","full","init","payload","custom_check","scriptIds","split","map","i","trim","filter","length","script_check","submit_check","setSideBarVisible","visible","analyse","updatePlacement","margin","setZoom","newZoom","placement","duration","Math","floor","setLoading","setReviewVisible"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/store/SettingsStore.ts"],"sourcesContent":["import { makeAutoObservable } from 'mobx';\nimport screenfull from 'screenfull';\nimport { RootStoreType } from './RootStore';\n\nclass SettingStore {\n  rootStore: RootStoreType;\n\n  zoom = 1;\n\n  loading = true;\n\n  isFullScreen = false;\n\n  sideBarVisible = false;\n\n  customCheck: string[] = [];\n\n  scriptCheck = false;\n\n  submitCheck = false;\n\n  screenfull = screenfull;\n\n  reviewVisible = false;\n\n  reviewId = 'phonetic-qa-form';\n\n  constructor(rootStore: RootStoreType) {\n    makeAutoObservable(this, {\n      rootStore: false,\n      customCheck: false,\n      scriptCheck: false,\n      submitCheck: false,\n      reviewId: false,\n    }, {\n      autoBind: true,\n    });\n    this.rootStore = rootStore;\n  }\n\n  setFullScreen(full: boolean) {\n    this.isFullScreen = full;\n  }\n\n  /**\n   * init by payload\n   * @param payload\n   */\n  init(payload: {[key: string]: any}) {\n    // parse validator\n    if (typeof payload.custom_check === 'string') {\n      const scriptIds = payload.custom_check.split(',').map((i) => i.trim()).filter((i) => !!i);\n      if (scriptIds.length > 0) {\n        this.customCheck = scriptIds;\n      }\n    }\n\n    // parse submit check config\n    this.scriptCheck = payload.script_check === 'true' || payload.script_check === true;\n\n    // parse submit check config\n    this.submitCheck = payload.submit_check === 'true' || payload.submit_check === true;\n  }\n\n  /**\n   * set sideBar visibility\n   * @param visible boolean\n   */\n  setSideBarVisible(visible: boolean) {\n    this.sideBarVisible = visible;\n    this.rootStore.analyse.updatePlacement({ margin: visible ? 69 : 120 });\n  }\n\n  /**\n   * set zoom\n   */\n  setZoom(newZoom:number) {\n    const { placement: { duration } } = this.rootStore.analyse;\n    let zoom = newZoom;\n    if (zoom < 1) {\n      zoom = 1;\n    }\n    if (duration / zoom < 0.15) {\n      zoom = Math.floor(duration / 0.15);\n    }\n    this.zoom = zoom;\n  }\n\n  /**\n   * set loading\n   */\n  setLoading(loading: boolean) {\n    this.loading = loading;\n  }\n\n  /**\n   * set review modal visible\n   */\n  setReviewVisible(visible: boolean) {\n    if (this.reviewVisible !== visible) {\n      this.reviewVisible = visible;\n    }\n  }\n}\n\nexport default SettingStore;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}