{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/withConnect.tsx\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState, useEffect, useRef } from 'react';\nimport { connectToParent } from 'penpal';\nimport { useActivityDispatcher } from 'use-activity-dispatcher';\nimport { checkRunningMode } from '../utils';\nimport { RunningMode, SubmitChannel, SubmitChannelPayload } from '../types';\nimport { ToolMode, isLabel, isQA } from '../utils/tool-mode';\nimport JobProxy from '../libs/JobProxy';\n;\nconst isCallableFunc = func => func && ({}.toString.call(func) === '[object Function]' || {}.toString.call(func) === '[object AsyncFunction]');\nconst withConnect = ({\n  type,\n  methods = {},\n  samplePayload\n}) => WrappedComponent => () => {\n  useActivityDispatcher();\n  const tool = useRef();\n  const mode = checkRunningMode();\n  const [payload, setPayload] = useState(null);\n  // functions that parent provides\n  const saveContent = useRef(() => {});\n  const loadContent = useRef(() => {});\n  const renderComplete = useRef(() => {});\n  const onShortcutsClick = useRef(() => {});\n  // job proxy\n  const jobProxy = useRef();\n  useEffect(() => {\n    if (mode === RunningMode.IFRAME) {\n      // set up iframe connection when the app is running in an iframe\n      const connection = connectToParent({\n        methods: {\n          onSubmit: async () => {\n            const func = methods.onSubmit || 'onSubmit';\n            if (isCallableFunc(tool.current[func])) {\n              const values = await tool.current[func]();\n              // make sure onSubmit returns a string\n              // consume this value in each tool itself or its custom tag in mashup\n              return typeof values === 'string' ? values : JSON.stringify(values);\n            }\n            return '';\n          },\n          cleanData: () => {\n            const func = methods.cleanData || 'cleanData';\n            if (isCallableFunc(tool.current[func])) {\n              tool.current[func]();\n            }\n          },\n          isModified: () => {\n            const func = methods.isModified || 'isModified';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            // return null if this method not provided\n            return null;\n          },\n          getStatistics: () => {\n            const func = methods.getStatistics || 'getStatistics';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            return undefined;\n          },\n          getReviews: () => {\n            // eslint-disable-next-line no-console\n            console.log('in get reviews');\n            const func = methods.getReviews || 'getReviews';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            return undefined;\n          },\n          submitReviews: () => {\n            // eslint-disable-next-line no-console\n            console.log('in submit reviews');\n            const func = methods.submitReviews || 'submitReviews';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            return undefined;\n          }\n        }\n      });\n      saveContent.current = (...args) => new Promise((resolve, reject) => {\n        connection.promise.then(parent => parent.saveContent(...args)).then(url => {\n          resolve(url);\n        }).catch(e => {\n          reject(e);\n        });\n      });\n      loadContent.current = (...args) => new Promise((resolve, reject) => {\n        connection.promise.then(parent => parent.loadContent(...args)).then(data => {\n          resolve(data);\n        }).catch(e => {\n          reject(e);\n        });\n      });\n      renderComplete.current = () => connection.promise.then(parent => parent.renderComplete());\n\n      // get payload from parent\n      connection.promise.then(parent => parent.getPayload()).then(p => {\n        initJobProxy(p);\n        setPayload(p);\n      });\n      onShortcutsClick.current = (...args) => connection.promise.then(parent => parent.onShortcutsClick(...args));\n      window.addEventListener('keydown', initShortcutsEvent);\n    }\n    if (mode === RunningMode.STANDALONE) {\n      // get sample payload\n      initJobProxy(samplePayload);\n      setPayload(samplePayload);\n    }\n    return () => {\n      window.removeEventListener('keydown', initShortcutsEvent);\n    };\n  }, [type, mode]);\n\n  // short\n  const initShortcutsEvent = e => {\n    if (e.shiftKey && e.ctrlKey && jobProxy.current) {\n      let name;\n      let key;\n      const {\n        toolMode\n      } = jobProxy.current;\n      if (Object.values(SubmitChannelPayload).indexOf(e.key) >= 0) {\n        key = e.key;\n      }\n      if (isLabel(toolMode)) {\n        name = SubmitChannel.Label;\n      } else if (isQA(toolMode)) {\n        name = SubmitChannel.Qa;\n      } else if (toolMode === ToolMode.AUDIT) {\n        name = SubmitChannel.Audit;\n      }\n      ;\n      if (name && key) {\n        e.preventDefault();\n        onShortcutsClick.current(name, key);\n      }\n    }\n  };\n  const initJobProxy = p => {\n    jobProxy.current = new JobProxy({\n      locale: p.locale,\n      toolName: type,\n      toolMode: p.tool_mode || p.mode,\n      projectId: p.project_id,\n      flowId: p.flow_id,\n      jobId: p.job_id,\n      taskId: p.task_id,\n      recordId: p.record_id,\n      reviewUrl: p._reviews,\n      reviewFrom: p.review_from,\n      flowData: p.flowData,\n      templateConfig: p,\n      saveContent: saveContent.current,\n      loadContent: loadContent.current\n    });\n  };\n  return payload && /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({\n    ref: tool,\n    saveContent: saveContent.current,\n    loadContent: loadContent.current,\n    renderComplete: renderComplete.current,\n    jobProxy: jobProxy.current\n  }, payload, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 5\n    }\n  }));\n};\nexport default withConnect;","map":{"version":3,"names":["React","useState","useEffect","useRef","connectToParent","useActivityDispatcher","checkRunningMode","RunningMode","SubmitChannel","SubmitChannelPayload","ToolMode","isLabel","isQA","JobProxy","isCallableFunc","func","toString","call","withConnect","type","methods","samplePayload","WrappedComponent","tool","mode","payload","setPayload","saveContent","loadContent","renderComplete","onShortcutsClick","jobProxy","IFRAME","connection","onSubmit","current","values","JSON","stringify","cleanData","isModified","getStatistics","undefined","getReviews","console","log","submitReviews","args","Promise","resolve","reject","promise","then","parent","url","catch","e","data","getPayload","p","initJobProxy","window","addEventListener","initShortcutsEvent","STANDALONE","removeEventListener","shiftKey","ctrlKey","name","key","toolMode","Object","indexOf","Label","Qa","AUDIT","Audit","preventDefault","locale","toolName","tool_mode","projectId","project_id","flowId","flow_id","jobId","job_id","taskId","task_id","recordId","record_id","reviewUrl","_reviews","reviewFrom","review_from","flowData","templateConfig","createElement","assign","ref","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/withConnect.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState, useEffect, useRef } from 'react';\nimport { connectToParent } from 'penpal';\nimport { useActivityDispatcher } from 'use-activity-dispatcher';\nimport { checkRunningMode } from '../utils';\nimport { AnnotationType, RunningMode, SubmitChannel, SubmitChannelPayload } from '../types';\nimport { ToolMode, isLabel, isQA } from '../utils/tool-mode';\nimport JobProxy from '../libs/JobProxy';\n\ninterface ConnectProps {\n  type: AnnotationType; // annotation tool type\n  methods?: { // methods connected to the iframe and tool function names map\n    [name: string]: string;\n  },\n  samplePayload: any; // sample payload to render each tool when not running in an iframe\n};\n\ninterface Payload {\n  locale?: string;\n  tool_mode?: string;\n  mode?: string; // some tool, it pass tool_mode, others mode\n  project_id?: string;\n  flow_id?: string;\n  job_id?: string;\n  task_id?: string;\n  record_id?: string;\n  _reviews?: string;\n  review_from?: any;\n  flowData?: any;\n}\n\nconst isCallableFunc = (func: unknown) => func && (\n  {}.toString.call(func) === '[object Function]' ||\n  {}.toString.call(func) === '[object AsyncFunction]'\n);\n\nconst withConnect = ({ type, methods = {}, samplePayload }: ConnectProps) => (WrappedComponent: any) => () => {\n  useActivityDispatcher();\n  const tool = useRef<any>();\n  const mode = checkRunningMode();\n  const [payload, setPayload] = useState<Payload | null>(null);\n  // functions that parent provides\n  const saveContent = useRef<any>(() => {});\n  const loadContent = useRef<any>(() => {});\n  const renderComplete = useRef<any>(() => {});\n  const onShortcutsClick = useRef<any>(() => {});\n  // job proxy\n  const jobProxy = useRef<JobProxy>();\n\n  useEffect(() => {\n    if (mode === RunningMode.IFRAME) {\n      // set up iframe connection when the app is running in an iframe\n      const connection = connectToParent({\n        methods: {\n          onSubmit: async () => {\n            const func = methods.onSubmit || 'onSubmit';\n            if (isCallableFunc(tool.current[func])) {\n              const values = await tool.current[func]();\n              // make sure onSubmit returns a string\n              // consume this value in each tool itself or its custom tag in mashup\n              return typeof values === 'string' ? values : JSON.stringify(values);\n            }\n            return '';\n          },\n          cleanData: () => {\n            const func = methods.cleanData || 'cleanData';\n            if (isCallableFunc(tool.current[func])) {\n              tool.current[func]();\n            }\n          },\n          isModified: () => {\n            const func = methods.isModified || 'isModified';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            // return null if this method not provided\n            return null;\n          },\n          getStatistics: () => {\n            const func = methods.getStatistics || 'getStatistics';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            return undefined;\n          },\n          getReviews: () => {\n            // eslint-disable-next-line no-console\n            console.log('in get reviews');\n            const func = methods.getReviews || 'getReviews';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            return undefined;\n          },\n          submitReviews: () => {\n            // eslint-disable-next-line no-console\n            console.log('in submit reviews');\n            const func = methods.submitReviews || 'submitReviews';\n            if (isCallableFunc(tool.current[func])) {\n              return tool.current[func]();\n            }\n            return undefined;\n          },\n        },\n      });\n\n      saveContent.current = (...args: any) => new Promise((resolve, reject) => {\n        connection.promise\n          .then((parent: any) => parent.saveContent(...args))\n          .then((url: string) => {\n            resolve(url);\n          })\n          .catch((e: any) => {\n            reject(e);\n          });\n      });\n\n      loadContent.current = (...args: any) => new Promise((resolve, reject) => {\n        connection.promise\n          .then((parent: any) => parent.loadContent(...args))\n          .then((data: any) => {\n            resolve(data);\n          })\n          .catch((e: any) => {\n            reject(e);\n          });\n      });\n\n      renderComplete.current = () => connection.promise.then((parent: any) => parent.renderComplete());\n\n      // get payload from parent\n      connection.promise\n        .then((parent: any) => parent.getPayload())\n        .then((p: any) => {\n          initJobProxy(p);\n          setPayload(p);\n        });\n\n      onShortcutsClick.current = (...args: any) => connection.promise.then((parent: any) => parent.onShortcutsClick(...args));\n\n      window.addEventListener('keydown', initShortcutsEvent);\n    }\n\n    if (mode === RunningMode.STANDALONE) {\n      // get sample payload\n      initJobProxy(samplePayload);\n      setPayload(samplePayload);\n    }\n\n    return () => {\n      window.removeEventListener('keydown', initShortcutsEvent);\n    };\n  }, [type, mode]);\n\n  // short\n  const initShortcutsEvent = (e: KeyboardEvent) => {\n    if (e.shiftKey && e.ctrlKey && jobProxy.current) {\n      let name: undefined | SubmitChannel;\n      let key: undefined | string;\n      const { toolMode } = jobProxy.current;\n      if (Object.values(SubmitChannelPayload).indexOf(e.key as any) >= 0) {\n        key = e.key;\n      }\n      if (isLabel(toolMode)) {\n        name = SubmitChannel.Label;\n      } else if (isQA(toolMode)) {\n        name = SubmitChannel.Qa;\n      } else if (toolMode === ToolMode.AUDIT) {\n        name = SubmitChannel.Audit;\n      };\n\n      if (name && key) {\n        e.preventDefault();\n        onShortcutsClick.current(name, key);\n      }\n    }\n  };\n\n  const initJobProxy = (p: Payload) => {\n    jobProxy.current = new JobProxy({\n      locale: p.locale,\n      toolName: type,\n      toolMode: p.tool_mode || p.mode,\n      projectId: p.project_id,\n      flowId: p.flow_id,\n      jobId: p.job_id,\n      taskId: p.task_id,\n      recordId: p.record_id,\n      reviewUrl: p._reviews,\n      reviewFrom: p.review_from,\n      flowData: p.flowData,\n      templateConfig: p,\n      saveContent: saveContent.current,\n      loadContent: loadContent.current,\n    });\n  };\n\n  return payload && (\n    <WrappedComponent\n      ref={tool}\n      saveContent={saveContent.current}\n      loadContent={loadContent.current}\n      renderComplete={renderComplete.current}\n      jobProxy={jobProxy.current}\n      {...payload}\n    />\n  );\n};\n\nexport default withConnect;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}