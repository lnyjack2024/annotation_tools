{"ast":null,"code":"import React from'react';import{observer}from'mobx-react';import cx from'classnames';import store from'../../store/RootStore';import i18n from'../../locales';import{ReviewResult}from'../../types';export const frameLabelHeight=20;const ItemLabel=observer(_ref=>{let{itemKey,separator,prefix}=_ref;const{selectedInstances,selectedInstanceItems,getInstanceById}=store.instance;const{currentCamera,isSingleCamera,cameraNames}=store.frame;const[instanceId,instanceItemId,camera]=itemKey.split(separator);const cameraIndex=cameraNames.indexOf(camera);const instance=getInstanceById(instanceId);const instanceItem=((instance===null||instance===void 0?void 0:instance.items)||[])[instanceItemId];const instanceSelected=selectedInstances.indexOf(instance)>=0;const instanceItemSelected=selectedInstanceItems.indexOf(instanceItem)>=0&&camera===currentCamera;let reviewResult;if(instanceItem){reviewResult=store.review.getReviewResultForInstanceItem(instanceItem,camera);}else if(instance){const isSingle=instance.isSingle&&isSingleCamera;if(isSingle){reviewResult=store.review.getReviewResultForInstanceItem(Object.values(instance.items)[0],camera);}else if(!instanceSelected){reviewResult=store.review.getReviewResultForInstance(instance);}}if(reviewResult&&reviewResult!==ReviewResult.REJECT&&store.isRework){reviewResult=undefined;}return/*#__PURE__*/React.createElement(\"div\",{key:itemKey,className:cx(\"frame-item-label frame-item-instance-\".concat(instanceId,\" \").concat(instanceItem?\"frame-item-instance-item-\".concat(instanceItem.id):''),{dark:!instance||instanceSelected,selected:instanceItemSelected||instanceSelected&&!instanceItem&&selectedInstanceItems.filter(item=>item.instance===instance).length<=0}),style:{height:frameLabelHeight},onClick:()=>{if(instanceItem){store.instance.selectInstanceItem(instanceItem);}else if(instance){store.instance.selectInstance(instance);}}},prefix,!instance&&i18n.translate('PROGRESS_GLOBAL_LABEL'),instance&&!instanceItem&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"frame-item-label-dot\",style:{backgroundColor:instance.categoryRef.displayColor}}),instance.label),/*#__PURE__*/React.createElement(\"div\",{className:cx('frame-item-label-review',{approved:reviewResult===ReviewResult.APPROVE,rejected:reviewResult===ReviewResult.REJECT,pending:reviewResult===ReviewResult.SUSPEND})})),instance&&instanceItem&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"frame-item-label-sub\"},\"\".concat(instanceItem.itemLabel).concat(isSingleCamera?'':\"-C\".concat(cameraIndex+1)),/*#__PURE__*/React.createElement(\"div\",{className:cx('frame-item-label-review',{approved:reviewResult===ReviewResult.APPROVE,rejected:reviewResult===ReviewResult.REJECT,pending:reviewResult===ReviewResult.SUSPEND})}))));});export default ItemLabel;","map":{"version":3,"names":["React","observer","cx","store","i18n","ReviewResult","frameLabelHeight","ItemLabel","_ref","itemKey","separator","prefix","selectedInstances","selectedInstanceItems","getInstanceById","instance","currentCamera","isSingleCamera","cameraNames","frame","instanceId","instanceItemId","camera","split","cameraIndex","indexOf","instanceItem","items","instanceSelected","instanceItemSelected","reviewResult","review","getReviewResultForInstanceItem","isSingle","Object","values","getReviewResultForInstance","REJECT","isRework","undefined","createElement","key","className","concat","id","dark","selected","filter","item","length","style","height","onClick","selectInstanceItem","selectInstance","translate","Fragment","backgroundColor","categoryRef","displayColor","label","approved","APPROVE","rejected","pending","SUSPEND","itemLabel"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/ItemLabel.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewResult } from '../../types';\n\nexport const frameLabelHeight = 20;\n\ninterface ItemLabelProps {\n  itemKey: string;\n  separator: string;\n  prefix?: React.ReactNode;\n}\n\nconst ItemLabel = observer(({ itemKey, separator, prefix }: ItemLabelProps) => {\n  const { selectedInstances, selectedInstanceItems, getInstanceById } = store.instance;\n  const { currentCamera, isSingleCamera, cameraNames } = store.frame;\n\n  const [instanceId, instanceItemId, camera] = itemKey.split(separator);\n  const cameraIndex = cameraNames.indexOf(camera);\n  const instance = getInstanceById(instanceId);\n  const instanceItem = (instance?.items || [])[instanceItemId];\n  const instanceSelected = selectedInstances.indexOf(instance) >= 0;\n  const instanceItemSelected = selectedInstanceItems.indexOf(instanceItem) >= 0 && camera === currentCamera;\n\n  let reviewResult;\n  if (instanceItem) {\n    reviewResult = store.review.getReviewResultForInstanceItem(instanceItem, camera);\n  } else if (instance) {\n    const isSingle = instance.isSingle && isSingleCamera;\n    if (isSingle) {\n      reviewResult = store.review.getReviewResultForInstanceItem(Object.values(instance.items)[0], camera);\n    } else if (!instanceSelected) {\n      reviewResult = store.review.getReviewResultForInstance(instance);\n    }\n  }\n\n  if (reviewResult && reviewResult !== ReviewResult.REJECT && store.isRework) {\n    reviewResult = undefined;\n  }\n\n  return (\n    <div\n      key={itemKey}\n      className={cx(`frame-item-label frame-item-instance-${instanceId} ${instanceItem ? `frame-item-instance-item-${instanceItem.id}` : ''}`, {\n        dark: !instance || instanceSelected,\n        selected: instanceItemSelected || (instanceSelected && !instanceItem && selectedInstanceItems.filter((item) => item.instance === instance).length <= 0),\n      })}\n      style={{ height: frameLabelHeight }}\n      onClick={() => {\n        if (instanceItem) {\n          store.instance.selectInstanceItem(instanceItem);\n        } else if (instance) {\n          store.instance.selectInstance(instance);\n        }\n      }}\n    >\n      {prefix}\n      {!instance && i18n.translate('PROGRESS_GLOBAL_LABEL')}\n      {instance && !instanceItem && (\n        <>\n          <div>\n            <div\n              className=\"frame-item-label-dot\"\n              style={{ backgroundColor: instance.categoryRef.displayColor }}\n            />\n            {instance.label}\n          </div>\n          <div\n            className={cx('frame-item-label-review', {\n              approved: reviewResult === ReviewResult.APPROVE,\n              rejected: reviewResult === ReviewResult.REJECT,\n              pending: reviewResult === ReviewResult.SUSPEND,\n            })}\n          />\n        </>\n      )}\n      {instance && instanceItem && (\n        <>\n          <div />\n          <div className=\"frame-item-label-sub\">\n            {`${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraIndex + 1}`}`}\n            <div\n              className={cx('frame-item-label-review', {\n                approved: reviewResult === ReviewResult.APPROVE,\n                rejected: reviewResult === ReviewResult.REJECT,\n                pending: reviewResult === ReviewResult.SUSPEND,\n              })}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n});\n\nexport default ItemLabel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}