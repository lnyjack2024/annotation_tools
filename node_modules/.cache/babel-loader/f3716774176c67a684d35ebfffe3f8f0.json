{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/InstancePanel.tsx\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { DownOutlined } from '@ant-design/icons';\nimport SidebarCategory from './SidebarCategory';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nconst InstancePanel = observer(() => {\n  const scroller = useRef(null);\n  const [activeCategories, setActiveCategories] = useState([]);\n  useEffect(() => {\n    setActiveCategories([store.ontology.selectedCategoryName]);\n  }, [store.ontology.selectedCategoryName]);\n  const toggleCollapse = () => {\n    if (activeCategories.length > 0) {\n      // collapse all\n      setActiveCategories([]);\n    } else {\n      const {\n        categories\n      } = store.ontology;\n      const firstCategory = categories[0];\n      if (firstCategory) {\n        setActiveCategories([firstCategory.className]);\n        if (categories.length > 1) {\n          // delay to set state to update layout\n          categories.slice(1).forEach(c => {\n            setTimeout(() => {\n              setActiveCategories(cs => [...cs, c.className]);\n            }, 0);\n          });\n        }\n      }\n    }\n  };\n  const allCollapsed = activeCategories.length === 0;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse-all\",\n    onClick: toggleCollapse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: 12,\n      paddingRight: 4\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, i18n.translate(allCollapsed ? 'SIDEBAR_EXPAND_ALL' : 'SIDEBAR_COLLAPSE_ALL')), /*#__PURE__*/React.createElement(DownOutlined, {\n    style: {\n      transform: allCollapsed ? 'rotate(-90deg)' : '',\n      transition: 'transform 0.2s'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    ref: scroller,\n    className: \"scroller\",\n    style: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, store.ontology.categories.map(category => /*#__PURE__*/React.createElement(SidebarCategory, {\n    key: category.className,\n    category: category,\n    collapsed: !activeCategories.includes(category.className),\n    onCollapseChange: collapsed => {\n      const {\n        className\n      } = category;\n      setActiveCategories(currActiveCategories => {\n        if (collapsed) {\n          const newActiveCategories = [...currActiveCategories];\n          const index = newActiveCategories.indexOf(className);\n          if (index >= 0) {\n            newActiveCategories.splice(index, 1);\n          }\n          return newActiveCategories;\n        }\n        return [...currActiveCategories, className];\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }))));\n});\nexport default InstancePanel;","map":{"version":3,"names":["React","useState","useEffect","useRef","observer","DownOutlined","SidebarCategory","store","i18n","InstancePanel","scroller","activeCategories","setActiveCategories","ontology","selectedCategoryName","toggleCollapse","length","categories","firstCategory","className","slice","forEach","c","setTimeout","cs","allCollapsed","createElement","style","display","flexDirection","height","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fontSize","paddingRight","translate","transform","transition","ref","flex","map","category","key","collapsed","includes","onCollapseChange","currActiveCategories","newActiveCategories","index","indexOf","splice"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/InstancePanel.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { DownOutlined } from '@ant-design/icons';\nimport SidebarCategory from './SidebarCategory';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\n\nconst InstancePanel = observer(() => {\n  const scroller = useRef<HTMLDivElement>(null);\n  const [activeCategories, setActiveCategories] = useState<string[]>([]);\n\n  useEffect(() => {\n    setActiveCategories([store.ontology.selectedCategoryName]);\n  }, [store.ontology.selectedCategoryName]);\n\n  const toggleCollapse = () => {\n    if (activeCategories.length > 0) {\n      // collapse all\n      setActiveCategories([]);\n    } else {\n      const { categories } = store.ontology;\n      const firstCategory = categories[0];\n      if (firstCategory) {\n        setActiveCategories([firstCategory.className]);\n        if (categories.length > 1) {\n          // delay to set state to update layout\n          categories.slice(1).forEach((c) => {\n            setTimeout(() => {\n              setActiveCategories((cs) => [...cs, c.className]);\n            }, 0);\n          });\n        }\n      }\n    }\n  };\n\n  const allCollapsed = activeCategories.length === 0;\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100%',\n      }}\n    >\n      <div className=\"collapse-all\" onClick={toggleCollapse}>\n        <span style={{ fontSize: 12, paddingRight: 4 }}>\n          {i18n.translate(allCollapsed ? 'SIDEBAR_EXPAND_ALL' : 'SIDEBAR_COLLAPSE_ALL')}\n        </span>\n        <DownOutlined\n          style={{\n            transform: allCollapsed ? 'rotate(-90deg)' : '',\n            transition: 'transform 0.2s',\n          }}\n        />\n      </div>\n      <div ref={scroller} className=\"scroller\" style={{ flex: 1 }}>\n        {store.ontology.categories.map((category) => (\n          <SidebarCategory\n            key={category.className}\n            category={category}\n            collapsed={!activeCategories.includes(category.className)}\n            onCollapseChange={(collapsed) => {\n              const { className } = category;\n              setActiveCategories((currActiveCategories) => {\n                if (collapsed) {\n                  const newActiveCategories = [...currActiveCategories];\n                  const index = newActiveCategories.indexOf(className);\n                  if (index >= 0) {\n                    newActiveCategories.splice(index, 1);\n                  }\n                  return newActiveCategories;\n                }\n                return [...currActiveCategories, className];\n              });\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n\nexport default InstancePanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}