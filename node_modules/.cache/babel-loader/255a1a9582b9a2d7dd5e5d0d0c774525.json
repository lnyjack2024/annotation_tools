{"ast":null,"code":"import{EditorState,convertFromRaw,convertToRaw}from'draft-js';import{CODE_BLOCK_TYPE}from'../constants';export default function setLanguage(editorState,startBlockKey,language){const currentContent=editorState.getCurrentContent();const rawData=convertToRaw(currentContent);const{blocks}=rawData;let start=false;for(let i=0;i<blocks.length;i+=1){const block=blocks[i];if(block.type===CODE_BLOCK_TYPE){if(block.key===startBlockKey){start=true;}if(start){block.data={...block.data,language};}}else if(start){start=false;break;}}return EditorState.push(editorState,convertFromRaw(rawData),'change-block-data');}","map":{"version":3,"names":["EditorState","convertFromRaw","convertToRaw","CODE_BLOCK_TYPE","setLanguage","editorState","startBlockKey","language","currentContent","getCurrentContent","rawData","blocks","start","i","length","block","type","key","data","push"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/llm/input/modifiers/set-language.ts"],"sourcesContent":["import { EditorState, convertFromRaw, convertToRaw } from 'draft-js';\nimport { CODE_BLOCK_TYPE } from '../constants';\n\nexport default function setLanguage(editorState: EditorState, startBlockKey: string, language: string) {\n  const currentContent = editorState.getCurrentContent();\n  const rawData = convertToRaw(currentContent);\n  const { blocks } = rawData;\n\n  let start = false;\n  for (let i = 0; i < blocks.length; i += 1) {\n    const block = blocks[i];\n    if (block.type === CODE_BLOCK_TYPE) {\n      if (block.key === startBlockKey) {\n        start = true;\n      }\n      if (start) {\n        block.data = { ...block.data, language };\n      }\n    } else if (start) {\n      start = false;\n      break;\n    }\n  }\n\n  return EditorState.push(editorState, convertFromRaw(rawData), 'change-block-data');\n}\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,cAAc,CAAEC,YAAY,KAAQ,UAAU,CACpE,OAASC,eAAe,KAAQ,cAAc,CAE9C,cAAe,SAAS,CAAAC,WAAWA,CAACC,WAAwB,CAAEC,aAAqB,CAAEC,QAAgB,CAAE,CACrG,KAAM,CAAAC,cAAc,CAAGH,WAAW,CAACI,iBAAiB,CAAC,CAAC,CACtD,KAAM,CAAAC,OAAO,CAAGR,YAAY,CAACM,cAAc,CAAC,CAC5C,KAAM,CAAEG,MAAO,CAAC,CAAGD,OAAO,CAE1B,GAAI,CAAAE,KAAK,CAAG,KAAK,CACjB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,MAAM,CAACG,MAAM,CAAED,CAAC,EAAI,CAAC,CAAE,CACzC,KAAM,CAAAE,KAAK,CAAGJ,MAAM,CAACE,CAAC,CAAC,CACvB,GAAIE,KAAK,CAACC,IAAI,GAAKb,eAAe,CAAE,CAClC,GAAIY,KAAK,CAACE,GAAG,GAAKX,aAAa,CAAE,CAC/BM,KAAK,CAAG,IAAI,CACd,CACA,GAAIA,KAAK,CAAE,CACTG,KAAK,CAACG,IAAI,CAAG,CAAE,GAAGH,KAAK,CAACG,IAAI,CAAEX,QAAS,CAAC,CAC1C,CACF,CAAC,IAAM,IAAIK,KAAK,CAAE,CAChBA,KAAK,CAAG,KAAK,CACb,MACF,CACF,CAEA,MAAO,CAAAZ,WAAW,CAACmB,IAAI,CAACd,WAAW,CAAEJ,cAAc,CAACS,OAAO,CAAC,CAAE,mBAAmB,CAAC,CACpF","ignoreList":[]},"metadata":{},"sourceType":"module"}