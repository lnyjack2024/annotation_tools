{"ast":null,"code":"import React from'react';import{observer}from'mobx-react';import cx from'classnames';import{Tooltip}from'antd';import{Pointer,LayerUp,LayerDown,Merge,Subtract}from'../../../common/icons';import CreateToolSelector from'../tools/CreateToolSelector';import ReviewToolSelector from'../review/ReviewToolSelector';import ViewScale from'./ViewScale';import store from'../../store/RootStore';import i18n from'../../locales';import{ShapeType}from'../../../common/shapes/types';import'./OperationNavigator.scss';const OperationNavigator=observer(_ref=>{let{onViewReset,setViewScale}=_ref;const{addMode}=store.config;const{isSingleSelected}=store.instance;const{selectedShapes}=store.shape;const isSingle=isSingleSelected&&selectedShapes.length===1;const selectedShape=isSingle?selectedShapes[0]:undefined;const isPolygon=(selectedShape===null||selectedShape===void 0?void 0:selectedShape.shapeType)===ShapeType.POLYGON;return/*#__PURE__*/React.createElement(\"div\",{className:\"operation-navigator\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:cx('operation-icon pointer',{active:!addMode}),onClick:()=>{if(addMode){store.config.setAddMode(false);}}},/*#__PURE__*/React.createElement(Pointer,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"divider\"}),/*#__PURE__*/React.createElement(CreateToolSelector,null),/*#__PURE__*/React.createElement(ReviewToolSelector,null),/*#__PURE__*/React.createElement(\"div\",{className:\"divider\"}),!store.readonly&&!addMode&&isSingle&&/*#__PURE__*/React.createElement(React.Fragment,null,isPolygon&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",title:i18n.translate('OPERATION_SHAPE_MERGE')},/*#__PURE__*/React.createElement(\"div\",{className:\"operation-icon\",onClick:store.shape.merge},/*#__PURE__*/React.createElement(Merge,null))),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",title:i18n.translate('OPERATION_SHAPE_SUBTRACT')},/*#__PURE__*/React.createElement(\"div\",{className:\"operation-icon\",onClick:store.shape.subtractPolygon},/*#__PURE__*/React.createElement(Subtract,null)))),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",title:i18n.translate('OPERATION_SHAPE_UP')},/*#__PURE__*/React.createElement(\"div\",{className:\"operation-icon\",onClick:()=>store.moveFront()},/*#__PURE__*/React.createElement(LayerUp,null))),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",title:i18n.translate('OPERATION_SHAPE_DOWN')},/*#__PURE__*/React.createElement(\"div\",{className:\"operation-icon\",onClick:()=>store.moveBack()},/*#__PURE__*/React.createElement(LayerDown,null))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ViewScale,{onViewReset:onViewReset,setViewScale:setViewScale})));});export default OperationNavigator;","map":{"version":3,"names":["React","observer","cx","Tooltip","Pointer","LayerUp","LayerDown","Merge","Subtract","CreateToolSelector","ReviewToolSelector","ViewScale","store","i18n","ShapeType","OperationNavigator","_ref","onViewReset","setViewScale","addMode","config","isSingleSelected","instance","selectedShapes","shape","isSingle","length","selectedShape","undefined","isPolygon","shapeType","POLYGON","createElement","className","active","onClick","setAddMode","readonly","Fragment","placement","title","translate","merge","subtractPolygon","moveFront","moveBack"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/toolbar/OperationNavigator.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Tooltip } from 'antd';\nimport { Pointer, LayerUp, LayerDown, Merge, Subtract } from '../../../common/icons';\nimport CreateToolSelector from '../tools/CreateToolSelector';\nimport ReviewToolSelector from '../review/ReviewToolSelector';\nimport ViewScale from './ViewScale';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ShapeType } from '../../../common/shapes/types';\nimport './OperationNavigator.scss';\n\ninterface OperationNavigatorProps {\n  onViewReset: () => void;\n  setViewScale: (scale: number) => void;\n}\n\nconst OperationNavigator = observer(({ onViewReset, setViewScale }: OperationNavigatorProps) => {\n  const { addMode } = store.config;\n  const { isSingleSelected } = store.instance;\n  const { selectedShapes } = store.shape;\n  const isSingle = isSingleSelected && selectedShapes.length === 1;\n  const selectedShape = isSingle ? selectedShapes[0] : undefined;\n  const isPolygon = selectedShape?.shapeType === ShapeType.POLYGON;\n  return (\n    <div className=\"operation-navigator\">\n      <div>\n        <div\n          className={cx('operation-icon pointer', {\n            active: !addMode,\n          })}\n          onClick={() => {\n            if (addMode) {\n              store.config.setAddMode(false);\n            }\n          }}\n        >\n          <Pointer />\n        </div>\n        <div className=\"divider\" />\n        <CreateToolSelector />\n        <ReviewToolSelector />\n        <div className=\"divider\" />\n        {!store.readonly && !addMode && isSingle && (\n          <>\n            {isPolygon && (\n              <>\n                <Tooltip placement=\"bottom\" title={i18n.translate('OPERATION_SHAPE_MERGE')}>\n                  <div\n                    className=\"operation-icon\"\n                    onClick={store.shape.merge}\n                  >\n                    <Merge />\n                  </div>\n                </Tooltip>\n                <Tooltip placement=\"bottom\" title={i18n.translate('OPERATION_SHAPE_SUBTRACT')}>\n                  <div className=\"operation-icon\" onClick={store.shape.subtractPolygon}>\n                    <Subtract />\n                  </div>\n                </Tooltip>\n              </>\n            )}\n            <Tooltip placement=\"bottom\" title={i18n.translate('OPERATION_SHAPE_UP')}>\n              <div className=\"operation-icon\" onClick={() => store.moveFront()}>\n                <LayerUp />\n              </div>\n            </Tooltip>\n            <Tooltip placement=\"bottom\" title={i18n.translate('OPERATION_SHAPE_DOWN')}>\n              <div className=\"operation-icon\" onClick={() => store.moveBack()}>\n                <LayerDown />\n              </div>\n            </Tooltip>\n          </>\n        )}\n      </div>\n      <div>\n        <ViewScale onViewReset={onViewReset} setViewScale={setViewScale} />\n      </div>\n    </div>\n  );\n});\n\nexport default OperationNavigator;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}