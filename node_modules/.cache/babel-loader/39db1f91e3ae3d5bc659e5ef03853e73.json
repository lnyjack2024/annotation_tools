{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/CameraInstanceItem.tsx\";\nimport React, { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { PlusCircleFilled } from '@ant-design/icons';\nimport ShapeLabel from './ShapeLabel';\nimport InstanceItemMenu from './InstanceItemMenu';\nimport InstanceItemReviewIcon from './InstanceItemReviewIcon';\nimport RelationshipsCount from './RelationshipsCount';\nimport store from '../../store/RootStore';\nconst CameraInstanceItem = observer(({\n  item,\n  camera,\n  cameraIndex\n}) => {\n  const [hovered, setHovered] = useState(false);\n  const [menuVisible, setMenuVisible] = useState(false);\n  const [menuPosition, setMenuPosition] = useState({\n    x: -1,\n    y: -1\n  });\n  const {\n    currentCamera,\n    currentFrame,\n    setCamera\n  } = store.frame;\n  const {\n    frames\n  } = item.cameras[camera];\n  const currentFrameData = frames[currentFrame];\n  const isHidden = !currentFrameData;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('sidebar-category-instance__item', {\n      hidden: isHidden,\n      selected: item.selected && currentCamera === camera\n    }),\n    onClick: () => {\n      if (currentCamera !== camera) {\n        setCamera(camera);\n      }\n      store.instance.selectInstanceItem(item, true);\n    },\n    onMouseEnter: () => setHovered(true),\n    onMouseLeave: () => setHovered(false),\n    onContextMenu: e => {\n      e.preventDefault();\n      if (currentCamera !== camera) {\n        setCamera(camera);\n      }\n      store.instance.selectInstanceItem(item);\n      if (!isHidden) {\n        setMenuPosition({\n          x: e.clientX,\n          y: e.clientY\n        });\n        setMenuVisible(true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ShapeLabel, {\n    item: item,\n    camera: camera,\n    cameraIndex: cameraIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar-category-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(RelationshipsCount, {\n    item: item,\n    camera: camera,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }), !store.readonly && isHidden && hovered && /*#__PURE__*/React.createElement(PlusCircleFilled, {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: () => store.addToCurrentFrame(item, camera),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), !isHidden && /*#__PURE__*/React.createElement(InstanceItemReviewIcon, {\n    item: item,\n    camera: camera,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(InstanceItemMenu, {\n    instanceItem: item,\n    camera: camera,\n    position: menuPosition,\n    visible: menuVisible,\n    onClose: () => setMenuVisible(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }));\n});\nexport default CameraInstanceItem;","map":{"version":3,"names":["React","useState","observer","cx","PlusCircleFilled","ShapeLabel","InstanceItemMenu","InstanceItemReviewIcon","RelationshipsCount","store","CameraInstanceItem","item","camera","cameraIndex","hovered","setHovered","menuVisible","setMenuVisible","menuPosition","setMenuPosition","x","y","currentCamera","currentFrame","setCamera","frame","frames","cameras","currentFrameData","isHidden","createElement","Fragment","className","hidden","selected","onClick","instance","selectInstanceItem","onMouseEnter","onMouseLeave","onContextMenu","e","preventDefault","clientX","clientY","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","readonly","style","cursor","addToCurrentFrame","instanceItem","position","visible","onClose"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/CameraInstanceItem.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { PlusCircleFilled } from '@ant-design/icons';\nimport ShapeLabel from './ShapeLabel';\nimport InstanceItemMenu from './InstanceItemMenu';\nimport InstanceItemReviewIcon from './InstanceItemReviewIcon';\nimport RelationshipsCount from './RelationshipsCount';\nimport InstanceItem from '../../model/InstanceItem';\nimport store from '../../store/RootStore';\n\ninterface CameraInstanceItemProps {\n  item: InstanceItem;\n  camera: string;\n  cameraIndex: number;\n}\n\nconst CameraInstanceItem = observer(({ item, camera, cameraIndex }: CameraInstanceItemProps) => {\n  const [hovered, setHovered] = useState(false);\n  const [menuVisible, setMenuVisible] = useState(false);\n  const [menuPosition, setMenuPosition] = useState({ x: -1, y: -1 });\n\n  const { currentCamera, currentFrame, setCamera } = store.frame;\n  const { frames } = item.cameras[camera];\n  const currentFrameData = frames[currentFrame];\n  const isHidden = !currentFrameData;\n  return (\n    <>\n      <div\n        className={cx('sidebar-category-instance__item', {\n          hidden: isHidden,\n          selected: item.selected && currentCamera === camera,\n        })}\n        onClick={() => {\n          if (currentCamera !== camera) {\n            setCamera(camera);\n          }\n          store.instance.selectInstanceItem(item, true);\n        }}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n        onContextMenu={(e) => {\n          e.preventDefault();\n          if (currentCamera !== camera) {\n            setCamera(camera);\n          }\n          store.instance.selectInstanceItem(item);\n          if (!isHidden) {\n            setMenuPosition({ x: e.clientX, y: e.clientY });\n            setMenuVisible(true);\n          }\n        }}\n      >\n        <ShapeLabel item={item} camera={camera} cameraIndex={cameraIndex} />\n        <div className=\"sidebar-category-action\">\n          <RelationshipsCount item={item} camera={camera} />\n          {!store.readonly && isHidden && hovered && (\n            <PlusCircleFilled\n              style={{ cursor: 'pointer' }}\n              onClick={() => store.addToCurrentFrame(item, camera)}\n            />\n          )}\n          {!isHidden && (\n            <InstanceItemReviewIcon item={item} camera={camera} />\n          )}\n        </div>\n      </div>\n      <InstanceItemMenu\n        instanceItem={item}\n        camera={camera}\n        position={menuPosition}\n        visible={menuVisible}\n        onClose={() => setMenuVisible(false)}\n      />\n    </>\n  );\n});\n\nexport default CameraInstanceItem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}