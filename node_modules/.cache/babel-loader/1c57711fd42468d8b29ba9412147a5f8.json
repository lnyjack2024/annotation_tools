{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/index.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { message, notification } from 'antd';\nimport { isEqual } from 'lodash';\nimport AutoSaver from '../common/AutoSaver';\nimport LayoutWrapper from '../common/layout/LayoutWrapper';\nimport AppWrapper from '../common/shapes/wrapper/AppWrapper';\nimport CamerasContainer from './components/cameras/CamerasContainer';\nimport Toolbar from './components/toolbar/Toolbar';\nimport Sidebar from './components/sidebar/Sidebar';\nimport FrameControl from './components/frames/FrameControl';\nimport AttributesPanel from './components/attributes/AttributesPanel';\nimport AttributesModal from './components/attributes/AttributesModal';\nimport PointAttributesModal from './components/attributes/PointAttributesModal';\nimport FrameAttributesModal from './components/attributes/FrameAttributesModal';\nimport ReviewModal from './components/review/ReviewModal';\nimport ReviewComment from './components/review/ReviewComment';\nimport store from './store/RootStore';\nimport bindKeyboardEvents from './keyboard-events';\nimport i18n from './locales';\nimport { getToolTypeFromFrameData } from './utils';\nimport { ReviewResult } from './types';\nimport { TOOLBAR_HEIGHT, SIDEBAR_WIDTH, ATTR_PANEL_WIDTH } from './constants';\nimport { methods } from './payload';\nimport './index.scss';\nexport class VideoTracking extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // setup i18n\n    /**\n     * auto saver reference\n     */\n    this.saverRef = React.createRef();\n    /**\n     * frame control height (default is 48 + 56 = 104)\n     */\n    this.frameControlHeight = 104;\n    /**\n     * keyboard events\n     */\n    this.removeKeyboardEvents = () => {};\n    /**\n     * save annotation data\n     */\n    this.saveResult = async () => {\n      var _this$saverRef$curren;\n      (_this$saverRef$curren = this.saverRef.current) === null || _this$saverRef$curren === void 0 ? void 0 : _this$saverRef$curren.disableLeaveCheck();\n      return store.saveResult(true);\n    };\n    /**\n     * save review data\n     */\n    this.saveReviews = () => {\n      var _this$saverRef$curren2;\n      (_this$saverRef$curren2 = this.saverRef.current) === null || _this$saverRef$curren2 === void 0 ? void 0 : _this$saverRef$curren2.disableLeaveCheck();\n      return store.saveReviews(true);\n    };\n    /**\n     * save data\n     * @param isAutoSave\n     */\n    this.save = async (isAutoSave = false) => {\n      if (!store.initialized || store.isPreview) {\n        // not initialized, or is preview mode\n        return;\n      }\n      const promises = [];\n      if (store.annotatable) {\n        promises.push(store.saveResult());\n      }\n      if (store.reviewable) {\n        promises.push(store.saveReviews());\n      }\n      if (promises.length > 0) {\n        try {\n          var _this$saverRef$curren3;\n          await Promise.all(promises);\n          message.success(i18n.translate(isAutoSave ? 'SAVE_AUTO_SUCCESS' : 'SAVE_SUCCESS'));\n          // update tempSaved flag\n          (_this$saverRef$curren3 = this.saverRef.current) === null || _this$saverRef$curren3 === void 0 ? void 0 : _this$saverRef$curren3.setTempSaved(true);\n        } catch (e) {\n          if (!isAutoSave) {\n            message.error(i18n.translate('SAVE_FAIL'));\n          } else {\n            throw e;\n          }\n        }\n      }\n    };\n    /**\n     * is annotation modified\n     */\n    this.isModified = () => {\n      const removeUndefinedKeys = v => {\n        if (Array.isArray(v)) {\n          return v.map(i => removeUndefinedKeys(i));\n        }\n        if (typeof v === 'object' && v !== null) {\n          const keys = Object.keys(v);\n          keys.forEach(key => {\n            if (v[key] === undefined) {\n              delete v[key];\n            } else {\n              v[key] = removeUndefinedKeys(v[key]);\n            }\n          });\n        }\n        return v;\n      };\n      const {\n        instances,\n        frames\n      } = store.initialData || {};\n      const currInstances = removeUndefinedKeys(store.instance.instancesJSON());\n      const currFrames = removeUndefinedKeys(store.frame.framesJSON());\n      return !isEqual(currInstances, instances) || !isEqual(currFrames, frames);\n    };\n    /**\n     * get review statistics\n     */\n    this.getStatistics = () => {\n      // all shapes\n      const objects = {\n        total: 0,\n        approved: 0,\n        rejected: 0,\n        suspended: 0,\n        missed: 0,\n        reviewed: 0\n      };\n      // based on different shape types\n      const shapes = {};\n      // based on shape categories\n      const categories = {};\n      // based on categories & shape types\n      const categoryShapes = {};\n      // reviewed issues\n      const issues = {};\n      store.review.issueTypes.forEach(i => {\n        issues[i] = 0;\n      });\n      // reviewed frames\n      const reviewedFrameMap = {};\n      const {\n        instances: instancesMap\n      } = store.instance;\n      const frameReviewStatus = Array.from({\n        length: store.frame.frameCount\n      }).fill(ReviewResult.APPROVE);\n      store.review.allReviews.forEach(({\n        frameIndex,\n        result,\n        instanceId,\n        instanceItemId,\n        camera,\n        type\n      }) => {\n        if (result === ReviewResult.REJECT) {\n          frameReviewStatus[frameIndex] = ReviewResult.REJECT;\n          // calc missed\n          let shapeExisted = true;\n          if (!instanceId || !instanceItemId) {\n            shapeExisted = false;\n          } else {\n            const instance = instancesMap[instanceId];\n            if (!instance) {\n              shapeExisted = false;\n            } else {\n              const item = instance.items[instanceItemId];\n              if (!item) {\n                shapeExisted = false;\n              } else {\n                const cameraData = item.cameras[camera];\n                if (!cameraData) {\n                  shapeExisted = false;\n                } else {\n                  const frameData = cameraData.frames[frameIndex];\n                  if (!frameData) {\n                    shapeExisted = false;\n                  }\n                }\n              }\n            }\n          }\n          if (!shapeExisted) {\n            objects.total += 1;\n            objects.missed += 1;\n          }\n          type === null || type === void 0 ? void 0 : type.forEach(t => {\n            issues[t] += 1;\n          });\n        } else if (result === ReviewResult.SUSPEND && frameReviewStatus[frameIndex] !== ReviewResult.REJECT) {\n          frameReviewStatus[frameIndex] = ReviewResult.SUSPEND;\n        }\n        reviewedFrameMap[frameIndex] = true;\n      });\n      let instanceCount = 0;\n      let distinctInstanceCount = 0;\n      const instances = Object.values(instancesMap);\n      for (let i = 0; i < instances.length; i += 1) {\n        const instance = instances[i];\n        const items = Object.values(instance.items);\n        const category = instance.categoryRef.className;\n        if (!categories[category]) {\n          categories[category] = {\n            total: 0,\n            approved: 0,\n            rejected: 0,\n            suspended: 0,\n            missed: 0,\n            reviewed: 0\n          };\n        }\n        if (!categoryShapes[category]) {\n          categoryShapes[category] = {};\n        }\n        const instanceFrames = new Set();\n        for (let j = 0; j < items.length; j += 1) {\n          const item = items[j];\n          const cameras = Object.values(item.cameras);\n          for (let k = 0; k < cameras.length; k += 1) {\n            const camera = cameras[k];\n            const frames = Object.values(camera.frames);\n            for (let l = 0; l < frames.length; l += 1) {\n              const frame = frames[l];\n              const shape = `${getToolTypeFromFrameData(frame)}`;\n              if (!shapes[shape]) {\n                shapes[shape] = {\n                  total: 0,\n                  approved: 0,\n                  rejected: 0,\n                  suspended: 0,\n                  missed: 0,\n                  reviewed: 0\n                };\n              }\n              if (!categoryShapes[category][shape]) {\n                categoryShapes[category][shape] = {\n                  total: 0,\n                  approved: 0,\n                  rejected: 0,\n                  suspended: 0,\n                  missed: 0,\n                  reviewed: 0\n                };\n              }\n              objects.total += 1;\n              shapes[shape].total += 1;\n              categories[category].total += 1;\n              categoryShapes[category][shape].total += 1;\n              const reviewResult = store.review.getReviewForInstanceItem(item, camera.camera, frame.frameIndex);\n              if (reviewResult === ReviewResult.REJECT) {\n                shapes[shape].rejected += 1;\n                objects.rejected += 1;\n                categories[category].rejected += 1;\n                categoryShapes[category][shape].rejected += 1;\n              } else if (reviewResult === ReviewResult.SUSPEND) {\n                shapes[shape].suspended += 1;\n                objects.suspended += 1;\n                categories[category].suspended += 1;\n                categoryShapes[category][shape].suspended += 1;\n              } else {\n                shapes[shape].approved += 1;\n                objects.approved += 1;\n                categories[category].approved += 1;\n                categoryShapes[category][shape].approved += 1;\n              }\n              if (reviewedFrameMap[frame.frameIndex]) {\n                objects.reviewed += 1;\n                shapes[shape].reviewed += 1;\n                categories[category].reviewed += 1;\n                categoryShapes[category][shape].reviewed += 1;\n              }\n              instanceFrames.add(frame.frameIndex);\n            }\n          }\n        }\n        instanceCount += instanceFrames.size;\n        distinctInstanceCount += 1;\n      }\n      return {\n        objects,\n        shapes,\n        frames: {\n          total: frameReviewStatus.length,\n          approved: frameReviewStatus.filter(i => i === ReviewResult.APPROVE).length,\n          rejected: frameReviewStatus.filter(i => i === ReviewResult.REJECT).length,\n          suspended: frameReviewStatus.filter(i => i === ReviewResult.SUSPEND).length,\n          missed: 0,\n          reviewed: Object.keys(reviewedFrameMap).length\n        },\n        issues,\n        categories,\n        categoryShapes,\n        instanceCount,\n        distinctInstanceCount\n      };\n    };\n    i18n.setLocale(this.props.locale);\n    // set props\n    store.jobProxy = this.props.jobProxy;\n  }\n  async componentDidMount() {\n    this.removeKeyboardEvents = bindKeyboardEvents(this);\n    // init store\n    try {\n      await store.init(this.props);\n    } catch (e) {\n      notification.error({\n        message: e.message,\n        duration: null\n      });\n      return;\n    }\n    // render completed\n    this.props.renderComplete();\n  }\n  componentWillUnmount() {\n    this.removeKeyboardEvents();\n  }\n  render() {\n    const {\n      loading,\n      frameCount\n    } = store.frame;\n    const hasFrameControl = frameCount > 1;\n    return /*#__PURE__*/React.createElement(LayoutWrapper, {\n      className: \"video-tracking-app\",\n      loading: loading || !store.initialized,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(AutoSaver, {\n      ref: this.saverRef,\n      leaveCheck: true,\n      data: {\n        storePointer: store.undo.pointer,\n        storeId: store.undo.lastStoreId\n      },\n      save: () => this.save(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Toolbar, {\n      onSave: () => this.save(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        height: `calc(100% - ${hasFrameControl ? `${this.frameControlHeight + TOOLBAR_HEIGHT}px` : `${TOOLBAR_HEIGHT}px`})`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: `calc(100% - ${SIDEBAR_WIDTH + ATTR_PANEL_WIDTH}px)`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CamerasContainer, {\n      app: this.props.app,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(AttributesPanel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }\n    })), hasFrameControl && /*#__PURE__*/React.createElement(FrameControl, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(AttributesModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(PointAttributesModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(FrameAttributesModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ReviewModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ReviewComment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }\n    }));\n  }\n}\nexport default AppWrapper(observer(VideoTracking), {\n  mappingMethods: Object.values(methods)\n});","map":{"version":3,"names":["React","observer","message","notification","isEqual","AutoSaver","LayoutWrapper","AppWrapper","CamerasContainer","Toolbar","Sidebar","FrameControl","AttributesPanel","AttributesModal","PointAttributesModal","FrameAttributesModal","ReviewModal","ReviewComment","store","bindKeyboardEvents","i18n","getToolTypeFromFrameData","ReviewResult","TOOLBAR_HEIGHT","SIDEBAR_WIDTH","ATTR_PANEL_WIDTH","methods","VideoTracking","Component","constructor","props","saverRef","createRef","frameControlHeight","removeKeyboardEvents","saveResult","_this$saverRef$curren","current","disableLeaveCheck","saveReviews","_this$saverRef$curren2","save","isAutoSave","initialized","isPreview","promises","annotatable","push","reviewable","length","_this$saverRef$curren3","Promise","all","success","translate","setTempSaved","e","error","isModified","removeUndefinedKeys","v","Array","isArray","map","i","keys","Object","forEach","key","undefined","instances","frames","initialData","currInstances","instance","instancesJSON","currFrames","frame","framesJSON","getStatistics","objects","total","approved","rejected","suspended","missed","reviewed","shapes","categories","categoryShapes","issues","review","issueTypes","reviewedFrameMap","instancesMap","frameReviewStatus","from","frameCount","fill","APPROVE","allReviews","frameIndex","result","instanceId","instanceItemId","camera","type","REJECT","shapeExisted","item","items","cameraData","cameras","frameData","t","SUSPEND","instanceCount","distinctInstanceCount","values","category","categoryRef","className","instanceFrames","Set","j","k","l","shape","reviewResult","getReviewForInstanceItem","add","size","filter","setLocale","locale","jobProxy","componentDidMount","init","duration","renderComplete","componentWillUnmount","render","loading","hasFrameControl","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","leaveCheck","data","storePointer","undo","pointer","storeId","lastStoreId","onSave","style","height","width","app","mappingMethods"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/index.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { message, notification } from 'antd';\nimport { isEqual } from 'lodash';\nimport AutoSaver from '../common/AutoSaver';\nimport LayoutWrapper from '../common/layout/LayoutWrapper';\nimport AppWrapper from '../common/shapes/wrapper/AppWrapper';\nimport CamerasContainer from './components/cameras/CamerasContainer';\nimport Toolbar from './components/toolbar/Toolbar';\nimport Sidebar from './components/sidebar/Sidebar';\nimport FrameControl from './components/frames/FrameControl';\nimport AttributesPanel from './components/attributes/AttributesPanel';\nimport AttributesModal from './components/attributes/AttributesModal';\nimport PointAttributesModal from './components/attributes/PointAttributesModal';\nimport FrameAttributesModal from './components/attributes/FrameAttributesModal';\nimport ReviewModal from './components/review/ReviewModal';\nimport ReviewComment from './components/review/ReviewComment';\nimport store from './store/RootStore';\nimport bindKeyboardEvents from './keyboard-events';\nimport i18n from './locales';\nimport { getToolTypeFromFrameData } from './utils';\nimport { Payload, ReviewResult } from './types';\nimport { TOOLBAR_HEIGHT, SIDEBAR_WIDTH, ATTR_PANEL_WIDTH } from './constants';\nimport { methods } from './payload';\nimport './index.scss';\n\ninterface VideoTrackingProps extends Payload {\n  renderComplete: () => Promise<void>;\n}\n\nexport class VideoTracking extends React.Component<VideoTrackingProps> {\n  /**\n   * auto saver reference\n   */\n  saverRef = React.createRef<AutoSaver>();\n\n  /**\n   * frame control height (default is 48 + 56 = 104)\n   */\n  frameControlHeight = 104;\n\n  /**\n   * keyboard events\n   */\n  removeKeyboardEvents = () => {};\n\n  constructor(props: VideoTrackingProps) {\n    super(props);\n\n    // setup i18n\n    i18n.setLocale(this.props.locale);\n    // set props\n    store.jobProxy = this.props.jobProxy;\n  }\n\n  async componentDidMount() {\n    this.removeKeyboardEvents = bindKeyboardEvents(this);\n    // init store\n    try {\n      await store.init(this.props);\n    } catch (e) {\n      notification.error({ message: (e as Error).message, duration: null });\n      return;\n    }\n    // render completed\n    this.props.renderComplete();\n  }\n\n  componentWillUnmount() {\n    this.removeKeyboardEvents();\n  }\n\n  /**\n   * save annotation data\n   */\n  saveResult = async () => {\n    this.saverRef.current?.disableLeaveCheck();\n    return store.saveResult(true);\n  };\n\n  /**\n   * save review data\n   */\n  saveReviews = () => {\n    this.saverRef.current?.disableLeaveCheck();\n    return store.saveReviews(true);\n  };\n\n  /**\n   * save data\n   * @param isAutoSave\n   */\n  save = async (isAutoSave = false) => {\n    if (!store.initialized || store.isPreview) { // not initialized, or is preview mode\n      return;\n    }\n\n    const promises = [];\n    if (store.annotatable) {\n      promises.push(store.saveResult());\n    }\n    if (store.reviewable) {\n      promises.push(store.saveReviews());\n    }\n    if (promises.length > 0) {\n      try {\n        await Promise.all(promises);\n        message.success(i18n.translate(isAutoSave ? 'SAVE_AUTO_SUCCESS' : 'SAVE_SUCCESS'));\n        // update tempSaved flag\n        this.saverRef.current?.setTempSaved(true);\n      } catch (e) {\n        if (!isAutoSave) {\n          message.error(i18n.translate('SAVE_FAIL'));\n        } else {\n          throw e;\n        }\n      }\n    }\n  };\n\n  /**\n   * is annotation modified\n   */\n  isModified = () => {\n    const removeUndefinedKeys: any = (v: any) => {\n      if (Array.isArray(v)) {\n        return v.map((i) => removeUndefinedKeys(i));\n      }\n      if (typeof v === 'object' && v !== null) {\n        const keys = Object.keys(v);\n        keys.forEach((key) => {\n          if (v[key] === undefined) {\n            delete v[key];\n          } else {\n            v[key] = removeUndefinedKeys(v[key]);\n          }\n        });\n      }\n      return v;\n    };\n\n    const { instances, frames } = store.initialData || {};\n    const currInstances = removeUndefinedKeys(store.instance.instancesJSON());\n    const currFrames = removeUndefinedKeys(store.frame.framesJSON());\n    return !isEqual(currInstances, instances)\n      || !isEqual(currFrames, frames);\n  };\n\n  /**\n   * get review statistics\n   */\n  getStatistics = () => {\n    // all shapes\n    const objects = { total: 0, approved: 0, rejected: 0, suspended: 0, missed: 0, reviewed: 0 };\n    // based on different shape types\n    const shapes: {\n      [shape: string]: { total: number; approved: number; rejected: number; suspended: number; missed: number; reviewed: number; };\n    } = {};\n    // based on shape categories\n    const categories: {\n      [category: string]: { total: number; approved: number; rejected: number; suspended: number; missed: number; reviewed: number; };\n    } = {};\n    // based on categories & shape types\n    const categoryShapes: {\n      [category: string]: {\n        [shape: string]: { total: number; approved: number; rejected: number; suspended: number; missed: number; reviewed: number; };\n      };\n    } = {};\n    // reviewed issues\n    const issues: { [issue: string]: number } = {};\n    store.review.issueTypes.forEach((i) => { issues[i] = 0; });\n    // reviewed frames\n    const reviewedFrameMap: { [frameIndex: number]: boolean } = {};\n\n    const { instances: instancesMap } = store.instance;\n    const frameReviewStatus = Array.from({ length: store.frame.frameCount }).fill(ReviewResult.APPROVE);\n    store.review.allReviews.forEach(({ frameIndex, result, instanceId, instanceItemId, camera, type }) => {\n      if (result === ReviewResult.REJECT) {\n        frameReviewStatus[frameIndex] = ReviewResult.REJECT;\n        // calc missed\n        let shapeExisted = true;\n        if (!instanceId || !instanceItemId) {\n          shapeExisted = false;\n        } else {\n          const instance = instancesMap[instanceId];\n          if (!instance) {\n            shapeExisted = false;\n          } else {\n            const item = instance.items[instanceItemId];\n            if (!item) {\n              shapeExisted = false;\n            } else {\n              const cameraData = item.cameras[camera];\n              if (!cameraData) {\n                shapeExisted = false;\n              } else {\n                const frameData = cameraData.frames[frameIndex];\n                if (!frameData) {\n                  shapeExisted = false;\n                }\n              }\n            }\n          }\n        }\n        if (!shapeExisted) {\n          objects.total += 1;\n          objects.missed += 1;\n        }\n        type?.forEach((t) => {\n          issues[t] += 1;\n        });\n      } else if (result === ReviewResult.SUSPEND && frameReviewStatus[frameIndex] !== ReviewResult.REJECT) {\n        frameReviewStatus[frameIndex] = ReviewResult.SUSPEND;\n      }\n      reviewedFrameMap[frameIndex] = true;\n    });\n\n    let instanceCount = 0;\n    let distinctInstanceCount = 0;\n    const instances = Object.values(instancesMap);\n    for (let i = 0; i < instances.length; i += 1) {\n      const instance = instances[i];\n      const items = Object.values(instance.items);\n      const category = instance.categoryRef.className;\n      if (!categories[category]) {\n        categories[category] = { total: 0, approved: 0, rejected: 0, suspended: 0, missed: 0, reviewed: 0 };\n      }\n      if (!categoryShapes[category]) {\n        categoryShapes[category] = {};\n      }\n      const instanceFrames = new Set();\n      for (let j = 0; j < items.length; j += 1) {\n        const item = items[j];\n        const cameras = Object.values(item.cameras);\n        for (let k = 0; k < cameras.length; k += 1) {\n          const camera = cameras[k];\n          const frames = Object.values(camera.frames);\n          for (let l = 0; l < frames.length; l += 1) {\n            const frame = frames[l];\n            const shape = `${getToolTypeFromFrameData(frame)}`;\n            if (!shapes[shape]) {\n              shapes[shape] = { total: 0, approved: 0, rejected: 0, suspended: 0, missed: 0, reviewed: 0 };\n            }\n            if (!categoryShapes[category][shape]) {\n              categoryShapes[category][shape] = { total: 0, approved: 0, rejected: 0, suspended: 0, missed: 0, reviewed: 0 };\n            }\n            objects.total += 1;\n            shapes[shape].total += 1;\n            categories[category].total += 1;\n            categoryShapes[category][shape].total += 1;\n            const reviewResult = store.review.getReviewForInstanceItem(item, camera.camera, frame.frameIndex);\n            if (reviewResult === ReviewResult.REJECT) {\n              shapes[shape].rejected += 1;\n              objects.rejected += 1;\n              categories[category].rejected += 1;\n              categoryShapes[category][shape].rejected += 1;\n            } else if (reviewResult === ReviewResult.SUSPEND) {\n              shapes[shape].suspended += 1;\n              objects.suspended += 1;\n              categories[category].suspended += 1;\n              categoryShapes[category][shape].suspended += 1;\n            } else {\n              shapes[shape].approved += 1;\n              objects.approved += 1;\n              categories[category].approved += 1;\n              categoryShapes[category][shape].approved += 1;\n            }\n            if (reviewedFrameMap[frame.frameIndex]) {\n              objects.reviewed += 1;\n              shapes[shape].reviewed += 1;\n              categories[category].reviewed += 1;\n              categoryShapes[category][shape].reviewed += 1;\n            }\n            instanceFrames.add(frame.frameIndex);\n          }\n        }\n      }\n      instanceCount += instanceFrames.size;\n      distinctInstanceCount += 1;\n    }\n    return {\n      objects,\n      shapes,\n      frames: {\n        total: frameReviewStatus.length,\n        approved: frameReviewStatus.filter((i) => i === ReviewResult.APPROVE).length,\n        rejected: frameReviewStatus.filter((i) => i === ReviewResult.REJECT).length,\n        suspended: frameReviewStatus.filter((i) => i === ReviewResult.SUSPEND).length,\n        missed: 0,\n        reviewed: Object.keys(reviewedFrameMap).length,\n      },\n      issues,\n      categories,\n      categoryShapes,\n      instanceCount,\n      distinctInstanceCount,\n    };\n  };\n\n  render() {\n    const { loading, frameCount } = store.frame;\n    const hasFrameControl = frameCount > 1;\n    return (\n      <LayoutWrapper\n        className=\"video-tracking-app\"\n        loading={loading || !store.initialized}\n      >\n        <AutoSaver\n          ref={this.saverRef}\n          leaveCheck\n          data={{ storePointer: store.undo.pointer, storeId: store.undo.lastStoreId }}\n          save={() => this.save(true)}\n        />\n        <Toolbar onSave={() => this.save()} />\n        <div\n          className=\"container\"\n          style={{\n            height: `calc(100% - ${hasFrameControl ? `${this.frameControlHeight + TOOLBAR_HEIGHT}px` : `${TOOLBAR_HEIGHT}px`})`,\n          }}\n        >\n          <Sidebar />\n          <div style={{ width: `calc(100% - ${SIDEBAR_WIDTH + ATTR_PANEL_WIDTH}px)` }}>\n            <CamerasContainer app={this.props.app} />\n          </div>\n          <AttributesPanel />\n        </div>\n        {hasFrameControl && (\n          <FrameControl />\n        )}\n        <AttributesModal />\n        <PointAttributesModal />\n        <FrameAttributesModal />\n        <ReviewModal />\n        <ReviewComment />\n      </LayoutWrapper>\n    );\n  }\n}\n\nexport default AppWrapper(observer(VideoTracking), {\n  mappingMethods: Object.values(methods),\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}