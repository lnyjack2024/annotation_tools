{"ast":null,"code":"import Mousetrap from 'mousetrap';\nimport { ReviewResult } from './types';\nimport store from './store/RootStore';\nexport default function bindKeyboardEvents(ctx) {\n  // default keyboard events\n  Mousetrap.bind('f', () => {\n    ctx.handleScreenFull();\n    return false;\n  });\n  Mousetrap.bind(['options+del', 'alt+del', 'options+backspace', 'alt+backspace'], () => {\n    if (store.instance.selectedInstance && store.instance.selectedInstance.start !== 0 && store.review.drawMode) {\n      store.instance.deleteInstance(store.instance.selectedInstance.id);\n    }\n    return false;\n  });\n  Mousetrap.bind(['ctrl+s', 'command+s'], () => {\n    ctx.handleSave();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+z', 'command+z'], () => {\n    ctx.handleUndo();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+y', 'command+y'], () => {\n    ctx.handleRedo();\n    return false;\n  });\n  Mousetrap.bind('enter', () => {\n    ctx.addInstance();\n    return false;\n  });\n  Mousetrap.bind('tab', () => {\n    const {\n      instance: {\n        selectedInstance\n      },\n      analyse: {\n        selectedRegion,\n        selectedTime\n      }\n    } = store;\n    const region = selectedInstance || selectedRegion;\n    const start = (region === null || region === void 0 ? void 0 : region.start) || selectedTime;\n    const end = region === null || region === void 0 ? void 0 : region.end;\n    if (start !== undefined && start !== null) {\n      store.analyse.setSeekto({\n        start,\n        end\n      });\n      return false;\n    }\n  });\n  Mousetrap.bind(['ctrl+r', 'command+r'], e => {\n    window.location.reload();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+i', 'command+i'], () => {\n    store.setting.setZoom(store.setting.zoom + 1);\n    return false;\n  });\n  Mousetrap.bind(['ctrl+o', 'command+o'], () => {\n    store.setting.setZoom(store.setting.zoom - 1);\n    return false;\n  });\n  const list1 = Array(9).fill(1).map((n, i) => `ctrl+${n + i}`);\n  const list2 = Array(9).fill(1).map((n, i) => `command+${n + i}`);\n  Mousetrap.bind([...list1, ...list2], e => {\n    const num = Number(e.key);\n    if (!Number.isNaN(num)) {\n      ctx.addInstance(num);\n    }\n    return false;\n  });\n  Mousetrap.bind('1', () => {\n    store.review.shortcutAction(ReviewResult.APPROVE);\n    return false;\n  });\n  Mousetrap.bind('2', () => {\n    store.review.shortcutAction(ReviewResult.REJECT);\n    return false;\n  });\n  Mousetrap.bind('3', () => {\n    store.review.shortcutAction(ReviewResult.SUSPEND);\n    return false;\n  });\n  Mousetrap.bind('ctrl+w', () => {\n    store.setting.setSideBarVisible(!store.setting.sideBarVisible);\n    return false;\n  });\n  Mousetrap.bind('enter', () => {\n    ctx.handleEnter();\n  });\n  return () => {\n    Mousetrap.unbind('f');\n    Mousetrap.unbind(['options+del', 'alt+del', 'options+backspace', 'alt+backspace']);\n    Mousetrap.unbind(['ctrl+s', 'command+s']);\n    Mousetrap.unbind(['ctrl+z', 'command+z']);\n    Mousetrap.unbind(['ctrl+y', 'command+y']);\n    Mousetrap.unbind('enter');\n    Mousetrap.unbind(['tab']);\n    Mousetrap.unbind(['ctrl+r', 'command+r']);\n    Mousetrap.unbind(['ctrl+i', 'command+i']);\n    Mousetrap.unbind(['ctrl+o', 'command+o']);\n    Mousetrap.unbind([...list1, ...list2]);\n    Mousetrap.unbind('1');\n    Mousetrap.unbind('2');\n    Mousetrap.unbind('3');\n    Mousetrap.unbind('ctrl+w');\n  };\n}","map":{"version":3,"names":["Mousetrap","ReviewResult","store","bindKeyboardEvents","ctx","bind","handleScreenFull","instance","selectedInstance","start","review","drawMode","deleteInstance","id","handleSave","handleUndo","handleRedo","addInstance","analyse","selectedRegion","selectedTime","region","end","undefined","setSeekto","e","window","location","reload","setting","setZoom","zoom","list1","Array","fill","map","n","i","list2","num","Number","key","isNaN","shortcutAction","APPROVE","REJECT","SUSPEND","setSideBarVisible","sideBarVisible","handleEnter","unbind"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/keyboard-events.ts"],"sourcesContent":["import Mousetrap from 'mousetrap';\nimport { SpeechAnalysis } from './index';\nimport { ReviewResult } from './types';\nimport store from './store/RootStore';\n\nexport default function bindKeyboardEvents(ctx: SpeechAnalysis) {\n  // default keyboard events\n  Mousetrap.bind('f', () => {\n    ctx.handleScreenFull();\n    return false;\n  });\n  Mousetrap.bind(['options+del', 'alt+del', 'options+backspace', 'alt+backspace'], () => {\n    if (\n      store.instance.selectedInstance &&\n      store.instance.selectedInstance.start !== 0 &&\n      store.review.drawMode\n    ) {\n      store.instance.deleteInstance(store.instance.selectedInstance.id);\n    }\n    return false;\n  });\n  Mousetrap.bind(['ctrl+s', 'command+s'], () => {\n    ctx.handleSave();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+z', 'command+z'], () => {\n    ctx.handleUndo();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+y', 'command+y'], () => {\n    ctx.handleRedo();\n    return false;\n  });\n  Mousetrap.bind('enter', () => {\n    ctx.addInstance();\n    return false;\n  });\n  Mousetrap.bind('tab', () => {\n    const { instance: { selectedInstance }, analyse: { selectedRegion, selectedTime } } = store;\n    const region = selectedInstance || selectedRegion;\n    const start = region?.start || selectedTime;\n    const end = region?.end;\n    if (start !== undefined && start !== null) {\n      store.analyse.setSeekto({ start, end });\n      return false;\n    }\n  });\n\n  Mousetrap.bind(['ctrl+r', 'command+r'], (e) => {\n    window.location.reload();\n    return false;\n  });\n\n  Mousetrap.bind(['ctrl+i', 'command+i'], () => {\n    store.setting.setZoom(store.setting.zoom + 1);\n    return false;\n  });\n\n  Mousetrap.bind(['ctrl+o', 'command+o'], () => {\n    store.setting.setZoom(store.setting.zoom - 1);\n    return false;\n  });\n\n  const list1: string[] = Array(9).fill(1).map((n, i) => `ctrl+${n + i}`);\n  const list2: string[] = Array(9).fill(1).map((n, i) => `command+${n + i}`);\n  Mousetrap.bind([...list1, ...list2], (e) => {\n    const num = Number(e.key);\n    if (!Number.isNaN(num)) {\n      ctx.addInstance(num);\n    }\n    return false;\n  });\n\n  Mousetrap.bind('1', () => {\n    store.review.shortcutAction(ReviewResult.APPROVE);\n    return false;\n  });\n\n  Mousetrap.bind('2', () => {\n    store.review.shortcutAction(ReviewResult.REJECT);\n    return false;\n  });\n\n  Mousetrap.bind('3', () => {\n    store.review.shortcutAction(ReviewResult.SUSPEND);\n    return false;\n  });\n\n  Mousetrap.bind('ctrl+w', () => {\n    store.setting.setSideBarVisible(!store.setting.sideBarVisible);\n    return false;\n  });\n\n  Mousetrap.bind('enter', () => {\n    ctx.handleEnter();\n  });\n\n  return () => {\n    Mousetrap.unbind('f');\n    Mousetrap.unbind(['options+del', 'alt+del', 'options+backspace', 'alt+backspace']);\n    Mousetrap.unbind(['ctrl+s', 'command+s']);\n    Mousetrap.unbind(['ctrl+z', 'command+z']);\n    Mousetrap.unbind(['ctrl+y', 'command+y']);\n    Mousetrap.unbind('enter');\n    Mousetrap.unbind(['tab']);\n    Mousetrap.unbind(['ctrl+r', 'command+r']);\n    Mousetrap.unbind(['ctrl+i', 'command+i']);\n    Mousetrap.unbind(['ctrl+o', 'command+o']);\n    Mousetrap.unbind([...list1, ...list2]);\n    Mousetrap.unbind('1');\n    Mousetrap.unbind('2');\n    Mousetrap.unbind('3');\n    Mousetrap.unbind('ctrl+w');\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}