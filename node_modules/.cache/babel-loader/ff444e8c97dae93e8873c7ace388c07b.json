{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{observer}from'mobx-react';import{SoundFilled,CloseOutlined}from'@ant-design/icons';import{Edit,Validate}from'../../common/icons';import store from'../store/RootStore';import localMessage from'../locale';import cache,{CacheKey}from'../utils-storage';import{ReviewMode}from'../types';import{ToolMode}from'../../../utils/tool-mode';const ReviewModeSwitch=observer(()=>{const[labelingHovered,setLabelingHovered]=useState(false);const[reviewHorvered,setReviewHovered]=useState(false);const[showReviewAlert,setShowReviewAlert]=useState(false);const autoShowReviewAlert=useRef(true);useEffect(()=>{let hide=false;try{const s=cache.get(CacheKey.REVIEW_ALERT_HIDE);hide=s==='hide';}catch(e){// get error\n}setShowReviewAlert(!hide&&autoShowReviewAlert.current&&store.config.reviewMode===ReviewMode.REVIEW);},[store.config.reviewMode]);const closeAlert=function(){let never=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;autoShowReviewAlert.current=false;setShowReviewAlert(false);if(never){cache.set(CacheKey.REVIEW_ALERT_HIDE,'hide');}};const{toolMode}=store.jobProxy||{};if(toolMode!==ToolMode.QA_RW&&toolMode!==ToolMode.AUDIT_RW){return null;}const modeLabel=localMessage(toolMode===ToolMode.AUDIT_RW?'REVIEW_MODE_AUDIT':'REVIEW_MODE_QA');return/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode\"},/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-button\",style:{...(store.config.reviewMode===ReviewMode.LABELING&&{backgroundColor:'#4A90E2',color:'#FFFFFF'})},onClick:()=>store.config.setReviewMode(ReviewMode.LABELING),onMouseEnter:()=>setLabelingHovered(true),onMouseLeave:()=>setLabelingHovered(false)},/*#__PURE__*/React.createElement(Edit,null),/*#__PURE__*/React.createElement(\"span\",{className:\"review-mode-text\"},localMessage('REVIEW_MODE_LABELING')),labelingHovered&&/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-info\"},/*#__PURE__*/React.createElement(\"p\",{style:{color:'#FFFFFF'}},localMessage('REVIEW_MODE_LABELING')),/*#__PURE__*/React.createElement(\"div\",null,localMessage('REVIEW_MODE_LABELING_TIP')))),/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-button\",style:{...(store.config.reviewMode===ReviewMode.REVIEW&&{backgroundColor:'#FFE600',color:'#363C4D'})},onClick:()=>store.config.setReviewMode(ReviewMode.REVIEW),onMouseEnter:()=>setReviewHovered(true),onMouseLeave:()=>setReviewHovered(false)},/*#__PURE__*/React.createElement(Validate,null),/*#__PURE__*/React.createElement(\"span\",{className:\"review-mode-text\"},modeLabel),reviewHorvered&&/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-info\"},/*#__PURE__*/React.createElement(\"p\",{style:{color:'#FFFFFF'}},modeLabel),/*#__PURE__*/React.createElement(\"div\",null,localMessage(toolMode===ToolMode.AUDIT_RW?'REVIEW_MODE_AUDIT_TIP':'REVIEW_MODE_QA_TIP'))),showReviewAlert&&/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-popover\",onMouseEnter:()=>setReviewHovered(false)},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(SoundFilled,{style:{fontSize:16,color:'#4A90E2',marginRight:4}}),localMessage('REVIEW_MODE_ALERT')),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(CloseOutlined,{style:{color:'rgba(255, 255, 255, 0.8)',cursor:'pointer'},onClick:()=>closeAlert()}))),/*#__PURE__*/React.createElement(\"div\",null,localMessage(toolMode===ToolMode.AUDIT_RW?'REVIEW_MODE_ALERT_INFO_AUDIT':'REVIEW_MODE_ALERT_INFO')),/*#__PURE__*/React.createElement(\"div\",{className:\"footer\"},/*#__PURE__*/React.createElement(\"span\",{style:{cursor:'pointer'},onClick:()=>closeAlert(true)},localMessage('REVIEW_MODE_ALERT_HIDE'))))));});export default ReviewModeSwitch;","map":{"version":3,"names":["React","useState","useEffect","useRef","observer","SoundFilled","CloseOutlined","Edit","Validate","store","localMessage","cache","CacheKey","ReviewMode","ToolMode","ReviewModeSwitch","labelingHovered","setLabelingHovered","reviewHorvered","setReviewHovered","showReviewAlert","setShowReviewAlert","autoShowReviewAlert","hide","s","get","REVIEW_ALERT_HIDE","e","current","config","reviewMode","REVIEW","closeAlert","never","arguments","length","undefined","set","toolMode","jobProxy","QA_RW","AUDIT_RW","modeLabel","createElement","className","style","LABELING","backgroundColor","color","onClick","setReviewMode","onMouseEnter","onMouseLeave","fontSize","marginRight","cursor"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/editable-text/components/ReviewMode.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { SoundFilled, CloseOutlined } from '@ant-design/icons';\nimport { Edit, Validate } from '../../common/icons';\nimport store from '../store/RootStore';\nimport localMessage from '../locale';\nimport cache, { CacheKey } from '../utils-storage';\nimport { ReviewMode } from '../types';\nimport { ToolMode } from '../../../utils/tool-mode';\n\nconst ReviewModeSwitch = observer(() => {\n  const [labelingHovered, setLabelingHovered] = useState(false);\n  const [reviewHorvered, setReviewHovered] = useState(false);\n  const [showReviewAlert, setShowReviewAlert] = useState(false);\n  const autoShowReviewAlert = useRef(true);\n\n  useEffect(() => {\n    let hide = false;\n    try {\n      const s = cache.get(CacheKey.REVIEW_ALERT_HIDE);\n      hide = s === 'hide';\n    } catch (e) {\n      // get error\n    }\n    setShowReviewAlert(!hide && autoShowReviewAlert.current && store.config.reviewMode === ReviewMode.REVIEW);\n  }, [store.config.reviewMode]);\n\n  const closeAlert = (never = false) => {\n    autoShowReviewAlert.current = false;\n    setShowReviewAlert(false);\n    if (never) {\n      cache.set(CacheKey.REVIEW_ALERT_HIDE, 'hide');\n    }\n  };\n\n  const { toolMode } = store.jobProxy || {};\n  if (toolMode !== ToolMode.QA_RW && toolMode !== ToolMode.AUDIT_RW) {\n    return null;\n  }\n\n  const modeLabel = localMessage(toolMode === ToolMode.AUDIT_RW ? 'REVIEW_MODE_AUDIT' : 'REVIEW_MODE_QA');\n  return (\n    <div className=\"review-mode\">\n      <div\n        className=\"review-mode-button\"\n        style={{\n          ...store.config.reviewMode === ReviewMode.LABELING && {\n            backgroundColor: '#4A90E2',\n            color: '#FFFFFF'\n          }\n        }}\n        onClick={() => store.config.setReviewMode(ReviewMode.LABELING)}\n        onMouseEnter={() => setLabelingHovered(true)}\n        onMouseLeave={() => setLabelingHovered(false)}\n      >\n        <Edit />\n        <span className=\"review-mode-text\">{localMessage('REVIEW_MODE_LABELING')}</span>\n        {labelingHovered && (\n          <div className=\"review-mode-info\">\n            <p style={{ color: '#FFFFFF' }}>{localMessage('REVIEW_MODE_LABELING')}</p>\n            <div>{localMessage('REVIEW_MODE_LABELING_TIP')}</div>\n          </div>\n        )}\n      </div>\n      <div\n        className=\"review-mode-button\"\n        style={{\n          ...store.config.reviewMode === ReviewMode.REVIEW && {\n            backgroundColor: '#FFE600',\n            color: '#363C4D',\n          }\n        }}\n        onClick={() => store.config.setReviewMode(ReviewMode.REVIEW)}\n        onMouseEnter={() => setReviewHovered(true)}\n        onMouseLeave={() => setReviewHovered(false)}\n      >\n        <Validate />\n        <span className=\"review-mode-text\">{modeLabel}</span>\n        {reviewHorvered && (\n          <div className=\"review-mode-info\">\n            <p style={{ color: '#FFFFFF' }}>{modeLabel}</p>\n            <div>{localMessage(toolMode === ToolMode.AUDIT_RW ? 'REVIEW_MODE_AUDIT_TIP' : 'REVIEW_MODE_QA_TIP')}</div>\n          </div>\n        )}\n        {showReviewAlert && (\n          <div\n            className=\"review-mode-popover\"\n            onMouseEnter={() => setReviewHovered(false)}\n          >\n            <div className=\"title\">\n              <span>\n                <SoundFilled\n                  style={{\n                    fontSize: 16,\n                    color: '#4A90E2',\n                    marginRight: 4,\n                  }}\n                />\n                {localMessage('REVIEW_MODE_ALERT')}\n              </span>\n              <span>\n                <CloseOutlined\n                  style={{\n                    color: 'rgba(255, 255, 255, 0.8)',\n                    cursor: 'pointer',\n                  }}\n                  onClick={() => closeAlert()}\n                />\n              </span>\n            </div>\n            <div>{localMessage(toolMode === ToolMode.AUDIT_RW ? 'REVIEW_MODE_ALERT_INFO_AUDIT' : 'REVIEW_MODE_ALERT_INFO')}</div>\n            <div className=\"footer\">\n              <span\n                style={{ cursor: 'pointer' }}\n                onClick={() => closeAlert(true)}\n              >\n                {localMessage('REVIEW_MODE_ALERT_HIDE')}\n              </span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n\nexport default ReviewModeSwitch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}