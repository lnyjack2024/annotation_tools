{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{observer}from'mobx-react';import{SoundFilled,CloseOutlined}from'@ant-design/icons';import{Edit,Validate}from'../../../common/icons';import store from'../../store/RootStore';import i18n from'../../locales';import{ReviewMode}from'../../types';import{ToolMode}from'../../../../utils/tool-mode';// key to store review alert display option\nconst storageKey='video-tracking-review-alert';const ReviewModeSwitch=observer(()=>{var _store$jobProxy;const[labelingHovered,setLabelingHovered]=useState(false);const[reviewHorvered,setReviewHovered]=useState(false);const[showReviewAlert,setShowReviewAlert]=useState(false);const autoShowReviewAlert=useRef(true);useEffect(()=>{let hide=false;try{const s=localStorage.getItem(storageKey);hide=s==='hide';}catch(e){// get error\n}setShowReviewAlert(!hide&&autoShowReviewAlert.current&&store.config.reviewMode===ReviewMode.REVIEW);},[]);const closeAlert=function(){let never=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;autoShowReviewAlert.current=false;setShowReviewAlert(false);if(never){localStorage.setItem(storageKey,'hide');}};if(((_store$jobProxy=store.jobProxy)===null||_store$jobProxy===void 0?void 0:_store$jobProxy.toolMode)!==ToolMode.QA_RW){return null;}return/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode\"},/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-button\",style:{...(store.config.reviewMode===ReviewMode.LABELING&&{backgroundColor:'#4A90E2'})},onClick:()=>store.config.setReviewMode(ReviewMode.LABELING),onMouseEnter:()=>setLabelingHovered(true),onMouseLeave:()=>setLabelingHovered(false)},/*#__PURE__*/React.createElement(Edit,null),/*#__PURE__*/React.createElement(\"span\",{className:\"review-mode-text\"},i18n.translate('REVIEW_MODE_LABELING')),labelingHovered&&/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-info\"},/*#__PURE__*/React.createElement(\"p\",{style:{color:'#FFFFFF'}},i18n.translate('REVIEW_MODE_LABELING')),/*#__PURE__*/React.createElement(\"div\",null,i18n.translate('REVIEW_MODE_LABELING_TIP')))),/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-button\",style:{...(store.config.reviewMode===ReviewMode.REVIEW&&{backgroundColor:'#FFE600',color:'#3D424D'})},onClick:()=>store.config.setReviewMode(ReviewMode.REVIEW),onMouseEnter:()=>setReviewHovered(true),onMouseLeave:()=>setReviewHovered(false)},/*#__PURE__*/React.createElement(Validate,null),/*#__PURE__*/React.createElement(\"span\",{className:\"review-mode-text\"},i18n.translate('REVIEW_MODE_QA')),reviewHorvered&&/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-info\"},/*#__PURE__*/React.createElement(\"p\",{style:{color:'#FFFFFF'}},i18n.translate('REVIEW_MODE_QA')),/*#__PURE__*/React.createElement(\"div\",null,i18n.translate('REVIEW_MODE_QA_TIP'))),showReviewAlert&&/*#__PURE__*/React.createElement(\"div\",{className:\"review-mode-popover\",onMouseEnter:()=>setReviewHovered(false)},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(SoundFilled,{style:{fontSize:16,color:'#4A90E2',marginRight:4}}),i18n.translate('REVIEW_MODE_ALERT')),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(CloseOutlined,{style:{color:'rgba(255, 255, 255, 0.8)',cursor:'pointer'},onClick:()=>closeAlert()}))),/*#__PURE__*/React.createElement(\"div\",null,i18n.translate('REVIEW_MODE_ALERT_INFO')),/*#__PURE__*/React.createElement(\"div\",{className:\"footer\"},/*#__PURE__*/React.createElement(\"span\",{style:{cursor:'pointer'},onClick:()=>closeAlert(true)},i18n.translate('REVIEW_MODE_ALERT_HIDE'))))));});export default ReviewModeSwitch;","map":{"version":3,"names":["React","useState","useEffect","useRef","observer","SoundFilled","CloseOutlined","Edit","Validate","store","i18n","ReviewMode","ToolMode","storageKey","ReviewModeSwitch","_store$jobProxy","labelingHovered","setLabelingHovered","reviewHorvered","setReviewHovered","showReviewAlert","setShowReviewAlert","autoShowReviewAlert","hide","s","localStorage","getItem","e","current","config","reviewMode","REVIEW","closeAlert","never","arguments","length","undefined","setItem","jobProxy","toolMode","QA_RW","createElement","className","style","LABELING","backgroundColor","onClick","setReviewMode","onMouseEnter","onMouseLeave","translate","color","fontSize","marginRight","cursor"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/toolbar/ReviewMode.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { SoundFilled, CloseOutlined } from '@ant-design/icons';\nimport { Edit, Validate } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewMode } from '../../types';\nimport { ToolMode } from '../../../../utils/tool-mode';\n\n// key to store review alert display option\nconst storageKey = 'video-tracking-review-alert';\n\nconst ReviewModeSwitch = observer(() => {\n  const [labelingHovered, setLabelingHovered] = useState(false);\n  const [reviewHorvered, setReviewHovered] = useState(false);\n  const [showReviewAlert, setShowReviewAlert] = useState(false);\n  const autoShowReviewAlert = useRef(true);\n\n  useEffect(() => {\n    let hide = false;\n    try {\n      const s = localStorage.getItem(storageKey);\n      hide = s === 'hide';\n    } catch (e) {\n      // get error\n    }\n    setShowReviewAlert(!hide && autoShowReviewAlert.current && store.config.reviewMode === ReviewMode.REVIEW);\n  }, []);\n\n  const closeAlert = (never = false) => {\n    autoShowReviewAlert.current = false;\n    setShowReviewAlert(false);\n    if (never) {\n      localStorage.setItem(storageKey, 'hide');\n    }\n  };\n\n  if (store.jobProxy?.toolMode !== ToolMode.QA_RW) {\n    return null;\n  }\n  return (\n    <div className=\"review-mode\">\n      <div\n        className=\"review-mode-button\"\n        style={{\n          ...store.config.reviewMode === ReviewMode.LABELING && {\n            backgroundColor: '#4A90E2',\n          }\n        }}\n        onClick={() => store.config.setReviewMode(ReviewMode.LABELING)}\n        onMouseEnter={() => setLabelingHovered(true)}\n        onMouseLeave={() => setLabelingHovered(false)}\n      >\n        <Edit />\n        <span className=\"review-mode-text\">{i18n.translate('REVIEW_MODE_LABELING')}</span>\n        {labelingHovered && (\n          <div className=\"review-mode-info\">\n            <p style={{ color: '#FFFFFF' }}>{i18n.translate('REVIEW_MODE_LABELING')}</p>\n            <div>{i18n.translate('REVIEW_MODE_LABELING_TIP')}</div>\n          </div>\n        )}\n      </div>\n      <div\n        className=\"review-mode-button\"\n        style={{\n          ...store.config.reviewMode === ReviewMode.REVIEW && {\n            backgroundColor: '#FFE600',\n            color: '#3D424D',\n          }\n        }}\n        onClick={() => store.config.setReviewMode(ReviewMode.REVIEW)}\n        onMouseEnter={() => setReviewHovered(true)}\n        onMouseLeave={() => setReviewHovered(false)}\n      >\n        <Validate />\n        <span className=\"review-mode-text\">{i18n.translate('REVIEW_MODE_QA')}</span>\n        {reviewHorvered && (\n          <div className=\"review-mode-info\">\n            <p style={{ color: '#FFFFFF' }}>{i18n.translate('REVIEW_MODE_QA')}</p>\n            <div>{i18n.translate('REVIEW_MODE_QA_TIP')}</div>\n          </div>\n        )}\n        {showReviewAlert && (\n          <div\n            className=\"review-mode-popover\"\n            onMouseEnter={() => setReviewHovered(false)}\n          >\n            <div className=\"title\">\n              <span>\n                <SoundFilled\n                  style={{\n                    fontSize: 16,\n                    color: '#4A90E2',\n                    marginRight: 4,\n                  }}\n                />\n                {i18n.translate('REVIEW_MODE_ALERT')}\n              </span>\n              <span>\n                <CloseOutlined\n                  style={{\n                    color: 'rgba(255, 255, 255, 0.8)',\n                    cursor: 'pointer',\n                  }}\n                  onClick={() => closeAlert()}\n                />\n              </span>\n            </div>\n            <div>{i18n.translate('REVIEW_MODE_ALERT_INFO')}</div>\n            <div className=\"footer\">\n              <span\n                style={{ cursor: 'pointer' }}\n                onClick={() => closeAlert(true)}\n              >\n                {i18n.translate('REVIEW_MODE_ALERT_HIDE')}\n              </span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n\nexport default ReviewModeSwitch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}