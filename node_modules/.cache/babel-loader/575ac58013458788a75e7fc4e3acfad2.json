{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/llm/input/InputWrapper.tsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport Input from './Input';\nimport { ContentItemType } from '../types';\nimport './Input.scss';\nexport let InputType = /*#__PURE__*/function (InputType) {\n  InputType[\"DEFAULT\"] = \"default\";\n  return InputType;\n}({});\nconst InputWrapper = ({\n  types = [InputType.DEFAULT],\n  defaultValue,\n  onSubmit,\n  onCancel,\n  onError\n}) => {\n  const textRef = useRef(null);\n  const cachedText = useRef('');\n  const [type, setType] = useState();\n  useEffect(() => {\n    setType(InputType.DEFAULT);\n  }, []);\n  useEffect(() => {\n    const newContent = [];\n    if (cachedText.current) {\n      newContent.push({\n        type: ContentItemType.UNSTYLED,\n        content: cachedText.current\n      });\n    }\n    ;\n    if (newContent.length > 0) {\n      if (type === InputType.DEFAULT) {\n        var _textRef$current;\n        (_textRef$current = textRef.current) === null || _textRef$current === void 0 ? void 0 : _textRef$current.setValue(newContent);\n      }\n    }\n  }, [type]);\n  return type === InputType.DEFAULT ? /*#__PURE__*/React.createElement(Input, {\n    ref: textRef,\n    defaultValue: defaultValue,\n    onSubmit: onSubmit,\n    onCancel: onCancel,\n    onError: onError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }) : null;\n};\nexport default InputWrapper;","map":{"version":3,"names":["React","useEffect","useRef","useState","Input","ContentItemType","InputType","InputWrapper","types","DEFAULT","defaultValue","onSubmit","onCancel","onError","textRef","cachedText","type","setType","newContent","current","push","UNSTYLED","content","length","_textRef$current","setValue","createElement","ref","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/llm/input/InputWrapper.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport Input, { InputHandle } from './Input';\nimport { Content, ContentItemType } from '../types';\nimport './Input.scss';\n\nexport enum InputType {\n  DEFAULT = 'default',\n}\n\ninterface InputWrapperProps {\n  types?: InputType[];\n  defaultValue?: Content;\n  onSubmit: (value: Content) => void;\n  onCancel: () => void;\n  onError: (msg?: string) => void;\n}\n\nconst InputWrapper: React.FC<InputWrapperProps> = ({\n  types = [InputType.DEFAULT],\n  defaultValue,\n  onSubmit,\n  onCancel,\n  onError,\n}) => {\n  const textRef = useRef<InputHandle>(null);\n  const cachedText = useRef('');\n  const [type, setType] = useState<InputType>();\n\n  useEffect(() => {\n    setType(InputType.DEFAULT);\n  }, []);\n\n  useEffect(() => {\n    const newContent: Content = [];\n    if (cachedText.current) {\n      newContent.push({\n        type: ContentItemType.UNSTYLED,\n        content: cachedText.current,\n      });\n    };\n    if (newContent.length > 0) {\n      if (type === InputType.DEFAULT) {\n        textRef.current?.setValue(newContent);\n      }\n    }\n  }, [type]);\n\n  return type === InputType.DEFAULT ? (\n    <Input\n      ref={textRef}\n      defaultValue={defaultValue}\n      onSubmit={onSubmit}\n      onCancel={onCancel}\n      onError={onError}\n    />\n  ) : null;\n};\n\nexport default InputWrapper;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAuB,SAAS;AAC5C,SAAkBC,eAAe,QAAQ,UAAU;AACnD,OAAO,cAAc;AAErB,WAAYC,SAAS,0BAATA,SAAS;EAATA,SAAS;EAAA,OAATA,SAAS;AAAA;AAYrB,MAAMC,YAAyC,GAAGA,CAAC;EACjDC,KAAK,GAAG,CAACF,SAAS,CAACG,OAAO,CAAC;EAC3BC,YAAY;EACZC,QAAQ;EACRC,QAAQ;EACRC;AACF,CAAC,KAAK;EACJ,MAAMC,OAAO,GAAGZ,MAAM,CAAc,IAAI,CAAC;EACzC,MAAMa,UAAU,GAAGb,MAAM,CAAC,EAAE,CAAC;EAC7B,MAAM,CAACc,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAY,CAAC;EAE7CF,SAAS,CAAC,MAAM;IACdgB,OAAO,CAACX,SAAS,CAACG,OAAO,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAENR,SAAS,CAAC,MAAM;IACd,MAAMiB,UAAmB,GAAG,EAAE;IAC9B,IAAIH,UAAU,CAACI,OAAO,EAAE;MACtBD,UAAU,CAACE,IAAI,CAAC;QACdJ,IAAI,EAAEX,eAAe,CAACgB,QAAQ;QAC9BC,OAAO,EAAEP,UAAU,CAACI;MACtB,CAAC,CAAC;IACJ;IAAC;IACD,IAAID,UAAU,CAACK,MAAM,GAAG,CAAC,EAAE;MACzB,IAAIP,IAAI,KAAKV,SAAS,CAACG,OAAO,EAAE;QAAA,IAAAe,gBAAA;QAC9B,CAAAA,gBAAA,GAAAV,OAAO,CAACK,OAAO,cAAAK,gBAAA,uBAAfA,gBAAA,CAAiBC,QAAQ,CAACP,UAAU,CAAC;MACvC;IACF;EACF,CAAC,EAAE,CAACF,IAAI,CAAC,CAAC;EAEV,OAAOA,IAAI,KAAKV,SAAS,CAACG,OAAO,gBAC/BT,KAAA,CAAA0B,aAAA,CAACtB,KAAK;IACJuB,GAAG,EAAEb,OAAQ;IACbJ,YAAY,EAAEA,YAAa;IAC3BC,QAAQ,EAAEA,QAAS;IACnBC,QAAQ,EAAEA,QAAS;IACnBC,OAAO,EAAEA,OAAQ;IAAAe,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAClB,CAAC,GACA,IAAI;AACV,CAAC;AAED,eAAe1B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}