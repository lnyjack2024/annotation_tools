{"ast":null,"code":"import*as alawmulaw from'alawmulaw';import{parseAlawPcmToAudioData}from'./pcm';import{Language}from'./constants';import{RunningMode}from'../types';import*as storage from'./storage';export const store=storage;export function checkRunningMode(){let inIframe=false;try{inIframe=window.self!==window.top;}catch(e){inIframe=false;}return inIframe?RunningMode.IFRAME:RunningMode.STANDALONE;}export function getLocale(locale){const languages=Object.values(Language);if(locale!==undefined){// get from provided string\nif(languages.includes(locale)){return locale;}}if(navigator.language){// get from browser\nconst language=languages.find(l=>l.slice(0,2)===navigator.language.slice(0,2));if(language){return language;}}return Language.EN_US;}export function fetchResultByUrl(url){return new Promise((resolve,reject)=>{fetch(url,{cache:'no-store'}).then(res=>{if(res.ok){return res.json();}reject(new Error('http request error'));}).then(data=>resolve(data)).catch(e=>reject(e));});}export function preloadImage(src){let crossOrigin=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';const img=new Image();img.crossOrigin=crossOrigin;img.src=src;}export function isAppenCloud(){const{hostname}=window.location;return hostname.endsWith('.appen.com.cn');}export function getOrigin(){const{origin}=window.location;switch(origin){case'https://tools-dev.appen.com.cn':case'http://tools.devk.appen.com.cn':return'https://request-proxy-dev.appen.com.cn';case'https://tools-stg.appen.com.cn':case'http://tools.stg.appen.com.cn':return'https://request-proxy-stg.appen.com.cn';case'https://tools.appen.com.cn':return'https://request-proxy.appen.com.cn';default:}return'';}export function getAPIGateway(){const{origin}=window.location;switch(origin){case'https://tools-dev.appen.com.cn':return'https://ui-dev.appen.com.cn/api-gw';case'https://tools-stg.appen.com.cn':return'https://ui-stg.appen.com.cn/api-gw';case'https://tools.appen.com.cn':return'https://ui.appen.com.cn/api-gw';default:}return'/api-gw';}export function runScript(id,annotation,data){const origin=getOrigin();return new Promise(resolve=>{fetch(\"\".concat(origin,\"/ai/v2/script/invoke?id=\").concat(id),{method:'POST',credentials:'include',headers:{'content-type':'application/json'},body:JSON.stringify({annotation,data})}).then(resp=>{if(resp.status!==200){resolve({error:\"Failed to run script: \".concat(id)});}return resp.json();}).then(res=>{if(res.data&&res.data.status==='SUCCESS'){try{const parsedData=JSON.parse(res.data.result);resolve(parsedData);}catch(e){resolve({error:\"Failed to parse result for script: \".concat(id)});}}resolve({error:\"Failed to run script: \".concat(id)});}).catch(()=>{resolve({error:\"Failed to run script: \".concat(id)});});});}export const setStyle=(el,styles)=>{Object.keys(styles).forEach(prop=>{if(el.style[prop]!==styles[prop]){el.style[prop]=styles[prop];}});return el;};export function wordCount(words,wordCountItems){return getWords(words,wordCountItems).length;}export function getWords(str,wordCountItems){const words=[];let wordStart=0;if(typeof str!=='string')return words;let strLen=0;const regStr=wordCountItems&&wordCountItems.length>0?wordCountItems.map(i=>\"\\\\p{\".concat(i,\"}\")).join('|'):'';const reg=regStr?new RegExp(regStr,'u'):undefined;for(let i=0;i<str.length;i+=1){const c=str.charAt(i);if(c.match(/[\\u2E80-\\u2FDF\\u3040-\\u318F\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FFF\\uA960-\\uA97F\\uAC00-\\uD7FF|\\u3002|\\uff1f|\\uff01|\\uff0c|\\u3001|\\uff1b|\\uff1a|\\u201c|\\u201d|\\u2018|\\u2019|\\uff08|\\uff09|\\u300a|\\u300b|\\u3008|\\u3009|\\u3010|\\u3011|\\u300e|\\u300f|\\u300c|\\u300d|\\ufe43|\\ufe44|\\u3014|\\u3015|\\u2026|\\u2014|\\uff5e|\\ufe4f|\\uffe5]/)||reg&&c.match(reg)){if(strLen>0){words.push(str.slice(wordStart,wordStart+strLen));}wordStart=i+1;strLen=0;words.push(c);}else if(c&&!c.match(/\\r|\\n|\\s|\\\\s/)){strLen+=1;}else if(!c||c.match(/\\r|\\n|\\s|\\\\s/)){if(strLen>0){words.push(str.slice(wordStart,wordStart+strLen));}strLen=0;wordStart=i+1;}}if(strLen>0){words.push(str.slice(wordStart,wordStart+strLen));}return words;}export const isInput=()=>{var _document$activeEleme;return document.activeElement.tagName==='INPUT'&&(document.activeElement.type==='text'||document.activeElement.type==='number')||document.activeElement.tagName==='TEXTAREA'||((_document$activeEleme=document.activeElement)===null||_document$activeEleme===void 0?void 0:_document$activeEleme.getAttribute('contenteditable'))==='true';};export const lawToWav=(buffer,format)=>{const alawOriginData=new Uint8Array(buffer);const decodeAlaw=format==='alaw'?alawmulaw.alaw.decode(alawOriginData):alawmulaw.mulaw.decode(alawOriginData);const audioBuffer=parseAlawPcmToAudioData(decodeAlaw.buffer);return audioBuffer;};export function escapeRegExp(str){// eslint-disable-next-line no-useless-escape\nreturn str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,'\\\\$&');}export function isEasyformSelectDropdown(ele){if(ele){const easyformSelectDropdownList=Array.from(document.querySelectorAll('.easyform-select-dropdown'));const findEasyFormParent=easyformSelectDropdownList&&easyformSelectDropdownList.find(item=>item.contains(ele));return!!findEasyFormParent;}return false;};export function containsRTLLanguage(){let text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';// https://en.wikipedia.org/wiki/Arabic_script_in_Unicode\nreturn Array.from(text).some(c=>{const code=c.codePointAt(0);return code!==undefined&&(code>=0x0600&&code<=0x06ff||code>=0x0750&&code<=0x077f||code>=0x08a0&&code<=0x08ff||code>=0xfb50&&code<=0xfdff||code>=0xfe70&&code<=0xfeff||code>=0x10e60&&code<=0x10e7f||code>=0x1ec70&&code<=0x1ecbf||code>=0x1ed00&&code<=0x1ed4f||code>=0x1ee00&&code<=0x1eeff);});}export const copyTextToClipboard=async text=>new Promise(async(resolve,reject)=>{try{if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(text);resolve(true);}else{const input=document.createElement('textarea');input.value=text;document.body.appendChild(input);input.select();if(document.execCommand('copy')){document.execCommand('copy');resolve(true);}else{reject();}input.blur();document.body.removeChild(input);}}catch(error){reject(error);}});export function getFileExtension(url){var _split$pop;return(_split$pop=url.split('?').shift().split('.').pop())===null||_split$pop===void 0?void 0:_split$pop.toLocaleLowerCase();}","map":{"version":3,"names":["alawmulaw","parseAlawPcmToAudioData","Language","RunningMode","storage","store","checkRunningMode","inIframe","window","self","top","e","IFRAME","STANDALONE","getLocale","locale","languages","Object","values","undefined","includes","navigator","language","find","l","slice","EN_US","fetchResultByUrl","url","Promise","resolve","reject","fetch","cache","then","res","ok","json","Error","data","catch","preloadImage","src","crossOrigin","arguments","length","img","Image","isAppenCloud","hostname","location","endsWith","getOrigin","origin","getAPIGateway","runScript","id","annotation","concat","method","credentials","headers","body","JSON","stringify","resp","status","error","parsedData","parse","result","setStyle","el","styles","keys","forEach","prop","style","wordCount","words","wordCountItems","getWords","str","wordStart","strLen","regStr","map","i","join","reg","RegExp","c","charAt","match","push","isInput","_document$activeEleme","document","activeElement","tagName","type","getAttribute","lawToWav","buffer","format","alawOriginData","Uint8Array","decodeAlaw","alaw","decode","mulaw","audioBuffer","escapeRegExp","replace","isEasyformSelectDropdown","ele","easyformSelectDropdownList","Array","from","querySelectorAll","findEasyFormParent","item","contains","containsRTLLanguage","text","some","code","codePointAt","copyTextToClipboard","clipboard","isSecureContext","writeText","input","createElement","value","appendChild","select","execCommand","blur","removeChild","getFileExtension","_split$pop","split","shift","pop","toLocaleLowerCase"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/utils/index.ts"],"sourcesContent":["import * as alawmulaw from 'alawmulaw';\nimport { parseAlawPcmToAudioData } from './pcm';\nimport { Language } from './constants';\nimport { RunningMode } from '../types';\nimport * as storage from './storage';\n\nexport const store = storage;\nexport function checkRunningMode() {\n  let inIframe = false;\n  try {\n    inIframe = window.self !== window.top;\n  } catch (e) {\n    inIframe = false;\n  }\n  return inIframe ? RunningMode.IFRAME : RunningMode.STANDALONE;\n}\n\nexport function getLocale(locale?: string): Language {\n  const languages = Object.values(Language);\n  if (locale !== undefined) {\n    // get from provided string\n    if (languages.includes(locale as Language)) {\n      return locale as Language;\n    }\n  }\n  if (navigator.language) {\n    // get from browser\n    const language = languages.find((l) => l.slice(0, 2) === navigator.language.slice(0, 2));\n    if (language) {\n      return language;\n    }\n  }\n  return Language.EN_US;\n}\n\nexport function fetchResultByUrl(url: string) {\n  return new Promise((resolve, reject) => {\n    fetch(url, {\n      cache: 'no-store',\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        reject(new Error('http request error'));\n      })\n      .then((data) => resolve(data))\n      .catch((e) => reject(e));\n  });\n}\n\nexport function preloadImage(src: string, crossOrigin = '') {\n  const img = new Image();\n  img.crossOrigin = crossOrigin;\n  img.src = src;\n}\n\nexport function isAppenCloud() {\n  const { hostname } = window.location;\n  return hostname.endsWith('.appen.com.cn');\n}\n\nexport function getOrigin() {\n  const { origin } = window.location;\n  switch (origin) {\n    case 'https://tools-dev.appen.com.cn':\n    case 'http://tools.devk.appen.com.cn':\n      return 'https://request-proxy-dev.appen.com.cn';\n    case 'https://tools-stg.appen.com.cn':\n    case 'http://tools.stg.appen.com.cn':\n      return 'https://request-proxy-stg.appen.com.cn';\n    case 'https://tools.appen.com.cn':\n      return 'https://request-proxy.appen.com.cn';\n    default:\n  }\n  return '';\n}\n\nexport function getAPIGateway() {\n  const { origin } = window.location;\n  switch (origin) {\n    case 'https://tools-dev.appen.com.cn':\n      return 'https://ui-dev.appen.com.cn/api-gw';\n    case 'https://tools-stg.appen.com.cn':\n      return 'https://ui-stg.appen.com.cn/api-gw';\n    case 'https://tools.appen.com.cn':\n      return 'https://ui.appen.com.cn/api-gw';\n    default:\n  }\n  return '/api-gw';\n}\n\nexport function runScript(id: string, annotation: string, data?: string) {\n  const origin = getOrigin();\n  return new Promise((resolve) => {\n    fetch(`${origin}/ai/v2/script/invoke?id=${id}`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        annotation,\n        data,\n      }),\n    }).then((resp) => {\n      if (resp.status !== 200) {\n        resolve({ error: `Failed to run script: ${id}` });\n      }\n      return resp.json();\n    }).then((res) => {\n      if (res.data && res.data.status === 'SUCCESS') {\n        try {\n          const parsedData = JSON.parse(res.data.result);\n          resolve(parsedData);\n        } catch (e) {\n          resolve({ error: `Failed to parse result for script: ${id}` });\n        }\n      }\n      resolve({ error: `Failed to run script: ${id}` });\n    }).catch(() => {\n      resolve({ error: `Failed to run script: ${id}` });\n    });\n  });\n}\n\nexport const setStyle = (el: HTMLElement, styles: { [key: string]: any }) => {\n  Object.keys(styles).forEach((prop) => {\n    if ((el.style as any)[prop] !== styles[prop]) {\n      (el.style as any)[prop] = styles[prop];\n    }\n  });\n  return el;\n};\n\nexport function wordCount(words?: string, wordCountItems?: string[]) {\n  return getWords(words, wordCountItems).length;\n}\n\nexport function getWords(str?: string, wordCountItems?: string[]) {\n  const words: string[] = [];\n  let wordStart = 0;\n  if (typeof str !== 'string') return words;\n  let strLen = 0;\n  const regStr = (wordCountItems && wordCountItems.length > 0) ? wordCountItems.map((i) => `\\\\p{${i}}`).join('|') : '';\n  const reg = regStr ? new RegExp(regStr, 'u') : undefined;\n  for (let i = 0; i < str.length; i += 1) {\n    const c = str.charAt(i);\n    if (\n      c.match(/[\\u2E80-\\u2FDF\\u3040-\\u318F\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FFF\\uA960-\\uA97F\\uAC00-\\uD7FF|\\u3002|\\uff1f|\\uff01|\\uff0c|\\u3001|\\uff1b|\\uff1a|\\u201c|\\u201d|\\u2018|\\u2019|\\uff08|\\uff09|\\u300a|\\u300b|\\u3008|\\u3009|\\u3010|\\u3011|\\u300e|\\u300f|\\u300c|\\u300d|\\ufe43|\\ufe44|\\u3014|\\u3015|\\u2026|\\u2014|\\uff5e|\\ufe4f|\\uffe5]/)\n      || (reg && c.match(reg))\n    ) {\n      if (strLen > 0) {\n        words.push(str.slice(wordStart, wordStart + strLen));\n      }\n      wordStart = i + 1;\n      strLen = 0;\n      words.push(c);\n    } else if (c && !c.match(/\\r|\\n|\\s|\\\\s/)) {\n      strLen += 1;\n    } else if (!c || c.match(/\\r|\\n|\\s|\\\\s/)) {\n      if (strLen > 0) {\n        words.push(str.slice(wordStart, wordStart + strLen));\n      }\n      strLen = 0;\n      wordStart = i + 1;\n    }\n  }\n  if (strLen > 0) {\n    words.push(str.slice(wordStart, wordStart + strLen));\n  }\n  return words;\n}\n\nexport const isInput = () => (document.activeElement as HTMLFormElement).tagName === 'INPUT' &&\n  ((document.activeElement as HTMLFormElement).type === 'text' || (document.activeElement as HTMLFormElement).type === 'number') ||\n  (document.activeElement as HTMLFormElement).tagName === 'TEXTAREA' || document.activeElement?.getAttribute('contenteditable') === 'true';\n\nexport const lawToWav = (buffer: ArrayBuffer, format: 'alaw' | 'ulaw') => {\n  const alawOriginData = new Uint8Array(buffer);\n  const decodeAlaw = format === 'alaw' ?\n    alawmulaw.alaw.decode(alawOriginData) :\n    alawmulaw.mulaw.decode(alawOriginData);\n  const audioBuffer = parseAlawPcmToAudioData(decodeAlaw.buffer);\n  return audioBuffer;\n};\n\nexport function escapeRegExp(str: string) {\n  // eslint-disable-next-line no-useless-escape\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\nexport function isEasyformSelectDropdown(ele: HTMLElement) {\n  if (ele) {\n    const easyformSelectDropdownList = Array.from(document.querySelectorAll('.easyform-select-dropdown'));\n    const findEasyFormParent =\n      easyformSelectDropdownList && easyformSelectDropdownList.find((item: Element) => item.contains(ele));\n    return !!findEasyFormParent;\n  }\n  return false;\n};\n\nexport function containsRTLLanguage(text = '') {\n  // https://en.wikipedia.org/wiki/Arabic_script_in_Unicode\n  return Array.from(text).some((c) => {\n    const code = c.codePointAt(0);\n    return code !== undefined && (\n      (code >= 0x0600 && code <= 0x06ff) ||\n      (code >= 0x0750 && code <= 0x077f) ||\n      (code >= 0x08a0 && code <= 0x08ff) ||\n      (code >= 0xfb50 && code <= 0xfdff) ||\n      (code >= 0xfe70 && code <= 0xfeff) ||\n      (code >= 0x10e60 && code <= 0x10e7f) ||\n      (code >= 0x1ec70 && code <= 0x1ecbf) ||\n      (code >= 0x1ed00 && code <= 0x1ed4f) ||\n      (code >= 0x1ee00 && code <= 0x1eeff)\n    );\n  });\n}\n\nexport const copyTextToClipboard = async (text: string) => new Promise(async (resolve, reject) => {\n  try {\n    if (navigator.clipboard && window.isSecureContext) {\n      await navigator.clipboard.writeText(text);\n      resolve(true);\n    } else {\n      const input = document.createElement('textarea');\n      input.value = text;\n      document.body.appendChild(input);\n      input.select();\n      if (document.execCommand('copy')) {\n        document.execCommand('copy');\n        resolve(true);\n      } else {\n        reject();\n      }\n      input.blur();\n      document.body.removeChild(input);\n    }\n  } catch (error) {\n    reject(error);\n  }\n});\n\nexport function getFileExtension(url: string) {\n  return url.split('?').shift()!.split('.').pop()?.toLocaleLowerCase();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}