{"ast":null,"code":"import React from'react';import{observer}from'mobx-react';import cx from'classnames';import Dropdown from'../../../common/dropdown/Dropdown';import ToolIcon from'./ToolIcon';import store from'../../store/RootStore';import i18n from'../../locales';import'./CreateToolSelector.scss';const ToolItem=observer(_ref=>{let{categoryItem,index,displayName}=_ref;const{name,tools}=categoryItem;const selected=name===store.ontology.selectedCategoryItemName;const tool=selected?store.ontology.currentToolItem:tools[0];return/*#__PURE__*/React.createElement(\"div\",{className:\"create-tool-tool-item__label\"},/*#__PURE__*/React.createElement(\"span\",{className:\"create-tool-tool-item__shortcut\"},index<10&&/*#__PURE__*/React.createElement(React.Fragment,null,index===9?0:index+1)),/*#__PURE__*/React.createElement(\"span\",{className:\"create-tool-tool-item__icon tool-icon\"},/*#__PURE__*/React.createElement(ToolIcon,{tool:tool.type})),/*#__PURE__*/React.createElement(\"span\",{className:\"create-tool-tool-item__name\"},displayName));});const CreateToolSelector=observer(()=>{var _menu$selectedIndex;const{selectedCategory,selectedCategoryItemName}=store.ontology;const{children=[]}=selectedCategory||{};if(store.readonly||children.length<=0){return null;}const isSingle=children.length===1&&children[0].count===1;const selectedIndex=children.findIndex(i=>i.name===selectedCategoryItemName);const menu=children.map((c,index)=>({label:c.name,active:c.name===selectedCategoryItemName,render:()=>/*#__PURE__*/React.createElement(ToolItem,{categoryItem:c,index:index,displayName:isSingle?selectedCategory.displayName:c.displayName})}));return/*#__PURE__*/React.createElement(\"div\",{className:\"create-tool\"},i18n.translate('COMMON_CREATE'),/*#__PURE__*/React.createElement(\"span\",{onClick:()=>store.config.setAddMode(true)},/*#__PURE__*/React.createElement(Dropdown,{className:cx('create-tool-selector',{active:store.config.addMode}),arrow:true,triggerArea:\"arrow\",menu:menu,onClick:(name,index)=>store.ontology.activateCategoryItem(name,children[index].tools[0])},(_menu$selectedIndex=menu[selectedIndex])===null||_menu$selectedIndex===void 0?void 0:_menu$selectedIndex.render())));});export default CreateToolSelector;","map":{"version":3,"names":["React","observer","cx","Dropdown","ToolIcon","store","i18n","ToolItem","_ref","categoryItem","index","displayName","name","tools","selected","ontology","selectedCategoryItemName","tool","currentToolItem","createElement","className","Fragment","type","CreateToolSelector","_menu$selectedIndex","selectedCategory","children","readonly","length","isSingle","count","selectedIndex","findIndex","i","menu","map","c","label","active","render","translate","onClick","config","setAddMode","addMode","arrow","triggerArea","activateCategoryItem"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/tools/CreateToolSelector.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport Dropdown from '../../../common/dropdown/Dropdown';\nimport ToolIcon from './ToolIcon';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { CategoryItem } from '../../types';\nimport './CreateToolSelector.scss';\n\nconst ToolItem = observer(({ categoryItem, index, displayName }: {\n  categoryItem: CategoryItem;\n  index: number;\n  displayName: string;\n}) => {\n  const { name, tools } = categoryItem;\n  const selected = name === store.ontology.selectedCategoryItemName;\n  const tool = selected ? store.ontology.currentToolItem! : tools[0];\n  return (\n    <div className=\"create-tool-tool-item__label\">\n      <span className=\"create-tool-tool-item__shortcut\">\n        {index < 10 && (\n          <>{index === 9 ? 0 : index + 1}</>\n        )}\n      </span>\n      <span className=\"create-tool-tool-item__icon tool-icon\">\n        <ToolIcon tool={tool.type} />\n      </span>\n      <span className=\"create-tool-tool-item__name\">\n        {displayName}\n      </span>\n    </div>\n  );\n});\n\nconst CreateToolSelector = observer(() => {\n  const { selectedCategory, selectedCategoryItemName } = store.ontology;\n  const { children = [] } = selectedCategory || {};\n  if (store.readonly || children.length <= 0) {\n    return null;\n  }\n\n  const isSingle = children.length === 1 && children[0].count === 1;\n  const selectedIndex = children.findIndex((i) => i.name === selectedCategoryItemName);\n  const menu = children.map((c, index) => ({\n    label: c.name,\n    active: c.name === selectedCategoryItemName,\n    render: () => (\n      <ToolItem\n        categoryItem={c}\n        index={index}\n        displayName={isSingle ? selectedCategory.displayName : c.displayName}\n      />\n    ),\n  }));\n  return (\n    <div className=\"create-tool\">\n      {i18n.translate('COMMON_CREATE')}\n      <span onClick={() => store.config.setAddMode(true)}>\n        <Dropdown\n          className={cx('create-tool-selector', {\n            active: store.config.addMode,\n          })}\n          arrow\n          triggerArea=\"arrow\"\n          menu={menu}\n          onClick={(name, index) => store.ontology.activateCategoryItem(name, children[index].tools[0])}\n        >\n          {menu[selectedIndex]?.render()}\n        </Dropdown>\n      </span>\n    </div>\n  );\n});\n\nexport default CreateToolSelector;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}