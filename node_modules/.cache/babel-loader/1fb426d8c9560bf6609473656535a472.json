{"ast":null,"code":"import * as alawmulaw from 'alawmulaw';\nimport { parseAlawPcmToAudioData } from './pcm';\nimport { Language } from './constants';\nimport { RunningMode } from '../types';\nimport * as storage from './storage';\nexport const store = storage;\nexport function checkRunningMode() {\n  let inIframe = false;\n  try {\n    inIframe = window.self !== window.top;\n  } catch (e) {\n    inIframe = false;\n  }\n  return inIframe ? RunningMode.IFRAME : RunningMode.STANDALONE;\n}\nexport function getLocale(locale) {\n  const languages = Object.values(Language);\n  if (locale !== undefined) {\n    // get from provided string\n    if (languages.includes(locale)) {\n      return locale;\n    }\n  }\n  if (navigator.language) {\n    // get from browser\n    const language = languages.find(l => l.slice(0, 2) === navigator.language.slice(0, 2));\n    if (language) {\n      return language;\n    }\n  }\n  return Language.EN_US;\n}\nexport function fetchArrayBuffer(url) {\n  return fetch(url).then(res => res.arrayBuffer());\n}\nexport function fetchResultByUrl(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url, {\n      cache: 'no-store'\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      reject(new Error('http request error'));\n    }).then(data => resolve(data)).catch(e => reject(e));\n  });\n}\nexport function fetchTxtByUrl(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url).then(async res => {\n      if (res.ok) {\n        const txt = await res.text();\n        return resolve(txt);\n      }\n      reject(new Error('http request error'));\n    }).catch(e => reject(e));\n  });\n}\nexport function preloadImage(src, crossOrigin = '') {\n  const img = new Image();\n  img.crossOrigin = crossOrigin;\n  img.src = src;\n}\nexport function isAppenCloud() {\n  const {\n    hostname\n  } = window.location;\n  return hostname.endsWith('.appen.com.cn');\n}\nexport function getOrigin() {\n  const {\n    origin\n  } = window.location;\n  switch (origin) {\n    case 'https://tools-dev.appen.com.cn':\n    case 'http://tools.devk.appen.com.cn':\n      return 'https://request-proxy-dev.appen.com.cn';\n    case 'https://tools-stg.appen.com.cn':\n    case 'http://tools.stg.appen.com.cn':\n      return 'https://request-proxy-stg.appen.com.cn';\n    case 'https://tools.appen.com.cn':\n      return 'https://request-proxy.appen.com.cn';\n    default:\n  }\n  return '';\n}\nexport function getAPIGateway() {\n  const {\n    origin\n  } = window.location;\n  switch (origin) {\n    case 'https://tools-dev.appen.com.cn':\n      return 'https://ui-dev.appen.com.cn/api-gw';\n    case 'https://tools-stg.appen.com.cn':\n      return 'https://ui-stg.appen.com.cn/api-gw';\n    case 'https://tools.appen.com.cn':\n      return 'https://ui.appen.com.cn/api-gw';\n    default:\n  }\n  return '/api-gw';\n}\nexport function runScript(id, annotation, data) {\n  const origin = getOrigin();\n  return new Promise(resolve => {\n    fetch(`${origin}/ai/v2/script/invoke?id=${id}`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        annotation,\n        data\n      })\n    }).then(resp => {\n      if (resp.status !== 200) {\n        resolve({\n          error: `Failed to run script: ${id}`\n        });\n      }\n      return resp.json();\n    }).then(res => {\n      if (res.data && res.data.status === 'SUCCESS') {\n        try {\n          const parsedData = JSON.parse(res.data.result);\n          resolve(parsedData);\n        } catch (e) {\n          resolve({\n            error: `Failed to parse result for script: ${id}`\n          });\n        }\n      }\n      resolve({\n        error: `Failed to run script: ${id}`\n      });\n    }).catch(() => {\n      resolve({\n        error: `Failed to run script: ${id}`\n      });\n    });\n  });\n}\nexport async function runCustomValidation(scriptIds, resultLink, flowData) {\n  const results = [];\n  let hasCustomError = false;\n  const customResults = await Promise.all(scriptIds.map(scriptId => runScript(scriptId, resultLink, flowData)));\n  customResults.forEach(customResult => {\n    if (!customResult.error && Array.isArray(customResult)) {\n      customResult.forEach(item => {\n        results.push({\n          id: item.id,\n          message: item.message,\n          frames: item.frames,\n          info: {\n            ...item.info\n          },\n          blockSubmit: item.blockSubmit\n        });\n      });\n    } else {\n      hasCustomError = true;\n    }\n  });\n  return {\n    results,\n    hasCustomError\n  };\n}\nexport const isInput = () => {\n  var _document$activeEleme;\n  return document.activeElement.tagName === 'INPUT' && (document.activeElement.type === 'text' || document.activeElement.type === 'number') || document.activeElement.tagName === 'TEXTAREA' || ((_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.getAttribute('contenteditable')) === 'true';\n};\nexport const lawToWav = (buffer, format) => {\n  const alawOriginData = new Uint8Array(buffer);\n  const decodeAlaw = format === 'alaw' ? alawmulaw.alaw.decode(alawOriginData) : alawmulaw.mulaw.decode(alawOriginData);\n  const audioBuffer = parseAlawPcmToAudioData(decodeAlaw.buffer);\n  return audioBuffer;\n};\nexport function containsRTLLanguage(text = '') {\n  // https://en.wikipedia.org/wiki/Arabic_script_in_Unicode\n  return Array.from(text).some(c => {\n    const code = c.codePointAt(0);\n    return code !== undefined && (code >= 0x0600 && code <= 0x06ff || code >= 0x0750 && code <= 0x077f || code >= 0x08a0 && code <= 0x08ff || code >= 0xfb50 && code <= 0xfdff || code >= 0xfe70 && code <= 0xfeff || code >= 0x10e60 && code <= 0x10e7f || code >= 0x1ec70 && code <= 0x1ecbf || code >= 0x1ed00 && code <= 0x1ed4f || code >= 0x1ee00 && code <= 0x1eeff);\n  });\n}\nexport function isTextarea(ele) {\n  var _ele$tagName;\n  const tag = ele === null || ele === void 0 ? void 0 : (_ele$tagName = ele.tagName) === null || _ele$tagName === void 0 ? void 0 : _ele$tagName.toLowerCase();\n  if (tag === 'textarea') {\n    // textarea\n    return true;\n  }\n  return false;\n}\nexport const setStyle = (el, styles) => {\n  Object.keys(styles).forEach(prop => {\n    if (el.style[prop] !== styles[prop]) {\n      el.style[prop] = styles[prop];\n    }\n  });\n  return el;\n};\nexport function wordCount(words, wordCountItems) {\n  return getWords(words, wordCountItems).length;\n}\nexport function getWords(str, wordCountItems) {\n  const words = [];\n  let wordStart = 0;\n  if (typeof str !== 'string') return words;\n  let strLen = 0;\n  const regStr = wordCountItems && wordCountItems.length > 0 ? wordCountItems.map(i => `\\\\p{${i}}`).join('|') : '';\n  const reg = regStr ? new RegExp(regStr, 'u') : undefined;\n  for (let i = 0; i < str.length; i += 1) {\n    const c = str.charAt(i);\n    if (c.match(/[\\u2E80-\\u2FDF\\u3040-\\u318F\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FFF\\uA960-\\uA97F\\uAC00-\\uD7FF|\\u3002|\\uff1f|\\uff01|\\uff0c|\\u3001|\\uff1b|\\uff1a|\\u201c|\\u201d|\\u2018|\\u2019|\\uff08|\\uff09|\\u300a|\\u300b|\\u3008|\\u3009|\\u3010|\\u3011|\\u300e|\\u300f|\\u300c|\\u300d|\\ufe43|\\ufe44|\\u3014|\\u3015|\\u2026|\\u2014|\\uff5e|\\ufe4f|\\uffe5]/) || reg && c.match(reg)) {\n      if (strLen > 0) {\n        words.push(str.slice(wordStart, wordStart + strLen));\n      }\n      wordStart = i + 1;\n      strLen = 0;\n      words.push(c);\n    } else if (c && !c.match(/\\r|\\n|\\s|\\\\s/)) {\n      strLen += 1;\n    } else if (!c || c.match(/\\r|\\n|\\s|\\\\s/)) {\n      if (strLen > 0) {\n        words.push(str.slice(wordStart, wordStart + strLen));\n      }\n      strLen = 0;\n      wordStart = i + 1;\n    }\n  }\n  if (strLen > 0) {\n    words.push(str.slice(wordStart, wordStart + strLen));\n  }\n  return words;\n}\nexport const minDistance = (words1, words2) => {\n  const row = words1.length;\n  const col = words2.length;\n  // dp matrix\n  const dp = [];\n  const tmp = new Array(col + 1).fill(0);\n  for (let i = 0; i < row + 1; i += 1) {\n    dp[i] = [...tmp];\n  }\n  // first row\n  for (let j = 1; j <= col; j += 1) dp[0][j] = dp[0][j - 1] + 1;\n  // first column\n  for (let i = 1; i <= row; i += 1) dp[i][0] = dp[i - 1][0] + 1;\n  for (let i = 1; i <= row; i += 1) {\n    for (let j = 1; j <= col; j += 1) {\n      // when word is equal\n      if (words1[i - 1] === words2[j - 1]) {\n        dp[i][j] = dp[i - 1][j - 1];\n      } else {\n        dp[i][j] = Math.min(Math.min(dp[i - 1][j - 1], dp[i][j - 1]), dp[i - 1][j]) + 1;\n      }\n    }\n  }\n  return dp[row][col];\n};\nexport const copyTextToClipboard = async text => new Promise(async (resolve, reject) => {\n  try {\n    if (navigator.clipboard && window.isSecureContext) {\n      await navigator.clipboard.writeText(text);\n      resolve(true);\n    } else {\n      const input = document.createElement('textarea');\n      input.value = text;\n      document.body.appendChild(input);\n      input.select();\n      if (document.execCommand('copy')) {\n        document.execCommand('copy');\n        resolve(true);\n      } else {\n        reject();\n      }\n      input.blur();\n      document.body.removeChild(input);\n    }\n  } catch (error) {\n    reject(error);\n  }\n});\nexport function isEasyformSelectDropdown(ele) {\n  if (ele) {\n    const easyformSelectDropdownList = Array.from(document.querySelectorAll('.easyform-select-dropdown'));\n    const findEasyFormParent = easyformSelectDropdownList && easyformSelectDropdownList.find(item => item.contains(ele));\n    return !!findEasyFormParent;\n  }\n  return false;\n}\n;\nexport function formHasError(formStatus) {\n  let errorValidateFailed = false;\n  for (let index = 0; index < formStatus.length; index += 1) {\n    const element = formStatus[index];\n    if (element.validating || element.errors && element.errors.length) {\n      errorValidateFailed = true;\n      break;\n    }\n  }\n  return errorValidateFailed;\n}\n;\nexport function escapeRegExp(str) {\n  // eslint-disable-next-line no-useless-escape\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nexport function removeUndefinedKeys(data) {\n  if (Array.isArray(data)) {\n    return data.map(i => removeUndefinedKeys(i));\n  }\n  if (typeof data === 'object' && data !== null) {\n    const keys = Object.keys(data);\n    keys.forEach(key => {\n      if (data[key] === undefined) {\n        delete data[key];\n      } else {\n        data[key] = removeUndefinedKeys(data[key]);\n      }\n    });\n  }\n  return data;\n}\n;\nexport function grayScale(r, g, b) {\n  // reference: https://spec.oneapi.io/oneipl/0.6/convert/rgb-gray-conversion.html#\n  return (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n}\nexport function colorContrast(color) {\n  const r = parseInt(color.slice(1, 3), 16);\n  const g = parseInt(color.slice(3, 5), 16);\n  const b = parseInt(color.slice(5, 7), 16);\n\n  // https://24ways.org/2010/calculating-color-contrast/\n  const contrast = (r * 299 + g * 587 + b * 114) / 1000;\n  return contrast >= 128 ? '#000000' : '#FFFFFF';\n}\nexport function dateFormat(fmt, date = new Date()) {\n  var _fmt$match;\n  const dateMap = {\n    'M+': `${date.getMonth() + 1}`,\n    'd+': `${date.getDate()}`,\n    'H+': `${date.getHours()}`,\n    'm+': `${date.getMinutes()}`,\n    's+': `${date.getSeconds()}`,\n    'q+': `${Math.floor((date.getMonth() + 3) / 3)}`,\n    S: `${date.getMilliseconds()}`\n  };\n  let time = '';\n  const yearFmt = (_fmt$match = fmt.match(/(y+)/gi)) === null || _fmt$match === void 0 ? void 0 : _fmt$match[0];\n  if (yearFmt) {\n    time = fmt.replace(/(y+)/gi, `${date.getFullYear()}`.substring(4 - yearFmt.length));\n  }\n  Object.keys(dateMap).forEach(k => {\n    var _fmt$match2;\n    const reg = new RegExp(k, 'gi');\n    const str = (_fmt$match2 = fmt.match(reg)) === null || _fmt$match2 === void 0 ? void 0 : _fmt$match2[0];\n    if (str) {\n      time = time.replace(reg, str.length === 1 ? dateMap[k] : `00${dateMap[k]}`.substring(dateMap[k].length));\n    }\n  });\n  return time;\n}\nexport function timeFormat(seconds) {\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor(seconds % 3600 / 60);\n  const secs = Math.floor(seconds % 60);\n  const millis = Math.floor((seconds - Math.floor(seconds)) * 1000);\n  const list = [mins.toString().padStart(2, '0'), secs.toString().padStart(2, '0'), millis.toString().padStart(3, '0')];\n  if (hrs > 0) {\n    list.unshift(hrs.toString().padStart(2, '0'));\n  }\n  return list.join(':');\n}\nexport function getFileExtension(url) {\n  var _split$pop;\n  return (_split$pop = url.split('?').shift().split('.').pop()) === null || _split$pop === void 0 ? void 0 : _split$pop.toLocaleLowerCase();\n}","map":{"version":3,"names":["alawmulaw","parseAlawPcmToAudioData","Language","RunningMode","storage","store","checkRunningMode","inIframe","window","self","top","e","IFRAME","STANDALONE","getLocale","locale","languages","Object","values","undefined","includes","navigator","language","find","l","slice","EN_US","fetchArrayBuffer","url","fetch","then","res","arrayBuffer","fetchResultByUrl","Promise","resolve","reject","cache","ok","json","Error","data","catch","fetchTxtByUrl","txt","text","preloadImage","src","crossOrigin","img","Image","isAppenCloud","hostname","location","endsWith","getOrigin","origin","getAPIGateway","runScript","id","annotation","method","credentials","headers","body","JSON","stringify","resp","status","error","parsedData","parse","result","runCustomValidation","scriptIds","resultLink","flowData","results","hasCustomError","customResults","all","map","scriptId","forEach","customResult","Array","isArray","item","push","message","frames","info","blockSubmit","isInput","_document$activeEleme","document","activeElement","tagName","type","getAttribute","lawToWav","buffer","format","alawOriginData","Uint8Array","decodeAlaw","alaw","decode","mulaw","audioBuffer","containsRTLLanguage","from","some","c","code","codePointAt","isTextarea","ele","_ele$tagName","tag","toLowerCase","setStyle","el","styles","keys","prop","style","wordCount","words","wordCountItems","getWords","length","str","wordStart","strLen","regStr","i","join","reg","RegExp","charAt","match","minDistance","words1","words2","row","col","dp","tmp","fill","j","Math","min","copyTextToClipboard","clipboard","isSecureContext","writeText","input","createElement","value","appendChild","select","execCommand","blur","removeChild","isEasyformSelectDropdown","easyformSelectDropdownList","querySelectorAll","findEasyFormParent","contains","formHasError","formStatus","errorValidateFailed","index","element","validating","errors","escapeRegExp","replace","removeUndefinedKeys","key","grayScale","r","g","b","colorContrast","color","parseInt","contrast","dateFormat","fmt","date","Date","_fmt$match","dateMap","getMonth","getDate","getHours","getMinutes","getSeconds","floor","S","getMilliseconds","time","yearFmt","getFullYear","substring","k","_fmt$match2","timeFormat","seconds","hrs","mins","secs","millis","list","toString","padStart","unshift","getFileExtension","_split$pop","split","shift","pop","toLocaleLowerCase"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/utils/index.ts"],"sourcesContent":["import * as alawmulaw from 'alawmulaw';\nimport { parseAlawPcmToAudioData } from './pcm';\nimport { Language } from './constants';\nimport { RunningMode } from '../types';\nimport * as storage from './storage';\n\nexport const store = storage;\n\nexport function checkRunningMode() {\n  let inIframe = false;\n  try {\n    inIframe = window.self !== window.top;\n  } catch (e) {\n    inIframe = false;\n  }\n  return inIframe ? RunningMode.IFRAME : RunningMode.STANDALONE;\n}\n\nexport function getLocale(locale?: string): Language {\n  const languages = Object.values(Language);\n  if (locale !== undefined) {\n    // get from provided string\n    if (languages.includes(locale as Language)) {\n      return locale as Language;\n    }\n  }\n  if (navigator.language) {\n    // get from browser\n    const language = languages.find((l) => l.slice(0, 2) === navigator.language.slice(0, 2));\n    if (language) {\n      return language;\n    }\n  }\n  return Language.EN_US;\n}\n\nexport function fetchArrayBuffer(url: string) {\n  return fetch(url).then((res) => res.arrayBuffer());\n}\n\nexport function fetchResultByUrl(url: string) {\n  return new Promise((resolve, reject) => {\n    fetch(url, {\n      cache: 'no-store',\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        reject(new Error('http request error'));\n      })\n      .then((data) => resolve(data))\n      .catch((e) => reject(e));\n  });\n}\n\nexport function fetchTxtByUrl(url: string) {\n  return new Promise<string>((resolve, reject) => {\n    fetch(url)\n      .then(async (res) => {\n        if (res.ok) {\n          const txt = await res.text();\n          return resolve(txt);\n        }\n        reject(new Error('http request error'));\n      })\n      .catch((e) => reject(e));\n  });\n}\n\nexport function preloadImage(src: string, crossOrigin = '') {\n  const img = new Image();\n  img.crossOrigin = crossOrigin;\n  img.src = src;\n}\n\nexport function isAppenCloud() {\n  const { hostname } = window.location;\n  return hostname.endsWith('.appen.com.cn');\n}\n\nexport function getOrigin() {\n  const { origin } = window.location;\n  switch (origin) {\n    case 'https://tools-dev.appen.com.cn':\n    case 'http://tools.devk.appen.com.cn':\n      return 'https://request-proxy-dev.appen.com.cn';\n    case 'https://tools-stg.appen.com.cn':\n    case 'http://tools.stg.appen.com.cn':\n      return 'https://request-proxy-stg.appen.com.cn';\n    case 'https://tools.appen.com.cn':\n      return 'https://request-proxy.appen.com.cn';\n    default:\n  }\n  return '';\n}\n\nexport function getAPIGateway() {\n  const { origin } = window.location;\n  switch (origin) {\n    case 'https://tools-dev.appen.com.cn':\n      return 'https://ui-dev.appen.com.cn/api-gw';\n    case 'https://tools-stg.appen.com.cn':\n      return 'https://ui-stg.appen.com.cn/api-gw';\n    case 'https://tools.appen.com.cn':\n      return 'https://ui.appen.com.cn/api-gw';\n    default:\n  }\n  return '/api-gw';\n}\n\nexport function runScript(id: string, annotation: string, data?: string) {\n  const origin = getOrigin();\n  return new Promise((resolve) => {\n    fetch(`${origin}/ai/v2/script/invoke?id=${id}`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        annotation,\n        data,\n      }),\n    }).then((resp) => {\n      if (resp.status !== 200) {\n        resolve({ error: `Failed to run script: ${id}` });\n      }\n      return resp.json();\n    }).then((res) => {\n      if (res.data && res.data.status === 'SUCCESS') {\n        try {\n          const parsedData = JSON.parse(res.data.result);\n          resolve(parsedData);\n        } catch (e) {\n          resolve({ error: `Failed to parse result for script: ${id}` });\n        }\n      }\n      resolve({ error: `Failed to run script: ${id}` });\n    }).catch(() => {\n      resolve({ error: `Failed to run script: ${id}` });\n    });\n  });\n}\n\nexport async function runCustomValidation(scriptIds: string[], resultLink: string, flowData?: string) {\n  const results: any[] = [];\n  let hasCustomError = false;\n  const customResults = await Promise.all(scriptIds.map((scriptId) => runScript(scriptId, resultLink, flowData)));\n  customResults.forEach((customResult: any) => {\n    if (!customResult.error && Array.isArray(customResult)) {\n      customResult.forEach((item) => {\n        results.push({\n          id: item.id,\n          message: item.message,\n          frames: item.frames,\n          info: { ...item.info },\n          blockSubmit: item.blockSubmit,\n        });\n      });\n    } else {\n      hasCustomError = true;\n    }\n  });\n\n  return { results, hasCustomError };\n}\n\nexport const isInput = () => (document.activeElement as HTMLFormElement).tagName === 'INPUT' &&\n  ((document.activeElement as HTMLFormElement).type === 'text' || (document.activeElement as HTMLFormElement).type === 'number') ||\n  (document.activeElement as HTMLFormElement).tagName === 'TEXTAREA' || document.activeElement?.getAttribute('contenteditable') === 'true';\n\nexport const lawToWav = (buffer: ArrayBuffer, format: 'alaw' | 'ulaw') => {\n  const alawOriginData = new Uint8Array(buffer);\n  const decodeAlaw = format === 'alaw' ?\n    alawmulaw.alaw.decode(alawOriginData) :\n    alawmulaw.mulaw.decode(alawOriginData);\n  const audioBuffer = parseAlawPcmToAudioData(decodeAlaw.buffer);\n  return audioBuffer;\n};\n\nexport function containsRTLLanguage(text = '') {\n  // https://en.wikipedia.org/wiki/Arabic_script_in_Unicode\n  return Array.from(text).some((c) => {\n    const code = c.codePointAt(0);\n    return code !== undefined && (\n      (code >= 0x0600 && code <= 0x06ff) ||\n      (code >= 0x0750 && code <= 0x077f) ||\n      (code >= 0x08a0 && code <= 0x08ff) ||\n      (code >= 0xfb50 && code <= 0xfdff) ||\n      (code >= 0xfe70 && code <= 0xfeff) ||\n      (code >= 0x10e60 && code <= 0x10e7f) ||\n      (code >= 0x1ec70 && code <= 0x1ecbf) ||\n      (code >= 0x1ed00 && code <= 0x1ed4f) ||\n      (code >= 0x1ee00 && code <= 0x1eeff)\n    );\n  });\n}\n\nexport function isTextarea(ele: HTMLElement) {\n  const tag = ele?.tagName?.toLowerCase();\n  if (tag === 'textarea') {\n    // textarea\n    return true;\n  }\n  return false;\n}\n\nexport const setStyle = (el: HTMLElement, styles: { [key: string]: any }) => {\n  Object.keys(styles).forEach((prop) => {\n    if ((el.style as any)[prop] !== styles[prop]) {\n      (el.style as any)[prop] = styles[prop];\n    }\n  });\n  return el;\n};\n\nexport function wordCount(words?: string, wordCountItems?: string[]) {\n  return getWords(words, wordCountItems).length;\n}\n\nexport function getWords(str?: string, wordCountItems?: string[]) {\n  const words: string[] = [];\n  let wordStart = 0;\n  if (typeof str !== 'string') return words;\n  let strLen = 0;\n  const regStr = (wordCountItems && wordCountItems.length > 0) ? wordCountItems.map((i) => `\\\\p{${i}}`).join('|') : '';\n  const reg = regStr ? new RegExp(regStr, 'u') : undefined;\n  for (let i = 0; i < str.length; i += 1) {\n    const c = str.charAt(i);\n    if (\n      c.match(/[\\u2E80-\\u2FDF\\u3040-\\u318F\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FFF\\uA960-\\uA97F\\uAC00-\\uD7FF|\\u3002|\\uff1f|\\uff01|\\uff0c|\\u3001|\\uff1b|\\uff1a|\\u201c|\\u201d|\\u2018|\\u2019|\\uff08|\\uff09|\\u300a|\\u300b|\\u3008|\\u3009|\\u3010|\\u3011|\\u300e|\\u300f|\\u300c|\\u300d|\\ufe43|\\ufe44|\\u3014|\\u3015|\\u2026|\\u2014|\\uff5e|\\ufe4f|\\uffe5]/)\n      || (reg && c.match(reg))\n    ) {\n      if (strLen > 0) {\n        words.push(str.slice(wordStart, wordStart + strLen));\n      }\n      wordStart = i + 1;\n      strLen = 0;\n      words.push(c);\n    } else if (c && !c.match(/\\r|\\n|\\s|\\\\s/)) {\n      strLen += 1;\n    } else if (!c || c.match(/\\r|\\n|\\s|\\\\s/)) {\n      if (strLen > 0) {\n        words.push(str.slice(wordStart, wordStart + strLen));\n      }\n      strLen = 0;\n      wordStart = i + 1;\n    }\n  }\n  if (strLen > 0) {\n    words.push(str.slice(wordStart, wordStart + strLen));\n  }\n  return words;\n}\n\nexport const minDistance = (words1: string[], words2: string[]) => {\n  const row = words1.length;\n  const col = words2.length;\n  // dp matrix\n  const dp = [];\n  const tmp = new Array(col + 1).fill(0);\n  for (let i = 0; i < row + 1; i += 1) {\n    dp[i] = [...tmp];\n  }\n  // first row\n  for (let j = 1; j <= col; j += 1) dp[0][j] = dp[0][j - 1] + 1;\n  // first column\n  for (let i = 1; i <= row; i += 1) dp[i][0] = dp[i - 1][0] + 1;\n\n  for (let i = 1; i <= row; i += 1) {\n    for (let j = 1; j <= col; j += 1) {\n      // when word is equal\n      if (words1[i - 1] === words2[j - 1]) {\n        dp[i][j] = dp[i - 1][j - 1];\n      } else {\n        dp[i][j] = Math.min(Math.min(dp[i - 1][j - 1], dp[i][j - 1]), dp[i - 1][j]) + 1;\n      }\n    }\n  }\n  return dp[row][col];\n};\n\nexport const copyTextToClipboard = async (text: string) => new Promise(async (resolve, reject) => {\n  try {\n    if (navigator.clipboard && window.isSecureContext) {\n      await navigator.clipboard.writeText(text);\n      resolve(true);\n    } else {\n      const input = document.createElement('textarea');\n      input.value = text;\n      document.body.appendChild(input);\n      input.select();\n      if (document.execCommand('copy')) {\n        document.execCommand('copy');\n        resolve(true);\n      } else {\n        reject();\n      }\n      input.blur();\n      document.body.removeChild(input);\n    }\n  } catch (error) {\n    reject(error);\n  }\n});\n\nexport function isEasyformSelectDropdown(ele: HTMLElement) {\n  if (ele) {\n    const easyformSelectDropdownList = Array.from(document.querySelectorAll('.easyform-select-dropdown'));\n    const findEasyFormParent =\n      easyformSelectDropdownList && easyformSelectDropdownList.find((item: Element) => item.contains(ele));\n    return !!findEasyFormParent;\n  }\n  return false;\n};\n\nexport function formHasError(formStatus: any[]) {\n  let errorValidateFailed = false;\n  for (let index = 0; index < formStatus.length; index += 1) {\n    const element: { [key: string]: any } = formStatus[index];\n    if (element.validating || (element.errors && element.errors.length)) {\n      errorValidateFailed = true;\n      break;\n    }\n  }\n  return errorValidateFailed;\n};\n\nexport function escapeRegExp(str: string) {\n  // eslint-disable-next-line no-useless-escape\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\nexport function removeUndefinedKeys(data: any): any {\n  if (Array.isArray(data)) {\n    return data.map((i) => removeUndefinedKeys(i));\n  }\n  if (typeof data === 'object' && data !== null) {\n    const keys = Object.keys(data);\n    keys.forEach((key) => {\n      if (data[key] === undefined) {\n        delete data[key];\n      } else {\n        data[key] = removeUndefinedKeys(data[key]);\n      }\n    });\n  }\n  return data;\n};\n\nexport function grayScale(r: number, g: number, b: number) {\n  // reference: https://spec.oneapi.io/oneipl/0.6/convert/rgb-gray-conversion.html#\n  return (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n}\n\nexport function colorContrast(color: string) {\n  const r = parseInt(color.slice(1, 3), 16);\n  const g = parseInt(color.slice(3, 5), 16);\n  const b = parseInt(color.slice(5, 7), 16);\n\n  // https://24ways.org/2010/calculating-color-contrast/\n  const contrast = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n  return (contrast >= 128) ? '#000000' : '#FFFFFF';\n}\n\nexport function dateFormat(fmt: string, date = new Date()) {\n  const dateMap: { [k: string]: string } = {\n    'M+': `${date.getMonth() + 1}`,\n    'd+': `${date.getDate()}`,\n    'H+': `${date.getHours()}`,\n    'm+': `${date.getMinutes()}`,\n    's+': `${date.getSeconds()}`,\n    'q+': `${Math.floor((date.getMonth() + 3) / 3)}`,\n    S: `${date.getMilliseconds()}`,\n  };\n  let time = '';\n  const yearFmt = fmt.match(/(y+)/gi)?.[0];\n  if (yearFmt) {\n    time = fmt.replace(/(y+)/gi, `${date.getFullYear()}`.substring(4 - yearFmt.length));\n  }\n\n  Object.keys(dateMap).forEach((k) => {\n    const reg = new RegExp(k, 'gi');\n    const str = fmt.match(reg)?.[0];\n    if (str) {\n      time = time.replace(reg, (str.length === 1) ? dateMap[k] : (`00${dateMap[k]}`.substring(dateMap[k].length)));\n    }\n  });\n  return time;\n}\n\nexport function timeFormat(seconds: number) {\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor((seconds % 3600) / 60);\n  const secs = Math.floor(seconds % 60);\n  const millis = Math.floor((seconds - Math.floor(seconds)) * 1000);\n\n  const list = [\n    mins.toString().padStart(2, '0'),\n    secs.toString().padStart(2, '0'),\n    millis.toString().padStart(3, '0'),\n  ];\n  if (hrs > 0) {\n    list.unshift(hrs.toString().padStart(2, '0'));\n  }\n\n  return list.join(':');\n}\n\nexport function getFileExtension(url: string) {\n  return url.split('?').shift()!.split('.').pop()?.toLocaleLowerCase();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}