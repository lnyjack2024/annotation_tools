{"ast":null,"code":"import { observable, action, makeObservable } from 'mobx';\nimport screenfull from 'screenfull';\nclass SettingStore {\n  constructor(rootStore) {\n    this.rootStore = void 0;\n    this.zoom = 1;\n    this.loading = true;\n    this.isFullScreen = false;\n    this.sideBarVisible = true;\n    this.customCheck = [];\n    this.submitCheck = false;\n    this.ratio = 1;\n    this.screenfull = screenfull;\n    makeObservable(this, {\n      isFullScreen: observable,\n      submitCheck: observable,\n      sideBarVisible: observable,\n      zoom: observable,\n      loading: observable,\n      setFullScreen: action,\n      init: action,\n      setSideBarVisible: action,\n      setZoom: action,\n      setLoading: action\n    });\n    this.rootStore = rootStore;\n  }\n  setFullScreen(full) {\n    this.isFullScreen = full;\n  }\n\n  /**\n   * init by payload\n   * @param payload\n   */\n  init(payload) {\n    // parse validator\n    if (typeof payload.custom_check === 'string') {\n      const scriptIds = payload.custom_check.split(',').map(i => i.trim()).filter(i => !!i);\n      if (scriptIds.length > 0) {\n        this.customCheck = scriptIds;\n      }\n    }\n    // parse submit check config\n    this.submitCheck = payload.submit_check === 'true' || payload.submit_check === true;\n  }\n\n  /**\n   * set sideBar visibility\n   * @param visible boolean\n   */\n  setSideBarVisible(visible) {\n    this.sideBarVisible = visible;\n  }\n\n  /**\n   * set zoom\n   */\n  setZoom(newZoom) {\n    const {\n      placement: {\n        duration\n      }\n    } = this.rootStore.analyse;\n    let zoom = newZoom;\n    if (zoom < 1) {\n      zoom = 1;\n    }\n    if (duration / zoom < 0.4) {\n      zoom = Math.floor(duration / 0.4);\n    }\n    this.zoom = zoom;\n  }\n\n  /**\n   * set ratio\n   */\n  setRatio(ratio) {\n    this.ratio = ratio;\n  }\n\n  /**\n   * set loading\n   */\n  setLoading(loading) {\n    this.loading = loading;\n  }\n}\nexport default SettingStore;","map":{"version":3,"names":["observable","action","makeObservable","screenfull","SettingStore","constructor","rootStore","zoom","loading","isFullScreen","sideBarVisible","customCheck","submitCheck","ratio","setFullScreen","init","setSideBarVisible","setZoom","setLoading","full","payload","custom_check","scriptIds","split","map","i","trim","filter","length","submit_check","visible","newZoom","placement","duration","analyse","Math","floor","setRatio"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/store/SettingsStore.ts"],"sourcesContent":["import { observable, action, makeObservable } from 'mobx';\nimport screenfull from 'screenfull';\nimport { RootStoreType } from './RootStore';\n\nclass SettingStore {\n  rootStore: RootStoreType;\n\n  zoom = 1;\n\n  loading = true;\n\n  isFullScreen = false;\n\n  sideBarVisible = true;\n\n  customCheck: string[] = [];\n\n  submitCheck = false;\n\n  ratio = 1;\n\n  screenfull = screenfull;\n\n  constructor(rootStore: RootStoreType) {\n    makeObservable(this, {\n      isFullScreen: observable,\n      submitCheck: observable,\n      sideBarVisible: observable,\n      zoom: observable,\n      loading: observable,\n      setFullScreen: action,\n      init: action,\n      setSideBarVisible: action,\n      setZoom: action,\n      setLoading: action,\n    });\n    this.rootStore = rootStore;\n  }\n\n  setFullScreen(full: boolean) {\n    this.isFullScreen = full;\n  }\n\n  /**\n   * init by payload\n   * @param payload\n   */\n  init(payload: {[key: string]: any}) {\n    // parse validator\n    if (typeof payload.custom_check === 'string') {\n      const scriptIds = payload.custom_check.split(',').map((i) => i.trim()).filter((i) => !!i);\n      if (scriptIds.length > 0) {\n        this.customCheck = scriptIds;\n      }\n    }\n    // parse submit check config\n    this.submitCheck = payload.submit_check === 'true' || payload.submit_check === true;\n  }\n\n  /**\n   * set sideBar visibility\n   * @param visible boolean\n   */\n  setSideBarVisible(visible: boolean) {\n    this.sideBarVisible = visible;\n  }\n\n  /**\n   * set zoom\n   */\n  setZoom(newZoom:number) {\n    const { placement: { duration } } = this.rootStore.analyse;\n    let zoom = newZoom;\n    if (zoom < 1) {\n      zoom = 1;\n    }\n    if (duration / zoom < 0.4) {\n      zoom = Math.floor(duration / 0.4);\n    }\n    this.zoom = zoom;\n  }\n\n  /**\n   * set ratio\n   */\n  setRatio(ratio: number) {\n    this.ratio = ratio;\n  }\n\n  /**\n   * set loading\n   */\n  setLoading(loading: boolean) {\n    this.loading = loading;\n  }\n}\n\nexport default SettingStore;\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,MAAM,EAAEC,cAAc,QAAQ,MAAM;AACzD,OAAOC,UAAU,MAAM,YAAY;AAGnC,MAAMC,YAAY,CAAC;EAmBjBC,WAAWA,CAACC,SAAwB,EAAE;IAAA,KAlBtCA,SAAS;IAAA,KAETC,IAAI,GAAG,CAAC;IAAA,KAERC,OAAO,GAAG,IAAI;IAAA,KAEdC,YAAY,GAAG,KAAK;IAAA,KAEpBC,cAAc,GAAG,IAAI;IAAA,KAErBC,WAAW,GAAa,EAAE;IAAA,KAE1BC,WAAW,GAAG,KAAK;IAAA,KAEnBC,KAAK,GAAG,CAAC;IAAA,KAETV,UAAU,GAAGA,UAAU;IAGrBD,cAAc,CAAC,IAAI,EAAE;MACnBO,YAAY,EAAET,UAAU;MACxBY,WAAW,EAAEZ,UAAU;MACvBU,cAAc,EAAEV,UAAU;MAC1BO,IAAI,EAAEP,UAAU;MAChBQ,OAAO,EAAER,UAAU;MACnBc,aAAa,EAAEb,MAAM;MACrBc,IAAI,EAAEd,MAAM;MACZe,iBAAiB,EAAEf,MAAM;MACzBgB,OAAO,EAAEhB,MAAM;MACfiB,UAAU,EAAEjB;IACd,CAAC,CAAC;IACF,IAAI,CAACK,SAAS,GAAGA,SAAS;EAC5B;EAEAQ,aAAaA,CAACK,IAAa,EAAE;IAC3B,IAAI,CAACV,YAAY,GAAGU,IAAI;EAC1B;;EAEA;AACF;AACA;AACA;EACEJ,IAAIA,CAACK,OAA6B,EAAE;IAClC;IACA,IAAI,OAAOA,OAAO,CAACC,YAAY,KAAK,QAAQ,EAAE;MAC5C,MAAMC,SAAS,GAAGF,OAAO,CAACC,YAAY,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,MAAM,CAAEF,CAAC,IAAK,CAAC,CAACA,CAAC,CAAC;MACzF,IAAIH,SAAS,CAACM,MAAM,GAAG,CAAC,EAAE;QACxB,IAAI,CAACjB,WAAW,GAAGW,SAAS;MAC9B;IACF;IACA;IACA,IAAI,CAACV,WAAW,GAAGQ,OAAO,CAACS,YAAY,KAAK,MAAM,IAAIT,OAAO,CAACS,YAAY,KAAK,IAAI;EACrF;;EAEA;AACF;AACA;AACA;EACEb,iBAAiBA,CAACc,OAAgB,EAAE;IAClC,IAAI,CAACpB,cAAc,GAAGoB,OAAO;EAC/B;;EAEA;AACF;AACA;EACEb,OAAOA,CAACc,OAAc,EAAE;IACtB,MAAM;MAAEC,SAAS,EAAE;QAAEC;MAAS;IAAE,CAAC,GAAG,IAAI,CAAC3B,SAAS,CAAC4B,OAAO;IAC1D,IAAI3B,IAAI,GAAGwB,OAAO;IAClB,IAAIxB,IAAI,GAAG,CAAC,EAAE;MACZA,IAAI,GAAG,CAAC;IACV;IACA,IAAI0B,QAAQ,GAAG1B,IAAI,GAAG,GAAG,EAAE;MACzBA,IAAI,GAAG4B,IAAI,CAACC,KAAK,CAACH,QAAQ,GAAG,GAAG,CAAC;IACnC;IACA,IAAI,CAAC1B,IAAI,GAAGA,IAAI;EAClB;;EAEA;AACF;AACA;EACE8B,QAAQA,CAACxB,KAAa,EAAE;IACtB,IAAI,CAACA,KAAK,GAAGA,KAAK;EACpB;;EAEA;AACF;AACA;EACEK,UAAUA,CAACV,OAAgB,EAAE;IAC3B,IAAI,CAACA,OAAO,GAAGA,OAAO;EACxB;AACF;AAEA,eAAeJ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}