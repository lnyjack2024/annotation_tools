{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/shapes/wrapper/AppWrapper.tsx\";\nimport React from 'react';\nimport { BitmapFont } from 'pixi.js';\nimport { Application } from 'pixi.js-legacy';\nconst AppWrapper = (WrappedComponent, options) => class App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    /**\n     * component ref\n     */\n    this.ref = React.createRef();\n    /**\n     * PIXI application\n     */\n    this.app = new Application({\n      antialias: true,\n      // autoDensity: true,\n      resolution: window.devicePixelRatio\n    });\n    this.updateResolution = () => {\n      this.app.renderer.resolution = window.devicePixelRatio;\n      this.app.renderer.plugins.interaction.resolution = window.devicePixelRatio;\n      this.app.renderer.emit('resolution-changed');\n    };\n  }\n  componentDidMount() {\n    if (options) {\n      const {\n        mappingMethods\n      } = options;\n      if (mappingMethods) {\n        mappingMethods.forEach(methodName => {\n          this[methodName] = this.ref.current[methodName];\n        });\n      }\n    }\n    window.matchMedia('screen and (min-resolution: 2dppx)').addEventListener('change', this.updateResolution);\n    // load default bitmap font\n    BitmapFont.from('ALPHA_NUMERIC', {\n      fontFamily: 'Arial',\n      fontSize: 12,\n      lineHeight: 14,\n      fill: '#FFFFFF',\n      dropShadow: true,\n      dropShadowAlpha: 0.8,\n      dropShadowBlur: 2,\n      dropShadowDistance: 1\n    });\n  }\n  componentWillUnmount() {\n    this.app.destroy(true, {\n      children: true,\n      texture: true,\n      baseTexture: true\n    });\n    window.matchMedia('screen and (min-resolution: 2dppx)').removeEventListener('change', this.updateResolution);\n  }\n  setCursor(cursor) {\n    this.app.view.style.cursor = cursor;\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(WrappedComponent, Object.assign({\n      ref: this.ref\n    }, this.props, {\n      app: this.app,\n      setCursor: this.setCursor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }));\n  }\n};\nexport default AppWrapper;","map":{"version":3,"names":["React","BitmapFont","Application","AppWrapper","WrappedComponent","options","App","Component","constructor","args","ref","createRef","app","antialias","resolution","window","devicePixelRatio","updateResolution","renderer","plugins","interaction","emit","componentDidMount","mappingMethods","forEach","methodName","current","matchMedia","addEventListener","from","fontFamily","fontSize","lineHeight","fill","dropShadow","dropShadowAlpha","dropShadowBlur","dropShadowDistance","componentWillUnmount","destroy","children","texture","baseTexture","removeEventListener","setCursor","cursor","view","style","render","createElement","Object","assign","props","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/shapes/wrapper/AppWrapper.tsx"],"sourcesContent":["import React from 'react';\nimport { BitmapFont } from 'pixi.js';\nimport { Application } from 'pixi.js-legacy';\nimport Cursor from '../../Cursor';\n\ninterface Options {\n  mappingMethods?: string[];\n}\n\nconst AppWrapper = (WrappedComponent: any, options?: Options) => class App extends React.Component {\n  /**\n   * component ref\n   */\n  ref = React.createRef<any>();\n\n  /**\n   * PIXI application\n   */\n  app = new Application({\n    antialias: true,\n    // autoDensity: true,\n    resolution: window.devicePixelRatio,\n  });\n\n  [param: string]: any;\n\n  componentDidMount() {\n    if (options) {\n      const { mappingMethods } = options;\n      if (mappingMethods) {\n        mappingMethods.forEach((methodName: string) => {\n          this[methodName] = this.ref.current[methodName];\n        });\n      }\n    }\n    window.matchMedia('screen and (min-resolution: 2dppx)').addEventListener('change', this.updateResolution);\n    // load default bitmap font\n    BitmapFont.from('ALPHA_NUMERIC', {\n      fontFamily: 'Arial',\n      fontSize: 12,\n      lineHeight: 14,\n      fill: '#FFFFFF',\n      dropShadow: true,\n      dropShadowAlpha: 0.8,\n      dropShadowBlur: 2,\n      dropShadowDistance: 1,\n    });\n  }\n\n  componentWillUnmount() {\n    this.app.destroy(true, {\n      children: true,\n      texture: true,\n      baseTexture: true,\n    });\n    window.matchMedia('screen and (min-resolution: 2dppx)').removeEventListener('change', this.updateResolution);\n  }\n\n  updateResolution = () => {\n    this.app.renderer.resolution = window.devicePixelRatio;\n    this.app.renderer.plugins.interaction.resolution = window.devicePixelRatio;\n    this.app.renderer.emit('resolution-changed');\n  };\n\n  setCursor(cursor: Cursor) {\n    this.app.view.style.cursor = cursor;\n  }\n\n  render() {\n    return (\n      <WrappedComponent\n        ref={this.ref}\n        {...this.props}\n        app={this.app}\n        setCursor={this.setCursor}\n      />\n    );\n  }\n};\n\nexport default AppWrapper;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,SAAS;AACpC,SAASC,WAAW,QAAQ,gBAAgB;AAO5C,MAAMC,UAAU,GAAGA,CAACC,gBAAqB,EAAEC,OAAiB,KAAK,MAAMC,GAAG,SAASN,KAAK,CAACO,SAAS,CAAC;EAAAC,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IACjG;AACF;AACA;IAFE,KAGAC,GAAG,GAAGV,KAAK,CAACW,SAAS,CAAM,CAAC;IAE5B;AACF;AACA;IAFE,KAGAC,GAAG,GAAG,IAAIV,WAAW,CAAC;MACpBW,SAAS,EAAE,IAAI;MACf;MACAC,UAAU,EAAEC,MAAM,CAACC;IACrB,CAAC,CAAC;IAAA,KAoCFC,gBAAgB,GAAG,MAAM;MACvB,IAAI,CAACL,GAAG,CAACM,QAAQ,CAACJ,UAAU,GAAGC,MAAM,CAACC,gBAAgB;MACtD,IAAI,CAACJ,GAAG,CAACM,QAAQ,CAACC,OAAO,CAACC,WAAW,CAACN,UAAU,GAAGC,MAAM,CAACC,gBAAgB;MAC1E,IAAI,CAACJ,GAAG,CAACM,QAAQ,CAACG,IAAI,CAAC,oBAAoB,CAAC;IAC9C,CAAC;EAAA;EApCDC,iBAAiBA,CAAA,EAAG;IAClB,IAAIjB,OAAO,EAAE;MACX,MAAM;QAAEkB;MAAe,CAAC,GAAGlB,OAAO;MAClC,IAAIkB,cAAc,EAAE;QAClBA,cAAc,CAACC,OAAO,CAAEC,UAAkB,IAAK;UAC7C,IAAI,CAACA,UAAU,CAAC,GAAG,IAAI,CAACf,GAAG,CAACgB,OAAO,CAACD,UAAU,CAAC;QACjD,CAAC,CAAC;MACJ;IACF;IACAV,MAAM,CAACY,UAAU,CAAC,oCAAoC,CAAC,CAACC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACX,gBAAgB,CAAC;IACzG;IACAhB,UAAU,CAAC4B,IAAI,CAAC,eAAe,EAAE;MAC/BC,UAAU,EAAE,OAAO;MACnBC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE,EAAE;MACdC,IAAI,EAAE,SAAS;MACfC,UAAU,EAAE,IAAI;MAChBC,eAAe,EAAE,GAAG;MACpBC,cAAc,EAAE,CAAC;MACjBC,kBAAkB,EAAE;IACtB,CAAC,CAAC;EACJ;EAEAC,oBAAoBA,CAAA,EAAG;IACrB,IAAI,CAAC1B,GAAG,CAAC2B,OAAO,CAAC,IAAI,EAAE;MACrBC,QAAQ,EAAE,IAAI;MACdC,OAAO,EAAE,IAAI;MACbC,WAAW,EAAE;IACf,CAAC,CAAC;IACF3B,MAAM,CAACY,UAAU,CAAC,oCAAoC,CAAC,CAACgB,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC1B,gBAAgB,CAAC;EAC9G;EAQA2B,SAASA,CAACC,MAAc,EAAE;IACxB,IAAI,CAACjC,GAAG,CAACkC,IAAI,CAACC,KAAK,CAACF,MAAM,GAAGA,MAAM;EACrC;EAEAG,MAAMA,CAAA,EAAG;IACP,oBACEhD,KAAA,CAAAiD,aAAA,CAAC7C,gBAAgB,EAAA8C,MAAA,CAAAC,MAAA;MACfzC,GAAG,EAAE,IAAI,CAACA;IAAI,GACV,IAAI,CAAC0C,KAAK;MACdxC,GAAG,EAAE,IAAI,CAACA,GAAI;MACdgC,SAAS,EAAE,IAAI,CAACA,SAAU;MAAAS,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,EAC3B,CAAC;EAEN;AACF,CAAC;AAED,eAAevD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}