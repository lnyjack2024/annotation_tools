{"ast":null,"code":"import { setStyle } from '../../../../utils';\nexport default class ScrollControl {\n  constructor({\n    container,\n    height,\n    barColor,\n    trackStyle,\n    displayRange,\n    onScroll\n  }) {\n    this.container = void 0;\n    this.displayRange = {\n      start: 0,\n      end: 1\n    };\n    this.scrollTrack = void 0;\n    this.trackStyle = void 0;\n    this.scrollBar = void 0;\n    this.params = void 0;\n    this.isDragging = false;\n    this.startX = 0;\n    this.stop = void 0;\n    this.onScroll = void 0;\n    this.mouseDown = e => {\n      this.isDragging = true;\n      this.startX = e.clientX;\n    };\n    this.mouseLeave = () => {\n      if (this.isDragging) {\n        this.isDragging = false;\n      }\n    };\n    this.mouseMove = e => {\n      const {\n        start,\n        end\n      } = this.displayRange;\n      const precent = end - start;\n      if (this.isDragging && precent < 1) {\n        const movePrecent = (e.clientX - this.startX) * (1 - precent) / (this.scrollTrack.clientWidth - this.scrollBar.clientWidth);\n        let left = movePrecent + start;\n        if (left < 0) {\n          left = 0;\n        } else if (left + precent > 1) {\n          left = 1 - precent;\n        }\n        this.displayRange = {\n          start: left,\n          end: left + precent\n        };\n        this.startX = e.clientX;\n        this.onScroll(left, left + precent);\n        this.resize();\n      }\n    };\n    this.container = container;\n    this.params = {\n      height: height || 20,\n      barColor: barColor || '#777B82',\n      trackColor: (trackStyle === null || trackStyle === void 0 ? void 0 : trackStyle.color) || '#eee'\n    };\n    if (displayRange) {\n      this.displayRange = displayRange;\n    }\n    this.trackStyle = trackStyle;\n    this.scrollTrack = document.createElement('div');\n    this.scrollBar = document.createElement('div');\n    this.onScroll = onScroll;\n    this.init();\n  }\n  init() {\n    const {\n      height,\n      barColor,\n      trackColor\n    } = this.params;\n    this.scrollTrack.className = 'wave-scroll';\n    setStyle(this.scrollTrack, {\n      position: 'relative',\n      width: '100%',\n      height: `${height}px`,\n      padding: '2px 0',\n      backgroundColor: trackColor,\n      borderRadius: '2px',\n      overflow: 'hidden',\n      ...this.trackStyle\n    });\n    this.scrollBar.className = 'wave-scroll-bar';\n    setStyle(this.scrollBar, {\n      position: 'absolute',\n      width: '100%',\n      minWidth: '20px',\n      height: `${height - 4}px`,\n      backgroundColor: barColor,\n      borderRadius: '2px',\n      cursor: 'pointer'\n    });\n    this.scrollTrack.appendChild(this.scrollBar);\n    this.container.appendChild(this.scrollTrack);\n    this.listen();\n    this.resize();\n  }\n  resize() {\n    if (this.scrollTrack && this.scrollBar) {\n      const {\n        clientWidth\n      } = this.scrollTrack;\n      const {\n        start,\n        end\n      } = this.displayRange;\n      const precent = end - start;\n      let barWidth = precent * clientWidth;\n      barWidth = Math.max(barWidth, 20);\n      const left = start ? start / (1 - precent) * (clientWidth - barWidth) : 0;\n      setStyle(this.scrollBar, {\n        width: `${barWidth / clientWidth * 100}%`,\n        left: `${left}px`\n      });\n    }\n  }\n  setScroll(displayRange) {\n    this.displayRange = displayRange;\n    this.resize();\n  }\n  listen() {\n    this.scrollBar.addEventListener('mousedown', this.mouseDown);\n    window.addEventListener('mousemove', this.mouseMove);\n    window.addEventListener('mouseup', this.mouseLeave);\n  }\n  destory() {\n    this.scrollBar.removeEventListener('mousedown', this.mouseDown);\n    window.removeEventListener('mousemove', this.mouseMove);\n    window.removeEventListener('mouseup', this.mouseLeave);\n  }\n}","map":{"version":3,"names":["setStyle","ScrollControl","constructor","container","height","barColor","trackStyle","displayRange","onScroll","start","end","scrollTrack","scrollBar","params","isDragging","startX","stop","mouseDown","e","clientX","mouseLeave","mouseMove","precent","movePrecent","clientWidth","left","resize","trackColor","color","document","createElement","init","className","position","width","padding","backgroundColor","borderRadius","overflow","minWidth","cursor","appendChild","listen","barWidth","Math","max","setScroll","addEventListener","window","destory","removeEventListener"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/XScroll/index.ts"],"sourcesContent":["import { setStyle } from '../../../../utils';\n\ninterface ScrollOptions {\n  container: HTMLElement;\n  height?: number;\n  barColor?: string;\n  trackStyle?: {[key: string]: any};\n  displayRange?: { start: number; end: number; };\n  onScroll: (start: number, end: number) => void;\n}\n\nexport default class ScrollControl {\n  container: HTMLElement;\n\n  displayRange: {start: number; end: number;} = { start: 0, end: 1 };\n\n  scrollTrack: HTMLElement;\n\n  trackStyle?: {[key: string]: any};\n\n  scrollBar: HTMLElement;\n\n  params: {\n    height: number;\n    barColor: string;\n    trackColor: string;\n  };\n\n  isDragging = false;\n\n  startX = 0;\n\n  stop: any;\n\n  onScroll: (start: number, end: number) => void;\n\n  constructor({ container, height, barColor, trackStyle, displayRange, onScroll }: ScrollOptions) {\n    this.container = container;\n    this.params = {\n      height: height || 20,\n      barColor: barColor || '#777B82',\n      trackColor: trackStyle?.color || '#eee',\n    };\n    if (displayRange) {\n      this.displayRange = displayRange;\n    }\n    this.trackStyle = trackStyle;\n    this.scrollTrack = document.createElement('div');\n    this.scrollBar = document.createElement('div');\n    this.onScroll = onScroll;\n    this.init();\n  }\n\n  init() {\n    const { height, barColor, trackColor } = this.params;\n    this.scrollTrack.className = 'wave-scroll';\n    setStyle(this.scrollTrack, {\n      position: 'relative',\n      width: '100%',\n      height: `${height}px`,\n      padding: '2px 0',\n      backgroundColor: trackColor,\n      borderRadius: '2px',\n      overflow: 'hidden',\n      ...this.trackStyle\n    });\n    this.scrollBar.className = 'wave-scroll-bar';\n    setStyle(this.scrollBar, {\n      position: 'absolute',\n      width: '100%',\n      minWidth: '20px',\n      height: `${height - 4}px`,\n      backgroundColor: barColor,\n      borderRadius: '2px',\n      cursor: 'pointer',\n    });\n\n    this.scrollTrack.appendChild(this.scrollBar);\n    this.container.appendChild(this.scrollTrack);\n    this.listen();\n    this.resize();\n  }\n\n  resize() {\n    if (this.scrollTrack && this.scrollBar) {\n      const { clientWidth } = this.scrollTrack;\n      const { start, end } = this.displayRange;\n      const precent = end - start;\n      let barWidth = precent * clientWidth;\n      barWidth = Math.max(barWidth, 20);\n      const left = start ? (start / (1 - precent)) * (clientWidth - barWidth) : 0;\n      setStyle(this.scrollBar, {\n        width: `${(barWidth / clientWidth) * 100}%`,\n        left: `${left}px`\n      });\n    }\n  }\n\n  setScroll(displayRange: { start: number; end: number }) {\n    this.displayRange = displayRange;\n    this.resize();\n  }\n\n  listen() {\n    this.scrollBar.addEventListener('mousedown', this.mouseDown);\n    window.addEventListener('mousemove', this.mouseMove);\n    window.addEventListener('mouseup', this.mouseLeave);\n  }\n\n  destory() {\n    this.scrollBar.removeEventListener('mousedown', this.mouseDown);\n    window.removeEventListener('mousemove', this.mouseMove);\n    window.removeEventListener('mouseup', this.mouseLeave);\n  }\n\n  mouseDown = (e: MouseEvent) => {\n    this.isDragging = true;\n    this.startX = e.clientX;\n  };\n\n  mouseLeave = () => {\n    if (this.isDragging) {\n      this.isDragging = false;\n    }\n  };\n\n  mouseMove = (e: MouseEvent) => {\n    const { start, end } = this.displayRange;\n    const precent = end - start;\n    if (this.isDragging && precent < 1) {\n      const movePrecent = ((e.clientX - this.startX) * (1 - precent)) / (this.scrollTrack.clientWidth - this.scrollBar.clientWidth);\n      let left = movePrecent + start;\n      if (left < 0) {\n        left = 0;\n      } else if (left + precent > 1) {\n        left = 1 - precent;\n      }\n      this.displayRange = {\n        start: left,\n        end: left + precent,\n      };\n      this.startX = e.clientX;\n      this.onScroll(left, left + precent);\n      this.resize();\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}