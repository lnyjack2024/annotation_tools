{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/modal/Modal.tsx\";\nimport React from 'react';\nimport cx from 'classnames';\nimport Draggable from 'react-draggable';\nimport { ResizableBox } from 'react-resizable';\nimport { CloseOutlined } from '@ant-design/icons';\nimport { getStorage, setStorage } from 'src/utils/storage';\nimport { ResizeHandle } from '../icons';\nimport './Modal.scss';\nconst minSizeDefault = [320, 180];\nconst DefaultSize = {\n  w: 480,\n  h: 400\n};\nconst DefaultPosition = {\n  x: 0,\n  y: 0\n};\nconst getPosition = dragId => {\n  localStorage.removeItem('modal-posistion');\n  const cachePosition = getStorage(dragId || 'modal-info', 'position');\n  if (cachePosition) {\n    return {\n      x: cachePosition.x,\n      y: cachePosition.y\n    };\n  }\n  ;\n  return undefined;\n};\nconst savePosition = (x, y, dragId) => {\n  setStorage(dragId || 'modal-info', 'position', {\n    x,\n    y\n  });\n};\nconst getSize = dragId => {\n  const size = getStorage(dragId || 'modal-info', 'size');\n  if (size) {\n    return size;\n  }\n  return undefined;\n};\nconst saveSize = (w, h, dragId) => {\n  setStorage(dragId || 'modal-info', 'size', {\n    w,\n    h\n  });\n};\nclass Modal extends React.PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      size: DefaultSize,\n      position: DefaultPosition,\n      containerSize: undefined\n    };\n    this.container = null;\n    this.calcutedSize = (size, position) => {\n      const {\n        containerSize\n      } = this.state;\n      if (!containerSize) {\n        return;\n      }\n      const {\n        resizable\n      } = this.props;\n      const {\n        w,\n        h\n      } = size;\n      const {\n        x,\n        y\n      } = position;\n      const {\n        width,\n        height\n      } = containerSize;\n      let newX = x;\n      let newY = y;\n      let newW = w;\n      let newH = h;\n      if (width - w < 0) {\n        newW = width - 20;\n        newX = resizable ? 0 - newW / 2 : 0;\n      } else if ((resizable ? width / 2 : 0) + x + w > width) {\n        newX = resizable ? 0 - w / 2 : 0;\n      }\n      if (height - h < 0) {\n        newH = height - 20;\n        newY = 0 - height / 5 + (height - newH) / 2;\n      } else if (height / 5 + y + h > height) {\n        newY = 0 - height / 5 + (height - h) / 2;\n      }\n      return {\n        size: {\n          w: newW,\n          h: newH\n        },\n        position: {\n          x: newX,\n          y: newY\n        }\n      };\n      // this.setState({ size: { w: newW, h: newH }, position: { x: newX, y: newY } });\n    };\n    this.onResize = (size, dragId) => {\n      const calcutedInfo = this.calcutedSize({\n        w: size.width,\n        h: size.height\n      }, this.state.position);\n      if (calcutedInfo) {\n        const {\n          size: newSize,\n          position\n        } = calcutedInfo;\n        this.setState({\n          size: newSize,\n          position\n        }, () => {\n          saveSize(newSize.w, newSize.h, dragId);\n          savePosition(position.x, position.y, dragId);\n        });\n      }\n      const resizeEvent = new Event('resize');\n      window.dispatchEvent(resizeEvent);\n    };\n    this.onDragStop = (x, y, dragId) => {\n      this.setState({\n        position: {\n          x,\n          y\n        }\n      }, () => {\n        savePosition(x, y, dragId);\n      });\n    };\n  }\n  componentDidMount() {\n    const {\n      dragId,\n      defaultSize\n    } = this.props;\n    const cachedSize = getSize(dragId);\n    const modalWidth = (cachedSize === null || cachedSize === void 0 ? void 0 : cachedSize.w) || (defaultSize === null || defaultSize === void 0 ? void 0 : defaultSize.w) || DefaultSize.w;\n    const modalHeight = (cachedSize === null || cachedSize === void 0 ? void 0 : cachedSize.h) || (defaultSize === null || defaultSize === void 0 ? void 0 : defaultSize.h) || DefaultSize.h;\n    const cachedPosition = getPosition(dragId);\n    const x = cachedPosition ? cachedPosition.x : 0 - modalWidth / 2;\n    const y = cachedPosition ? cachedPosition.y : DefaultPosition.y;\n    if (this.container) {\n      const {\n        width,\n        height\n      } = this.container.getBoundingClientRect();\n      this.setState({\n        containerSize: {\n          width,\n          height\n        }\n      }, () => {\n        const calcutedInfo = this.calcutedSize({\n          w: modalWidth,\n          h: modalHeight\n        }, {\n          x,\n          y\n        });\n        if (calcutedInfo) {\n          const {\n            size,\n            position\n          } = calcutedInfo;\n          this.setState({\n            size,\n            position\n          });\n        }\n      });\n    }\n  }\n  renderContent() {\n    const {\n      title,\n      closable,\n      onClose,\n      children,\n      titleClassName,\n      contentClassName,\n      onMenuClick\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: `title ${titleClassName}`,\n      onClick: onMenuClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, title, closable !== false && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"close\",\n      onClick: onClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CloseOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `content scrollbar ${contentClassName}`,\n      onClick: onMenuClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, children));\n  }\n  renderDraggableContent() {\n    const {\n      dragId,\n      className\n    } = this.props;\n    const {\n      position\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Draggable, {\n      handle: \".title\",\n      bounds: \"parent\",\n      position: position,\n      onStop: (_, data) => this.onDragStop(data.x, data.y, dragId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `annotation-tools-modal ${className}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }, this.renderContent()));\n  }\n  renderResizableContent() {\n    const {\n      dragId,\n      className,\n      minSize = minSizeDefault,\n      maxSize\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx('annotation-tools-madal-wrapper', {\n        resizable: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ResizableBox, {\n      width: this.state.size.w,\n      height: this.state.size.h,\n      onResize: (event, {\n        node,\n        size,\n        handle\n      }) => this.onResize(size, dragId),\n      handle: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"react-resizable-handle handle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(ResizeHandle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 66\n        }\n      })),\n      handleSize: [20, 20],\n      minConstraints: minSize,\n      maxConstraints: maxSize,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `annotation-tools-modal ${className} resizable`,\n      style: {\n        width: `${this.state.size.w}px`,\n        height: `${this.state.size.h}px`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, this.renderContent())));\n  }\n  renderDraggableResizableContent() {\n    const {\n      dragId\n    } = this.props;\n    const {\n      position\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Draggable, {\n      handle: \".title\",\n      bounds: \"parent\",\n      position: position,\n      onStop: (_, data) => this.onDragStop(data.x, data.y, dragId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 7\n      }\n    }, this.renderResizableContent());\n  }\n  renderModalContent() {\n    const {\n      draggable,\n      resizable,\n      className\n    } = this.props;\n    if (draggable && !resizable) {\n      return this.renderDraggableContent();\n    }\n    if (resizable && !draggable) {\n      return this.renderResizableContent();\n    }\n    if (resizable && draggable) {\n      return this.renderDraggableResizableContent();\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: `annotation-tools-modal ${className}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }\n    }, this.renderContent());\n  }\n  render() {\n    const {\n      visible,\n      draggable,\n      maskClosable,\n      onClose,\n      onMaskClick\n    } = this.props;\n    return visible && /*#__PURE__*/React.createElement(\"div\", {\n      className: cx('annotation-tools-mask', {\n        draggable\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"annotation-tools-layer\",\n      ref: r => {\n        this.container = r;\n      },\n      onClick: e => {\n        e.preventDefault();\n        if (onMaskClick) {\n          onMaskClick();\n        }\n        if (maskClosable && onClose) {\n          onClose();\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }), this.renderModalContent());\n  }\n}\nexport default Modal;","map":{"version":3,"names":["React","cx","Draggable","ResizableBox","CloseOutlined","getStorage","setStorage","ResizeHandle","minSizeDefault","DefaultSize","w","h","DefaultPosition","x","y","getPosition","dragId","localStorage","removeItem","cachePosition","undefined","savePosition","getSize","size","saveSize","Modal","PureComponent","constructor","args","state","position","containerSize","container","calcutedSize","resizable","props","width","height","newX","newY","newW","newH","onResize","calcutedInfo","newSize","setState","resizeEvent","Event","window","dispatchEvent","onDragStop","componentDidMount","defaultSize","cachedSize","modalWidth","modalHeight","cachedPosition","getBoundingClientRect","renderContent","title","closable","onClose","children","titleClassName","contentClassName","onMenuClick","createElement","Fragment","className","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","renderDraggableContent","handle","bounds","onStop","_","data","renderResizableContent","minSize","maxSize","event","node","handleSize","minConstraints","maxConstraints","style","renderDraggableResizableContent","renderModalContent","draggable","render","visible","maskClosable","onMaskClick","ref","r","e","preventDefault"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/modal/Modal.tsx"],"sourcesContent":["import React, { MouseEventHandler } from 'react';\nimport cx from 'classnames';\nimport Draggable from 'react-draggable';\nimport { ResizableBox } from 'react-resizable';\nimport { CloseOutlined } from '@ant-design/icons';\nimport { getStorage, setStorage } from 'src/utils/storage';\nimport { ResizeHandle } from '../icons';\nimport './Modal.scss';\n\nconst minSizeDefault: [width: number, height: number] = [320, 180];\nconst DefaultSize = {\n  w: 480,\n  h: 400\n};\nconst DefaultPosition = {\n  x: 0,\n  y: 0\n};\n\nconst getPosition = (dragId?: string) => {\n  localStorage.removeItem('modal-posistion');\n  const cachePosition = getStorage(dragId || 'modal-info', 'position');\n  if (cachePosition) {\n    return { x: cachePosition.x, y: cachePosition.y };\n  };\n  return undefined;\n};\n\nconst savePosition = (x: number, y: number, dragId?: string) => {\n  setStorage(dragId || 'modal-info', 'position', { x, y });\n};\n\nconst getSize = (dragId?: string) => {\n  const size = getStorage(dragId || 'modal-info', 'size');\n  if (size) {\n    return size;\n  }\n  return undefined;\n};\n\nconst saveSize = (w: number, h: number, dragId?: string) => {\n  setStorage(dragId || 'modal-info', 'size', { w, h });\n};\n\ninterface ModalProps {\n  children: React.ReactNode;\n  visible: boolean;\n  draggable?: boolean;\n  resizable?: boolean;\n  dragId?: string;\n  title?: string | React.ReactElement;\n  className?: string;\n  closable?: boolean;\n  maskClosable?: boolean;\n  minSize?: [width: number, height: number];\n  maxSize?: [width: number, height: number];\n  defaultSize?: { w: number, h: number };\n  onClose?: () => void;\n  onMaskClick?: () => void;\n  onMenuClick?: MouseEventHandler<HTMLDivElement>;\n  titleClassName?: string;\n  contentClassName?: string;\n}\n\nclass Modal extends React.PureComponent<ModalProps> {\n  state = {\n    size: DefaultSize,\n    position: DefaultPosition,\n    containerSize: undefined\n  };\n\n  container: HTMLDivElement | null = null;\n\n  componentDidMount(): void {\n    const { dragId, defaultSize } = this.props;\n    const cachedSize = getSize(dragId);\n    const modalWidth = cachedSize?.w || defaultSize?.w || DefaultSize.w;\n    const modalHeight = cachedSize?.h || defaultSize?.h || DefaultSize.h;\n    const cachedPosition = getPosition(dragId);\n    const x = cachedPosition ? cachedPosition.x : 0 - modalWidth / 2;\n    const y = cachedPosition ? cachedPosition.y : DefaultPosition.y;\n    if (this.container) {\n      const { width, height } = this.container.getBoundingClientRect();\n      this.setState({ containerSize: { width, height } }, () => {\n        const calcutedInfo = this.calcutedSize({ w: modalWidth, h: modalHeight }, { x, y });\n        if (calcutedInfo) {\n          const { size, position } = calcutedInfo;\n          this.setState({ size, position });\n        }\n      });\n    }\n  }\n\n  calcutedSize = (size: { w: number; h: number }, position: { x: number, y: number }) => {\n    const { containerSize } = this.state;\n    if (!containerSize) {\n      return;\n    }\n    const { resizable } = this.props;\n    const { w, h } = size;\n    const { x, y } = position;\n    const { width, height } = containerSize;\n    let newX = x;\n    let newY = y;\n    let newW = w;\n    let newH = h;\n    if (width - w < 0) {\n      newW = width - 20;\n      newX = resizable ? 0 - newW / 2 : 0;\n    } else if ((resizable ? width / 2 : 0) + x + w > width) {\n      newX = resizable ? 0 - w / 2 : 0;\n    }\n\n    if (height - h < 0) {\n      newH = height - 20;\n      newY = 0 - height / 5 + (height - newH) / 2;\n    } else if (height / 5 + y + h > height) {\n      newY = 0 - height / 5 + (height - h) / 2;\n    }\n    return { size: { w: newW, h: newH }, position: { x: newX, y: newY } };\n    // this.setState({ size: { w: newW, h: newH }, position: { x: newX, y: newY } });\n  };\n\n  onResize = (size: { width: number; height: number }, dragId?: string) => {\n    const calcutedInfo = this.calcutedSize({ w: size.width, h: size.height }, this.state.position);\n    if (calcutedInfo) {\n      const { size: newSize, position } = calcutedInfo;\n      this.setState({ size: newSize, position }, () => {\n        saveSize(newSize.w, newSize.h, dragId);\n        savePosition(position.x, position.y, dragId);\n      });\n    }\n\n    const resizeEvent = new Event('resize');\n    window.dispatchEvent(resizeEvent);\n  };\n\n  onDragStop = (x: number, y: number, dragId?: string) => {\n    this.setState({ position: { x, y } }, () => {\n      savePosition(x, y, dragId);\n    });\n  };\n\n  renderContent() {\n    const { title, closable, onClose, children, titleClassName, contentClassName, onMenuClick } = this.props;\n    return (\n      <>\n        <div className={`title ${titleClassName}`} onClick={onMenuClick}>\n          {title}\n          {closable !== false && (\n            <div className=\"close\" onClick={onClose}>\n              <CloseOutlined />\n            </div>\n          )}\n        </div>\n        <div className={`content scrollbar ${contentClassName}`} onClick={onMenuClick}>\n          {children}\n        </div>\n      </>\n    );\n  }\n\n  renderDraggableContent() {\n    const { dragId, className } = this.props;\n    const { position } = this.state;\n    return (\n      <Draggable\n        handle=\".title\"\n        bounds=\"parent\"\n        position={position}\n        onStop={(_, data) => this.onDragStop(data.x, data.y, dragId)}\n      >\n        <div className={`annotation-tools-modal ${className}`}>\n          {this.renderContent()}\n        </div>\n      </Draggable>\n    );\n  }\n\n  renderResizableContent() {\n    const { dragId, className, minSize = minSizeDefault, maxSize } = this.props;\n\n    return (\n      <div className={cx('annotation-tools-madal-wrapper', { resizable: true })}>\n        <ResizableBox\n          width={this.state.size.w}\n          height={this.state.size.h}\n          onResize={(event: any, { node, size, handle }: any) => this.onResize(size, dragId)}\n          handle={<div className=\"react-resizable-handle handle\"><ResizeHandle /></div>}\n          handleSize={[20, 20]}\n          minConstraints={minSize}\n          maxConstraints={maxSize}\n        >\n          <div\n            className={`annotation-tools-modal ${className} resizable`}\n            style={{\n              width: `${this.state.size.w}px`,\n              height: `${this.state.size.h}px`\n            }}\n          >\n            {this.renderContent()}\n          </div>\n        </ResizableBox>\n      </div>\n    );\n  };\n\n  renderDraggableResizableContent() {\n    const { dragId } = this.props;\n    const { position } = this.state;\n    return (\n      <Draggable\n        handle=\".title\"\n        bounds=\"parent\"\n        position={position}\n        onStop={(_, data) => this.onDragStop(data.x, data.y, dragId)}\n      >\n        {this.renderResizableContent()}\n      </Draggable>\n    );\n  }\n\n  renderModalContent() {\n    const { draggable, resizable, className } = this.props;\n    if (draggable && !resizable) {\n      return this.renderDraggableContent();\n    } if (resizable && !draggable) {\n      return this.renderResizableContent();\n    } if (resizable && draggable) {\n      return this.renderDraggableResizableContent();\n    }\n    return (\n      <div className={`annotation-tools-modal ${className}`}>\n        {this.renderContent()}\n      </div>\n    );\n  }\n\n  render() {\n    const { visible, draggable, maskClosable, onClose, onMaskClick } = this.props;\n    return visible && (\n      <div className={cx('annotation-tools-mask', { draggable })}>\n        <div\n          className=\"annotation-tools-layer\"\n          ref={(r) => { this.container = r; }}\n          onClick={(e) => {\n            e.preventDefault();\n            if (onMaskClick) {\n              onMaskClick();\n            }\n            if (maskClosable && onClose) {\n              onClose();\n            }\n          }}\n        />\n        {this.renderModalContent()}\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}