{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/tools/RecognitionTool.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Slider } from 'antd';\nimport { Recognition, PlusCircleFilled, MinusCircleFilled } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { Tool } from '../../types';\nimport './RecognitionTool.scss';\nconst RecognitionTool = observer(() => {\n  const creating = store.config.addMode && store.ontology.currentTool === Tool.RECOGNITION;\n  const disabled = !store.shape.recognitionStart || !store.shape.drawingShape;\n  const [mode, setMode] = useState('');\n  useEffect(() => {\n    if (creating) {\n      setMode('');\n    }\n  }, [store.config.addMode]);\n  const updateMode = m => {\n    if (!disabled) {\n      setMode(m || '');\n      store.shape.drawingShape.setRecognitionControlMode(m || 'none');\n    }\n  };\n  const onPlusClick = e => {\n    e.stopPropagation();\n    updateMode(mode === 'plus' ? '' : 'plus');\n  };\n  const onMinusClick = e => {\n    e.stopPropagation();\n    updateMode(mode === 'minus' ? '' : 'minus');\n  };\n  if (store.readonly || !creating) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recognition-tool\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Recognition, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, i18n.translate('TOOL_RECOGNITION')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"divider-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('icon-button plus', {\n      disabled,\n      active: mode === 'plus'\n    }),\n    onClick: onPlusClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PlusCircleFilled, {\n    opacity: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('icon-button minus', {\n      disabled,\n      active: mode === 'minus'\n    }),\n    onClick: onMinusClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MinusCircleFilled, {\n    opacity: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, i18n.translate('RECOGNITION_THRESHOLD')), /*#__PURE__*/React.createElement(Slider, {\n    min: 0,\n    max: 1,\n    step: 0.1,\n    value: store.shape.recognitionData.threshold,\n    onChange: store.shape.setRecognitionThreshold,\n    onAfterChange: store.shape.requestRecognition,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('operation-btn', {\n      disabled: creating\n    }),\n    style: {\n      marginLeft: 12,\n      marginRight: 4\n    },\n    onClick: store.shape.finishRecognition,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, i18n.translate('RECOGNITION_ENTER')));\n});\nexport default RecognitionTool;","map":{"version":3,"names":["React","useState","useEffect","observer","cx","Slider","Recognition","PlusCircleFilled","MinusCircleFilled","store","i18n","Tool","RecognitionTool","creating","config","addMode","ontology","currentTool","RECOGNITION","disabled","shape","recognitionStart","drawingShape","mode","setMode","updateMode","m","setRecognitionControlMode","onPlusClick","e","stopPropagation","onMinusClick","readonly","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","translate","active","onClick","opacity","style","marginLeft","min","max","step","value","recognitionData","threshold","onChange","setRecognitionThreshold","onAfterChange","requestRecognition","marginRight","finishRecognition"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/tools/RecognitionTool.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Slider } from 'antd';\nimport { Recognition, PlusCircleFilled, MinusCircleFilled } from '../../../common/icons';\nimport Polygon from '../../../common/shapes/Polygon';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { Tool } from '../../types';\nimport './RecognitionTool.scss';\n\nconst RecognitionTool = observer(() => {\n  const creating = store.config.addMode && store.ontology.currentTool === Tool.RECOGNITION;\n  const disabled = !store.shape.recognitionStart || !store.shape.drawingShape;\n\n  const [mode, setMode] = useState<'plus' | 'minus' | ''>('');\n\n  useEffect(() => {\n    if (creating) {\n      setMode('');\n    }\n  }, [store.config.addMode]);\n\n  const updateMode = (m: 'plus' | 'minus' | '') => {\n    if (!disabled) {\n      setMode(m || '');\n      (store.shape.drawingShape as Polygon).setRecognitionControlMode(m || 'none');\n    }\n  };\n\n  const onPlusClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    updateMode(mode === 'plus' ? '' : 'plus');\n  };\n\n  const onMinusClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    updateMode(mode === 'minus' ? '' : 'minus');\n  };\n\n  if (store.readonly || !creating) {\n    return null;\n  }\n  return (\n    <div className=\"recognition-tool\">\n      <div className=\"icon\"><Recognition /></div>\n      <div className=\"name\">{i18n.translate('TOOL_RECOGNITION')}</div>\n      <div className=\"divider-sm\" />\n      <div\n        className={cx('icon-button plus', {\n          disabled,\n          active: mode === 'plus',\n        })}\n        onClick={onPlusClick}\n      >\n        <PlusCircleFilled opacity={1} />\n      </div>\n      <div\n        className={cx('icon-button minus', {\n          disabled,\n          active: mode === 'minus',\n        })}\n        onClick={onMinusClick}\n      >\n        <MinusCircleFilled opacity={1} />\n      </div>\n      <div style={{ marginLeft: 12 }}>{i18n.translate('RECOGNITION_THRESHOLD')}</div>\n      <Slider\n        min={0}\n        max={1}\n        step={0.1}\n        value={store.shape.recognitionData.threshold}\n        onChange={store.shape.setRecognitionThreshold}\n        onAfterChange={store.shape.requestRecognition}\n      />\n      <div\n        className={cx('operation-btn', {\n          disabled: creating,\n        })}\n        style={{ marginLeft: 12, marginRight: 4 }}\n        onClick={store.shape.finishRecognition}\n      >\n        {i18n.translate('RECOGNITION_ENTER')}\n      </div>\n    </div>\n  );\n});\n\nexport default RecognitionTool;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}