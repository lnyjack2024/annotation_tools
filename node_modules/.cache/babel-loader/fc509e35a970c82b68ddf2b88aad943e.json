{"ast":null,"code":"/* eslint-disable no-useless-escape */\nimport { substr, strlen } from 'fbjs/lib/UnicodeUtils';\nimport { EditorState } from 'draft-js';\nimport { uniqueId } from 'lodash';\nexport const escapeCharacter = str => str.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\nconst isEmoji = str => {\n  // move to getSliceHead()\n  // if (!/^([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030)/.test(str)) return substr(str, 0, 1);\n  const joiner = '\\u{200D}';\n  const split = str.split(joiner);\n  let count = 0;\n  // eslint-disable-next-line no-restricted-syntax\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]|[\\u2642]/).join('')).length;\n    count += num;\n  }\n  // assuming the joiners are used appropriately\n  return count / split.length === 1;\n};\nexport const isArabic = str => /^\\s*[\\u0600-\\u06ff]+/g.test(str);\nexport const convertArrayToColor = array => array.map((item, index) => `${index ? '' : '#'}${Math.floor(item) < 16 ? '0' : ''}${Math.floor(item).toString(16)}`).join('');\nexport const convertColorToArray = color => [parseInt(color.slice(1, 3), 16), parseInt(color.slice(3, 5), 16), parseInt(color.slice(5, 7), 16)];\nexport const findSurrogatePairs = str => {\n  const surrogatePairs = [];\n  for (let i = 0; i < str.length - 1; i += 1) {\n    const current = str.charCodeAt(i);\n    const next = str.charCodeAt(i + 1);\n    if (current >= 0xD800 && current <= 0xDBFF && next >= 0xDC00 && next <= 0xDFFF) {\n      surrogatePairs.push(i); // 保存高代理项的索引\n    }\n  }\n  return surrogatePairs;\n};\nexport const getPositionWithUnicode = (surrogatePairsPosition, currentIndex) => {\n  let needOffset = false;\n  const targetIndex = surrogatePairsPosition.findIndex(item => {\n    if (item + 1 > currentIndex) {\n      return true;\n    }\n    needOffset = true;\n    return false;\n  });\n  if (needOffset) {\n    return currentIndex - targetIndex < 0 ? surrogatePairsPosition.length : targetIndex;\n  }\n  return currentIndex;\n};\n\n// handle slice begin with emoji\nexport const getSliceHead = str => {\n  // eslint-disable-next-line no-misleading-character-class\n  if (!/^([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030)/.test(str)) return str;\n  const MAX_EMOJI_LENGTH = 8;\n  const length = Math.min(strlen(str), MAX_EMOJI_LENGTH);\n  for (let i = length; i > 0; i -= 1) {\n    const head = substr(str, 0, i);\n    if (isEmoji(head)) return head;\n  }\n  console.warning('getSliceHead: warning');\n  return str;\n};\nexport const setSelection = (editorState, start, end) => {\n  let selection = editorState.getSelection();\n  selection = selection.set('focusOffset', start).set('anchorOffset', end);\n  editorState = EditorState.forceSelection(editorState, selection);\n  return editorState;\n};\nexport const closeSelection = editorState => {\n  let selection = editorState.getSelection();\n  selection = selection.set('anchorOffset', selection.get('focusOffset'));\n  editorState = EditorState.forceSelection(editorState, selection);\n  return editorState;\n};\nexport const getTextByInsertion = (text, insertion) => {\n  const length = strlen(text);\n  if (insertion.at >= 5 && insertion.at <= length - 5) return `${substr(text, insertion.at - 5, 5)}*${insertion.value}*${substr(text, insertion.at, 5)}`;\n  if (insertion.at >= 5) return `${substr(text, insertion.at - 5, 5)}*${insertion.value}*${substr(text, insertion.at, length - insertion.at)}`;\n  if (insertion.at <= length - 5) return `${substr(text, 0, insertion.at)}*${insertion.value}*${substr(text, insertion.at, 5)}`;\n  return `${substr(text, 0, insertion.at)}*${insertion.value}*${substr(text, insertion.at, length - insertion.at)}`;\n};\n\n// id manager\nexport const idManager = () => {\n  const idList = [];\n  return {\n    generateID: head => {\n      let id;\n      do {\n        id = uniqueId(`${head}_`);\n      } while (idList.indexOf(id) !== -1);\n      idList.push(id);\n      return id;\n    },\n    clear: () => {\n      idList.length = 0;\n    },\n    checkAndInsert: (id, head) => {\n      if (!id || idList.indexOf(id) !== -1) return this.generateID(head);\n      idList.push(id);\n      return id;\n    }\n  };\n};\n\n// used to get wrapper dom from active dom\nexport const getTargetWrapperDataSet = e => {\n  let target = e.target || e.srcElement;\n  while (target.className.indexOf('wrapper') === -1) {\n    target = target.parentNode;\n  }\n  return target.dataset;\n};\nexport const getNextInLoopList = (list, src, step) => {\n  let index = src + step;\n  const len = list.length;\n  while (index < 0) index += len;\n  return list[index % len];\n};\nexport function isElementInViewport(el, parentScollEl) {\n  const rect = el.getBoundingClientRect();\n  const top = rect.top + rect.height;\n  const parentRect = parentScollEl.getBoundingClientRect();\n  return top > Math.max(parentRect.top, 0) && rect.left > Math.max(parentRect.left, 0) && top < Math.min(parentRect.top + parentRect.height, window.innerHeight || document.documentElement.clientHeight) && rect.left < Math.min(parentRect.left + parentRect.width, window.innerWidth || document.documentElement.clientWidth);\n}\nexport const getAllParentKey = keys => {\n  const result = [];\n  for (let i = keys.length; i > 0; i -= 1) {\n    result.push(keys.slice(0, i));\n  }\n  return result;\n};\nexport function getConfigByKeys(configMap, keys) {\n  return configMap.get(keys === null || keys === void 0 ? void 0 : keys.join(':'));\n}\nexport function generateConfigKeyByKeys(keys) {\n  return keys === null || keys === void 0 ? void 0 : keys.join(':');\n}\nexport function parseHotkey(shortcut) {\n  if (shortcut) {\n    // TODO: current only single alphabet is supported\n    if (/^[a-zA-Z]$/.test(shortcut)) {\n      const hotkey = {\n        key: shortcut.toLowerCase(),\n        shiftKey: false,\n        ctrlKey: false,\n        altKey: false\n      };\n      return hotkey;\n    }\n  }\n  return undefined;\n}","map":{"version":3,"names":["substr","strlen","EditorState","uniqueId","escapeCharacter","str","replace","isEmoji","joiner","split","count","s","num","Array","from","join","length","isArabic","test","convertArrayToColor","array","map","item","index","Math","floor","toString","convertColorToArray","color","parseInt","slice","findSurrogatePairs","surrogatePairs","i","current","charCodeAt","next","push","getPositionWithUnicode","surrogatePairsPosition","currentIndex","needOffset","targetIndex","findIndex","getSliceHead","MAX_EMOJI_LENGTH","min","head","console","warning","setSelection","editorState","start","end","selection","getSelection","set","forceSelection","closeSelection","get","getTextByInsertion","text","insertion","at","value","idManager","idList","generateID","id","indexOf","clear","checkAndInsert","getTargetWrapperDataSet","e","target","srcElement","className","parentNode","dataset","getNextInLoopList","list","src","step","len","isElementInViewport","el","parentScollEl","rect","getBoundingClientRect","top","height","parentRect","max","left","window","innerHeight","document","documentElement","clientHeight","width","innerWidth","clientWidth","getAllParentKey","keys","result","getConfigByKeys","configMap","generateConfigKeyByKeys","parseHotkey","shortcut","hotkey","key","toLowerCase","shiftKey","ctrlKey","altKey","undefined"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/editable-text/utils/helper.js"],"sourcesContent":["/* eslint-disable no-useless-escape */\nimport { substr, strlen } from 'fbjs/lib/UnicodeUtils';\nimport { EditorState } from 'draft-js';\nimport { uniqueId } from 'lodash';\n\nexport const escapeCharacter = (str) => str.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\nconst isEmoji = (str) => {\n  // move to getSliceHead()\n  // if (!/^([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030)/.test(str)) return substr(str, 0, 1);\n  const joiner = '\\u{200D}';\n  const split = str.split(joiner);\n  let count = 0;\n  // eslint-disable-next-line no-restricted-syntax\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]|[\\u2642]/).join('')).length;\n    count += num;\n  }\n  // assuming the joiners are used appropriately\n  return (count / split.length) === 1;\n};\n\nexport const isArabic = (str) => (/^\\s*[\\u0600-\\u06ff]+/g.test(str));\n\nexport const convertArrayToColor = (array) => array.map((item, index) => `${index ? '' : '#'}${Math.floor(item) < 16 ? '0' : ''}${Math.floor(item).toString(16)}`).join('');\n\nexport const convertColorToArray = (color) => ([\n  parseInt(color.slice(1, 3), 16),\n  parseInt(color.slice(3, 5), 16),\n  parseInt(color.slice(5, 7), 16),\n]);\n\nexport const findSurrogatePairs = (str) => {\n  const surrogatePairs = [];\n  for (let i = 0; i < str.length - 1; i += 1) {\n    const current = str.charCodeAt(i);\n    const next = str.charCodeAt(i + 1);\n    if (current >= 0xD800 && current <= 0xDBFF && next >= 0xDC00 && next <= 0xDFFF) {\n      surrogatePairs.push(i); // 保存高代理项的索引\n    }\n  }\n  return surrogatePairs;\n};\n\nexport const getPositionWithUnicode = (surrogatePairsPosition, currentIndex) => {\n  let needOffset = false;\n  const targetIndex = surrogatePairsPosition.findIndex((item) => {\n    if (item + 1 > currentIndex) {\n      return true;\n    }\n    needOffset = true;\n    return false;\n  });\n  if (needOffset) {\n    return currentIndex - targetIndex < 0 ? surrogatePairsPosition.length : targetIndex;\n  }\n\n  return currentIndex;\n};\n\n// handle slice begin with emoji\nexport const getSliceHead = (str) => {\n  // eslint-disable-next-line no-misleading-character-class\n  if (!/^([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030)/.test(str)) return str;\n  const MAX_EMOJI_LENGTH = 8;\n  const length = Math.min(strlen(str), MAX_EMOJI_LENGTH);\n  for (let i = length; i > 0; i -= 1) {\n    const head = substr(str, 0, i);\n    if (isEmoji(head)) return head;\n  }\n  console.warning('getSliceHead: warning');\n  return str;\n};\n\nexport const setSelection = (editorState, start, end) => {\n  let selection = editorState.getSelection();\n  selection = selection.set('focusOffset', start).set('anchorOffset', end);\n  editorState = EditorState.forceSelection(editorState, selection);\n  return editorState;\n};\n\nexport const closeSelection = (editorState) => {\n  let selection = editorState.getSelection();\n  selection = selection.set('anchorOffset', selection.get('focusOffset'));\n  editorState = EditorState.forceSelection(editorState, selection);\n  return editorState;\n};\n\nexport const getTextByInsertion = (text, insertion) => {\n  const length = strlen(text);\n  if (insertion.at >= 5 && insertion.at <= length - 5) return `${substr(text, insertion.at - 5, 5)}*${insertion.value}*${substr(text, insertion.at, 5)}`;\n  if (insertion.at >= 5) return `${substr(text, insertion.at - 5, 5)}*${insertion.value}*${substr(text, insertion.at, length - insertion.at)}`;\n  if (insertion.at <= length - 5) return `${substr(text, 0, insertion.at)}*${insertion.value}*${substr(text, insertion.at, 5)}`;\n  return `${substr(text, 0, insertion.at)}*${insertion.value}*${substr(text, insertion.at, length - insertion.at)}`;\n};\n\n// id manager\nexport const idManager = () => {\n  const idList = [];\n  return {\n    generateID: (head) => {\n      let id;\n      do { id = uniqueId(`${head}_`); } while (idList.indexOf(id) !== -1);\n      idList.push(id);\n      return id;\n    },\n    clear: () => {\n      idList.length = 0;\n    },\n    checkAndInsert: (id, head) => {\n      if (!id || idList.indexOf(id) !== -1) return this.generateID(head);\n      idList.push(id);\n      return id;\n    }\n  };\n};\n\n// used to get wrapper dom from active dom\nexport const getTargetWrapperDataSet = (e) => {\n  let target = e.target || e.srcElement;\n  while (target.className.indexOf('wrapper') === -1) {\n    target = target.parentNode;\n  }\n  return target.dataset;\n};\n\nexport const getNextInLoopList = (list, src, step) => {\n  let index = src + step;\n  const len = list.length;\n  while (index < 0) index += len;\n  return list[index % len];\n};\n\nexport function isElementInViewport(el, parentScollEl) {\n  const rect = el.getBoundingClientRect();\n  const top = rect.top + rect.height;\n  const parentRect = parentScollEl.getBoundingClientRect();\n  return (\n    top > Math.max(parentRect.top, 0)\n    && rect.left > Math.max(parentRect.left, 0)\n    && top < Math.min(parentRect.top + parentRect.height, (window.innerHeight || document.documentElement.clientHeight))\n    && rect.left < Math.min(parentRect.left + parentRect.width, (window.innerWidth || document.documentElement.clientWidth))\n  );\n}\n\nexport const getAllParentKey = (keys) => {\n  const result = [];\n  for (let i = keys.length; i > 0; i -= 1) {\n    result.push(keys.slice(0, i));\n  }\n  return result;\n};\n\nexport function getConfigByKeys(configMap, keys) {\n  return configMap.get(keys?.join(':'));\n}\n\nexport function generateConfigKeyByKeys(keys) {\n  return keys?.join(':');\n}\n\nexport function parseHotkey(shortcut) {\n  if (shortcut) {\n    // TODO: current only single alphabet is supported\n    if (/^[a-zA-Z]$/.test(shortcut)) {\n      const hotkey = {\n        key: shortcut.toLowerCase(),\n        shiftKey: false,\n        ctrlKey: false,\n        altKey: false,\n      };\n      return hotkey;\n    }\n  }\n  return undefined;\n}\n"],"mappings":"AAAA;AACA,SAASA,MAAM,EAAEC,MAAM,QAAQ,uBAAuB;AACtD,SAASC,WAAW,QAAQ,UAAU;AACtC,SAASC,QAAQ,QAAQ,QAAQ;AAEjC,OAAO,MAAMC,eAAe,GAAIC,GAAG,IAAKA,GAAG,CAACC,OAAO,CAAC,wBAAwB,EAAE,MAAM,CAAC;AAErF,MAAMC,OAAO,GAAIF,GAAG,IAAK;EACvB;EACA;EACA,MAAMG,MAAM,GAAG,UAAU;EACzB,MAAMC,KAAK,GAAGJ,GAAG,CAACI,KAAK,CAACD,MAAM,CAAC;EAC/B,IAAIE,KAAK,GAAG,CAAC;EACb;EACA,KAAK,MAAMC,CAAC,IAAIF,KAAK,EAAE;IACrB;IACA,MAAMG,GAAG,GAAGC,KAAK,CAACC,IAAI,CAACH,CAAC,CAACF,KAAK,CAAC,0BAA0B,CAAC,CAACM,IAAI,CAAC,EAAE,CAAC,CAAC,CAACC,MAAM;IAC3EN,KAAK,IAAIE,GAAG;EACd;EACA;EACA,OAAQF,KAAK,GAAGD,KAAK,CAACO,MAAM,KAAM,CAAC;AACrC,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIZ,GAAG,IAAM,uBAAuB,CAACa,IAAI,CAACb,GAAG,CAAE;AAEpE,OAAO,MAAMc,mBAAmB,GAAIC,KAAK,IAAKA,KAAK,CAACC,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK,GAAGA,KAAK,GAAG,EAAE,GAAG,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAGE,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,CAACI,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,CAACX,IAAI,CAAC,EAAE,CAAC;AAE3K,OAAO,MAAMY,mBAAmB,GAAIC,KAAK,IAAM,CAC7CC,QAAQ,CAACD,KAAK,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAC/BD,QAAQ,CAACD,KAAK,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAC/BD,QAAQ,CAACD,KAAK,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAC/B;AAEF,OAAO,MAAMC,kBAAkB,GAAI1B,GAAG,IAAK;EACzC,MAAM2B,cAAc,GAAG,EAAE;EACzB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG5B,GAAG,CAACW,MAAM,GAAG,CAAC,EAAEiB,CAAC,IAAI,CAAC,EAAE;IAC1C,MAAMC,OAAO,GAAG7B,GAAG,CAAC8B,UAAU,CAACF,CAAC,CAAC;IACjC,MAAMG,IAAI,GAAG/B,GAAG,CAAC8B,UAAU,CAACF,CAAC,GAAG,CAAC,CAAC;IAClC,IAAIC,OAAO,IAAI,MAAM,IAAIA,OAAO,IAAI,MAAM,IAAIE,IAAI,IAAI,MAAM,IAAIA,IAAI,IAAI,MAAM,EAAE;MAC9EJ,cAAc,CAACK,IAAI,CAACJ,CAAC,CAAC,CAAC,CAAC;IAC1B;EACF;EACA,OAAOD,cAAc;AACvB,CAAC;AAED,OAAO,MAAMM,sBAAsB,GAAGA,CAACC,sBAAsB,EAAEC,YAAY,KAAK;EAC9E,IAAIC,UAAU,GAAG,KAAK;EACtB,MAAMC,WAAW,GAAGH,sBAAsB,CAACI,SAAS,CAAErB,IAAI,IAAK;IAC7D,IAAIA,IAAI,GAAG,CAAC,GAAGkB,YAAY,EAAE;MAC3B,OAAO,IAAI;IACb;IACAC,UAAU,GAAG,IAAI;IACjB,OAAO,KAAK;EACd,CAAC,CAAC;EACF,IAAIA,UAAU,EAAE;IACd,OAAOD,YAAY,GAAGE,WAAW,GAAG,CAAC,GAAGH,sBAAsB,CAACvB,MAAM,GAAG0B,WAAW;EACrF;EAEA,OAAOF,YAAY;AACrB,CAAC;;AAED;AACA,OAAO,MAAMI,YAAY,GAAIvC,GAAG,IAAK;EACnC;EACA,IAAI,CAAC,6OAA6O,CAACa,IAAI,CAACb,GAAG,CAAC,EAAE,OAAOA,GAAG;EACxQ,MAAMwC,gBAAgB,GAAG,CAAC;EAC1B,MAAM7B,MAAM,GAAGQ,IAAI,CAACsB,GAAG,CAAC7C,MAAM,CAACI,GAAG,CAAC,EAAEwC,gBAAgB,CAAC;EACtD,KAAK,IAAIZ,CAAC,GAAGjB,MAAM,EAAEiB,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAE;IAClC,MAAMc,IAAI,GAAG/C,MAAM,CAACK,GAAG,EAAE,CAAC,EAAE4B,CAAC,CAAC;IAC9B,IAAI1B,OAAO,CAACwC,IAAI,CAAC,EAAE,OAAOA,IAAI;EAChC;EACAC,OAAO,CAACC,OAAO,CAAC,uBAAuB,CAAC;EACxC,OAAO5C,GAAG;AACZ,CAAC;AAED,OAAO,MAAM6C,YAAY,GAAGA,CAACC,WAAW,EAAEC,KAAK,EAAEC,GAAG,KAAK;EACvD,IAAIC,SAAS,GAAGH,WAAW,CAACI,YAAY,CAAC,CAAC;EAC1CD,SAAS,GAAGA,SAAS,CAACE,GAAG,CAAC,aAAa,EAAEJ,KAAK,CAAC,CAACI,GAAG,CAAC,cAAc,EAAEH,GAAG,CAAC;EACxEF,WAAW,GAAGjD,WAAW,CAACuD,cAAc,CAACN,WAAW,EAAEG,SAAS,CAAC;EAChE,OAAOH,WAAW;AACpB,CAAC;AAED,OAAO,MAAMO,cAAc,GAAIP,WAAW,IAAK;EAC7C,IAAIG,SAAS,GAAGH,WAAW,CAACI,YAAY,CAAC,CAAC;EAC1CD,SAAS,GAAGA,SAAS,CAACE,GAAG,CAAC,cAAc,EAAEF,SAAS,CAACK,GAAG,CAAC,aAAa,CAAC,CAAC;EACvER,WAAW,GAAGjD,WAAW,CAACuD,cAAc,CAACN,WAAW,EAAEG,SAAS,CAAC;EAChE,OAAOH,WAAW;AACpB,CAAC;AAED,OAAO,MAAMS,kBAAkB,GAAGA,CAACC,IAAI,EAAEC,SAAS,KAAK;EACrD,MAAM9C,MAAM,GAAGf,MAAM,CAAC4D,IAAI,CAAC;EAC3B,IAAIC,SAAS,CAACC,EAAE,IAAI,CAAC,IAAID,SAAS,CAACC,EAAE,IAAI/C,MAAM,GAAG,CAAC,EAAE,OAAO,GAAGhB,MAAM,CAAC6D,IAAI,EAAEC,SAAS,CAACC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,IAAID,SAAS,CAACE,KAAK,IAAIhE,MAAM,CAAC6D,IAAI,EAAEC,SAAS,CAACC,EAAE,EAAE,CAAC,CAAC,EAAE;EACtJ,IAAID,SAAS,CAACC,EAAE,IAAI,CAAC,EAAE,OAAO,GAAG/D,MAAM,CAAC6D,IAAI,EAAEC,SAAS,CAACC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,IAAID,SAAS,CAACE,KAAK,IAAIhE,MAAM,CAAC6D,IAAI,EAAEC,SAAS,CAACC,EAAE,EAAE/C,MAAM,GAAG8C,SAAS,CAACC,EAAE,CAAC,EAAE;EAC5I,IAAID,SAAS,CAACC,EAAE,IAAI/C,MAAM,GAAG,CAAC,EAAE,OAAO,GAAGhB,MAAM,CAAC6D,IAAI,EAAE,CAAC,EAAEC,SAAS,CAACC,EAAE,CAAC,IAAID,SAAS,CAACE,KAAK,IAAIhE,MAAM,CAAC6D,IAAI,EAAEC,SAAS,CAACC,EAAE,EAAE,CAAC,CAAC,EAAE;EAC7H,OAAO,GAAG/D,MAAM,CAAC6D,IAAI,EAAE,CAAC,EAAEC,SAAS,CAACC,EAAE,CAAC,IAAID,SAAS,CAACE,KAAK,IAAIhE,MAAM,CAAC6D,IAAI,EAAEC,SAAS,CAACC,EAAE,EAAE/C,MAAM,GAAG8C,SAAS,CAACC,EAAE,CAAC,EAAE;AACnH,CAAC;;AAED;AACA,OAAO,MAAME,SAAS,GAAGA,CAAA,KAAM;EAC7B,MAAMC,MAAM,GAAG,EAAE;EACjB,OAAO;IACLC,UAAU,EAAGpB,IAAI,IAAK;MACpB,IAAIqB,EAAE;MACN,GAAG;QAAEA,EAAE,GAAGjE,QAAQ,CAAC,GAAG4C,IAAI,GAAG,CAAC;MAAE,CAAC,QAAQmB,MAAM,CAACG,OAAO,CAACD,EAAE,CAAC,KAAK,CAAC,CAAC;MAClEF,MAAM,CAAC7B,IAAI,CAAC+B,EAAE,CAAC;MACf,OAAOA,EAAE;IACX,CAAC;IACDE,KAAK,EAAEA,CAAA,KAAM;MACXJ,MAAM,CAAClD,MAAM,GAAG,CAAC;IACnB,CAAC;IACDuD,cAAc,EAAEA,CAACH,EAAE,EAAErB,IAAI,KAAK;MAC5B,IAAI,CAACqB,EAAE,IAAIF,MAAM,CAACG,OAAO,CAACD,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,IAAI,CAACD,UAAU,CAACpB,IAAI,CAAC;MAClEmB,MAAM,CAAC7B,IAAI,CAAC+B,EAAE,CAAC;MACf,OAAOA,EAAE;IACX;EACF,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMI,uBAAuB,GAAIC,CAAC,IAAK;EAC5C,IAAIC,MAAM,GAAGD,CAAC,CAACC,MAAM,IAAID,CAAC,CAACE,UAAU;EACrC,OAAOD,MAAM,CAACE,SAAS,CAACP,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;IACjDK,MAAM,GAAGA,MAAM,CAACG,UAAU;EAC5B;EACA,OAAOH,MAAM,CAACI,OAAO;AACvB,CAAC;AAED,OAAO,MAAMC,iBAAiB,GAAGA,CAACC,IAAI,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACpD,IAAI3D,KAAK,GAAG0D,GAAG,GAAGC,IAAI;EACtB,MAAMC,GAAG,GAAGH,IAAI,CAAChE,MAAM;EACvB,OAAOO,KAAK,GAAG,CAAC,EAAEA,KAAK,IAAI4D,GAAG;EAC9B,OAAOH,IAAI,CAACzD,KAAK,GAAG4D,GAAG,CAAC;AAC1B,CAAC;AAED,OAAO,SAASC,mBAAmBA,CAACC,EAAE,EAAEC,aAAa,EAAE;EACrD,MAAMC,IAAI,GAAGF,EAAE,CAACG,qBAAqB,CAAC,CAAC;EACvC,MAAMC,GAAG,GAAGF,IAAI,CAACE,GAAG,GAAGF,IAAI,CAACG,MAAM;EAClC,MAAMC,UAAU,GAAGL,aAAa,CAACE,qBAAqB,CAAC,CAAC;EACxD,OACEC,GAAG,GAAGjE,IAAI,CAACoE,GAAG,CAACD,UAAU,CAACF,GAAG,EAAE,CAAC,CAAC,IAC9BF,IAAI,CAACM,IAAI,GAAGrE,IAAI,CAACoE,GAAG,CAACD,UAAU,CAACE,IAAI,EAAE,CAAC,CAAC,IACxCJ,GAAG,GAAGjE,IAAI,CAACsB,GAAG,CAAC6C,UAAU,CAACF,GAAG,GAAGE,UAAU,CAACD,MAAM,EAAGI,MAAM,CAACC,WAAW,IAAIC,QAAQ,CAACC,eAAe,CAACC,YAAa,CAAC,IACjHX,IAAI,CAACM,IAAI,GAAGrE,IAAI,CAACsB,GAAG,CAAC6C,UAAU,CAACE,IAAI,GAAGF,UAAU,CAACQ,KAAK,EAAGL,MAAM,CAACM,UAAU,IAAIJ,QAAQ,CAACC,eAAe,CAACI,WAAY,CAAC;AAE5H;AAEA,OAAO,MAAMC,eAAe,GAAIC,IAAI,IAAK;EACvC,MAAMC,MAAM,GAAG,EAAE;EACjB,KAAK,IAAIvE,CAAC,GAAGsE,IAAI,CAACvF,MAAM,EAAEiB,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAE;IACvCuE,MAAM,CAACnE,IAAI,CAACkE,IAAI,CAACzE,KAAK,CAAC,CAAC,EAAEG,CAAC,CAAC,CAAC;EAC/B;EACA,OAAOuE,MAAM;AACf,CAAC;AAED,OAAO,SAASC,eAAeA,CAACC,SAAS,EAAEH,IAAI,EAAE;EAC/C,OAAOG,SAAS,CAAC/C,GAAG,CAAC4C,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAExF,IAAI,CAAC,GAAG,CAAC,CAAC;AACvC;AAEA,OAAO,SAAS4F,uBAAuBA,CAACJ,IAAI,EAAE;EAC5C,OAAOA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAExF,IAAI,CAAC,GAAG,CAAC;AACxB;AAEA,OAAO,SAAS6F,WAAWA,CAACC,QAAQ,EAAE;EACpC,IAAIA,QAAQ,EAAE;IACZ;IACA,IAAI,YAAY,CAAC3F,IAAI,CAAC2F,QAAQ,CAAC,EAAE;MAC/B,MAAMC,MAAM,GAAG;QACbC,GAAG,EAAEF,QAAQ,CAACG,WAAW,CAAC,CAAC;QAC3BC,QAAQ,EAAE,KAAK;QACfC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE;MACV,CAAC;MACD,OAAOL,MAAM;IACf;EACF;EACA,OAAOM,SAAS;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module"}