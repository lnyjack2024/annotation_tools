{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/InstanceItemAttributes.tsx\";\nimport React, { useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport AttributeValueItem from './AttributeValueItem';\nimport ShapeIcon from '../sidebar/ShapeIcon';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './InstanceAttributes.scss';\nconst InstanceItemAttributes = observer(({\n  instanceItem,\n  fieldsMap\n}) => {\n  // FIXME: use current camera cause multiple cameras not supported yet\n  const {\n    currentCamera,\n    currentFrame,\n    isSingleCamera,\n    cameraNames\n  } = store.frame;\n  const cameraData = instanceItem.cameras[currentCamera];\n  const {\n    frames = {}\n  } = cameraData || {};\n  const frameData = frames[currentFrame];\n  const {\n    attributes\n  } = frameData || {};\n  const {\n    shapeType\n  } = frameData || frames[cameraData === null || cameraData === void 0 ? void 0 : cameraData.getNearestKeyFrame(currentFrame)] || {};\n  const isEmpty = !frameData;\n  const fieldKeys = Object.keys(fieldsMap || {});\n\n  // refs\n  const ref = useRef(null);\n  const attrKeys = Object.keys(attributes || {});\n  const legacyKeys = attrKeys.filter(key => !fieldKeys.includes(key));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section\",\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('section-title', {\n      empty: isEmpty\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section-title__icon\",\n    style: {\n      color: instanceItem.categoryItemRef.displayColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ShapeIcon, {\n    shapeType: shapeType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"section-title__label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, `${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraNames.indexOf(currentCamera) + 1}`}`, isEmpty && i18n.translate('EMPTY_LABEL'))), [...fieldKeys, ...legacyKeys].map(key => attrKeys.includes(key) && /*#__PURE__*/React.createElement(AttributeValueItem, {\n    key: key,\n    fieldName: key,\n    fieldsMap: fieldsMap,\n    values: attributes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  })));\n});\nexport default InstanceItemAttributes;","map":{"version":3,"names":["React","useRef","observer","cx","AttributeValueItem","ShapeIcon","store","i18n","InstanceItemAttributes","instanceItem","fieldsMap","currentCamera","currentFrame","isSingleCamera","cameraNames","frame","cameraData","cameras","frames","frameData","attributes","shapeType","getNearestKeyFrame","isEmpty","fieldKeys","Object","keys","ref","attrKeys","legacyKeys","filter","key","includes","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","empty","style","color","categoryItemRef","displayColor","itemLabel","indexOf","translate","map","fieldName","values"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/InstanceItemAttributes.tsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { FieldConfig } from '../../types';\nimport AttributeValueItem from './AttributeValueItem';\nimport ShapeIcon from '../sidebar/ShapeIcon';\nimport InstanceItem from '../../model/InstanceItem';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './InstanceAttributes.scss';\n\ninterface InstanceItemAttributesProps {\n  instanceItem: InstanceItem;\n  fieldsMap: { [fieldName: string]: FieldConfig };\n}\n\nconst InstanceItemAttributes = observer(({ instanceItem, fieldsMap }: InstanceItemAttributesProps) => {\n  // FIXME: use current camera cause multiple cameras not supported yet\n  const { currentCamera, currentFrame, isSingleCamera, cameraNames } = store.frame;\n  const cameraData = instanceItem.cameras[currentCamera];\n  const { frames = {} } = cameraData || {};\n  const frameData = frames[currentFrame];\n  const { attributes } = frameData || {};\n  const { shapeType } = frameData || frames[cameraData?.getNearestKeyFrame(currentFrame)] || {};\n  const isEmpty = !frameData;\n  const fieldKeys = Object.keys(fieldsMap || {});\n\n  // refs\n  const ref = useRef<HTMLDivElement>(null);\n\n  const attrKeys = Object.keys(attributes || {});\n  const legacyKeys = attrKeys.filter((key) => !fieldKeys.includes(key));\n\n  return (\n    <div className=\"section\" ref={ref}>\n      <div\n        className={cx('section-title', {\n          empty: isEmpty,\n        })}\n      >\n        <div\n          className=\"section-title__icon\"\n          style={{ color: instanceItem.categoryItemRef.displayColor }}\n        >\n          <ShapeIcon shapeType={shapeType} />\n        </div>\n        <div className=\"section-title__label\">\n          {`${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraNames.indexOf(currentCamera) + 1}`}`}\n          {isEmpty && i18n.translate('EMPTY_LABEL')}\n        </div>\n      </div>\n      {[...fieldKeys, ...legacyKeys].map((key) => attrKeys.includes(key) && (\n        <AttributeValueItem\n          key={key}\n          fieldName={key}\n          fieldsMap={fieldsMap}\n          values={attributes}\n        />\n      ))}\n    </div>\n  );\n});\n\nexport default InstanceItemAttributes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}