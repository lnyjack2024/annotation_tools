{"ast":null,"code":"import { substr } from 'fbjs/lib/UnicodeUtils';\nimport { isArabic } from './helper';\nimport TagInfoMap from './TagInfoMap';\nimport { isQATool } from '../data/tag_mode';\nimport { TAG_HEIGHT, TAG_WIDTH, CONNECTION_DIR, DEFAULT_COLOR, FONT_SIZE, FONT_COLOR } from '../data/constant';\nexport function renderTagMap(tagMap, spanMap) {\n  const {\n    labels,\n    insertions,\n    connections\n  } = tagMap;\n  Object.entries(labels).forEach(([id, label]) => {\n    const span = spanMap.get(label.head);\n    label.top += span.offsetTop;\n    label.left += label.isArabic ? span.offsetWidth : 0;\n  });\n  Object.entries(insertions).forEach(([id, insertion]) => {\n    const span = spanMap.get(insertion.head);\n    insertion.top += span.offsetTop + 7;\n  });\n  Object.entries(connections).forEach(([id, connection]) => {\n    const span = spanMap.get(connection.head);\n    connection.top += span.offsetTop;\n    connection.path = getPath(connection.from, connection.to, connection);\n  });\n}\nconst tagWidthCache = {};\nconst calcWidth = text => {\n  if (tagWidthCache[text]) {\n    return tagWidthCache[text];\n  }\n  const div = document.createElement('div');\n  div.style.cssText = 'position:absolute;visibility:hidden;width:auto;height:auto';\n  div.style.fontSize = '12px';\n  let width = 80;\n  try {\n    document.body.appendChild(div);\n    div.innerText = text;\n    width = div.offsetWidth;\n    document.body.removeChild(div);\n  } catch (e) {\n    //\n  }\n  const adjustedWidth = width + 12;\n  tagWidthCache[text] = adjustedWidth;\n  return adjustedWidth;\n};\nexport function genTagMap(results, configMap, spanMap, occupyMap, text) {\n  const {\n    labels,\n    insertions,\n    connections\n  } = results;\n  const tagMap = new TagInfoMap();\n  labels.forEach((label, index) => {\n    const arabic = isArabic(substr(text, label.start, label.end - label.start));\n    const span = spanMap.get(label.start);\n    const occupyList = occupyMap.get(span.offsetTop);\n    const occupy = {\n      top: -TAG_HEIGHT,\n      left: span.offsetLeft,\n      text: label.value\n    };\n    // position occupied\n    while (occupyList.filter(item => item.top === occupy.top && Math.abs(occupy.left - item.left) < calcWidth(item.text)).length > 0) {\n      occupy.top -= TAG_HEIGHT;\n    }\n    occupyList.push(occupy);\n    const configInfo = configMap.get(label.value);\n    tagMap.setItem(label.id, {\n      head: label.start,\n      top: occupy.top,\n      left: occupy.left,\n      text: label.value,\n      bgColor: isQATool(label.id) ? '#ffffff' : configInfo.color,\n      fontColor: isQATool(label.id) ? '#000000' : FONT_COLOR,\n      id: label.id,\n      isArabic: arabic,\n      isReview: label.isReview\n    });\n  });\n  insertions.forEach((insertion, index) => {\n    const span = spanMap.get(insertion.at);\n    const occupyList = occupyMap.get(span.offsetTop);\n    const occupy = {\n      top: FONT_SIZE,\n      left: span.offsetLeft,\n      text: insertion.value\n    };\n    // position occupied\n    while (occupyList.filter(item => item.top === occupy.top && Math.abs(occupy.left - item.left) < calcWidth(item.text)).length > 0) occupy.top += TAG_HEIGHT;\n    occupyList.push(occupy);\n    tagMap.setItem(insertion.id, {\n      head: insertion.at,\n      top: occupy.top,\n      left: occupy.left,\n      text: insertion.value,\n      id: insertion.id,\n      bgColor: configMap.get(insertion.value).color,\n      fontColor: isQATool(insertion.id) ? '#000000' : FONT_COLOR,\n      isReview: insertion.isReview\n    });\n  });\n  connections.forEach((connection, index) => {\n    const from = tagMap.getItem(connection.from);\n    const to = tagMap.getItem(connection.to);\n    const span = spanMap.get(Math.min(from.head, to.head));\n    const occupyList = occupyMap.get(span.offsetTop);\n    let top = Math.min(from.top, to.top) - 2 * TAG_HEIGHT; // occupyList.map((item) => item.top).sort((a, b) => (a - b)).shift() - TAG_HEIGHT;\n    if (top > -TAG_HEIGHT) top = -2 * TAG_HEIGHT;\n    const occupy = {\n      top,\n      /* left: (from.left + to.left) / 2, */left: Math.min(from.left, to.left),\n      right: Math.max(to.left, from.left),\n      text: connection.value\n    };\n    while (occupyList.filter(item => item.top === occupy.top && (item.right && item.right - item.left > TAG_HEIGHT * 2 ? !(occupy.left >= item.right || occupy.right <= item.left) : occupy.left <= item.left + calcWidth(item.text) && occupy.right >= item.left - calcWidth(item.text))).length > 0) occupy.top -= 2 * TAG_HEIGHT;\n    occupyList.push(occupy);\n    tagMap.setItem(connection.id, {\n      head: Math.min(from.head, to.head),\n      from,\n      to,\n      dir: from.left <= to.left ? CONNECTION_DIR.LEFT : CONNECTION_DIR.RIGHT,\n      top: occupy.top,\n      left: (from.left + to.left) / 2,\n      text: connection.value,\n      id: connection.id,\n      bgColor: DEFAULT_COLOR,\n      fontColor: isQATool(connection.id) ? '#000000' : FONT_COLOR,\n      isReview: connection.isReview\n    });\n  });\n  return tagMap;\n}\nconst getPath = (from, to, middle) => {\n  if (from.left < middle.left - 50) return `M ${from.left} ${from.top} Q ${from.left} ${middle.top + TAG_HEIGHT / 2}, ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} Q ${to.left} ${middle.top + TAG_HEIGHT / 2}, ${to.left} ${to.top}`;\n  if (from.left > middle.left + 50) return `M ${from.left} ${from.top} Q ${from.left} ${middle.top + TAG_HEIGHT / 2}, ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} Q ${to.left} ${middle.top + TAG_HEIGHT / 2}, ${to.left} ${to.top}`;\n  if (from.left < to.left) return `M ${from.left} ${from.top} Q ${middle.left - 50} ${from.top}, ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} Q ${middle.left + 50} ${to.top}, ${to.left} ${to.top}`;\n  return `M ${from.left} ${from.top} Q ${middle.left + 50} ${from.top}, ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} Q ${middle.left - 50} ${to.top}, ${to.left} ${to.top}`;\n};","map":{"version":3,"names":["substr","isArabic","TagInfoMap","isQATool","TAG_HEIGHT","TAG_WIDTH","CONNECTION_DIR","DEFAULT_COLOR","FONT_SIZE","FONT_COLOR","renderTagMap","tagMap","spanMap","labels","insertions","connections","Object","entries","forEach","id","label","span","get","head","top","offsetTop","left","offsetWidth","insertion","connection","path","getPath","from","to","tagWidthCache","calcWidth","text","div","document","createElement","style","cssText","fontSize","width","body","appendChild","innerText","removeChild","e","adjustedWidth","genTagMap","results","configMap","occupyMap","index","arabic","start","end","occupyList","occupy","offsetLeft","value","filter","item","Math","abs","length","push","configInfo","setItem","bgColor","color","fontColor","isReview","at","getItem","min","right","max","dir","LEFT","RIGHT","middle"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/editable-text/utils/tagMapUtil.js"],"sourcesContent":["import { substr } from 'fbjs/lib/UnicodeUtils';\nimport { isArabic } from './helper';\nimport TagInfoMap from './TagInfoMap';\nimport { isQATool } from '../data/tag_mode';\nimport { TAG_HEIGHT, TAG_WIDTH, CONNECTION_DIR, DEFAULT_COLOR, FONT_SIZE, FONT_COLOR } from '../data/constant';\n\nexport function renderTagMap(tagMap, spanMap) {\n  const { labels, insertions, connections } = tagMap;\n  Object.entries(labels).forEach(([id, label]) => {\n    const span = spanMap.get(label.head);\n    label.top += span.offsetTop;\n    label.left += label.isArabic ? span.offsetWidth : 0;\n  });\n  Object.entries(insertions).forEach(([id, insertion]) => {\n    const span = spanMap.get(insertion.head);\n    insertion.top += span.offsetTop + 7;\n  });\n  Object.entries(connections).forEach(([id, connection]) => {\n    const span = spanMap.get(connection.head);\n    connection.top += span.offsetTop;\n    connection.path = getPath(connection.from, connection.to, connection);\n  });\n}\n\nconst tagWidthCache = {};\n\nconst calcWidth = (text) => {\n  if (tagWidthCache[text]) {\n    return tagWidthCache[text];\n  }\n  const div = document.createElement('div');\n  div.style.cssText = 'position:absolute;visibility:hidden;width:auto;height:auto';\n  div.style.fontSize = '12px';\n  let width = 80;\n  try {\n    document.body.appendChild(div);\n    div.innerText = text;\n    width = div.offsetWidth;\n    document.body.removeChild(div);\n  } catch (e) {\n    //\n  }\n  const adjustedWidth = width + 12;\n  tagWidthCache[text] = adjustedWidth;\n  return adjustedWidth;\n};\n\nexport function genTagMap(results, configMap, spanMap, occupyMap, text) {\n  const { labels, insertions, connections } = results;\n  const tagMap = new TagInfoMap();\n\n  labels.forEach((label, index) => {\n    const arabic = isArabic(substr(text, label.start, label.end - label.start));\n    const span = spanMap.get(label.start);\n    const occupyList = occupyMap.get(span.offsetTop);\n    const occupy = { top: -TAG_HEIGHT, left: span.offsetLeft, text: label.value };\n    // position occupied\n    while (occupyList.filter((item) => (item.top === occupy.top && Math.abs(occupy.left - item.left) < calcWidth(item.text))).length > 0) {\n      occupy.top -= TAG_HEIGHT;\n    }\n    occupyList.push(occupy);\n    const configInfo = configMap.get(label.value);\n    tagMap.setItem(label.id, {\n      head: label.start,\n      top: occupy.top,\n      left: occupy.left,\n      text: label.value,\n      bgColor: isQATool(label.id) ? '#ffffff' : configInfo.color,\n      fontColor: isQATool(label.id) ? '#000000' : FONT_COLOR,\n      id: label.id,\n      isArabic: arabic,\n      isReview: label.isReview,\n    });\n  });\n  insertions.forEach((insertion, index) => {\n    const span = spanMap.get(insertion.at);\n    const occupyList = occupyMap.get(span.offsetTop);\n    const occupy = { top: FONT_SIZE, left: span.offsetLeft, text: insertion.value };\n    // position occupied\n    while (occupyList.filter((item) => (item.top === occupy.top && Math.abs(occupy.left - item.left) < calcWidth(item.text))).length > 0) occupy.top += TAG_HEIGHT;\n    occupyList.push(occupy);\n    tagMap.setItem(insertion.id, {\n      head: insertion.at,\n      top: occupy.top,\n      left: occupy.left,\n      text: insertion.value,\n      id: insertion.id,\n      bgColor: configMap.get(insertion.value).color,\n      fontColor: isQATool(insertion.id) ? '#000000' : FONT_COLOR,\n      isReview: insertion.isReview,\n    });\n  });\n  connections.forEach((connection, index) => {\n    const from = tagMap.getItem(connection.from);\n    const to = tagMap.getItem(connection.to);\n\n    const span = spanMap.get(Math.min(from.head, to.head));\n    const occupyList = occupyMap.get(span.offsetTop);\n    let top = Math.min(from.top, to.top) - 2 * TAG_HEIGHT; // occupyList.map((item) => item.top).sort((a, b) => (a - b)).shift() - TAG_HEIGHT;\n    if (top > -TAG_HEIGHT) top = -2 * TAG_HEIGHT;\n    const occupy = { top, /* left: (from.left + to.left) / 2, */ left: Math.min(from.left, to.left), right: Math.max(to.left, from.left), text: connection.value };\n    while (occupyList.filter((item) => (\n      item.top === occupy.top &&\n      (\n        (item.right && item.right - item.left > TAG_HEIGHT * 2) ?\n          !(occupy.left >= item.right || occupy.right <= item.left) :\n          occupy.left <= item.left + calcWidth(item.text) && occupy.right >= item.left - calcWidth(item.text)\n      )\n    )).length > 0) occupy.top -= 2 * TAG_HEIGHT;\n    occupyList.push(occupy);\n    tagMap.setItem(connection.id, {\n      head: Math.min(from.head, to.head),\n      from,\n      to,\n      dir: from.left <= to.left ? CONNECTION_DIR.LEFT : CONNECTION_DIR.RIGHT,\n      top: occupy.top,\n      left: (from.left + to.left) / 2,\n      text: connection.value,\n      id: connection.id,\n      bgColor: DEFAULT_COLOR,\n      fontColor: isQATool(connection.id) ? '#000000' : FONT_COLOR,\n      isReview: connection.isReview,\n    });\n  });\n  return tagMap;\n}\n\nconst getPath = (from, to, middle) => {\n  if (from.left < middle.left - 50) return `M ${from.left} ${from.top} Q ${from.left} ${middle.top + TAG_HEIGHT / 2}, ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} Q ${to.left} ${middle.top + TAG_HEIGHT / 2}, ${to.left} ${to.top}`;\n  if (from.left > middle.left + 50) return `M ${from.left} ${from.top} Q ${from.left} ${middle.top + TAG_HEIGHT / 2}, ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} Q ${to.left} ${middle.top + TAG_HEIGHT / 2}, ${to.left} ${to.top}`;\n  if (from.left < to.left) return `M ${from.left} ${from.top} Q ${middle.left - 50} ${from.top}, ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} Q ${middle.left + 50} ${to.top}, ${to.left} ${to.top}`;\n  return `M ${from.left} ${from.top} Q ${middle.left + 50} ${from.top}, ${middle.left + 50} ${middle.top + TAG_HEIGHT / 2} L ${middle.left - 50} ${middle.top + TAG_HEIGHT / 2} Q ${middle.left - 50} ${to.top}, ${to.left} ${to.top}`;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}