{"ast":null,"code":"import React from'react';import{connect}from'react-redux';import{backwardCurrentVideo,debug,forwardCurrentVideo,getAudioContainer,getWavesurfers,pauseCurrentVideo,playCurrentVideo,setVideoZoom}from'../../redux/action';import PlaySettingRadio from'./PlaySettingRadio/PlaySettingRadio';import PlaySettingButtons from'./PlaySettingButtons/PlaySettingButtons';import'./AudioComp.scss';import PlaySettingInput from'./PlaySettingInput/PlaySettingInput';import PlaySettingSegment,{MoveType}from'./PlaySettingSegment/PlaySettingSegment';import WavesurferComp from'../WavesurferComp/WavesurferComp';import DragWavesurferComp from'../WavesurferComp/DragWavesurferComp';import{isInput}from'../../redux/reducer/segmentController';import{SegmentMode}from'../../constants';import{isAnnotationReadonly}from'../../../../utils/tool-mode';import XScroll from'../XScroll';class AudioComp extends React.Component{constructor(props){super(props);this.xScroller=null;this.scrolls={};this.getCurrentWaveDom=()=>{var _wavesurfers$containe,_wavesurfers$containe2;const{currentVideo,wavesurfers}=this.props;let waveDom;const waveformContainer=wavesurfers===null||wavesurfers===void 0?void 0:(_wavesurfers$containe=wavesurfers.container)===null||_wavesurfers$containe===void 0?void 0:(_wavesurfers$containe2=_wavesurfers$containe.audioContainer)===null||_wavesurfers$containe2===void 0?void 0:_wavesurfers$containe2[currentVideo];if(waveformContainer){waveDom=waveformContainer.getElementsByTagName('wave')[0];}return waveDom;};this.handleScroll=start=>{const waveDom=this.getCurrentWaveDom();if(waveDom){const{precent=1}=this.scrolls[this.props.currentVideo]||{};waveDom.scroll(start*waveDom.scrollWidth,0);this.scrolls[this.props.currentVideo]={start,end:start+precent,precent};}};this.setXScroll=()=>{let timer=setTimeout(()=>{clearTimeout(timer);timer=null;const waveDom=this.getCurrentWaveDom();if(waveDom){var _this$xScroller;const{clientWidth,scrollWidth,scrollLeft}=waveDom;const viewPrecent=clientWidth/scrollWidth;const start=scrollLeft/scrollWidth;const end=start+viewPrecent;this.scrolls[this.props.currentVideo]={start,end,precent:viewPrecent};(_this$xScroller=this.xScroller)===null||_this$xScroller===void 0?void 0:_this$xScroller.setScroll({start,end});}},0);};this.playSettingRef=React.createRef();this.wavesurferRef=React.createRef();this.xScrollerRef=React.createRef();}componentDidMount(){const waveform=document.getElementsByClassName('audio-waveform');const timeline=document.getElementsByClassName('audio-waveform-timeline');const audioContainer=document.getElementsByClassName('audio-waveform-container');const minimap=document.getElementsByClassName('audio-waveform-minimap');this.props.getAudioContainer({waveform,timeline,audioContainer,minimap});window.addEventListener('keydown',e=>this.handleKeyDown(e));this.waveformComp.addEventListener('wheel',e=>this.handleMouseWheel(e));if(this.xScrollerRef.current){this.xScroller=new XScroll({container:this.xScrollerRef.current,height:20,barColor:'#5a5860',trackStyle:{color:'#000000',padding:'2px'},onScroll:this.handleScroll});}}componentDidUpdate(prevProps){if(this.props.currentVideo!==prevProps.currentVideo){this.initXScroll();}}initXScroll(){if(this.xScroller){var _this$xScroller2;const{precent=1}=this.scrolls[this.props.currentVideo]||{};this.scrolls[this.props.currentVideo]={start:0,end:precent,precent};(_this$xScroller2=this.xScroller)===null||_this$xScroller2===void 0?void 0:_this$xScroller2.setScroll({start:0,end:precent});}}handleMouseWheel(e){e.preventDefault();e.stopPropagation();const{currentVideo}=this.props;const{zoom}=this.props.videos[currentVideo];let delta=1;if(zoom>200){delta=30;}else if(zoom>150){delta=20;}else if(zoom>80){delta=8;}else if(zoom>50){delta=5;}else if(zoom>20){delta=2;}if(e.deltaY<0){this.props.setVideoZoom({zoom:zoom+delta});}else if(e.deltaY>0){this.props.setVideoZoom({zoom:zoom-delta});}}handleKeyDown(e){if(window.disableLongAudioHotKeys)return;if(isInput())return;const{isPlaying}=this.props;if(e.keyCode===32){// space\ne.preventDefault();if(isPlaying)this.props.pauseCurrentVideo();else this.props.playCurrentVideo();}else if(e.keyCode===37){// left\ne.preventDefault();if(e.shiftKey){var _this$playSettingRef$;(_this$playSettingRef$=this.playSettingRef.current)===null||_this$playSettingRef$===void 0?void 0:_this$playSettingRef$.moveStart(MoveType.MINUS);}else if(e.ctrlKey||e.metaKey){var _this$playSettingRef$2;(_this$playSettingRef$2=this.playSettingRef.current)===null||_this$playSettingRef$2===void 0?void 0:_this$playSettingRef$2.moveEnd(MoveType.MINUS);}else{this.props.backwardCurrentVideo();}}else if(e.keyCode===39){// right\ne.preventDefault();if(e.shiftKey){var _this$playSettingRef$3;(_this$playSettingRef$3=this.playSettingRef.current)===null||_this$playSettingRef$3===void 0?void 0:_this$playSettingRef$3.moveStart(MoveType.PLUS);}else if(e.ctrlKey||e.metaKey){var _this$playSettingRef$4;(_this$playSettingRef$4=this.playSettingRef.current)===null||_this$playSettingRef$4===void 0?void 0:_this$playSettingRef$4.moveEnd(MoveType.PLUS);}else{this.props.forwardCurrentVideo();}}}clearAll(){var _this$wavesurferRef$c;(_this$wavesurferRef$c=this.wavesurferRef.current)===null||_this$wavesurferRef$c===void 0?void 0:_this$wavesurferRef$c.clearAll();}renderSegments(){var _this$wavesurferRef$c2;(_this$wavesurferRef$c2=this.wavesurferRef.current)===null||_this$wavesurferRef$c2===void 0?void 0:_this$wavesurferRef$c2.renderSegments();}render(){const{currentVideo,setCurrentSegment,segmentMode}=this.props;const readonly=isAnnotationReadonly(this.props.toolMode);return/*#__PURE__*/ (// eslint-disable-next-line react/jsx-filename-extension\nReact.createElement(\"div\",{className:\"audio-container\"},segmentMode===SegmentMode.individual?/*#__PURE__*/React.createElement(DragWavesurferComp,{ref:this.wavesurferRef,setCurrentSegment:setCurrentSegment,setXScroll:this.setXScroll}):/*#__PURE__*/React.createElement(WavesurferComp,{ref:this.wavesurferRef,setCurrentSegment:setCurrentSegment,setXScroll:this.setXScroll}),/*#__PURE__*/React.createElement(\"div\",{ref:r=>{this.waveformComp=r;}},this.props.videos.map((value,index)=>/*#__PURE__*/React.createElement(\"div\",{key:value.url,className:\"audio-waveform-container \".concat(currentVideo===index?'audio-waveform-container-current':null),style:{visibility:this.props.currentVideo===index?'visible':'hidden'}},/*#__PURE__*/React.createElement(\"div\",{className:\"audio-waveform\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"audio-waveform-timeline\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"audio-waveform-minimap\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"waveform-scroll-x\",ref:this.xScrollerRef}),/*#__PURE__*/React.createElement(\"div\",{className:\"audio-button-group\"},/*#__PURE__*/React.createElement(PlaySettingInput,{className:\"play-setting-buttons\"}),/*#__PURE__*/React.createElement(PlaySettingRadio,{className:\"play-setting-radio\"}),/*#__PURE__*/React.createElement(PlaySettingButtons,{className:\"play-setting-input\"}),segmentMode===SegmentMode.individual&&!readonly&&/*#__PURE__*/React.createElement(PlaySettingSegment,{playSettingRef:this.playSettingRef}))));}}const mapStateToProps=state=>({videos:state.videos,results:state.results,ontology:state.ontology,currentZoom:state.currentZoom,currentVideo:state.currentVideo,currentPlayMode:state.currentPlayMode,isPlaying:state.isPlaying,segmentMode:state.segmentMode,wavesurfers:state.wavesurfers,toolMode:state.toolMode});const mapDispatchToProps={getAudioContainer,getWavesurfers,debug,playCurrentVideo,pauseCurrentVideo,forwardCurrentVideo,backwardCurrentVideo,setVideoZoom};export default connect(mapStateToProps,mapDispatchToProps,null,{forwardRef:true})(AudioComp);","map":{"version":3,"names":["React","connect","backwardCurrentVideo","debug","forwardCurrentVideo","getAudioContainer","getWavesurfers","pauseCurrentVideo","playCurrentVideo","setVideoZoom","PlaySettingRadio","PlaySettingButtons","PlaySettingInput","PlaySettingSegment","MoveType","WavesurferComp","DragWavesurferComp","isInput","SegmentMode","isAnnotationReadonly","XScroll","AudioComp","Component","constructor","props","xScroller","scrolls","getCurrentWaveDom","_wavesurfers$containe","_wavesurfers$containe2","currentVideo","wavesurfers","waveDom","waveformContainer","container","audioContainer","getElementsByTagName","handleScroll","start","precent","scroll","scrollWidth","end","setXScroll","timer","setTimeout","clearTimeout","_this$xScroller","clientWidth","scrollLeft","viewPrecent","setScroll","playSettingRef","createRef","wavesurferRef","xScrollerRef","componentDidMount","waveform","document","getElementsByClassName","timeline","minimap","window","addEventListener","e","handleKeyDown","waveformComp","handleMouseWheel","current","height","barColor","trackStyle","color","padding","onScroll","componentDidUpdate","prevProps","initXScroll","_this$xScroller2","preventDefault","stopPropagation","zoom","videos","delta","deltaY","disableLongAudioHotKeys","isPlaying","keyCode","shiftKey","_this$playSettingRef$","moveStart","MINUS","ctrlKey","metaKey","_this$playSettingRef$2","moveEnd","_this$playSettingRef$3","PLUS","_this$playSettingRef$4","clearAll","_this$wavesurferRef$c","renderSegments","_this$wavesurferRef$c2","render","setCurrentSegment","segmentMode","readonly","toolMode","createElement","className","individual","ref","r","map","value","index","key","url","concat","style","visibility","mapStateToProps","state","results","ontology","currentZoom","currentPlayMode","mapDispatchToProps","forwardRef"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/AudioComp/AudioComp.jsx"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  backwardCurrentVideo,\n  debug,\n  forwardCurrentVideo,\n  getAudioContainer,\n  getWavesurfers,\n  pauseCurrentVideo,\n  playCurrentVideo, setVideoZoom,\n} from '../../redux/action';\nimport PlaySettingRadio from './PlaySettingRadio/PlaySettingRadio';\nimport PlaySettingButtons from './PlaySettingButtons/PlaySettingButtons';\nimport './AudioComp.scss';\nimport PlaySettingInput from './PlaySettingInput/PlaySettingInput';\nimport PlaySettingSegment, { MoveType } from './PlaySettingSegment/PlaySettingSegment';\nimport WavesurferComp from '../WavesurferComp/WavesurferComp';\nimport DragWavesurferComp from '../WavesurferComp/DragWavesurferComp';\nimport { isInput } from '../../redux/reducer/segmentController';\nimport { SegmentMode } from '../../constants';\nimport { isAnnotationReadonly } from '../../../../utils/tool-mode';\nimport XScroll from '../XScroll';\n\nclass AudioComp extends React.Component {\n  xScroller = null;\n\n  scrolls = {};\n\n  constructor(props) {\n    super(props);\n    this.playSettingRef = React.createRef();\n    this.wavesurferRef = React.createRef();\n    this.xScrollerRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const waveform = document.getElementsByClassName('audio-waveform');\n    const timeline = document.getElementsByClassName('audio-waveform-timeline');\n    const audioContainer = document.getElementsByClassName('audio-waveform-container');\n    const minimap = document.getElementsByClassName('audio-waveform-minimap');\n    this.props.getAudioContainer({ waveform, timeline, audioContainer, minimap });\n    window.addEventListener('keydown', (e) => this.handleKeyDown(e));\n    this.waveformComp.addEventListener('wheel', (e) => this.handleMouseWheel(e));\n    if (this.xScrollerRef.current) {\n      this.xScroller = new XScroll({\n        container: this.xScrollerRef.current,\n        height: 20,\n        barColor: '#5a5860',\n        trackStyle: {\n          color: '#000000',\n          padding: '2px',\n        },\n        onScroll: this.handleScroll\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.currentVideo !== prevProps.currentVideo) {\n      this.initXScroll();\n    }\n  }\n\n  getCurrentWaveDom = () => {\n    const { currentVideo, wavesurfers } = this.props;\n    let waveDom;\n    const waveformContainer = wavesurfers?.container?.audioContainer?.[currentVideo];\n    if (waveformContainer) {\n      waveDom = waveformContainer.getElementsByTagName('wave')[0];\n    }\n    return waveDom;\n  };\n\n  handleScroll = (start) => {\n    const waveDom = this.getCurrentWaveDom();\n    if (waveDom) {\n      const { precent = 1 } = this.scrolls[this.props.currentVideo] || {};\n      waveDom.scroll(start * waveDom.scrollWidth, 0);\n      this.scrolls[this.props.currentVideo] = { start, end: start + precent, precent };\n    }\n  };\n\n  initXScroll() {\n    if (this.xScroller) {\n      const { precent = 1 } = this.scrolls[this.props.currentVideo] || {};\n      this.scrolls[this.props.currentVideo] = { start: 0, end: precent, precent };\n      this.xScroller?.setScroll({ start: 0, end: precent });\n    }\n  }\n\n  setXScroll = () => {\n    let timer = setTimeout(() => {\n      clearTimeout(timer);\n      timer = null;\n      const waveDom = this.getCurrentWaveDom();\n      if (waveDom) {\n        const { clientWidth, scrollWidth, scrollLeft } = waveDom;\n        const viewPrecent = clientWidth / scrollWidth;\n        const start = scrollLeft / scrollWidth;\n        const end = start + viewPrecent;\n        this.scrolls[this.props.currentVideo] = { start, end, precent: viewPrecent };\n        this.xScroller?.setScroll({ start, end });\n      }\n    }, 0);\n  };\n\n  handleMouseWheel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    const { currentVideo } = this.props;\n    const { zoom } = this.props.videos[currentVideo];\n    let delta = 1;\n    if (zoom > 200) {\n      delta = 30;\n    } else if (zoom > 150) {\n      delta = 20;\n    } else if (zoom > 80) {\n      delta = 8;\n    } else if (zoom > 50) {\n      delta = 5;\n    } else if (zoom > 20) {\n      delta = 2;\n    }\n    if (e.deltaY < 0) {\n      this.props.setVideoZoom({ zoom: zoom + delta });\n    } else if (e.deltaY > 0) {\n      this.props.setVideoZoom({ zoom: zoom - delta });\n    }\n  }\n\n  handleKeyDown(e) {\n    if (window.disableLongAudioHotKeys) return;\n    if (isInput()) return;\n    const { isPlaying } = this.props;\n    if (e.keyCode === 32) { // space\n      e.preventDefault();\n      if (isPlaying) this.props.pauseCurrentVideo();\n      else this.props.playCurrentVideo();\n    } else if (e.keyCode === 37) { // left\n      e.preventDefault();\n      if (e.shiftKey) {\n        this.playSettingRef.current?.moveStart(MoveType.MINUS);\n      } else if (e.ctrlKey || e.metaKey) {\n        this.playSettingRef.current?.moveEnd(MoveType.MINUS);\n      } else {\n        this.props.backwardCurrentVideo();\n      }\n    } else if (e.keyCode === 39) { // right\n      e.preventDefault();\n      if (e.shiftKey) {\n        this.playSettingRef.current?.moveStart(MoveType.PLUS);\n      } else if (e.ctrlKey || e.metaKey) {\n        this.playSettingRef.current?.moveEnd(MoveType.PLUS);\n      } else {\n        this.props.forwardCurrentVideo();\n      }\n    }\n  }\n\n  clearAll() {\n    this.wavesurferRef.current?.clearAll();\n  }\n\n  renderSegments() {\n    this.wavesurferRef.current?.renderSegments();\n  }\n\n  render() {\n    const { currentVideo, setCurrentSegment, segmentMode } = this.props;\n    const readonly = isAnnotationReadonly(this.props.toolMode);\n    return (\n      // eslint-disable-next-line react/jsx-filename-extension\n      <div className=\"audio-container\">\n        {segmentMode === SegmentMode.individual ? (\n          <DragWavesurferComp ref={this.wavesurferRef} setCurrentSegment={setCurrentSegment} setXScroll={this.setXScroll} />\n        ) : (\n          <WavesurferComp ref={this.wavesurferRef} setCurrentSegment={setCurrentSegment} setXScroll={this.setXScroll} />\n        )}\n        <div ref={(r) => { this.waveformComp = r; }}>\n          {\n          this.props.videos.map((value, index) => (\n            <div\n              key={value.url}\n              className={`audio-waveform-container ${currentVideo === index ? 'audio-waveform-container-current' : null}`}\n              style={{ visibility: (this.props.currentVideo === index ? 'visible' : 'hidden') }}\n            >\n              <div className=\"audio-waveform\" />\n              <div className=\"audio-waveform-timeline\" />\n              <div className=\"audio-waveform-minimap\" />\n            </div>\n          ))\n        }\n        </div>\n        <div className=\"waveform-scroll-x\" ref={this.xScrollerRef} />\n        <div className=\"audio-button-group\">\n          <PlaySettingInput className=\"play-setting-buttons\" />\n          <PlaySettingRadio className=\"play-setting-radio\" />\n          <PlaySettingButtons className=\"play-setting-input\" />\n          {segmentMode === SegmentMode.individual && !readonly && <PlaySettingSegment playSettingRef={this.playSettingRef} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  videos: state.videos,\n  results: state.results,\n  ontology: state.ontology,\n  currentZoom: state.currentZoom,\n  currentVideo: state.currentVideo,\n  currentPlayMode: state.currentPlayMode,\n  isPlaying: state.isPlaying,\n  segmentMode: state.segmentMode,\n  wavesurfers: state.wavesurfers,\n  toolMode: state.toolMode,\n});\nconst mapDispatchToProps = {\n  getAudioContainer,\n  getWavesurfers,\n  debug,\n  playCurrentVideo,\n  pauseCurrentVideo,\n  forwardCurrentVideo,\n  backwardCurrentVideo,\n  setVideoZoom,\n};\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(AudioComp);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}