{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/review/ReviewComment.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { getReviewRelatedInstanceInfo } from './ReviewModal';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './ReviewComment.scss';\nimport { ReviewResult } from '../../types';\nconst commentWidth = 348;\nconst ReviewComment = observer(() => {\n  var _hoveredReview$type;\n  const {\n    reviewLayerOffset,\n    hoveredReview,\n    hoveredAnchor\n  } = store.review;\n  if (!hoveredReview || !hoveredAnchor) {\n    return null;\n  }\n  const {\n    x,\n    y\n  } = hoveredAnchor.container.toGlobal({\n    x: hoveredReview.x,\n    y: hoveredReview.y\n  });\n  const left = x + reviewLayerOffset.x;\n  const top = y + reviewLayerOffset.y;\n  let cLeft = left + 32;\n  if (cLeft + commentWidth > document.body.clientWidth) {\n    cLeft = left - commentWidth - 32;\n  }\n  const cTop = top - 32;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-comment\",\n    style: {\n      width: commentWidth,\n      left: cLeft,\n      top: cTop\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-comment-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }, hoveredReview.result === ReviewResult.APPROVE && i18n.translate('REVIEW_APPROVE_TITLE'), hoveredReview.result === ReviewResult.REJECT && i18n.translate('REVIEW_REJECT_TITLE'), hoveredReview.result === ReviewResult.SUSPEND && i18n.translate('REVIEW_SUSPEND_TITLE')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-comment-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }, `[${getReviewRelatedInstanceInfo(hoveredReview).infoStr}] `, `[${i18n.translate('FRAME_ATTRIBUTES_FRAME', {\n    values: {\n      frame: store.frame.currentFrame + 1\n    }\n  })}]`, (_hoveredReview$type = hoveredReview.type) === null || _hoveredReview$type === void 0 ? void 0 : _hoveredReview$type.join(';'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-container\"\n    // eslint-disable-next-line react/no-danger\n    ,\n    dangerouslySetInnerHTML: {\n      __html: hoveredReview.comment || ''\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  })));\n});\nexport default ReviewComment;","map":{"version":3,"names":["React","observer","getReviewRelatedInstanceInfo","store","i18n","ReviewResult","commentWidth","ReviewComment","_hoveredReview$type","reviewLayerOffset","hoveredReview","hoveredAnchor","review","x","y","container","toGlobal","left","top","cLeft","document","body","clientWidth","cTop","createElement","className","style","width","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","result","APPROVE","translate","REJECT","SUSPEND","infoStr","values","frame","currentFrame","type","join","dangerouslySetInnerHTML","__html","comment"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/review/ReviewComment.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { getReviewRelatedInstanceInfo } from './ReviewModal';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './ReviewComment.scss';\nimport { ReviewResult } from '../../types';\n\nconst commentWidth = 348;\n\nconst ReviewComment = observer(() => {\n  const { reviewLayerOffset, hoveredReview, hoveredAnchor } = store.review;\n\n  if (!hoveredReview || !hoveredAnchor) {\n    return null;\n  }\n\n  const { x, y } = hoveredAnchor.container.toGlobal({ x: hoveredReview.x, y: hoveredReview.y });\n  const left = x + reviewLayerOffset.x;\n  const top = y + reviewLayerOffset.y;\n  let cLeft = left + 32;\n  if (cLeft + commentWidth > document.body.clientWidth) {\n    cLeft = left - commentWidth - 32;\n  }\n  const cTop = top - 32;\n  return (\n    <div className=\"review-comment\" style={{ width: commentWidth, left: cLeft, top: cTop }}>\n      <div className=\"review-comment-title\">\n        {hoveredReview.result === ReviewResult.APPROVE && i18n.translate('REVIEW_APPROVE_TITLE')}\n        {hoveredReview.result === ReviewResult.REJECT && i18n.translate('REVIEW_REJECT_TITLE')}\n        {hoveredReview.result === ReviewResult.SUSPEND && i18n.translate('REVIEW_SUSPEND_TITLE')}\n      </div>\n      <div className=\"review-comment-content\">\n        {`[${getReviewRelatedInstanceInfo(hoveredReview).infoStr}] `}\n        {`[${i18n.translate('FRAME_ATTRIBUTES_FRAME', { values: { frame: store.frame.currentFrame + 1 } })}]`}\n        {hoveredReview.type?.join(';')}\n        <div\n          className=\"img-container\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: hoveredReview.comment || '' }}\n        />\n      </div>\n    </div>\n  );\n});\n\nexport default ReviewComment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}