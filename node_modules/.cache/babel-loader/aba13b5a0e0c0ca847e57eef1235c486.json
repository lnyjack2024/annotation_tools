{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/tools/CreateToolSelector.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport Dropdown from '../../../common/dropdown/Dropdown';\nimport ToolIcon from './ToolIcon';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './CreateToolSelector.scss';\nconst ToolItem = observer(({\n  categoryItem,\n  index,\n  displayName\n}) => {\n  const {\n    name,\n    tools\n  } = categoryItem;\n  const selected = name === store.ontology.selectedCategoryItemName;\n  const tool = selected ? store.ontology.currentToolItem : tools[0];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-tool-tool-item__label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"create-tool-tool-item__shortcut\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }\n  }, index < 10 && /*#__PURE__*/React.createElement(React.Fragment, null, index === 9 ? 0 : index + 1)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"create-tool-tool-item__icon tool-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ToolIcon, {\n    tool: tool.type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"create-tool-tool-item__name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, displayName));\n});\nconst CreateToolSelector = observer(() => {\n  var _menu$selectedIndex;\n  const {\n    selectedCategory,\n    selectedCategoryItemName\n  } = store.ontology;\n  const {\n    children = []\n  } = selectedCategory || {};\n  if (store.readonly || children.length <= 0) {\n    return null;\n  }\n  const isSingle = children.length === 1 && children[0].count === 1;\n  const selectedIndex = children.findIndex(i => i.name === selectedCategoryItemName);\n  const menu = children.map((c, index) => ({\n    label: c.name,\n    active: c.name === selectedCategoryItemName,\n    render: () => /*#__PURE__*/React.createElement(ToolItem, {\n      categoryItem: c,\n      index: index,\n      displayName: isSingle ? selectedCategory.displayName : c.displayName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 7\n      }\n    })\n  }));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-tool\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, i18n.translate('COMMON_CREATE'), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => store.config.setAddMode(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown, {\n    className: cx('create-tool-selector', {\n      active: store.config.addMode\n    }),\n    arrow: true,\n    triggerArea: \"arrow\",\n    menu: menu,\n    onClick: (name, index) => store.ontology.activateCategoryItem(name, children[index].tools[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, (_menu$selectedIndex = menu[selectedIndex]) === null || _menu$selectedIndex === void 0 ? void 0 : _menu$selectedIndex.render())));\n});\nexport default CreateToolSelector;","map":{"version":3,"names":["React","observer","cx","Dropdown","ToolIcon","store","i18n","ToolItem","categoryItem","index","displayName","name","tools","selected","ontology","selectedCategoryItemName","tool","currentToolItem","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","type","CreateToolSelector","_menu$selectedIndex","selectedCategory","children","readonly","length","isSingle","count","selectedIndex","findIndex","i","menu","map","c","label","active","render","translate","onClick","config","setAddMode","addMode","arrow","triggerArea","activateCategoryItem"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/tools/CreateToolSelector.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport Dropdown from '../../../common/dropdown/Dropdown';\nimport ToolIcon from './ToolIcon';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { CategoryItem } from '../../types';\nimport './CreateToolSelector.scss';\n\nconst ToolItem = observer(({ categoryItem, index, displayName }: {\n  categoryItem: CategoryItem;\n  index: number;\n  displayName: string;\n}) => {\n  const { name, tools } = categoryItem;\n  const selected = name === store.ontology.selectedCategoryItemName;\n  const tool = selected ? store.ontology.currentToolItem! : tools[0];\n  return (\n    <div className=\"create-tool-tool-item__label\">\n      <span className=\"create-tool-tool-item__shortcut\">\n        {index < 10 && (\n          <>{index === 9 ? 0 : index + 1}</>\n        )}\n      </span>\n      <span className=\"create-tool-tool-item__icon tool-icon\">\n        <ToolIcon tool={tool.type} />\n      </span>\n      <span className=\"create-tool-tool-item__name\">\n        {displayName}\n      </span>\n    </div>\n  );\n});\n\nconst CreateToolSelector = observer(() => {\n  const { selectedCategory, selectedCategoryItemName } = store.ontology;\n  const { children = [] } = selectedCategory || {};\n  if (store.readonly || children.length <= 0) {\n    return null;\n  }\n\n  const isSingle = children.length === 1 && children[0].count === 1;\n  const selectedIndex = children.findIndex((i) => i.name === selectedCategoryItemName);\n  const menu = children.map((c, index) => ({\n    label: c.name,\n    active: c.name === selectedCategoryItemName,\n    render: () => (\n      <ToolItem\n        categoryItem={c}\n        index={index}\n        displayName={isSingle ? selectedCategory.displayName : c.displayName}\n      />\n    ),\n  }));\n  return (\n    <div className=\"create-tool\">\n      {i18n.translate('COMMON_CREATE')}\n      <span onClick={() => store.config.setAddMode(true)}>\n        <Dropdown\n          className={cx('create-tool-selector', {\n            active: store.config.addMode,\n          })}\n          arrow\n          triggerArea=\"arrow\"\n          menu={menu}\n          onClick={(name, index) => store.ontology.activateCategoryItem(name, children[index].tools[0])}\n        >\n          {menu[selectedIndex]?.render()}\n        </Dropdown>\n      </span>\n    </div>\n  );\n});\n\nexport default CreateToolSelector;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,YAAY;AACrC,OAAOC,EAAE,MAAM,YAAY;AAC3B,OAAOC,QAAQ,MAAM,mCAAmC;AACxD,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,KAAK,MAAM,uBAAuB;AACzC,OAAOC,IAAI,MAAM,eAAe;AAEhC,OAAO,2BAA2B;AAElC,MAAMC,QAAQ,GAAGN,QAAQ,CAAC,CAAC;EAAEO,YAAY;EAAEC,KAAK;EAAEC;AAIlD,CAAC,KAAK;EACJ,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAGJ,YAAY;EACpC,MAAMK,QAAQ,GAAGF,IAAI,KAAKN,KAAK,CAACS,QAAQ,CAACC,wBAAwB;EACjE,MAAMC,IAAI,GAAGH,QAAQ,GAAGR,KAAK,CAACS,QAAQ,CAACG,eAAe,GAAIL,KAAK,CAAC,CAAC,CAAC;EAClE,oBACEZ,KAAA,CAAAkB,aAAA;IAAKC,SAAS,EAAC,8BAA8B;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC3CzB,KAAA,CAAAkB,aAAA;IAAMC,SAAS,EAAC,iCAAiC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC9ChB,KAAK,GAAG,EAAE,iBACTT,KAAA,CAAAkB,aAAA,CAAAlB,KAAA,CAAA0B,QAAA,QAAGjB,KAAK,KAAK,CAAC,GAAG,CAAC,GAAGA,KAAK,GAAG,CAAI,CAE/B,CAAC,eACPT,KAAA,CAAAkB,aAAA;IAAMC,SAAS,EAAC,uCAAuC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrDzB,KAAA,CAAAkB,aAAA,CAACd,QAAQ;IAACY,IAAI,EAAEA,IAAI,CAACW,IAAK;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACxB,CAAC,eACPzB,KAAA,CAAAkB,aAAA;IAAMC,SAAS,EAAC,6BAA6B;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC1Cf,WACG,CACH,CAAC;AAEV,CAAC,CAAC;AAEF,MAAMkB,kBAAkB,GAAG3B,QAAQ,CAAC,MAAM;EAAA,IAAA4B,mBAAA;EACxC,MAAM;IAAEC,gBAAgB;IAAEf;EAAyB,CAAC,GAAGV,KAAK,CAACS,QAAQ;EACrE,MAAM;IAAEiB,QAAQ,GAAG;EAAG,CAAC,GAAGD,gBAAgB,IAAI,CAAC,CAAC;EAChD,IAAIzB,KAAK,CAAC2B,QAAQ,IAAID,QAAQ,CAACE,MAAM,IAAI,CAAC,EAAE;IAC1C,OAAO,IAAI;EACb;EAEA,MAAMC,QAAQ,GAAGH,QAAQ,CAACE,MAAM,KAAK,CAAC,IAAIF,QAAQ,CAAC,CAAC,CAAC,CAACI,KAAK,KAAK,CAAC;EACjE,MAAMC,aAAa,GAAGL,QAAQ,CAACM,SAAS,CAAEC,CAAC,IAAKA,CAAC,CAAC3B,IAAI,KAAKI,wBAAwB,CAAC;EACpF,MAAMwB,IAAI,GAAGR,QAAQ,CAACS,GAAG,CAAC,CAACC,CAAC,EAAEhC,KAAK,MAAM;IACvCiC,KAAK,EAAED,CAAC,CAAC9B,IAAI;IACbgC,MAAM,EAAEF,CAAC,CAAC9B,IAAI,KAAKI,wBAAwB;IAC3C6B,MAAM,EAAEA,CAAA,kBACN5C,KAAA,CAAAkB,aAAA,CAACX,QAAQ;MACPC,YAAY,EAAEiC,CAAE;MAChBhC,KAAK,EAAEA,KAAM;MACbC,WAAW,EAAEwB,QAAQ,GAAGJ,gBAAgB,CAACpB,WAAW,GAAG+B,CAAC,CAAC/B,WAAY;MAAAU,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CACtE;EAEL,CAAC,CAAC,CAAC;EACH,oBACEzB,KAAA,CAAAkB,aAAA;IAAKC,SAAS,EAAC,aAAa;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACzBnB,IAAI,CAACuC,SAAS,CAAC,eAAe,CAAC,eAChC7C,KAAA,CAAAkB,aAAA;IAAM4B,OAAO,EAAEA,CAAA,KAAMzC,KAAK,CAAC0C,MAAM,CAACC,UAAU,CAAC,IAAI,CAAE;IAAA5B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjDzB,KAAA,CAAAkB,aAAA,CAACf,QAAQ;IACPgB,SAAS,EAAEjB,EAAE,CAAC,sBAAsB,EAAE;MACpCyC,MAAM,EAAEtC,KAAK,CAAC0C,MAAM,CAACE;IACvB,CAAC,CAAE;IACHC,KAAK;IACLC,WAAW,EAAC,OAAO;IACnBZ,IAAI,EAAEA,IAAK;IACXO,OAAO,EAAEA,CAACnC,IAAI,EAAEF,KAAK,KAAKJ,KAAK,CAACS,QAAQ,CAACsC,oBAAoB,CAACzC,IAAI,EAAEoB,QAAQ,CAACtB,KAAK,CAAC,CAACG,KAAK,CAAC,CAAC,CAAC,CAAE;IAAAQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,IAAAI,mBAAA,GAE7FU,IAAI,CAACH,aAAa,CAAC,cAAAP,mBAAA,uBAAnBA,mBAAA,CAAqBe,MAAM,CAAC,CACrB,CACN,CACH,CAAC;AAEV,CAAC,CAAC;AAEF,eAAehB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module"}