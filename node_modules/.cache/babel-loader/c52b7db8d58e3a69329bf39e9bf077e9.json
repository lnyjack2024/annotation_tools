{"ast":null,"code":"import rootStore from '../../store/RootStore';\nimport Shape from './Shape';\nimport { ShapeAction } from '../../utils/event';\nexport default class Timing extends Shape {\n  constructor(props) {\n    super(props);\n    this.container.addChild(this.instance);\n    this.normalize();\n  }\n\n  /**\n   * when shape move & resize\n   * @protected\n   */\n  _changed() {\n    this._emit(ShapeAction.CHANGED, this.getData());\n  }\n\n  /**\n   * draw\n   */\n  drawShape() {\n    this.instance.clear();\n    this.clearText();\n    if (this.control) {\n      this.control.remove();\n    }\n    const start = this.startX;\n    const {\n      placement: {\n        atlasWidth\n      }\n    } = rootStore.analyse;\n    const startVisible = start > 0 && start < atlasWidth;\n    if (startVisible) {\n      this._initControl();\n      this.drawText();\n    }\n  }\n\n  /**\n   * get shape data\n   */\n  getData() {\n    return {\n      start: this.start,\n      text: this.text\n    };\n  }\n}","map":{"version":3,"names":["rootStore","Shape","ShapeAction","Timing","constructor","props","container","addChild","instance","normalize","_changed","_emit","CHANGED","getData","drawShape","clear","clearText","control","remove","start","startX","placement","atlasWidth","analyse","startVisible","_initControl","drawText","text"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/common/shapes/Timing.ts"],"sourcesContent":["import { Application, Container } from 'pixi.js';\nimport rootStore from '../../store/RootStore';\nimport Shape from './Shape';\nimport { AnnotationType, ReviewResult } from '../../types';\nimport { ShapeAction } from '../../utils/event';\n\nexport interface TimingData {\n  start: number;\n  text?: string;\n}\n\nexport interface TimingOptions {\n  id: string;\n  app: Application;\n  start: number;\n  container: Container;\n  shapeType: AnnotationType;\n  category: string;\n  categoryIndex: number;\n  color?: number;\n  selectedColor?: number;\n  text?: string;\n  reviewResult?: ReviewResult;\n  selectShape: (id: string) => void;\n  positionListener: (start: number) => void;\n  moveShape: (shapes: Shape<unknown>[]) => void;\n  getPrevShape: (category: string, start: number) => { prev?: Shape<unknown>; next?: Shape<unknown>; };\n  getSameAndAdjoinTimeShapes: (time: number) => {\n    sameTimeShapes: Shape<unknown>[];\n    adjoinTimeShapes: {\n      prev: Shape<unknown> | undefined;\n      next: Shape<unknown> | undefined;\n    }[];\n  };\n}\n\nexport default class Timing extends Shape<TimingData> {\n  constructor(props: TimingOptions) {\n    super(props);\n    this.container.addChild(this.instance);\n    this.normalize();\n  }\n\n  /**\n   * when shape move & resize\n   * @protected\n   */\n  protected _changed() {\n    this._emit(ShapeAction.CHANGED, this.getData());\n  }\n\n  /**\n   * draw\n   */\n  drawShape() {\n    this.instance.clear();\n    this.clearText();\n    if (this.control) {\n      this.control.remove();\n    }\n    const start = this.startX;\n    const {\n      placement: { atlasWidth },\n    } = rootStore.analyse;\n    const startVisible = start > 0 && start < atlasWidth;\n    if (startVisible) {\n      this._initControl();\n      this.drawText();\n    }\n  }\n\n  /**\n   * get shape data\n   */\n  getData() {\n    return {\n      start: this.start,\n      text: this.text,\n    };\n  }\n}\n"],"mappings":"AACA,OAAOA,SAAS,MAAM,uBAAuB;AAC7C,OAAOC,KAAK,MAAM,SAAS;AAE3B,SAASC,WAAW,QAAQ,mBAAmB;AAgC/C,eAAe,MAAMC,MAAM,SAASF,KAAK,CAAa;EACpDG,WAAWA,CAACC,KAAoB,EAAE;IAChC,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,SAAS,CAACC,QAAQ,CAAC,IAAI,CAACC,QAAQ,CAAC;IACtC,IAAI,CAACC,SAAS,CAAC,CAAC;EAClB;;EAEA;AACF;AACA;AACA;EACYC,QAAQA,CAAA,EAAG;IACnB,IAAI,CAACC,KAAK,CAACT,WAAW,CAACU,OAAO,EAAE,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC;EACjD;;EAEA;AACF;AACA;EACEC,SAASA,CAAA,EAAG;IACV,IAAI,CAACN,QAAQ,CAACO,KAAK,CAAC,CAAC;IACrB,IAAI,CAACC,SAAS,CAAC,CAAC;IAChB,IAAI,IAAI,CAACC,OAAO,EAAE;MAChB,IAAI,CAACA,OAAO,CAACC,MAAM,CAAC,CAAC;IACvB;IACA,MAAMC,KAAK,GAAG,IAAI,CAACC,MAAM;IACzB,MAAM;MACJC,SAAS,EAAE;QAAEC;MAAW;IAC1B,CAAC,GAAGtB,SAAS,CAACuB,OAAO;IACrB,MAAMC,YAAY,GAAGL,KAAK,GAAG,CAAC,IAAIA,KAAK,GAAGG,UAAU;IACpD,IAAIE,YAAY,EAAE;MAChB,IAAI,CAACC,YAAY,CAAC,CAAC;MACnB,IAAI,CAACC,QAAQ,CAAC,CAAC;IACjB;EACF;;EAEA;AACF;AACA;EACEb,OAAOA,CAAA,EAAG;IACR,OAAO;MACLM,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBQ,IAAI,EAAE,IAAI,CAACA;IACb,CAAC;EACH;AACF","ignoreList":[]},"metadata":{},"sourceType":"module"}