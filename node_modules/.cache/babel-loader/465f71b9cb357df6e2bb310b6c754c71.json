{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/ItemLabel.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewResult } from '../../types';\nexport const frameLabelHeight = 20;\nconst ItemLabel = observer(({\n  itemKey,\n  separator,\n  prefix\n}) => {\n  const {\n    selectedInstances,\n    selectedInstanceItems,\n    getInstanceById\n  } = store.instance;\n  const {\n    currentCamera,\n    isSingleCamera,\n    cameraNames\n  } = store.frame;\n  const [instanceId, instanceItemId, camera] = itemKey.split(separator);\n  const cameraIndex = cameraNames.indexOf(camera);\n  const instance = getInstanceById(instanceId);\n  const instanceItem = ((instance === null || instance === void 0 ? void 0 : instance.items) || [])[instanceItemId];\n  const instanceSelected = selectedInstances.indexOf(instance) >= 0;\n  const instanceItemSelected = selectedInstanceItems.indexOf(instanceItem) >= 0 && camera === currentCamera;\n  let reviewResult;\n  if (instanceItem) {\n    reviewResult = store.review.getReviewResultForInstanceItem(instanceItem, camera);\n  } else if (instance) {\n    const isSingle = instance.isSingle && isSingleCamera;\n    if (isSingle) {\n      reviewResult = store.review.getReviewResultForInstanceItem(Object.values(instance.items)[0], camera);\n    } else if (!instanceSelected) {\n      reviewResult = store.review.getReviewResultForInstance(instance);\n    }\n  }\n  if (reviewResult && reviewResult !== ReviewResult.REJECT && store.isRework) {\n    reviewResult = undefined;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: itemKey,\n    className: cx(`frame-item-label frame-item-instance-${instanceId} ${instanceItem ? `frame-item-instance-item-${instanceItem.id}` : ''}`, {\n      dark: !instance || instanceSelected,\n      selected: instanceItemSelected || instanceSelected && !instanceItem && selectedInstanceItems.filter(item => item.instance === instance).length <= 0\n    }),\n    style: {\n      height: frameLabelHeight\n    },\n    onClick: () => {\n      if (instanceItem) {\n        store.instance.selectInstanceItem(instanceItem);\n      } else if (instance) {\n        store.instance.selectInstance(instance);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, prefix, !instance && i18n.translate('PROGRESS_GLOBAL_LABEL'), instance && !instanceItem && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-item-label-dot\",\n    style: {\n      backgroundColor: instance.categoryRef.displayColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), instance.label), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('frame-item-label-review', {\n      approved: reviewResult === ReviewResult.APPROVE,\n      rejected: reviewResult === ReviewResult.REJECT,\n      pending: reviewResult === ReviewResult.SUSPEND\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  })), instance && instanceItem && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-item-label-sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, `${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraIndex + 1}`}`, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('frame-item-label-review', {\n      approved: reviewResult === ReviewResult.APPROVE,\n      rejected: reviewResult === ReviewResult.REJECT,\n      pending: reviewResult === ReviewResult.SUSPEND\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }))));\n});\nexport default ItemLabel;","map":{"version":3,"names":["React","observer","cx","store","i18n","ReviewResult","frameLabelHeight","ItemLabel","itemKey","separator","prefix","selectedInstances","selectedInstanceItems","getInstanceById","instance","currentCamera","isSingleCamera","cameraNames","frame","instanceId","instanceItemId","camera","split","cameraIndex","indexOf","instanceItem","items","instanceSelected","instanceItemSelected","reviewResult","review","getReviewResultForInstanceItem","isSingle","Object","values","getReviewResultForInstance","REJECT","isRework","undefined","createElement","key","className","id","dark","selected","filter","item","length","style","height","onClick","selectInstanceItem","selectInstance","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","translate","Fragment","backgroundColor","categoryRef","displayColor","label","approved","APPROVE","rejected","pending","SUSPEND","itemLabel"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/ItemLabel.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewResult } from '../../types';\n\nexport const frameLabelHeight = 20;\n\ninterface ItemLabelProps {\n  itemKey: string;\n  separator: string;\n  prefix?: React.ReactNode;\n}\n\nconst ItemLabel = observer(({ itemKey, separator, prefix }: ItemLabelProps) => {\n  const { selectedInstances, selectedInstanceItems, getInstanceById } = store.instance;\n  const { currentCamera, isSingleCamera, cameraNames } = store.frame;\n\n  const [instanceId, instanceItemId, camera] = itemKey.split(separator);\n  const cameraIndex = cameraNames.indexOf(camera);\n  const instance = getInstanceById(instanceId);\n  const instanceItem = (instance?.items || [])[instanceItemId];\n  const instanceSelected = selectedInstances.indexOf(instance) >= 0;\n  const instanceItemSelected = selectedInstanceItems.indexOf(instanceItem) >= 0 && camera === currentCamera;\n\n  let reviewResult;\n  if (instanceItem) {\n    reviewResult = store.review.getReviewResultForInstanceItem(instanceItem, camera);\n  } else if (instance) {\n    const isSingle = instance.isSingle && isSingleCamera;\n    if (isSingle) {\n      reviewResult = store.review.getReviewResultForInstanceItem(Object.values(instance.items)[0], camera);\n    } else if (!instanceSelected) {\n      reviewResult = store.review.getReviewResultForInstance(instance);\n    }\n  }\n\n  if (reviewResult && reviewResult !== ReviewResult.REJECT && store.isRework) {\n    reviewResult = undefined;\n  }\n\n  return (\n    <div\n      key={itemKey}\n      className={cx(`frame-item-label frame-item-instance-${instanceId} ${instanceItem ? `frame-item-instance-item-${instanceItem.id}` : ''}`, {\n        dark: !instance || instanceSelected,\n        selected: instanceItemSelected || (instanceSelected && !instanceItem && selectedInstanceItems.filter((item) => item.instance === instance).length <= 0),\n      })}\n      style={{ height: frameLabelHeight }}\n      onClick={() => {\n        if (instanceItem) {\n          store.instance.selectInstanceItem(instanceItem);\n        } else if (instance) {\n          store.instance.selectInstance(instance);\n        }\n      }}\n    >\n      {prefix}\n      {!instance && i18n.translate('PROGRESS_GLOBAL_LABEL')}\n      {instance && !instanceItem && (\n        <>\n          <div>\n            <div\n              className=\"frame-item-label-dot\"\n              style={{ backgroundColor: instance.categoryRef.displayColor }}\n            />\n            {instance.label}\n          </div>\n          <div\n            className={cx('frame-item-label-review', {\n              approved: reviewResult === ReviewResult.APPROVE,\n              rejected: reviewResult === ReviewResult.REJECT,\n              pending: reviewResult === ReviewResult.SUSPEND,\n            })}\n          />\n        </>\n      )}\n      {instance && instanceItem && (\n        <>\n          <div />\n          <div className=\"frame-item-label-sub\">\n            {`${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraIndex + 1}`}`}\n            <div\n              className={cx('frame-item-label-review', {\n                approved: reviewResult === ReviewResult.APPROVE,\n                rejected: reviewResult === ReviewResult.REJECT,\n                pending: reviewResult === ReviewResult.SUSPEND,\n              })}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n});\n\nexport default ItemLabel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}