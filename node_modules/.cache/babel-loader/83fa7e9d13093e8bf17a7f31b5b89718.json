{"ast":null,"code":"import React,{useState,useEffect}from'react';import{reaction}from'mobx';import{observer}from'mobx-react';import cx from'classnames';import{Tooltip}from'antd';import{MinusCircleFilled,PlusCircleFilled,Aim}from'../../../common/icons';import store from'../../store/RootStore';import i18n from'../../locales';const ViewScale=observer(_ref=>{let{onViewReset,setViewScale}=_ref;const[scale,setScale]=useState('');useEffect(()=>{// set initial scale\nsetScale(\"\".concat(store.config.viewScale.toFixed(2),\"x\"));// watch changes\nconst reactionDisposer=reaction(()=>store.config.viewScale,viewScale=>{setScale(\"\".concat(viewScale.toFixed(2),\"x\"));});return()=>{reactionDisposer();};},[]);const handleScaleChange=()=>{const scaleValue=parseFloat(scale);if(!Number.isNaN(scaleValue)){setViewScale(scaleValue);}};const{viewScale}=store.config;const disabled=!store.initialized;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"view-scale\"},/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",title:i18n.translate('TOOLBAR_TIP_ZOOM_OUT')},/*#__PURE__*/React.createElement(\"div\",{className:cx('operation-icon',{'operation-icon--disabled':disabled}),onClick:()=>setViewScale(viewScale/2)},/*#__PURE__*/React.createElement(MinusCircleFilled,null))),/*#__PURE__*/React.createElement(\"input\",{disabled:disabled,value:scale,onChange:e=>setScale(e.target.value),onBlur:handleScaleChange,onKeyUp:e=>{if(e.key==='Enter'){handleScaleChange();}}}),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",title:i18n.translate('TOOLBAR_TIP_ZOOM_IN')},/*#__PURE__*/React.createElement(\"div\",{className:cx('operation-icon',{'operation-icon--disabled':disabled}),onClick:()=>setViewScale(viewScale*2)},/*#__PURE__*/React.createElement(PlusCircleFilled,null)))),/*#__PURE__*/React.createElement(Tooltip,{placement:\"bottom\",title:i18n.translate('TOOLBAR_TIP_CENTER')},/*#__PURE__*/React.createElement(\"div\",{className:cx('operation-icon',{'operation-icon--disabled':disabled}),onClick:onViewReset},/*#__PURE__*/React.createElement(Aim,null))));});export default ViewScale;","map":{"version":3,"names":["React","useState","useEffect","reaction","observer","cx","Tooltip","MinusCircleFilled","PlusCircleFilled","Aim","store","i18n","ViewScale","_ref","onViewReset","setViewScale","scale","setScale","concat","config","viewScale","toFixed","reactionDisposer","handleScaleChange","scaleValue","parseFloat","Number","isNaN","disabled","initialized","createElement","Fragment","className","placement","title","translate","onClick","value","onChange","e","target","onBlur","onKeyUp","key"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/toolbar/ViewScale.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Tooltip } from 'antd';\nimport { MinusCircleFilled, PlusCircleFilled, Aim } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\n\ninterface ViewScaleProps {\n  onViewReset: () => void;\n  setViewScale: (scale: number) => void;\n}\n\nconst ViewScale = observer(({ onViewReset, setViewScale }: ViewScaleProps) => {\n  const [scale, setScale] = useState('');\n\n  useEffect(() => {\n    // set initial scale\n    setScale(`${store.config.viewScale.toFixed(2)}x`);\n    // watch changes\n    const reactionDisposer = reaction(\n      () => store.config.viewScale,\n      (viewScale) => {\n        setScale(`${viewScale.toFixed(2)}x`);\n      },\n    );\n    return () => {\n      reactionDisposer();\n    };\n  }, []);\n\n  const handleScaleChange = () => {\n    const scaleValue = parseFloat(scale);\n    if (!Number.isNaN(scaleValue)) {\n      setViewScale(scaleValue);\n    }\n  };\n\n  const { viewScale } = store.config;\n  const disabled = !store.initialized;\n  return (\n    <>\n      <div className=\"view-scale\">\n        <Tooltip placement=\"bottom\" title={i18n.translate('TOOLBAR_TIP_ZOOM_OUT')}>\n          <div\n            className={cx('operation-icon', {\n              'operation-icon--disabled': disabled,\n            })}\n            onClick={() => setViewScale(viewScale / 2)}\n          >\n            <MinusCircleFilled />\n          </div>\n        </Tooltip>\n        <input\n          disabled={disabled}\n          value={scale}\n          onChange={(e) => setScale(e.target.value)}\n          onBlur={handleScaleChange}\n          onKeyUp={(e) => {\n            if (e.key === 'Enter') {\n              handleScaleChange();\n            }\n          }}\n        />\n        <Tooltip placement=\"bottom\" title={i18n.translate('TOOLBAR_TIP_ZOOM_IN')}>\n          <div\n            className={cx('operation-icon', {\n              'operation-icon--disabled': disabled,\n            })}\n            onClick={() => setViewScale(viewScale * 2)}\n          >\n            <PlusCircleFilled />\n          </div>\n        </Tooltip>\n      </div>\n      <Tooltip placement=\"bottom\" title={i18n.translate('TOOLBAR_TIP_CENTER')}>\n        <div\n          className={cx('operation-icon', {\n            'operation-icon--disabled': disabled,\n          })}\n          onClick={onViewReset}\n        >\n          <Aim />\n        </div>\n      </Tooltip>\n    </>\n  );\n});\n\nexport default ViewScale;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,MAAM,CAC/B,OAASC,QAAQ,KAAQ,YAAY,CACrC,MAAO,CAAAC,EAAE,KAAM,YAAY,CAC3B,OAASC,OAAO,KAAQ,MAAM,CAC9B,OAASC,iBAAiB,CAAEC,gBAAgB,CAAEC,GAAG,KAAQ,uBAAuB,CAChF,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CACzC,MAAO,CAAAC,IAAI,KAAM,eAAe,CAOhC,KAAM,CAAAC,SAAS,CAAGR,QAAQ,CAACS,IAAA,EAAmD,IAAlD,CAAEC,WAAW,CAAEC,YAA6B,CAAC,CAAAF,IAAA,CACvE,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd;AACAe,QAAQ,IAAAC,MAAA,CAAIR,KAAK,CAACS,MAAM,CAACC,SAAS,CAACC,OAAO,CAAC,CAAC,CAAC,KAAG,CAAC,CACjD;AACA,KAAM,CAAAC,gBAAgB,CAAGnB,QAAQ,CAC/B,IAAMO,KAAK,CAACS,MAAM,CAACC,SAAS,CAC3BA,SAAS,EAAK,CACbH,QAAQ,IAAAC,MAAA,CAAIE,SAAS,CAACC,OAAO,CAAC,CAAC,CAAC,KAAG,CAAC,CACtC,CACF,CAAC,CACD,MAAO,IAAM,CACXC,gBAAgB,CAAC,CAAC,CACpB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAAC,UAAU,CAAGC,UAAU,CAACT,KAAK,CAAC,CACpC,GAAI,CAACU,MAAM,CAACC,KAAK,CAACH,UAAU,CAAC,CAAE,CAC7BT,YAAY,CAACS,UAAU,CAAC,CAC1B,CACF,CAAC,CAED,KAAM,CAAEJ,SAAU,CAAC,CAAGV,KAAK,CAACS,MAAM,CAClC,KAAM,CAAAS,QAAQ,CAAG,CAAClB,KAAK,CAACmB,WAAW,CACnC,mBACE7B,KAAA,CAAA8B,aAAA,CAAA9B,KAAA,CAAA+B,QAAA,mBACE/B,KAAA,CAAA8B,aAAA,QAAKE,SAAS,CAAC,YAAY,eACzBhC,KAAA,CAAA8B,aAAA,CAACxB,OAAO,EAAC2B,SAAS,CAAC,QAAQ,CAACC,KAAK,CAAEvB,IAAI,CAACwB,SAAS,CAAC,sBAAsB,CAAE,eACxEnC,KAAA,CAAA8B,aAAA,QACEE,SAAS,CAAE3B,EAAE,CAAC,gBAAgB,CAAE,CAC9B,0BAA0B,CAAEuB,QAC9B,CAAC,CAAE,CACHQ,OAAO,CAAEA,CAAA,GAAMrB,YAAY,CAACK,SAAS,CAAG,CAAC,CAAE,eAE3CpB,KAAA,CAAA8B,aAAA,CAACvB,iBAAiB,KAAE,CACjB,CACE,CAAC,cACVP,KAAA,CAAA8B,aAAA,UACEF,QAAQ,CAAEA,QAAS,CACnBS,KAAK,CAAErB,KAAM,CACbsB,QAAQ,CAAGC,CAAC,EAAKtB,QAAQ,CAACsB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1CI,MAAM,CAAElB,iBAAkB,CAC1BmB,OAAO,CAAGH,CAAC,EAAK,CACd,GAAIA,CAAC,CAACI,GAAG,GAAK,OAAO,CAAE,CACrBpB,iBAAiB,CAAC,CAAC,CACrB,CACF,CAAE,CACH,CAAC,cACFvB,KAAA,CAAA8B,aAAA,CAACxB,OAAO,EAAC2B,SAAS,CAAC,QAAQ,CAACC,KAAK,CAAEvB,IAAI,CAACwB,SAAS,CAAC,qBAAqB,CAAE,eACvEnC,KAAA,CAAA8B,aAAA,QACEE,SAAS,CAAE3B,EAAE,CAAC,gBAAgB,CAAE,CAC9B,0BAA0B,CAAEuB,QAC9B,CAAC,CAAE,CACHQ,OAAO,CAAEA,CAAA,GAAMrB,YAAY,CAACK,SAAS,CAAG,CAAC,CAAE,eAE3CpB,KAAA,CAAA8B,aAAA,CAACtB,gBAAgB,KAAE,CAChB,CACE,CACN,CAAC,cACNR,KAAA,CAAA8B,aAAA,CAACxB,OAAO,EAAC2B,SAAS,CAAC,QAAQ,CAACC,KAAK,CAAEvB,IAAI,CAACwB,SAAS,CAAC,oBAAoB,CAAE,eACtEnC,KAAA,CAAA8B,aAAA,QACEE,SAAS,CAAE3B,EAAE,CAAC,gBAAgB,CAAE,CAC9B,0BAA0B,CAAEuB,QAC9B,CAAC,CAAE,CACHQ,OAAO,CAAEtB,WAAY,eAErBd,KAAA,CAAA8B,aAAA,CAACrB,GAAG,KAAE,CACH,CACE,CACT,CAAC,CAEP,CAAC,CAAC,CAEF,cAAe,CAAAG,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}