{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/FrameAttributes.tsx\";\nimport React, { useMemo } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Pencil } from '../../../common/icons';\nimport AttributeValueItem from './AttributeValueItem';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { parseFields } from '../../utils';\nimport './FrameAttributes.scss';\nconst FrameAttributes = observer(({\n  camera,\n  cameraIndex\n}) => {\n  var _attributes$camera;\n  const fieldsMap = useMemo(() => parseFields(store.frame.frameConfig), [store.frame.frameConfig]);\n  const {\n    currentCamera,\n    currentFrame,\n    isSingleCamera,\n    attributes,\n    frameConfig,\n    isFrameValid\n  } = store.frame;\n  const valid = isFrameValid(camera, currentFrame);\n  const {\n    attributes: frameAttributes = {}\n  } = ((_attributes$camera = attributes[camera]) === null || _attributes$camera === void 0 ? void 0 : _attributes$camera[currentFrame]) || {};\n  const attrKeys = Object.keys(frameAttributes);\n  const fieldKeys = Object.keys(fieldsMap);\n  const legacyKeys = attrKeys.filter(key => !fieldKeys.includes(key));\n  console.log('legacyKeys', legacyKeys);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('frame-attributes', {\n      selected: !isSingleCamera && currentCamera === camera\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 5\n    }\n  }, !isSingleCamera && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }, `C${cameraIndex + 1}-${camera}`, !store.readonly && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse-panel-icon\",\n    onClick: () => {\n      if (camera !== currentCamera) {\n        store.frame.setCamera(camera);\n      }\n      store.config.setFrameAttributesModalVisible(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Pencil, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"value-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"value-item-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, i18n.translate('FRAME_ATTRIBUTES_IS_VALID_LABEL')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"value-item-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, i18n.translate(valid ? 'FRAME_ATTRIBUTES_VALID' : 'FRAME_ATTRIBUTES_INVALID'))), frameConfig && [...fieldKeys, ...legacyKeys].map(key => attrKeys.includes(key) && /*#__PURE__*/React.createElement(AttributeValueItem, {\n    key: key,\n    fieldName: key,\n    fieldsMap: fieldsMap,\n    values: frameAttributes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  })));\n});\nexport default FrameAttributes;","map":{"version":3,"names":["React","useMemo","observer","cx","Pencil","AttributeValueItem","store","i18n","parseFields","FrameAttributes","camera","cameraIndex","_attributes$camera","fieldsMap","frame","frameConfig","currentCamera","currentFrame","isSingleCamera","attributes","isFrameValid","valid","frameAttributes","attrKeys","Object","keys","fieldKeys","legacyKeys","filter","key","includes","console","log","createElement","className","selected","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","readonly","onClick","setCamera","config","setFrameAttributesModalVisible","translate","map","fieldName","values"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/FrameAttributes.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Pencil } from '../../../common/icons';\nimport AttributeValueItem from './AttributeValueItem';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { parseFields } from '../../utils';\nimport './FrameAttributes.scss';\n\nconst FrameAttributes = observer(({ camera, cameraIndex }: { camera: string; cameraIndex: number }) => {\n  const fieldsMap = useMemo(() => parseFields(store.frame.frameConfig), [store.frame.frameConfig]);\n\n  const { currentCamera, currentFrame, isSingleCamera, attributes, frameConfig, isFrameValid } = store.frame;\n  const valid = isFrameValid(camera, currentFrame);\n  const { attributes: frameAttributes = {} } = attributes[camera]?.[currentFrame] || {};\n\n  const attrKeys = Object.keys(frameAttributes);\n  const fieldKeys = Object.keys(fieldsMap);\n  const legacyKeys = attrKeys.filter((key) => !fieldKeys.includes(key));\n  console.log('legacyKeys',legacyKeys)\n  return (\n    <div\n      className={cx('frame-attributes', {\n        selected: !isSingleCamera && currentCamera === camera,\n      })}\n    >\n      {!isSingleCamera && (\n        <div className=\"title\">\n          {`C${cameraIndex + 1}-${camera}`}\n          {!store.readonly && (\n            <div\n              className=\"collapse-panel-icon\"\n              onClick={() => {\n                if (camera !== currentCamera) {\n                  store.frame.setCamera(camera);\n                }\n                store.config.setFrameAttributesModalVisible(true);\n              }}\n            >\n              <Pencil />\n            </div>\n          )}\n        </div>\n      )}\n      <div className=\"value-item\">\n        <div className=\"value-item-label\">\n          {i18n.translate('FRAME_ATTRIBUTES_IS_VALID_LABEL')}\n        </div>\n        <div className=\"value-item-value\">\n          {i18n.translate(valid ? 'FRAME_ATTRIBUTES_VALID' : 'FRAME_ATTRIBUTES_INVALID')}\n        </div>\n      </div>\n      {frameConfig && [...fieldKeys, ...legacyKeys].map((key) => attrKeys.includes(key) && (\n        <AttributeValueItem key={key} fieldName={key} fieldsMap={fieldsMap} values={frameAttributes} />\n      ))}\n    </div>\n  );\n});\n\nexport default FrameAttributes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}