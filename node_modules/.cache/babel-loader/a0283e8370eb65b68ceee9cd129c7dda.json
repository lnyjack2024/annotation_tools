{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{translate}from'../../../constants';import{setMeasurement}from'../../../redux/action';import{LineMeasurement}from'../../../../common/icons';import Dropdown from'../../../../common/dropdown/Dropdown';import'./Measurement.scss';const catchMeasurementKey='long_audio_measurement';const Measurements=_ref=>{let{measurements,selectedMeasurement,setMeasurement:set}=_ref;useEffect(()=>{let selected=Number(localStorage.getItem(catchMeasurementKey));if(!selected||(measurements===null||measurements===void 0?void 0:measurements.indexOf(selected))<0){selected=measurements[0];}handleSelect(selected);},[]);const handleSelect=v=>{set({selectedMeasurement:v});localStorage.setItem(catchMeasurementKey,v);};const hided=selectedMeasurement<0;const menus=[{label:translate('HIDE_LABEL'),value:-1,active:hided},...measurements.map(m=>({label:\"\".concat(m,\" s\"),value:m,active:m===selectedMeasurement}))];return measurements.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"audio-measurements-button\"},/*#__PURE__*/React.createElement(\"span\",{className:\"measurement-icon\".concat(hided?'':' active')},/*#__PURE__*/React.createElement(LineMeasurement,null)),/*#__PURE__*/React.createElement(Dropdown,{arrow:true,style:{height:'100%'},menu:menus,onClick:(label,index,item)=>handleSelect(item.value)},/*#__PURE__*/React.createElement(\"span\",{className:\"measurement-time\"},hided?translate('HIDE_LABEL'):\"\".concat(selectedMeasurement,\"s\"))));};const mapStateToProps=state=>({measurements:state.measurements,selectedMeasurement:state.selectedMeasurement});const mapDispatchToProps={setMeasurement};export default connect(mapStateToProps,mapDispatchToProps)(Measurements);","map":{"version":3,"names":["React","useEffect","connect","translate","setMeasurement","LineMeasurement","Dropdown","catchMeasurementKey","Measurements","_ref","measurements","selectedMeasurement","set","selected","Number","localStorage","getItem","indexOf","handleSelect","v","setItem","hided","menus","label","value","active","map","m","concat","length","createElement","className","arrow","style","height","menu","onClick","index","item","mapStateToProps","state","mapDispatchToProps"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/components/TaskNavigation/Measurements/Measurements.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from '../../../constants';\nimport { setMeasurement } from '../../../redux/action';\nimport { LineMeasurement } from '../../../../common/icons';\nimport Dropdown from '../../../../common/dropdown/Dropdown';\nimport './Measurement.scss';\n\nconst catchMeasurementKey = 'long_audio_measurement';\n\nconst Measurements = ({ measurements, selectedMeasurement, setMeasurement: set }) => {\n  useEffect(() => {\n    let selected = Number(localStorage.getItem(catchMeasurementKey));\n    if (!selected || measurements?.indexOf(selected) < 0) {\n      selected = measurements[0];\n    }\n    handleSelect(selected);\n  }, []);\n\n  const handleSelect = (v) => {\n    set({ selectedMeasurement: v });\n    localStorage.setItem(catchMeasurementKey, v);\n  };\n\n  const hided = selectedMeasurement < 0;\n  const menus = [\n    { label: translate('HIDE_LABEL'), value: -1, active: hided },\n    ...measurements.map((m) => ({ label: `${m} s`, value: m, active: m === selectedMeasurement })),\n  ];\n  return measurements.length > 0 && (\n    <div className=\"audio-measurements-button\">\n      <span className={`measurement-icon${hided ? '' : ' active'}`}>\n        <LineMeasurement />\n      </span>\n      <Dropdown\n        arrow\n        style={{ height: '100%' }}\n        menu={menus}\n        onClick={(label, index, item) => handleSelect(item.value)}\n      >\n        <span className=\"measurement-time\">\n          {hided ? translate('HIDE_LABEL') : `${selectedMeasurement}s`}\n        </span>\n      </Dropdown>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  measurements: state.measurements,\n  selectedMeasurement: state.selectedMeasurement,\n});\nconst mapDispatchToProps = {\n  setMeasurement,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Measurements);\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,SAAS,KAAQ,oBAAoB,CAC9C,OAASC,cAAc,KAAQ,uBAAuB,CACtD,OAASC,eAAe,KAAQ,0BAA0B,CAC1D,MAAO,CAAAC,QAAQ,KAAM,sCAAsC,CAC3D,MAAO,oBAAoB,CAE3B,KAAM,CAAAC,mBAAmB,CAAG,wBAAwB,CAEpD,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAgE,IAA/D,CAAEC,YAAY,CAAEC,mBAAmB,CAAEP,cAAc,CAAEQ,GAAI,CAAC,CAAAH,IAAA,CAC9ER,SAAS,CAAC,IAAM,CACd,GAAI,CAAAY,QAAQ,CAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACT,mBAAmB,CAAC,CAAC,CAChE,GAAI,CAACM,QAAQ,EAAI,CAAAH,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEO,OAAO,CAACJ,QAAQ,CAAC,EAAG,CAAC,CAAE,CACpDA,QAAQ,CAAGH,YAAY,CAAC,CAAC,CAAC,CAC5B,CACAQ,YAAY,CAACL,QAAQ,CAAC,CACxB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAK,YAAY,CAAIC,CAAC,EAAK,CAC1BP,GAAG,CAAC,CAAED,mBAAmB,CAAEQ,CAAE,CAAC,CAAC,CAC/BJ,YAAY,CAACK,OAAO,CAACb,mBAAmB,CAAEY,CAAC,CAAC,CAC9C,CAAC,CAED,KAAM,CAAAE,KAAK,CAAGV,mBAAmB,CAAG,CAAC,CACrC,KAAM,CAAAW,KAAK,CAAG,CACZ,CAAEC,KAAK,CAAEpB,SAAS,CAAC,YAAY,CAAC,CAAEqB,KAAK,CAAE,CAAC,CAAC,CAAEC,MAAM,CAAEJ,KAAM,CAAC,CAC5D,GAAGX,YAAY,CAACgB,GAAG,CAAEC,CAAC,GAAM,CAAEJ,KAAK,IAAAK,MAAA,CAAKD,CAAC,MAAI,CAAEH,KAAK,CAAEG,CAAC,CAAEF,MAAM,CAAEE,CAAC,GAAKhB,mBAAoB,CAAC,CAAC,CAAC,CAC/F,CACD,MAAO,CAAAD,YAAY,CAACmB,MAAM,CAAG,CAAC,eAC5B7B,KAAA,CAAA8B,aAAA,QAAKC,SAAS,CAAC,2BAA2B,eACxC/B,KAAA,CAAA8B,aAAA,SAAMC,SAAS,oBAAAH,MAAA,CAAqBP,KAAK,CAAG,EAAE,CAAG,SAAS,CAAG,eAC3DrB,KAAA,CAAA8B,aAAA,CAACzB,eAAe,KAAE,CACd,CAAC,cACPL,KAAA,CAAA8B,aAAA,CAACxB,QAAQ,EACP0B,KAAK,MACLC,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAO,CAAE,CAC1BC,IAAI,CAAEb,KAAM,CACZc,OAAO,CAAEA,CAACb,KAAK,CAAEc,KAAK,CAAEC,IAAI,GAAKpB,YAAY,CAACoB,IAAI,CAACd,KAAK,CAAE,eAE1DxB,KAAA,CAAA8B,aAAA,SAAMC,SAAS,CAAC,kBAAkB,EAC/BV,KAAK,CAAGlB,SAAS,CAAC,YAAY,CAAC,IAAAyB,MAAA,CAAMjB,mBAAmB,KACrD,CACE,CACP,CACN,CACH,CAAC,CAED,KAAM,CAAA4B,eAAe,CAAIC,KAAK,GAAM,CAClC9B,YAAY,CAAE8B,KAAK,CAAC9B,YAAY,CAChCC,mBAAmB,CAAE6B,KAAK,CAAC7B,mBAC7B,CAAC,CAAC,CACF,KAAM,CAAA8B,kBAAkB,CAAG,CACzBrC,cACF,CAAC,CACD,cAAe,CAAAF,OAAO,CAACqC,eAAe,CAAEE,kBAAkB,CAAC,CAACjC,YAAY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}