{"ast":null,"code":"import React,{useState,useEffect}from'react';import{reaction}from'mobx';import{observer}from'mobx-react';import{Pause,CaretRight,Left,Right,DoubleLeft,DoubleRight}from'../../../common/icons';import store from'../../store/RootStore';import i18n from'../../locales';const FrameActions=observer(()=>{const[frame,setFrame]=useState('1');useEffect(()=>{const reactionDisposer=reaction(()=>store.frame.currentFrame,currentFrame=>{setFrame(\"\".concat(currentFrame+1));});return()=>{reactionDisposer();};},[]);const input=e=>{const str=e.target.value;if(!str||/^\\d*$/.test(str)){setFrame(str);}};const goto=()=>{let frameIndex=Number(frame)-1;if(Number.isNaN(frameIndex)||frameIndex<0||frameIndex>=store.frame.frameCount){frameIndex=store.frame.currentFrame;}store.frame.setFrame(frameIndex);setFrame(\"\".concat(frameIndex+1));};const{isPlaying,frameCount,prev,next,togglePlaying}=store.frame;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{marginRight:24}},i18n.translate('FRAME_LABEL'),/*#__PURE__*/React.createElement(\"input\",{className:\"frame-input\",disabled:isPlaying,value:frame,onChange:input,onBlur:goto,onKeyUp:e=>{if(e.key==='Enter'){goto();}}}),\"/ \".concat(frameCount)),/*#__PURE__*/React.createElement(\"div\",{className:\"frame-action-icon\",onClick:()=>prev(10)},/*#__PURE__*/React.createElement(DoubleLeft,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"frame-action-icon\",onClick:()=>prev(1)},/*#__PURE__*/React.createElement(Left,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"frame-action-icon\",onClick:togglePlaying},isPlaying?/*#__PURE__*/React.createElement(Pause,null):/*#__PURE__*/React.createElement(CaretRight,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"frame-action-icon\",onClick:()=>next(1)},/*#__PURE__*/React.createElement(Right,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"frame-action-icon\",onClick:()=>next(10)},/*#__PURE__*/React.createElement(DoubleRight,null)));});export default FrameActions;","map":{"version":3,"names":["React","useState","useEffect","reaction","observer","Pause","CaretRight","Left","Right","DoubleLeft","DoubleRight","store","i18n","FrameActions","frame","setFrame","reactionDisposer","currentFrame","concat","input","e","str","target","value","test","goto","frameIndex","Number","isNaN","frameCount","isPlaying","prev","next","togglePlaying","createElement","style","marginRight","translate","className","disabled","onChange","onBlur","onKeyUp","key","onClick"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/FrameActions.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { Pause, CaretRight, Left, Right, DoubleLeft, DoubleRight } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\n\nconst FrameActions = observer(() => {\n  const [frame, setFrame] = useState('1');\n\n  useEffect(() => {\n    const reactionDisposer = reaction(\n      () => store.frame.currentFrame,\n      (currentFrame) => {\n        setFrame(`${currentFrame + 1}`);\n      },\n    );\n    return () => {\n      reactionDisposer();\n    };\n  }, []);\n\n  const input = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const str = e.target.value;\n    if (!str || /^\\d*$/.test(str)) {\n      setFrame(str);\n    }\n  };\n\n  const goto = () => {\n    let frameIndex = Number(frame) - 1;\n    if (Number.isNaN(frameIndex) || frameIndex < 0 || frameIndex >= store.frame.frameCount) {\n      frameIndex = store.frame.currentFrame;\n    }\n    store.frame.setFrame(frameIndex);\n    setFrame(`${frameIndex + 1}`);\n  };\n\n  const { isPlaying, frameCount, prev, next, togglePlaying } = store.frame;\n\n  return (\n    <div>\n      <div style={{ marginRight: 24 }}>\n        {i18n.translate('FRAME_LABEL')}\n        <input\n          className=\"frame-input\"\n          disabled={isPlaying}\n          value={frame}\n          onChange={input}\n          onBlur={goto}\n          onKeyUp={(e) => {\n            if (e.key === 'Enter') {\n              goto();\n            }\n          }}\n        />\n        {`/ ${frameCount}`}\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => prev(10)}>\n        <DoubleLeft />\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => prev(1)}>\n        <Left />\n      </div>\n      <div className=\"frame-action-icon\" onClick={togglePlaying}>\n        {isPlaying ? <Pause /> : <CaretRight />}\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => next(1)}>\n        <Right />\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => next(10)}>\n        <DoubleRight />\n      </div>\n    </div>\n  );\n});\n\nexport default FrameActions;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}