{"ast":null,"code":"export default class Label {\n  set visible(visible) {\n    this.dom.style.display = visible ? '' : 'none';\n  }\n  set zIndex(zIndex) {\n    this.dom.style.zIndex = `${zIndex}`;\n  }\n  set text(text) {\n    this.textContainer.innerText = text;\n  }\n  constructor({\n    id,\n    className,\n    text,\n    transPosition\n  }) {\n    this.dom = void 0;\n    this.textContainer = void 0;\n    this.extraContainer = void 0;\n    this.onPositionChange = void 0;\n    this.transPosition = void 0;\n    this.dom = document.createElement('div');\n    if (id !== undefined) {\n      this.dom.id = id;\n    }\n    if (className !== undefined) {\n      this.dom.className = className;\n    }\n    this.textContainer = document.createElement('span');\n    this.textContainer.innerText = text || '';\n    this.textContainer.className = 'text';\n    this.dom.appendChild(this.textContainer);\n    this.extraContainer = document.createElement('span');\n    this.extraContainer.className = 'extra';\n    this.dom.appendChild(this.extraContainer);\n    this.transPosition = transPosition;\n  }\n  addToContainer(container) {\n    container.appendChild(this.dom);\n  }\n  setPosition(position, pivot, rotation) {\n    const p = this.transPosition ? this.transPosition(position) : position;\n    this.dom.style.transform = `translate(${p.x}px, ${p.y}px) rotate(${rotation}rad) translate(0, -100%)`;\n    this.dom.style.transformOrigin = `${pivot.x - position.x}px ${pivot.y - position.y}px`;\n    if (this.onPositionChange) {\n      this.onPositionChange();\n    }\n  }\n  setExtra(ele) {\n    this.extraContainer.innerHTML = '';\n    if (ele) {\n      this.extraContainer.appendChild(ele);\n    }\n  }\n  remove() {\n    this.dom.remove();\n  }\n}","map":{"version":3,"names":["Label","visible","dom","style","display","zIndex","text","textContainer","innerText","constructor","id","className","transPosition","extraContainer","onPositionChange","document","createElement","undefined","appendChild","addToContainer","container","setPosition","position","pivot","rotation","p","transform","x","y","transformOrigin","setExtra","ele","innerHTML","remove"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/shapes/label/Label.ts"],"sourcesContent":["interface LabelOptions {\n  id?: string;\n  className?: string;\n  text?: string;\n  transPosition?: (p: { x: number; y: number }) => ({ x: number; y: number });\n}\n\nexport default class Label {\n  dom: HTMLDivElement;\n\n  textContainer: HTMLSpanElement;\n\n  extraContainer: HTMLSpanElement;\n\n  onPositionChange?: () => void;\n\n  transPosition?: (p: { x: number; y: number }) => ({ x: number; y: number });\n\n  set visible(visible: boolean) {\n    this.dom.style.display = visible ? '' : 'none';\n  }\n\n  set zIndex(zIndex: number) {\n    this.dom.style.zIndex = `${zIndex}`;\n  }\n\n  set text(text: string) {\n    this.textContainer.innerText = text;\n  }\n\n  constructor({ id, className, text, transPosition }: LabelOptions) {\n    this.dom = document.createElement('div');\n    if (id !== undefined) {\n      this.dom.id = id;\n    }\n    if (className !== undefined) {\n      this.dom.className = className;\n    }\n\n    this.textContainer = document.createElement('span');\n    this.textContainer.innerText = text || '';\n    this.textContainer.className = 'text';\n    this.dom.appendChild(this.textContainer);\n\n    this.extraContainer = document.createElement('span');\n    this.extraContainer.className = 'extra';\n    this.dom.appendChild(this.extraContainer);\n\n    this.transPosition = transPosition;\n  }\n\n  addToContainer(container: Element) {\n    container.appendChild(this.dom);\n  }\n\n  setPosition(position: { x: number; y: number }, pivot: { x: number; y: number }, rotation: number) {\n    const p = this.transPosition ? this.transPosition(position) : position;\n    this.dom.style.transform = `translate(${p.x}px, ${p.y}px) rotate(${rotation}rad) translate(0, -100%)`;\n    this.dom.style.transformOrigin = `${pivot.x - position.x}px ${pivot.y - position.y}px`;\n    if (this.onPositionChange) {\n      this.onPositionChange();\n    }\n  }\n\n  setExtra(ele?: Element | null) {\n    this.extraContainer.innerHTML = '';\n    if (ele) {\n      this.extraContainer.appendChild(ele);\n    }\n  }\n\n  remove() {\n    this.dom.remove();\n  }\n}\n"],"mappings":"AAOA,eAAe,MAAMA,KAAK,CAAC;EAWzB,IAAIC,OAAOA,CAACA,OAAgB,EAAE;IAC5B,IAAI,CAACC,GAAG,CAACC,KAAK,CAACC,OAAO,GAAGH,OAAO,GAAG,EAAE,GAAG,MAAM;EAChD;EAEA,IAAII,MAAMA,CAACA,MAAc,EAAE;IACzB,IAAI,CAACH,GAAG,CAACC,KAAK,CAACE,MAAM,GAAG,GAAGA,MAAM,EAAE;EACrC;EAEA,IAAIC,IAAIA,CAACA,IAAY,EAAE;IACrB,IAAI,CAACC,aAAa,CAACC,SAAS,GAAGF,IAAI;EACrC;EAEAG,WAAWA,CAAC;IAAEC,EAAE;IAAEC,SAAS;IAAEL,IAAI;IAAEM;EAA4B,CAAC,EAAE;IAAA,KAtBlEV,GAAG;IAAA,KAEHK,aAAa;IAAA,KAEbM,cAAc;IAAA,KAEdC,gBAAgB;IAAA,KAEhBF,aAAa;IAeX,IAAI,CAACV,GAAG,GAAGa,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IACxC,IAAIN,EAAE,KAAKO,SAAS,EAAE;MACpB,IAAI,CAACf,GAAG,CAACQ,EAAE,GAAGA,EAAE;IAClB;IACA,IAAIC,SAAS,KAAKM,SAAS,EAAE;MAC3B,IAAI,CAACf,GAAG,CAACS,SAAS,GAAGA,SAAS;IAChC;IAEA,IAAI,CAACJ,aAAa,GAAGQ,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;IACnD,IAAI,CAACT,aAAa,CAACC,SAAS,GAAGF,IAAI,IAAI,EAAE;IACzC,IAAI,CAACC,aAAa,CAACI,SAAS,GAAG,MAAM;IACrC,IAAI,CAACT,GAAG,CAACgB,WAAW,CAAC,IAAI,CAACX,aAAa,CAAC;IAExC,IAAI,CAACM,cAAc,GAAGE,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;IACpD,IAAI,CAACH,cAAc,CAACF,SAAS,GAAG,OAAO;IACvC,IAAI,CAACT,GAAG,CAACgB,WAAW,CAAC,IAAI,CAACL,cAAc,CAAC;IAEzC,IAAI,CAACD,aAAa,GAAGA,aAAa;EACpC;EAEAO,cAAcA,CAACC,SAAkB,EAAE;IACjCA,SAAS,CAACF,WAAW,CAAC,IAAI,CAAChB,GAAG,CAAC;EACjC;EAEAmB,WAAWA,CAACC,QAAkC,EAAEC,KAA+B,EAAEC,QAAgB,EAAE;IACjG,MAAMC,CAAC,GAAG,IAAI,CAACb,aAAa,GAAG,IAAI,CAACA,aAAa,CAACU,QAAQ,CAAC,GAAGA,QAAQ;IACtE,IAAI,CAACpB,GAAG,CAACC,KAAK,CAACuB,SAAS,GAAG,aAAaD,CAAC,CAACE,CAAC,OAAOF,CAAC,CAACG,CAAC,cAAcJ,QAAQ,0BAA0B;IACrG,IAAI,CAACtB,GAAG,CAACC,KAAK,CAAC0B,eAAe,GAAG,GAAGN,KAAK,CAACI,CAAC,GAAGL,QAAQ,CAACK,CAAC,MAAMJ,KAAK,CAACK,CAAC,GAAGN,QAAQ,CAACM,CAAC,IAAI;IACtF,IAAI,IAAI,CAACd,gBAAgB,EAAE;MACzB,IAAI,CAACA,gBAAgB,CAAC,CAAC;IACzB;EACF;EAEAgB,QAAQA,CAACC,GAAoB,EAAE;IAC7B,IAAI,CAAClB,cAAc,CAACmB,SAAS,GAAG,EAAE;IAClC,IAAID,GAAG,EAAE;MACP,IAAI,CAAClB,cAAc,CAACK,WAAW,CAACa,GAAG,CAAC;IACtC;EACF;EAEAE,MAAMA,CAAA,EAAG;IACP,IAAI,CAAC/B,GAAG,CAAC+B,MAAM,CAAC,CAAC;EACnB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module"}