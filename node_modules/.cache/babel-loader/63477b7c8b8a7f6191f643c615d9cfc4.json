{"ast":null,"code":"import Mousetrap from'mousetrap';import store from'./store/RootStore';import{ReviewMode}from'./types';import{ToolMode}from'../../utils/tool-mode';Mousetrap.addKeycodes({188:'comma',190:'period',191:'slash'});export default function bindKeyboardEvents(ctx){// default keyboard events\nMousetrap.bind('comma',()=>{if(!store.config.isAnyModalOpened){store.frame.prev(1);}return false;});Mousetrap.bind('period',()=>{if(!store.config.isAnyModalOpened){store.frame.next(1);}return false;});Mousetrap.bind('shift+comma',()=>{if(!store.config.isAnyModalOpened){store.frame.prev(10);}return false;});Mousetrap.bind('shift+period',()=>{if(!store.config.isAnyModalOpened){store.frame.next(10);}return false;});Mousetrap.bind('slash',()=>{if(!store.config.isAnyModalOpened){store.frame.togglePlaying();}return false;});Mousetrap.bind('space',()=>{if(!store.frame.loading){store.toggleAddMode();}return false;});Mousetrap.bind('tab',()=>{if(!store.frame.loading&&!store.config.isAnyModalOpened){store.instance.selectInstance(null);}return false;});Mousetrap.bind(['del','backspace'],()=>{store.delete();return false;});Mousetrap.bind(['ctrl+s','command+s'],()=>{ctx.save();return false;});Mousetrap.bind(['ctrl+z','command+z'],()=>{store.undo.undo();return false;});Mousetrap.bind(['ctrl+y','command+y'],()=>{store.undo.redo();return false;});Mousetrap.bind('shift+c',()=>{var _store$jobProxy;if(((_store$jobProxy=store.jobProxy)===null||_store$jobProxy===void 0?void 0:_store$jobProxy.toolMode)===ToolMode.QA_RW){store.config.setReviewMode(store.config.reviewMode===ReviewMode.LABELING?ReviewMode.REVIEW:ReviewMode.LABELING);}return false;});Mousetrap.bind('shift+l',()=>{store.config.setCrossLineVisible(!store.config.crossLineVisible);return false;});Mousetrap.bind('o',()=>{store.openAttributesModal();return false;});Mousetrap.bind(['1','2','3','4','5','6','7','8','9','0'],e=>{const num=Number(e.key);if(!Number.isNaN(num)){store.activateTool(num);}return false;});Mousetrap.bind('s',()=>{store.shape.subtractPolygon();return false;});Mousetrap.bind('m',()=>{store.shape.merge();return false;});Mousetrap.bind('up',()=>{store.moveFront();return false;});Mousetrap.bind('shift+up',()=>{store.moveFront(true);return false;});Mousetrap.bind('down',()=>{store.moveBack();return false;});Mousetrap.bind('shift+down',()=>{store.moveBack(true);return false;});Mousetrap.bind('t',()=>{store.shape.updateConfig({fill:!store.shape.config.fill});return false;});return()=>{Mousetrap.unbind('comma');Mousetrap.unbind('period');Mousetrap.unbind('shift+comma');Mousetrap.unbind('shift+period');Mousetrap.unbind('slash');Mousetrap.unbind('space');Mousetrap.unbind('tab');Mousetrap.unbind(['del','backspace']);Mousetrap.unbind(['ctrl+s','command+s']);Mousetrap.unbind(['ctrl+z','command+z']);Mousetrap.unbind(['ctrl+y','command+y']);Mousetrap.unbind('shift+c');Mousetrap.unbind('shift+l');Mousetrap.unbind('o');Mousetrap.unbind(['1','2','3','4','5','6','7','8','9','0']);Mousetrap.unbind('s');Mousetrap.unbind('m');Mousetrap.unbind('up');Mousetrap.unbind('shift+up');Mousetrap.unbind('down');Mousetrap.unbind('shift+down');Mousetrap.unbind('t');};}","map":{"version":3,"names":["Mousetrap","store","ReviewMode","ToolMode","addKeycodes","bindKeyboardEvents","ctx","bind","config","isAnyModalOpened","frame","prev","next","togglePlaying","loading","toggleAddMode","instance","selectInstance","delete","save","undo","redo","_store$jobProxy","jobProxy","toolMode","QA_RW","setReviewMode","reviewMode","LABELING","REVIEW","setCrossLineVisible","crossLineVisible","openAttributesModal","e","num","Number","key","isNaN","activateTool","shape","subtractPolygon","merge","moveFront","moveBack","updateConfig","fill","unbind"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/keyboard-events.ts"],"sourcesContent":["import Mousetrap from 'mousetrap';\nimport { VideoTracking } from './index';\nimport store from './store/RootStore';\nimport { ReviewMode } from './types';\nimport { ToolMode } from '../../utils/tool-mode';\n\nMousetrap.addKeycodes({\n  188: 'comma',\n  190: 'period',\n  191: 'slash',\n});\n\nexport default function bindKeyboardEvents(ctx: VideoTracking) {\n  // default keyboard events\n  Mousetrap.bind('comma', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.prev(1);\n    }\n    return false;\n  });\n  Mousetrap.bind('period', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.next(1);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+comma', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.prev(10);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+period', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.next(10);\n    }\n    return false;\n  });\n  Mousetrap.bind('slash', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.togglePlaying();\n    }\n    return false;\n  });\n  Mousetrap.bind('space', () => {\n    if (!store.frame.loading) {\n      store.toggleAddMode();\n    }\n    return false;\n  });\n  Mousetrap.bind('tab', () => {\n    if (!store.frame.loading && !store.config.isAnyModalOpened) {\n      store.instance.selectInstance(null);\n    }\n    return false;\n  });\n  Mousetrap.bind(['del', 'backspace'], () => {\n    store.delete();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+s', 'command+s'], () => {\n    ctx.save();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+z', 'command+z'], () => {\n    store.undo.undo();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+y', 'command+y'], () => {\n    store.undo.redo();\n    return false;\n  });\n  Mousetrap.bind('shift+c', () => {\n    if (store.jobProxy?.toolMode === ToolMode.QA_RW) {\n      store.config.setReviewMode(store.config.reviewMode === ReviewMode.LABELING ? ReviewMode.REVIEW : ReviewMode.LABELING);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+l', () => {\n    store.config.setCrossLineVisible(!store.config.crossLineVisible);\n    return false;\n  });\n  Mousetrap.bind('o', () => {\n    store.openAttributesModal();\n    return false;\n  });\n  Mousetrap.bind(['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'], (e) => {\n    const num = Number(e.key);\n    if (!Number.isNaN(num)) {\n      store.activateTool(num);\n    }\n    return false;\n  });\n  Mousetrap.bind('s', () => {\n    store.shape.subtractPolygon();\n    return false;\n  });\n  Mousetrap.bind('m', () => {\n    store.shape.merge();\n    return false;\n  });\n  Mousetrap.bind('up', () => {\n    store.moveFront();\n    return false;\n  });\n  Mousetrap.bind('shift+up', () => {\n    store.moveFront(true);\n    return false;\n  });\n  Mousetrap.bind('down', () => {\n    store.moveBack();\n    return false;\n  });\n  Mousetrap.bind('shift+down', () => {\n    store.moveBack(true);\n    return false;\n  });\n  Mousetrap.bind('t', () => {\n    store.shape.updateConfig({ fill: !store.shape.config.fill });\n    return false;\n  });\n\n  return () => {\n    Mousetrap.unbind('comma');\n    Mousetrap.unbind('period');\n    Mousetrap.unbind('shift+comma');\n    Mousetrap.unbind('shift+period');\n    Mousetrap.unbind('slash');\n    Mousetrap.unbind('space');\n    Mousetrap.unbind('tab');\n    Mousetrap.unbind(['del', 'backspace']);\n    Mousetrap.unbind(['ctrl+s', 'command+s']);\n    Mousetrap.unbind(['ctrl+z', 'command+z']);\n    Mousetrap.unbind(['ctrl+y', 'command+y']);\n    Mousetrap.unbind('shift+c');\n    Mousetrap.unbind('shift+l');\n    Mousetrap.unbind('o');\n    Mousetrap.unbind(['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']);\n    Mousetrap.unbind('s');\n    Mousetrap.unbind('m');\n    Mousetrap.unbind('up');\n    Mousetrap.unbind('shift+up');\n    Mousetrap.unbind('down');\n    Mousetrap.unbind('shift+down');\n    Mousetrap.unbind('t');\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}