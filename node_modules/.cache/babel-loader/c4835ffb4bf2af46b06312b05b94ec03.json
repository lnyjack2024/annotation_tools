{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/FrameActions.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { Pause, CaretRight, Left, Right, DoubleLeft, DoubleRight } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nconst FrameActions = observer(() => {\n  const [frame, setFrame] = useState('1');\n  useEffect(() => {\n    const reactionDisposer = reaction(() => store.frame.currentFrame, currentFrame => {\n      setFrame(`${currentFrame + 1}`);\n    });\n    return () => {\n      reactionDisposer();\n    };\n  }, []);\n  const input = e => {\n    const str = e.target.value;\n    if (!str || /^\\d*$/.test(str)) {\n      setFrame(str);\n    }\n  };\n  const goto = () => {\n    let frameIndex = Number(frame) - 1;\n    if (Number.isNaN(frameIndex) || frameIndex < 0 || frameIndex >= store.frame.frameCount) {\n      frameIndex = store.frame.currentFrame;\n    }\n    store.frame.setFrame(frameIndex);\n    setFrame(`${frameIndex + 1}`);\n  };\n  const {\n    isPlaying,\n    frameCount,\n    prev,\n    next,\n    togglePlaying\n  } = store.frame;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginRight: 24\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, i18n.translate('FRAME_LABEL'), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"frame-input\",\n    disabled: isPlaying,\n    value: frame,\n    onChange: input,\n    onBlur: goto,\n    onKeyUp: e => {\n      if (e.key === 'Enter') {\n        goto();\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }), `/ ${frameCount}`), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-action-icon\",\n    onClick: () => prev(10),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DoubleLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-action-icon\",\n    onClick: () => prev(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Left, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-action-icon\",\n    onClick: togglePlaying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, isPlaying ? /*#__PURE__*/React.createElement(Pause, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 22\n    }\n  }) : /*#__PURE__*/React.createElement(CaretRight, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 34\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-action-icon\",\n    onClick: () => next(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Right, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-action-icon\",\n    onClick: () => next(10),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DoubleRight, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  })));\n});\nexport default FrameActions;","map":{"version":3,"names":["React","useState","useEffect","reaction","observer","Pause","CaretRight","Left","Right","DoubleLeft","DoubleRight","store","i18n","FrameActions","frame","setFrame","reactionDisposer","currentFrame","input","e","str","target","value","test","goto","frameIndex","Number","isNaN","frameCount","isPlaying","prev","next","togglePlaying","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","marginRight","translate","className","disabled","onChange","onBlur","onKeyUp","key","onClick"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/FrameActions.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { Pause, CaretRight, Left, Right, DoubleLeft, DoubleRight } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\n\nconst FrameActions = observer(() => {\n  const [frame, setFrame] = useState('1');\n\n  useEffect(() => {\n    const reactionDisposer = reaction(\n      () => store.frame.currentFrame,\n      (currentFrame) => {\n        setFrame(`${currentFrame + 1}`);\n      },\n    );\n    return () => {\n      reactionDisposer();\n    };\n  }, []);\n\n  const input = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const str = e.target.value;\n    if (!str || /^\\d*$/.test(str)) {\n      setFrame(str);\n    }\n  };\n\n  const goto = () => {\n    let frameIndex = Number(frame) - 1;\n    if (Number.isNaN(frameIndex) || frameIndex < 0 || frameIndex >= store.frame.frameCount) {\n      frameIndex = store.frame.currentFrame;\n    }\n    store.frame.setFrame(frameIndex);\n    setFrame(`${frameIndex + 1}`);\n  };\n\n  const { isPlaying, frameCount, prev, next, togglePlaying } = store.frame;\n\n  return (\n    <div>\n      <div style={{ marginRight: 24 }}>\n        {i18n.translate('FRAME_LABEL')}\n        <input\n          className=\"frame-input\"\n          disabled={isPlaying}\n          value={frame}\n          onChange={input}\n          onBlur={goto}\n          onKeyUp={(e) => {\n            if (e.key === 'Enter') {\n              goto();\n            }\n          }}\n        />\n        {`/ ${frameCount}`}\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => prev(10)}>\n        <DoubleLeft />\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => prev(1)}>\n        <Left />\n      </div>\n      <div className=\"frame-action-icon\" onClick={togglePlaying}>\n        {isPlaying ? <Pause /> : <CaretRight />}\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => next(1)}>\n        <Right />\n      </div>\n      <div className=\"frame-action-icon\" onClick={() => next(10)}>\n        <DoubleRight />\n      </div>\n    </div>\n  );\n});\n\nexport default FrameActions;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}