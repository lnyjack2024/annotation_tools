{"ast":null,"code":"import { useEffect } from 'react';\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nvar IS_BROWSER = (typeof window === 'undefined' ? 'undefined' : typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === 'object';\nvar DEFAULT_ELEMENT = IS_BROWSER ? document : {};\nvar DEFAULT_EVENTS = ['mousemove', 'keydown', 'wheel', 'DOMMouseScroll', 'mousewheel', 'mousedown'];\nvar handleEvent = function handleEvent(e) {\n  window.parent.postMessage(\"iframe-\".concat(e.type), '*');\n};\nfunction useActivityDispatcher() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref$events = _ref.events,\n    events = _ref$events === void 0 ? DEFAULT_EVENTS : _ref$events,\n    _ref$element = _ref.element,\n    element = _ref$element === void 0 ? DEFAULT_ELEMENT : _ref$element,\n    _ref$capture = _ref.capture,\n    capture = _ref$capture === void 0 ? true : _ref$capture,\n    _ref$passive = _ref.passive,\n    passive = _ref$passive === void 0 ? true : _ref$passive;\n  var _bindEvents = function _bindEvents() {\n    if (!IS_BROWSER) {\n      return;\n    }\n    events.forEach(function (e) {\n      element.addEventListener(e, handleEvent, {\n        capture: capture,\n        passive: passive\n      });\n    });\n  };\n  var _unbindEvents = function _unbindEvents() {\n    if (!IS_BROWSER) {\n      return;\n    }\n    events.forEach(function (e) {\n      element.removeEventListener(e, handleEvent, {\n        capture: capture,\n        passive: passive\n      });\n    });\n  };\n  useEffect(function () {\n    if (window.parent) {\n      _bindEvents();\n    }\n    return function () {\n      _unbindEvents();\n    };\n  }, []);\n}\nexport { useActivityDispatcher };","map":{"version":3,"sources":["../src/utils.js","../src/index.js"],"names":["IS_BROWSER","window","DEFAULT_ELEMENT","document","DEFAULT_EVENTS","handleEvent","parent","postMessage","e","type","useActivityDispatcher","events","element","capture","passive","_bindEvents","forEach","addEventListener","_unbindEvents","removeEventListener","useEffect"],"mappings":";;;;;;;;;;;;;;;AAAO,IAAMA,UAAU,GACrB,CAAC,OAAOC,MAAP,KAAkB,WAAlB,GAAgC,WAAhC,GAAA,OAAqDA,MAArD,KAAA,WAAA,GAAA,WAAA,GAAA,OAAA,CAAqDA,MAArD,CAAD,MAAkE,QAD7D;AAGA,IAAMC,eAAe,GAAGF,UAAU,GAAGG,QAAH,GAAc,CAAA,CAAhD;AAEA,IAAMC,cAAc,GAAG,CAC5B,WAD4B,EAE5B,SAF4B,EAG5B,OAH4B,EAI5B,gBAJ4B,EAK5B,YAL4B,EAM5B,WAN4B,CAAvB;ACDP,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAA,CAAC,EAAI;EACvBJ,MAAM,CAACK,MAAPL,CAAcM,WAAdN,CAAAA,SAAAA,CAAAA,MAAAA,CAAoCO,CAAC,CAACC,IAAtCR,CAAAA,EAA8C,GAA9CA,CAAAA;AACD,CAFD;AAIO,SAASS,qBAAT,CAAA,EAKC;EAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAJ,CAAA,CAAI;IAAA,WAAA,GAAA,IAAA,CAJNC,MAIM;IAJNA,MAIM,GAAA,WAAA,KAAA,KAAA,CAAA,GAJGP,cAIH,GAAA,WAAA;IAAA,YAAA,GAAA,IAAA,CAHNQ,OAGM;IAHNA,OAGM,GAAA,YAAA,KAAA,KAAA,CAAA,GAHIV,eAGJ,GAAA,YAAA;IAAA,YAAA,GAAA,IAAA,CAFNW,OAEM;IAFNA,OAEM,GAAA,YAAA,KAAA,KAAA,CAAA,GAFI,IAEJ,GAAA,YAAA;IAAA,YAAA,GAAA,IAAA,CADNC,OACM;IADNA,OACM,GAAA,YAAA,KAAA,KAAA,CAAA,GADI,IACJ,GAAA,YAAA;EACN,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAA,EAAM;IACxB,IAAI,CAACf,UAAL,EAAiB;MACf;IACD;IAEDW,MAAM,CAACK,OAAPL,CAAe,UAAA,CAAC,EAAI;MAClBC,OAAO,CAACK,gBAARL,CAAyBJ,CAAzBI,EAA4BP,WAA5BO,EAAyC;QACvCC,OAAO,EAAPA,OADuC;QAEvCC,OAAO,EAAPA;MAFuC,CAAzCF,CAAAA;IAID,CALDD,CAAAA;EAMD,CAXD;EAaA,IAAMO,aAAa,GAAG,SAAhBA,aAAgB,CAAA,EAAmB;IACvC,IAAI,CAAClB,UAAL,EAAiB;MACf;IACD;IAEDW,MAAM,CAACK,OAAPL,CAAe,UAAA,CAAC,EAAI;MAClBC,OAAO,CAACO,mBAARP,CAA4BJ,CAA5BI,EAA+BP,WAA/BO,EAA4C;QAC1CC,OAAO,EAAPA,OAD0C;QAE1CC,OAAO,EAAPA;MAF0C,CAA5CF,CAAAA;IAID,CALDD,CAAAA;EAMD,CAXD;EAaAS,SAAS,CAAC,YAAM;IACd,IAAInB,MAAM,CAACK,MAAX,EAAmB;MACjBS,WAAW,CAAA,CAAA;IACZ;IAED,OAAO,YAAM;MACXG,aAAa,CAAA,CAAA;IACd,CAFD;EAGD,CARQ,EAQN,EARM,CAATE;AASD","sourcesContent":["export const IS_BROWSER =\n  (typeof window === 'undefined' ? 'undefined' : typeof window) === 'object';\n\nexport const DEFAULT_ELEMENT = IS_BROWSER ? document : {};\n\nexport const DEFAULT_EVENTS = [\n  'mousemove',\n  'keydown',\n  'wheel',\n  'DOMMouseScroll',\n  'mousewheel',\n  'mousedown',\n];\n","import { useEffect } from 'react';\n\nimport { DEFAULT_ELEMENT, DEFAULT_EVENTS, IS_BROWSER } from './utils';\n\nconst handleEvent = e => {\n  window.parent.postMessage(`iframe-${e.type}`, '*');\n};\n\nexport function useActivityDispatcher({\n  events = DEFAULT_EVENTS,\n  element = DEFAULT_ELEMENT,\n  capture = true,\n  passive = true,\n} = {}) {\n  const _bindEvents = () => {\n    if (!IS_BROWSER) {\n      return;\n    }\n\n    events.forEach(e => {\n      element.addEventListener(e, handleEvent, {\n        capture,\n        passive,\n      });\n    });\n  };\n\n  const _unbindEvents = (force = false) => {\n    if (!IS_BROWSER) {\n      return;\n    }\n\n    events.forEach(e => {\n      element.removeEventListener(e, handleEvent, {\n        capture,\n        passive,\n      });\n    });\n  };\n\n  useEffect(() => {\n    if (window.parent) {\n      _bindEvents();\n    }\n\n    return () => {\n      _unbindEvents();\n    };\n  }, []);\n}\n"]},"metadata":{},"sourceType":"module"}