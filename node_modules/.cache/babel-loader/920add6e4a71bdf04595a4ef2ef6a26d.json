{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/review/ReviewComment.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { getReviewRelatedInstanceInfo } from './ReviewModal';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewResult, ViewMode } from '../../types';\nimport { SIDEBAR_WIDTH, TOOLBAR_HEIGHT } from '../../constants';\nimport './ReviewComment.scss';\nconst commentWidth = 348;\nconst ReviewComment = observer(() => {\n  var _hoveredReview$type;\n  const {\n    reviewLayerOffset,\n    hoveredReview,\n    hoveredAnchor\n  } = store.review;\n  if (!hoveredReview || !hoveredAnchor) {\n    return null;\n  }\n  const {\n    x,\n    y\n  } = hoveredAnchor.container.toGlobal({\n    x: hoveredReview.x,\n    y: hoveredReview.y\n  });\n  let left = x + reviewLayerOffset.x;\n  let top = y + reviewLayerOffset.y;\n  if (store.config.viewMode === ViewMode.GRID) {\n    left = x + SIDEBAR_WIDTH + 4;\n    top = y + TOOLBAR_HEIGHT + 48 + 4;\n  }\n  let cLeft = left + 32;\n  if (cLeft + commentWidth > document.body.clientWidth) {\n    cLeft = left - commentWidth - 32;\n  }\n  const cTop = top - 32;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-comment\",\n    style: {\n      width: commentWidth,\n      left: cLeft,\n      top: cTop\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-comment-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, hoveredReview.result === ReviewResult.APPROVE && i18n.translate('REVIEW_APPROVE_TITLE'), hoveredReview.result === ReviewResult.REJECT && i18n.translate('REVIEW_REJECT_TITLE'), hoveredReview.result === ReviewResult.SUSPEND && i18n.translate('REVIEW_SUSPEND_TITLE')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-comment-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, `[${getReviewRelatedInstanceInfo(hoveredReview).infoStr}] `, `[${i18n.translate('FRAME_ATTRIBUTES_FRAME', {\n    values: {\n      frame: hoveredReview.frameIndex + 1\n    }\n  })}] `, (_hoveredReview$type = hoveredReview.type) === null || _hoveredReview$type === void 0 ? void 0 : _hoveredReview$type.join(';'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"img-container\"\n    // eslint-disable-next-line react/no-danger\n    ,\n    dangerouslySetInnerHTML: {\n      __html: hoveredReview.comment || ''\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  })));\n});\nexport default ReviewComment;","map":{"version":3,"names":["React","observer","getReviewRelatedInstanceInfo","store","i18n","ReviewResult","ViewMode","SIDEBAR_WIDTH","TOOLBAR_HEIGHT","commentWidth","ReviewComment","_hoveredReview$type","reviewLayerOffset","hoveredReview","hoveredAnchor","review","x","y","container","toGlobal","left","top","config","viewMode","GRID","cLeft","document","body","clientWidth","cTop","createElement","className","style","width","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","result","APPROVE","translate","REJECT","SUSPEND","infoStr","values","frame","frameIndex","type","join","dangerouslySetInnerHTML","__html","comment"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/review/ReviewComment.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { getReviewRelatedInstanceInfo } from './ReviewModal';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewResult, ViewMode } from '../../types';\nimport { SIDEBAR_WIDTH, TOOLBAR_HEIGHT } from '../../constants';\nimport './ReviewComment.scss';\n\nconst commentWidth = 348;\n\nconst ReviewComment = observer(() => {\n  const { reviewLayerOffset, hoveredReview, hoveredAnchor } = store.review;\n  if (!hoveredReview || !hoveredAnchor) {\n    return null;\n  }\n\n  const { x, y } = hoveredAnchor.container.toGlobal({ x: hoveredReview.x, y: hoveredReview.y });\n  let left = x + reviewLayerOffset.x;\n  let top = y + reviewLayerOffset.y;\n  if (store.config.viewMode === ViewMode.GRID) {\n    left = x + SIDEBAR_WIDTH + 4;\n    top = y + TOOLBAR_HEIGHT + 48 + 4;\n  }\n  let cLeft = left + 32;\n  if (cLeft + commentWidth > document.body.clientWidth) {\n    cLeft = left - commentWidth - 32;\n  }\n  const cTop = top - 32;\n  return (\n    <div className=\"review-comment\" style={{ width: commentWidth, left: cLeft, top: cTop }}>\n      <div className=\"review-comment-title\">\n        {hoveredReview.result === ReviewResult.APPROVE && i18n.translate('REVIEW_APPROVE_TITLE')}\n        {hoveredReview.result === ReviewResult.REJECT && i18n.translate('REVIEW_REJECT_TITLE')}\n        {hoveredReview.result === ReviewResult.SUSPEND && i18n.translate('REVIEW_SUSPEND_TITLE')}\n      </div>\n      <div className=\"review-comment-content\">\n        {`[${getReviewRelatedInstanceInfo(hoveredReview).infoStr}] `}\n        {`[${i18n.translate('FRAME_ATTRIBUTES_FRAME', { values: { frame: hoveredReview.frameIndex + 1 } })}] `}\n        {hoveredReview.type?.join(';')}\n        <div\n          className=\"img-container\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: hoveredReview.comment || '' }}\n        />\n      </div>\n    </div>\n  );\n});\n\nexport default ReviewComment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}