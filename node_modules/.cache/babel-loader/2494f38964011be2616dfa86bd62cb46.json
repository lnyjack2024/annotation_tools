{"ast":null,"code":"import{SegmentMode,translate}from'../../constants';export const debug=(state,data)=>{console.log('hello!');return state;};export const getWavesurfers=(state,data)=>{const{wavesurfers}=data;return{...state,wavesurfers};};export const setPlayingState=(state,data)=>{const{isPlaying}=data;return{...state,isPlaying};};export const setPlayMode=(state,data)=>{const{value}=data;const{wavesurfers}=state;wavesurfers.setPlayMode(value);return{...state,currentPlayMode:value};};export const playCurrentVideo=state=>{const{wavesurfers}=state;wavesurfers.playVideo();return state;};export const pauseCurrentVideo=state=>{const{wavesurfers}=state;wavesurfers.pauseVideo();return state;};export const forwardCurrentVideo=state=>{const{wavesurfers}=state;wavesurfers.forwardVideo();return state;};export const backwardCurrentVideo=state=>{const{wavesurfers}=state;wavesurfers.backwardVideo();return state;};export const setCurrentVideo=(state,data)=>{const{index}=data;const{currentVideo,wavesurfers}=state;if(currentVideo===index)return state;const videos=[...state.videos];videos[index]={...videos[index]};const video=videos[index];video.checked=true;wavesurfers.setCurrentVideo(index);return{...state,currentVideo:index,currentSegment:0,isPlaying:false,videos,annotateDisabled:!state.invalidAnnotatable&&video.attributes&&video.attributes.is_valid==='invalid'};};export const setAudioErrorMsg=(state,data)=>{const{index,errorMsg}=data;const{audioErrorMsg=[]}=state;audioErrorMsg[index]=errorMsg;return{...state,audioErrorMsg};};export const setErrorMsg=(state,data)=>{const{errorMsg}=data;console.log(errorMsg);return{...state,errorMsg};};export const setCurrentSegment=(state,data)=>{const{index,start}=data;const{currentVideo,wavesurfers,results,segmentMode}=state;if(segmentMode!==SegmentMode.individual&&index<0||index>=results[currentVideo].length)return state;wavesurfers.setCurrentSegment(index,start);return{...state,currentSegment:index};};export const setVideoSpeed=(state,data)=>{const{speed}=data;const{wavesurfers,currentVideo}=state;let rate=1;if(speed<0.25)rate=0.25;else if(speed>4)rate=4;// eslint-disable-next-line radix\nelse if(speed>=0.25&&speed<=4)rate=parseFloat(speed).toFixed(2);const videos=[...state.videos];videos[currentVideo]={...state.videos[currentVideo]};videos[currentVideo].speed=rate;wavesurfers.setCurrentSpeed(rate);return{...state,videos};};export const setVideoZoom=(state,data)=>{const{zoom}=data;const{wavesurfers,currentVideo}=state;let rate=1;if(zoom<1)rate=1;else if(zoom>1000)rate=1000;// eslint-disable-next-line radix\nelse if(zoom>=1&&zoom<=1000)rate=parseInt(zoom);const videos=[...state.videos];videos[currentVideo]={...state.videos[currentVideo]};videos[currentVideo].zoom=rate;wavesurfers.setCurrentZoom(rate);return{...state,videos};};export const showHideGuider=state=>{const{isGuiding}=state;return{...state,isGuiding:!isGuiding};};export const setMeasurement=(state,data)=>{const{selectedMeasurement}=data;return{...state,selectedMeasurement};};export const updateVideoInfo=(state,data)=>{const{index,duration}=data;const videos=[...state.videos];videos[index]={...state.videos[index],duration};return{...state,videos};};","map":{"version":3,"names":["SegmentMode","translate","debug","state","data","console","log","getWavesurfers","wavesurfers","setPlayingState","isPlaying","setPlayMode","value","currentPlayMode","playCurrentVideo","playVideo","pauseCurrentVideo","pauseVideo","forwardCurrentVideo","forwardVideo","backwardCurrentVideo","backwardVideo","setCurrentVideo","index","currentVideo","videos","video","checked","currentSegment","annotateDisabled","invalidAnnotatable","attributes","is_valid","setAudioErrorMsg","errorMsg","audioErrorMsg","setErrorMsg","setCurrentSegment","start","results","segmentMode","individual","length","setVideoSpeed","speed","rate","parseFloat","toFixed","setCurrentSpeed","setVideoZoom","zoom","parseInt","setCurrentZoom","showHideGuider","isGuiding","setMeasurement","selectedMeasurement","updateVideoInfo","duration"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/long-audio/redux/reducer/settingController.js"],"sourcesContent":["import { SegmentMode, translate } from '../../constants';\n\nexport const debug = (state, data) => {\n  console.log('hello!');\n  return state;\n};\n\nexport const getWavesurfers = (state, data) => {\n  const { wavesurfers } = data;\n  return {\n    ...state,\n    wavesurfers,\n  };\n};\n\nexport const setPlayingState = (state, data) => {\n  const { isPlaying } = data;\n  return {\n    ...state,\n    isPlaying,\n  };\n};\n\nexport const setPlayMode = (state, data) => {\n  const { value } = data;\n  const { wavesurfers } = state;\n  wavesurfers.setPlayMode(value);\n  return {\n    ...state,\n    currentPlayMode: value,\n  };\n};\n\nexport const playCurrentVideo = (state) => {\n  const { wavesurfers } = state;\n  wavesurfers.playVideo();\n  return state;\n};\n\nexport const pauseCurrentVideo = (state) => {\n  const { wavesurfers } = state;\n  wavesurfers.pauseVideo();\n  return state;\n};\n\nexport const forwardCurrentVideo = (state) => {\n  const { wavesurfers } = state;\n  wavesurfers.forwardVideo();\n  return state;\n};\n\nexport const backwardCurrentVideo = (state) => {\n  const { wavesurfers } = state;\n  wavesurfers.backwardVideo();\n  return state;\n};\n\nexport const setCurrentVideo = (state, data) => {\n  const { index } = data;\n  const { currentVideo, wavesurfers } = state;\n  if (currentVideo === index) return state;\n  const videos = [...state.videos];\n  videos[index] = { ...videos[index] };\n  const video = videos[index];\n  video.checked = true;\n  wavesurfers.setCurrentVideo(index);\n  return ({\n    ...state,\n    currentVideo: index,\n    currentSegment: 0,\n    isPlaying: false,\n    videos,\n    annotateDisabled: !state.invalidAnnotatable && video.attributes && video.attributes.is_valid === 'invalid',\n  });\n};\n\nexport const setAudioErrorMsg = (state, data) => {\n  const { index, errorMsg } = data;\n  const { audioErrorMsg = [] } = state;\n  audioErrorMsg[index] = errorMsg;\n  return {\n    ...state,\n    audioErrorMsg,\n  };\n};\n\nexport const setErrorMsg = (state, data) => {\n  const { errorMsg } = data;\n  console.log(errorMsg);\n  return {\n    ...state,\n    errorMsg,\n  };\n};\n\nexport const setCurrentSegment = (state, data) => {\n  const { index, start } = data;\n  const { currentVideo, wavesurfers, results, segmentMode } = state;\n  if ((segmentMode !== SegmentMode.individual && index < 0) || index >= results[currentVideo].length) return state;\n  wavesurfers.setCurrentSegment(index, start);\n  return ({\n    ...state,\n    currentSegment: index,\n  });\n};\n\nexport const setVideoSpeed = (state, data) => {\n  const { speed } = data;\n  const { wavesurfers, currentVideo } = state;\n  let rate = 1;\n  if (speed < 0.25) rate = 0.25;\n  else if (speed > 4) rate = 4;\n  // eslint-disable-next-line radix\n  else if (speed >= 0.25 && speed <= 4) rate = parseFloat(speed).toFixed(2);\n  const videos = [...state.videos];\n  videos[currentVideo] = { ...state.videos[currentVideo] };\n  videos[currentVideo].speed = rate;\n  wavesurfers.setCurrentSpeed(rate);\n  return ({\n    ...state,\n    videos,\n  });\n};\n\nexport const setVideoZoom = (state, data) => {\n  const { zoom } = data;\n  const { wavesurfers, currentVideo } = state;\n  let rate = 1;\n  if (zoom < 1) rate = 1;\n  else if (zoom > 1000) rate = 1000;\n  // eslint-disable-next-line radix\n  else if (zoom >= 1 && zoom <= 1000) rate = parseInt(zoom);\n  const videos = [...state.videos];\n  videos[currentVideo] = { ...state.videos[currentVideo] };\n  videos[currentVideo].zoom = rate;\n  wavesurfers.setCurrentZoom(rate);\n  return ({\n    ...state,\n    videos,\n  });\n};\n\nexport const showHideGuider = (state) => {\n  const { isGuiding } = state;\n  return ({\n    ...state,\n    isGuiding: !isGuiding,\n  });\n};\n\nexport const setMeasurement = (state, data) => {\n  const { selectedMeasurement } = data;\n  return { ...state, selectedMeasurement };\n};\n\nexport const updateVideoInfo = (state, data) => {\n  const { index, duration } = data;\n  const videos = [...state.videos];\n  videos[index] = {\n    ...state.videos[index],\n    duration,\n  };\n  return { ...state, videos };\n};\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,SAAS,KAAQ,iBAAiB,CAExD,MAAO,MAAM,CAAAC,KAAK,CAAGA,CAACC,KAAK,CAAEC,IAAI,GAAK,CACpCC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrB,MAAO,CAAAH,KAAK,CACd,CAAC,CAED,MAAO,MAAM,CAAAI,cAAc,CAAGA,CAACJ,KAAK,CAAEC,IAAI,GAAK,CAC7C,KAAM,CAAEI,WAAY,CAAC,CAAGJ,IAAI,CAC5B,MAAO,CACL,GAAGD,KAAK,CACRK,WACF,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAC,eAAe,CAAGA,CAACN,KAAK,CAAEC,IAAI,GAAK,CAC9C,KAAM,CAAEM,SAAU,CAAC,CAAGN,IAAI,CAC1B,MAAO,CACL,GAAGD,KAAK,CACRO,SACF,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAC,WAAW,CAAGA,CAACR,KAAK,CAAEC,IAAI,GAAK,CAC1C,KAAM,CAAEQ,KAAM,CAAC,CAAGR,IAAI,CACtB,KAAM,CAAEI,WAAY,CAAC,CAAGL,KAAK,CAC7BK,WAAW,CAACG,WAAW,CAACC,KAAK,CAAC,CAC9B,MAAO,CACL,GAAGT,KAAK,CACRU,eAAe,CAAED,KACnB,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAE,gBAAgB,CAAIX,KAAK,EAAK,CACzC,KAAM,CAAEK,WAAY,CAAC,CAAGL,KAAK,CAC7BK,WAAW,CAACO,SAAS,CAAC,CAAC,CACvB,MAAO,CAAAZ,KAAK,CACd,CAAC,CAED,MAAO,MAAM,CAAAa,iBAAiB,CAAIb,KAAK,EAAK,CAC1C,KAAM,CAAEK,WAAY,CAAC,CAAGL,KAAK,CAC7BK,WAAW,CAACS,UAAU,CAAC,CAAC,CACxB,MAAO,CAAAd,KAAK,CACd,CAAC,CAED,MAAO,MAAM,CAAAe,mBAAmB,CAAIf,KAAK,EAAK,CAC5C,KAAM,CAAEK,WAAY,CAAC,CAAGL,KAAK,CAC7BK,WAAW,CAACW,YAAY,CAAC,CAAC,CAC1B,MAAO,CAAAhB,KAAK,CACd,CAAC,CAED,MAAO,MAAM,CAAAiB,oBAAoB,CAAIjB,KAAK,EAAK,CAC7C,KAAM,CAAEK,WAAY,CAAC,CAAGL,KAAK,CAC7BK,WAAW,CAACa,aAAa,CAAC,CAAC,CAC3B,MAAO,CAAAlB,KAAK,CACd,CAAC,CAED,MAAO,MAAM,CAAAmB,eAAe,CAAGA,CAACnB,KAAK,CAAEC,IAAI,GAAK,CAC9C,KAAM,CAAEmB,KAAM,CAAC,CAAGnB,IAAI,CACtB,KAAM,CAAEoB,YAAY,CAAEhB,WAAY,CAAC,CAAGL,KAAK,CAC3C,GAAIqB,YAAY,GAAKD,KAAK,CAAE,MAAO,CAAApB,KAAK,CACxC,KAAM,CAAAsB,MAAM,CAAG,CAAC,GAAGtB,KAAK,CAACsB,MAAM,CAAC,CAChCA,MAAM,CAACF,KAAK,CAAC,CAAG,CAAE,GAAGE,MAAM,CAACF,KAAK,CAAE,CAAC,CACpC,KAAM,CAAAG,KAAK,CAAGD,MAAM,CAACF,KAAK,CAAC,CAC3BG,KAAK,CAACC,OAAO,CAAG,IAAI,CACpBnB,WAAW,CAACc,eAAe,CAACC,KAAK,CAAC,CAClC,MAAQ,CACN,GAAGpB,KAAK,CACRqB,YAAY,CAAED,KAAK,CACnBK,cAAc,CAAE,CAAC,CACjBlB,SAAS,CAAE,KAAK,CAChBe,MAAM,CACNI,gBAAgB,CAAE,CAAC1B,KAAK,CAAC2B,kBAAkB,EAAIJ,KAAK,CAACK,UAAU,EAAIL,KAAK,CAACK,UAAU,CAACC,QAAQ,GAAK,SACnG,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAC,gBAAgB,CAAGA,CAAC9B,KAAK,CAAEC,IAAI,GAAK,CAC/C,KAAM,CAAEmB,KAAK,CAAEW,QAAS,CAAC,CAAG9B,IAAI,CAChC,KAAM,CAAE+B,aAAa,CAAG,EAAG,CAAC,CAAGhC,KAAK,CACpCgC,aAAa,CAACZ,KAAK,CAAC,CAAGW,QAAQ,CAC/B,MAAO,CACL,GAAG/B,KAAK,CACRgC,aACF,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAC,WAAW,CAAGA,CAACjC,KAAK,CAAEC,IAAI,GAAK,CAC1C,KAAM,CAAE8B,QAAS,CAAC,CAAG9B,IAAI,CACzBC,OAAO,CAACC,GAAG,CAAC4B,QAAQ,CAAC,CACrB,MAAO,CACL,GAAG/B,KAAK,CACR+B,QACF,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAG,iBAAiB,CAAGA,CAAClC,KAAK,CAAEC,IAAI,GAAK,CAChD,KAAM,CAAEmB,KAAK,CAAEe,KAAM,CAAC,CAAGlC,IAAI,CAC7B,KAAM,CAAEoB,YAAY,CAAEhB,WAAW,CAAE+B,OAAO,CAAEC,WAAY,CAAC,CAAGrC,KAAK,CACjE,GAAKqC,WAAW,GAAKxC,WAAW,CAACyC,UAAU,EAAIlB,KAAK,CAAG,CAAC,EAAKA,KAAK,EAAIgB,OAAO,CAACf,YAAY,CAAC,CAACkB,MAAM,CAAE,MAAO,CAAAvC,KAAK,CAChHK,WAAW,CAAC6B,iBAAiB,CAACd,KAAK,CAAEe,KAAK,CAAC,CAC3C,MAAQ,CACN,GAAGnC,KAAK,CACRyB,cAAc,CAAEL,KAClB,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAoB,aAAa,CAAGA,CAACxC,KAAK,CAAEC,IAAI,GAAK,CAC5C,KAAM,CAAEwC,KAAM,CAAC,CAAGxC,IAAI,CACtB,KAAM,CAAEI,WAAW,CAAEgB,YAAa,CAAC,CAAGrB,KAAK,CAC3C,GAAI,CAAA0C,IAAI,CAAG,CAAC,CACZ,GAAID,KAAK,CAAG,IAAI,CAAEC,IAAI,CAAG,IAAI,CAAC,IACzB,IAAID,KAAK,CAAG,CAAC,CAAEC,IAAI,CAAG,CAAC,CAC5B;AAAA,IACK,IAAID,KAAK,EAAI,IAAI,EAAIA,KAAK,EAAI,CAAC,CAAEC,IAAI,CAAGC,UAAU,CAACF,KAAK,CAAC,CAACG,OAAO,CAAC,CAAC,CAAC,CACzE,KAAM,CAAAtB,MAAM,CAAG,CAAC,GAAGtB,KAAK,CAACsB,MAAM,CAAC,CAChCA,MAAM,CAACD,YAAY,CAAC,CAAG,CAAE,GAAGrB,KAAK,CAACsB,MAAM,CAACD,YAAY,CAAE,CAAC,CACxDC,MAAM,CAACD,YAAY,CAAC,CAACoB,KAAK,CAAGC,IAAI,CACjCrC,WAAW,CAACwC,eAAe,CAACH,IAAI,CAAC,CACjC,MAAQ,CACN,GAAG1C,KAAK,CACRsB,MACF,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAwB,YAAY,CAAGA,CAAC9C,KAAK,CAAEC,IAAI,GAAK,CAC3C,KAAM,CAAE8C,IAAK,CAAC,CAAG9C,IAAI,CACrB,KAAM,CAAEI,WAAW,CAAEgB,YAAa,CAAC,CAAGrB,KAAK,CAC3C,GAAI,CAAA0C,IAAI,CAAG,CAAC,CACZ,GAAIK,IAAI,CAAG,CAAC,CAAEL,IAAI,CAAG,CAAC,CAAC,IAClB,IAAIK,IAAI,CAAG,IAAI,CAAEL,IAAI,CAAG,IAAI,CACjC;AAAA,IACK,IAAIK,IAAI,EAAI,CAAC,EAAIA,IAAI,EAAI,IAAI,CAAEL,IAAI,CAAGM,QAAQ,CAACD,IAAI,CAAC,CACzD,KAAM,CAAAzB,MAAM,CAAG,CAAC,GAAGtB,KAAK,CAACsB,MAAM,CAAC,CAChCA,MAAM,CAACD,YAAY,CAAC,CAAG,CAAE,GAAGrB,KAAK,CAACsB,MAAM,CAACD,YAAY,CAAE,CAAC,CACxDC,MAAM,CAACD,YAAY,CAAC,CAAC0B,IAAI,CAAGL,IAAI,CAChCrC,WAAW,CAAC4C,cAAc,CAACP,IAAI,CAAC,CAChC,MAAQ,CACN,GAAG1C,KAAK,CACRsB,MACF,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAA4B,cAAc,CAAIlD,KAAK,EAAK,CACvC,KAAM,CAAEmD,SAAU,CAAC,CAAGnD,KAAK,CAC3B,MAAQ,CACN,GAAGA,KAAK,CACRmD,SAAS,CAAE,CAACA,SACd,CAAC,CACH,CAAC,CAED,MAAO,MAAM,CAAAC,cAAc,CAAGA,CAACpD,KAAK,CAAEC,IAAI,GAAK,CAC7C,KAAM,CAAEoD,mBAAoB,CAAC,CAAGpD,IAAI,CACpC,MAAO,CAAE,GAAGD,KAAK,CAAEqD,mBAAoB,CAAC,CAC1C,CAAC,CAED,MAAO,MAAM,CAAAC,eAAe,CAAGA,CAACtD,KAAK,CAAEC,IAAI,GAAK,CAC9C,KAAM,CAAEmB,KAAK,CAAEmC,QAAS,CAAC,CAAGtD,IAAI,CAChC,KAAM,CAAAqB,MAAM,CAAG,CAAC,GAAGtB,KAAK,CAACsB,MAAM,CAAC,CAChCA,MAAM,CAACF,KAAK,CAAC,CAAG,CACd,GAAGpB,KAAK,CAACsB,MAAM,CAACF,KAAK,CAAC,CACtBmC,QACF,CAAC,CACD,MAAO,CAAE,GAAGvD,KAAK,CAAEsB,MAAO,CAAC,CAC7B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}