{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/move/TargetAttributes.tsx\";\nimport React, { useRef, forwardRef, useImperativeHandle } from 'react';\nimport { WarningOutlined } from '@ant-design/icons';\nimport EasyForm from '@appen/easy-form';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { setInitialValues } from '../../utils';\nconst TargetAttributes = forwardRef(({\n  category,\n  categoryItem,\n  instanceId,\n  checkFinished\n}, ref) => {\n  const dom = useRef(null);\n  const instanceConfig = store.ontology.getLabelConfigFromCategory(category);\n  const itemConfig = store.ontology.getLabelConfigFromCategoryItem(category, categoryItem);\n  useImperativeHandle(ref, () => ({\n    getButtons: () => {\n      var _dom$current;\n      return (_dom$current = dom.current) === null || _dom$current === void 0 ? void 0 : _dom$current.querySelectorAll('button.easyform-btn.form-btn-submit');\n    }\n  }));\n  let instanceInitialValues;\n  if (instanceId !== 'new') {\n    const instance = store.instance.getInstanceById(instanceId);\n    instanceInitialValues = instance === null || instance === void 0 ? void 0 : instance.attributes;\n  }\n  if (!instanceConfig && !itemConfig) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: dom,\n    className: \"target-attributes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(WarningOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }), i18n.translate('MOVE_ATTRIBUTES_CONFLICT')), instanceConfig && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attributes-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attributes-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, category), /*#__PURE__*/React.createElement(EasyForm, {\n    theme: \"dark\",\n    fields: setInitialValues(instanceConfig.fields, instanceInitialValues),\n    conditions: instanceConfig.conditions,\n    effects: instanceConfig.effects,\n    rules: instanceConfig.rules,\n    onSubmit: values => checkFinished({\n      type: 'instance',\n      values\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  })), itemConfig && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attributes-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attributes-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, categoryItem), /*#__PURE__*/React.createElement(EasyForm, {\n    theme: \"dark\",\n    fields: itemConfig.fields,\n    conditions: itemConfig.conditions,\n    effects: itemConfig.effects,\n    rules: itemConfig.rules,\n    onSubmit: values => checkFinished({\n      type: 'instance-item',\n      values\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  })));\n});\nexport default TargetAttributes;","map":{"version":3,"names":["React","useRef","forwardRef","useImperativeHandle","WarningOutlined","EasyForm","store","i18n","setInitialValues","TargetAttributes","category","categoryItem","instanceId","checkFinished","ref","dom","instanceConfig","ontology","getLabelConfigFromCategory","itemConfig","getLabelConfigFromCategoryItem","getButtons","_dom$current","current","querySelectorAll","instanceInitialValues","instance","getInstanceById","attributes","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","translate","theme","fields","conditions","effects","rules","onSubmit","values","type"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/move/TargetAttributes.tsx"],"sourcesContent":["import React, { useRef, forwardRef, useImperativeHandle } from 'react';\nimport { WarningOutlined } from '@ant-design/icons';\nimport EasyForm from '@appen/easy-form';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { setInitialValues } from '../../utils';\n\nexport interface TargetAttributesHandle {\n  getButtons: () => NodeList;\n}\n\ninterface TargetAttributesProps {\n  category: string;\n  categoryItem: string;\n  instanceId: string;\n  checkFinished: (args: { type: string; values: any }) => void;\n}\n\nconst TargetAttributes = forwardRef<TargetAttributesHandle, TargetAttributesProps>(({\n  category,\n  categoryItem,\n  instanceId,\n  checkFinished,\n}, ref: any) => {\n  const dom = useRef<HTMLDivElement>(null);\n  const instanceConfig = store.ontology.getLabelConfigFromCategory(category);\n  const itemConfig = store.ontology.getLabelConfigFromCategoryItem(category, categoryItem);\n\n  useImperativeHandle(ref, () => ({\n    getButtons: () => dom.current?.querySelectorAll('button.easyform-btn.form-btn-submit'),\n  }));\n\n  let instanceInitialValues;\n  if (instanceId !== 'new') {\n    const instance = store.instance.getInstanceById(instanceId);\n    instanceInitialValues = instance?.attributes;\n  }\n\n  if (!instanceConfig && !itemConfig) {\n    return null;\n  }\n  return (\n    <div ref={dom} className=\"target-attributes\">\n      <div className=\"warning\">\n        <WarningOutlined />\n        {i18n.translate('MOVE_ATTRIBUTES_CONFLICT')}\n      </div>\n      {instanceConfig && (\n        <div className=\"attributes-container\">\n          <div className=\"attributes-container__title\">{category}</div>\n          <EasyForm\n            theme=\"dark\"\n            fields={setInitialValues(instanceConfig.fields, instanceInitialValues)}\n            conditions={instanceConfig.conditions}\n            effects={instanceConfig.effects}\n            rules={instanceConfig.rules}\n            onSubmit={(values) => checkFinished({ type: 'instance', values })}\n          />\n        </div>\n      )}\n      {itemConfig && (\n        <div className=\"attributes-container\">\n          <div className=\"attributes-container__title\">{categoryItem}</div>\n          <EasyForm\n            theme=\"dark\"\n            fields={itemConfig.fields}\n            conditions={itemConfig.conditions}\n            effects={itemConfig.effects}\n            rules={itemConfig.rules}\n            onSubmit={(values) => checkFinished({ type: 'instance-item', values })}\n          />\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default TargetAttributes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}