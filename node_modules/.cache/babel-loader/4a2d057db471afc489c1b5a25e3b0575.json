{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/ItemLabel.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewResult } from '../../types';\nconst itemKeySeparator = '|S|';\nconst frameLabelHeight = 20;\nconst ItemLabel = observer(({\n  itemKey\n}) => {\n  const {\n    selectedInstances,\n    selectedInstanceItems,\n    getInstanceById\n  } = store.instance;\n  const {\n    currentCamera,\n    isSingleCamera,\n    cameraNames,\n    setCamera\n  } = store.frame;\n  const [instanceId, instanceItemId, camera] = itemKey.split(itemKeySeparator);\n  const cameraIndex = cameraNames.indexOf(camera);\n  const instance = getInstanceById(instanceId);\n  const instanceItem = ((instance === null || instance === void 0 ? void 0 : instance.items) || [])[instanceItemId];\n  const instanceSelected = selectedInstances.indexOf(instance) >= 0;\n  const instanceItemSelected = selectedInstanceItems.indexOf(instanceItem) >= 0 && camera === currentCamera;\n  let reviewResult;\n  if (instanceItem) {\n    reviewResult = store.review.getReviewResultForInstanceItem(instanceItem, camera);\n  } else if (instance) {\n    const isSingle = instance.isSingle && isSingleCamera;\n    if (isSingle) {\n      reviewResult = store.review.getReviewResultForInstanceItem(Object.values(instance.items)[0], camera);\n    } else if (!instanceSelected) {\n      reviewResult = store.review.getReviewResultForInstance(instance);\n    }\n  }\n  if (reviewResult && reviewResult !== ReviewResult.REJECT && store.isRework) {\n    reviewResult = undefined;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: itemKey,\n    className: cx(`frame-item-label frame-item-instance-${instanceId} ${instanceItem ? `frame-item-instance-item-${instanceItem.id}` : ''}`, {\n      dark: !instance || instanceSelected,\n      selected: instanceItemSelected || instanceSelected && !instanceItem && selectedInstanceItems.filter(item => item.instance === instance).length <= 0\n    }),\n    style: {\n      height: frameLabelHeight\n    },\n    onClick: () => {\n      if (instanceItem) {\n        if (currentCamera !== camera) {\n          setCamera(camera);\n        }\n        store.instance.selectInstanceItem(instanceItem);\n      } else if (instance) {\n        store.instance.selectInstance(instance);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, !instance && i18n.translate('PROGRESS_GLOBAL_LABEL'), instance && !instanceItem && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-item-label-dot\",\n    style: {\n      backgroundColor: instance.categoryRef.displayColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }), instance.label), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('frame-item-label-review', {\n      approved: reviewResult === ReviewResult.APPROVE,\n      rejected: reviewResult === ReviewResult.REJECT,\n      pending: reviewResult === ReviewResult.SUSPEND\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  })), instance && instanceItem && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame-item-label-sub\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, `${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraIndex + 1}`}`, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('frame-item-label-review', {\n      approved: reviewResult === ReviewResult.APPROVE,\n      rejected: reviewResult === ReviewResult.REJECT,\n      pending: reviewResult === ReviewResult.SUSPEND\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }))));\n});\nexport default ItemLabel;","map":{"version":3,"names":["React","observer","cx","store","i18n","ReviewResult","itemKeySeparator","frameLabelHeight","ItemLabel","itemKey","selectedInstances","selectedInstanceItems","getInstanceById","instance","currentCamera","isSingleCamera","cameraNames","setCamera","frame","instanceId","instanceItemId","camera","split","cameraIndex","indexOf","instanceItem","items","instanceSelected","instanceItemSelected","reviewResult","review","getReviewResultForInstanceItem","isSingle","Object","values","getReviewResultForInstance","REJECT","isRework","undefined","createElement","key","className","id","dark","selected","filter","item","length","style","height","onClick","selectInstanceItem","selectInstance","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","translate","Fragment","backgroundColor","categoryRef","displayColor","label","approved","APPROVE","rejected","pending","SUSPEND","itemLabel"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/frames/ItemLabel.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewResult } from '../../types';\n\nconst itemKeySeparator = '|S|';\nconst frameLabelHeight = 20;\n\ninterface ItemLabelProps {\n  itemKey: string;\n}\n\nconst ItemLabel = observer(({ itemKey }: ItemLabelProps) => {\n  const { selectedInstances, selectedInstanceItems, getInstanceById } = store.instance;\n  const { currentCamera, isSingleCamera, cameraNames, setCamera } = store.frame;\n\n  const [instanceId, instanceItemId, camera] = itemKey.split(itemKeySeparator);\n  const cameraIndex = cameraNames.indexOf(camera);\n  const instance = getInstanceById(instanceId);\n  const instanceItem = (instance?.items || [])[instanceItemId];\n  const instanceSelected = selectedInstances.indexOf(instance) >= 0;\n  const instanceItemSelected = selectedInstanceItems.indexOf(instanceItem) >= 0 && camera === currentCamera;\n\n  let reviewResult;\n  if (instanceItem) {\n    reviewResult = store.review.getReviewResultForInstanceItem(instanceItem, camera);\n  } else if (instance) {\n    const isSingle = instance.isSingle && isSingleCamera;\n    if (isSingle) {\n      reviewResult = store.review.getReviewResultForInstanceItem(Object.values(instance.items)[0], camera);\n    } else if (!instanceSelected) {\n      reviewResult = store.review.getReviewResultForInstance(instance);\n    }\n  }\n\n  if (reviewResult && reviewResult !== ReviewResult.REJECT && store.isRework) {\n    reviewResult = undefined;\n  }\n\n  return (\n    <div\n      key={itemKey}\n      className={cx(`frame-item-label frame-item-instance-${instanceId} ${instanceItem ? `frame-item-instance-item-${instanceItem.id}` : ''}`, {\n        dark: !instance || instanceSelected,\n        selected: instanceItemSelected || (instanceSelected && !instanceItem && selectedInstanceItems.filter((item) => item.instance === instance).length <= 0),\n      })}\n      style={{ height: frameLabelHeight }}\n      onClick={() => {\n        if (instanceItem) {\n          if (currentCamera !== camera) {\n            setCamera(camera);\n          }\n          store.instance.selectInstanceItem(instanceItem);\n        } else if (instance) {\n          store.instance.selectInstance(instance);\n        }\n      }}\n    >\n      {!instance && i18n.translate('PROGRESS_GLOBAL_LABEL')}\n      {instance && !instanceItem && (\n        <>\n          <div>\n            <div\n              className=\"frame-item-label-dot\"\n              style={{ backgroundColor: instance.categoryRef.displayColor }}\n            />\n            {instance.label}\n          </div>\n          <div\n            className={cx('frame-item-label-review', {\n              approved: reviewResult === ReviewResult.APPROVE,\n              rejected: reviewResult === ReviewResult.REJECT,\n              pending: reviewResult === ReviewResult.SUSPEND,\n            })}\n          />\n        </>\n      )}\n      {instance && instanceItem && (\n        <>\n          <div />\n          <div className=\"frame-item-label-sub\">\n            {`${instanceItem.itemLabel}${isSingleCamera ? '' : `-C${cameraIndex + 1}`}`}\n            <div\n              className={cx('frame-item-label-review', {\n                approved: reviewResult === ReviewResult.APPROVE,\n                rejected: reviewResult === ReviewResult.REJECT,\n                pending: reviewResult === ReviewResult.SUSPEND,\n              })}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n});\n\nexport default ItemLabel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}