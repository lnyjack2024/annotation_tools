{"ast":null,"code":"import Mousetrap from 'mousetrap';\nimport store from './store/RootStore';\nimport { ReviewMode } from './types';\nimport { ToolMode } from '../../utils/tool-mode';\nMousetrap.addKeycodes({\n  188: 'comma',\n  190: 'period',\n  191: 'slash'\n});\nexport default function bindKeyboardEvents(ctx) {\n  // default keyboard events\n  Mousetrap.bind('comma', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.prev(1);\n    }\n    return false;\n  });\n  Mousetrap.bind('period', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.next(1);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+comma', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.prev(10);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+period', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.next(10);\n    }\n    return false;\n  });\n  Mousetrap.bind('slash', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.togglePlaying();\n    }\n    return false;\n  });\n  Mousetrap.bind('space', () => {\n    if (!store.frame.loading) {\n      store.toggleAddMode();\n    }\n    return false;\n  });\n  Mousetrap.bind('tab', () => {\n    if (!store.frame.loading && !store.config.isAnyModalOpened) {\n      store.instance.selectInstance(null);\n    }\n    return false;\n  });\n  Mousetrap.bind(['del', 'backspace'], () => {\n    store.delete();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+s', 'command+s'], () => {\n    ctx.save();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+z', 'command+z'], () => {\n    store.undo.undo();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+y', 'command+y'], () => {\n    store.undo.redo();\n    return false;\n  });\n  Mousetrap.bind('shift+c', () => {\n    var _store$jobProxy;\n    if (((_store$jobProxy = store.jobProxy) === null || _store$jobProxy === void 0 ? void 0 : _store$jobProxy.toolMode) === ToolMode.QA_RW) {\n      store.config.setReviewMode(store.config.reviewMode === ReviewMode.LABELING ? ReviewMode.REVIEW : ReviewMode.LABELING);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+l', () => {\n    store.config.setCrossLineVisible(!store.config.crossLineVisible);\n    return false;\n  });\n  Mousetrap.bind('o', () => {\n    store.openAttributesModal();\n    return false;\n  });\n  Mousetrap.bind(['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'], e => {\n    const num = Number(e.key);\n    if (!Number.isNaN(num)) {\n      store.activateTool(num);\n    }\n    return false;\n  });\n  Mousetrap.bind('s', () => {\n    store.shape.subtractPolygon();\n    return false;\n  });\n  Mousetrap.bind('m', () => {\n    store.shape.merge();\n    return false;\n  });\n  Mousetrap.bind('up', () => {\n    store.moveFront();\n    return false;\n  });\n  Mousetrap.bind('shift+up', () => {\n    store.moveFront(true);\n    return false;\n  });\n  Mousetrap.bind('down', () => {\n    store.moveBack();\n    return false;\n  });\n  Mousetrap.bind('shift+down', () => {\n    store.moveBack(true);\n    return false;\n  });\n  Mousetrap.bind('t', () => {\n    store.shape.updateConfig({\n      fill: !store.shape.config.fill\n    });\n    return false;\n  });\n  return () => {\n    Mousetrap.unbind('comma');\n    Mousetrap.unbind('period');\n    Mousetrap.unbind('shift+comma');\n    Mousetrap.unbind('shift+period');\n    Mousetrap.unbind('slash');\n    Mousetrap.unbind('space');\n    Mousetrap.unbind('tab');\n    Mousetrap.unbind(['del', 'backspace']);\n    Mousetrap.unbind(['ctrl+s', 'command+s']);\n    Mousetrap.unbind(['ctrl+z', 'command+z']);\n    Mousetrap.unbind(['ctrl+y', 'command+y']);\n    Mousetrap.unbind('shift+c');\n    Mousetrap.unbind('shift+l');\n    Mousetrap.unbind('o');\n    Mousetrap.unbind(['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']);\n    Mousetrap.unbind('s');\n    Mousetrap.unbind('m');\n    Mousetrap.unbind('up');\n    Mousetrap.unbind('shift+up');\n    Mousetrap.unbind('down');\n    Mousetrap.unbind('shift+down');\n    Mousetrap.unbind('t');\n  };\n}","map":{"version":3,"names":["Mousetrap","store","ReviewMode","ToolMode","addKeycodes","bindKeyboardEvents","ctx","bind","config","isAnyModalOpened","frame","prev","next","togglePlaying","loading","toggleAddMode","instance","selectInstance","delete","save","undo","redo","_store$jobProxy","jobProxy","toolMode","QA_RW","setReviewMode","reviewMode","LABELING","REVIEW","setCrossLineVisible","crossLineVisible","openAttributesModal","e","num","Number","key","isNaN","activateTool","shape","subtractPolygon","merge","moveFront","moveBack","updateConfig","fill","unbind"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/keyboard-events.ts"],"sourcesContent":["import Mousetrap from 'mousetrap';\nimport { VideoTracking } from './index';\nimport store from './store/RootStore';\nimport { ReviewMode } from './types';\nimport { ToolMode } from '../../utils/tool-mode';\n\nMousetrap.addKeycodes({\n  188: 'comma',\n  190: 'period',\n  191: 'slash',\n});\n\nexport default function bindKeyboardEvents(ctx: VideoTracking) {\n  // default keyboard events\n  Mousetrap.bind('comma', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.prev(1);\n    }\n    return false;\n  });\n  Mousetrap.bind('period', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.next(1);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+comma', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.prev(10);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+period', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.next(10);\n    }\n    return false;\n  });\n  Mousetrap.bind('slash', () => {\n    if (!store.config.isAnyModalOpened) {\n      store.frame.togglePlaying();\n    }\n    return false;\n  });\n  Mousetrap.bind('space', () => {\n    if (!store.frame.loading) {\n      store.toggleAddMode();\n    }\n    return false;\n  });\n  Mousetrap.bind('tab', () => {\n    if (!store.frame.loading && !store.config.isAnyModalOpened) {\n      store.instance.selectInstance(null);\n    }\n    return false;\n  });\n  Mousetrap.bind(['del', 'backspace'], () => {\n    store.delete();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+s', 'command+s'], () => {\n    ctx.save();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+z', 'command+z'], () => {\n    store.undo.undo();\n    return false;\n  });\n  Mousetrap.bind(['ctrl+y', 'command+y'], () => {\n    store.undo.redo();\n    return false;\n  });\n  Mousetrap.bind('shift+c', () => {\n    if (store.jobProxy?.toolMode === ToolMode.QA_RW) {\n      store.config.setReviewMode(store.config.reviewMode === ReviewMode.LABELING ? ReviewMode.REVIEW : ReviewMode.LABELING);\n    }\n    return false;\n  });\n  Mousetrap.bind('shift+l', () => {\n    store.config.setCrossLineVisible(!store.config.crossLineVisible);\n    return false;\n  });\n  Mousetrap.bind('o', () => {\n    store.openAttributesModal();\n    return false;\n  });\n  Mousetrap.bind(['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'], (e) => {\n    const num = Number(e.key);\n    if (!Number.isNaN(num)) {\n      store.activateTool(num);\n    }\n    return false;\n  });\n  Mousetrap.bind('s', () => {\n    store.shape.subtractPolygon();\n    return false;\n  });\n  Mousetrap.bind('m', () => {\n    store.shape.merge();\n    return false;\n  });\n  Mousetrap.bind('up', () => {\n    store.moveFront();\n    return false;\n  });\n  Mousetrap.bind('shift+up', () => {\n    store.moveFront(true);\n    return false;\n  });\n  Mousetrap.bind('down', () => {\n    store.moveBack();\n    return false;\n  });\n  Mousetrap.bind('shift+down', () => {\n    store.moveBack(true);\n    return false;\n  });\n  Mousetrap.bind('t', () => {\n    store.shape.updateConfig({ fill: !store.shape.config.fill });\n    return false;\n  });\n\n  return () => {\n    Mousetrap.unbind('comma');\n    Mousetrap.unbind('period');\n    Mousetrap.unbind('shift+comma');\n    Mousetrap.unbind('shift+period');\n    Mousetrap.unbind('slash');\n    Mousetrap.unbind('space');\n    Mousetrap.unbind('tab');\n    Mousetrap.unbind(['del', 'backspace']);\n    Mousetrap.unbind(['ctrl+s', 'command+s']);\n    Mousetrap.unbind(['ctrl+z', 'command+z']);\n    Mousetrap.unbind(['ctrl+y', 'command+y']);\n    Mousetrap.unbind('shift+c');\n    Mousetrap.unbind('shift+l');\n    Mousetrap.unbind('o');\n    Mousetrap.unbind(['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']);\n    Mousetrap.unbind('s');\n    Mousetrap.unbind('m');\n    Mousetrap.unbind('up');\n    Mousetrap.unbind('shift+up');\n    Mousetrap.unbind('down');\n    Mousetrap.unbind('shift+down');\n    Mousetrap.unbind('t');\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}