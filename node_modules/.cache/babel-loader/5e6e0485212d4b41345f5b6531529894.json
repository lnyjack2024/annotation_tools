{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/components/Helper/AttributesPannel.tsx\";\nimport React, { useState, useEffect, useImperativeHandle, forwardRef, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { Input } from 'antd';\nimport rootStore from '../../store/RootStore';\nimport './AttributesPannel.scss';\nconst AttributesPannel = forwardRef(({\n  instance\n}, ref) => {\n  const [label, setLabel] = useState('');\n  const [text, setText] = useState('');\n  const inputRef = useRef(null);\n  useEffect(() => {\n    init();\n  }, [instance]);\n  useImperativeHandle(ref, () => ({\n    handleFocus\n  }));\n\n  // input text\n  const handleChangeValue = e => {\n    e.persist();\n    if (instance) {\n      const {\n        value\n      } = e.target;\n      const {\n        setUpdatedInstances\n      } = rootStore.instance;\n      const newInstance = {\n        [instance.id]: {\n          ...instance,\n          text: value\n        }\n      };\n      setText(value);\n      setUpdatedInstances(newInstance);\n    }\n  };\n  const init = () => {\n    let str = '';\n    if (instance) {\n      const {\n        selectedNumber\n      } = rootStore.instance;\n      str = `${instance.category} ${selectedNumber}`;\n      setLabel(str);\n      setText(instance.text || '');\n    }\n  };\n  const handleFocus = () => {\n    var _inputRef$current;\n    (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"praat-attributes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"praat-attributes-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, label), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"praat-attributes-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    ref: inputRef,\n    value: text,\n    onChange: handleChangeValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  })));\n});\nexport default observer(AttributesPannel);","map":{"version":3,"names":["React","useState","useEffect","useImperativeHandle","forwardRef","useRef","observer","Input","rootStore","AttributesPannel","instance","ref","label","setLabel","text","setText","inputRef","init","handleFocus","handleChangeValue","e","persist","value","target","setUpdatedInstances","newInstance","id","str","selectedNumber","category","_inputRef$current","current","focus","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onChange"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/components/Helper/AttributesPannel.tsx"],"sourcesContent":["import React, { useState, useEffect, useImperativeHandle, forwardRef, useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { Input } from 'antd';\nimport rootStore from '../../store/RootStore';\nimport { Instance } from '../../types';\nimport './AttributesPannel.scss';\n\ninterface AttributesProps {\n  instance: Instance | null;\n}\n\nexport interface AttributesHandle {\n  handleFocus: () => void;\n}\n\nconst AttributesPannel = forwardRef<AttributesHandle, AttributesProps>(({ instance }: AttributesProps, ref: any) => {\n  const [label, setLabel] = useState('');\n  const [text, setText] = useState('');\n  const inputRef = useRef<Input>(null);\n\n  useEffect(() => {\n    init();\n  }, [instance]);\n\n  useImperativeHandle(ref, () => ({\n    handleFocus,\n  }));\n\n  // input text\n  const handleChangeValue = (e: any) => {\n    e.persist();\n    if (instance) {\n      const { value } = e.target;\n      const { setUpdatedInstances } = rootStore.instance;\n      const newInstance: {[id:string]: Instance} = {\n        [instance.id]: {\n          ...instance,\n          text: value,\n        }\n      };\n      setText(value);\n      setUpdatedInstances(newInstance);\n    }\n  };\n\n  const init = () => {\n    let str = '';\n    if (instance) {\n      const { selectedNumber } = rootStore.instance;\n      str = `${instance.category} ${selectedNumber}`;\n      setLabel(str);\n      setText(instance.text || '');\n    }\n  };\n\n  const handleFocus = () => {\n    inputRef.current?.focus();\n  };\n\n  return (\n    <div className=\"praat-attributes\">\n      <div className=\"praat-attributes-label\">\n        {label}\n      </div>\n      <div className=\"praat-attributes-value\">\n        <Input ref={inputRef} value={text} onChange={handleChangeValue} />\n      </div>\n    </div>\n  );\n});\n\nexport default observer(AttributesPannel);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}