{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/InstancePanel.tsx\";\nimport React, { useEffect, useRef } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport SidebarCategory from './SidebarCategory';\n// import { Search, Statistics, PlusCircleOutlined } from '../../../common/icons';\nimport store from '../../store/RootStore';\nconst InstancePanel = observer(() => {\n  const scroller = useRef(null);\n  const scrollTo = instanceId => {\n    const dom = document.getElementById(`sidebar-category-instance-${instanceId}`);\n    if (dom && scroller.current) {\n      const {\n        top: sTop,\n        bottom: sBottom\n      } = scroller.current.getBoundingClientRect();\n      const {\n        top: dTop,\n        bottom: dBottom\n      } = dom.getBoundingClientRect();\n      if (dTop < sTop || dBottom > sBottom) {\n        scroller.current.scrollBy({\n          top: dTop - sTop\n        });\n      }\n    }\n  };\n  useEffect(() => {\n    const disposer = reaction(() => store.instance.selectedInstances, () => {\n      const {\n        selectedInstances\n      } = store.instance;\n      if (selectedInstances.length > 0) {\n        scrollTo(selectedInstances[0].id);\n      }\n    });\n    return () => {\n      disposer();\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: scroller,\n    className: \"scroller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, store.ontology.categories.map(category => /*#__PURE__*/React.createElement(SidebarCategory, {\n    key: category.className,\n    category: category,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 52\n    }\n  })));\n});\nexport default InstancePanel;","map":{"version":3,"names":["React","useEffect","useRef","reaction","observer","SidebarCategory","store","InstancePanel","scroller","scrollTo","instanceId","dom","document","getElementById","current","top","sTop","bottom","sBottom","getBoundingClientRect","dTop","dBottom","scrollBy","disposer","instance","selectedInstances","length","id","createElement","ref","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ontology","categories","map","category","key"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/InstancePanel.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport SidebarCategory from './SidebarCategory';\n// import { Search, Statistics, PlusCircleOutlined } from '../../../common/icons';\nimport store from '../../store/RootStore';\n\nconst InstancePanel = observer(() => {\n  const scroller = useRef<HTMLDivElement>(null);\n\n  const scrollTo = (instanceId: string) => {\n    const dom = document.getElementById(`sidebar-category-instance-${instanceId}`);\n    if (dom && scroller.current) {\n      const { top: sTop, bottom: sBottom } = scroller.current.getBoundingClientRect();\n      const { top: dTop, bottom: dBottom } = dom.getBoundingClientRect();\n      if (dTop < sTop || dBottom > sBottom) {\n        scroller.current.scrollBy({ top: dTop - sTop });\n      }\n    }\n  };\n\n  useEffect(() => {\n    const disposer = reaction(\n      () => store.instance.selectedInstances,\n      () => {\n        const { selectedInstances } = store.instance;\n        if (selectedInstances.length > 0) {\n          scrollTo(selectedInstances[0].id);\n        }\n      },\n    );\n    return () => {\n      disposer();\n    };\n  }, []);\n\n  return (\n    <div ref={scroller} className=\"scroller\">\n      {/* <div className=\"actions\">\n        <div><Search /></div>\n        <div><Statistics /></div>\n        <div><PlusCircleOutlined /></div>\n      </div> */}\n      {store.ontology.categories.map((category) => <SidebarCategory key={category.className} category={category} />)}\n    </div>\n  );\n});\n\nexport default InstancePanel;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,SAASC,QAAQ,QAAQ,MAAM;AAC/B,SAASC,QAAQ,QAAQ,YAAY;AACrC,OAAOC,eAAe,MAAM,mBAAmB;AAC/C;AACA,OAAOC,KAAK,MAAM,uBAAuB;AAEzC,MAAMC,aAAa,GAAGH,QAAQ,CAAC,MAAM;EACnC,MAAMI,QAAQ,GAAGN,MAAM,CAAiB,IAAI,CAAC;EAE7C,MAAMO,QAAQ,GAAIC,UAAkB,IAAK;IACvC,MAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAc,CAAC,6BAA6BH,UAAU,EAAE,CAAC;IAC9E,IAAIC,GAAG,IAAIH,QAAQ,CAACM,OAAO,EAAE;MAC3B,MAAM;QAAEC,GAAG,EAAEC,IAAI;QAAEC,MAAM,EAAEC;MAAQ,CAAC,GAAGV,QAAQ,CAACM,OAAO,CAACK,qBAAqB,CAAC,CAAC;MAC/E,MAAM;QAAEJ,GAAG,EAAEK,IAAI;QAAEH,MAAM,EAAEI;MAAQ,CAAC,GAAGV,GAAG,CAACQ,qBAAqB,CAAC,CAAC;MAClE,IAAIC,IAAI,GAAGJ,IAAI,IAAIK,OAAO,GAAGH,OAAO,EAAE;QACpCV,QAAQ,CAACM,OAAO,CAACQ,QAAQ,CAAC;UAAEP,GAAG,EAAEK,IAAI,GAAGJ;QAAK,CAAC,CAAC;MACjD;IACF;EACF,CAAC;EAEDf,SAAS,CAAC,MAAM;IACd,MAAMsB,QAAQ,GAAGpB,QAAQ,CACvB,MAAMG,KAAK,CAACkB,QAAQ,CAACC,iBAAiB,EACtC,MAAM;MACJ,MAAM;QAAEA;MAAkB,CAAC,GAAGnB,KAAK,CAACkB,QAAQ;MAC5C,IAAIC,iBAAiB,CAACC,MAAM,GAAG,CAAC,EAAE;QAChCjB,QAAQ,CAACgB,iBAAiB,CAAC,CAAC,CAAC,CAACE,EAAE,CAAC;MACnC;IACF,CACF,CAAC;IACD,OAAO,MAAM;MACXJ,QAAQ,CAAC,CAAC;IACZ,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEvB,KAAA,CAAA4B,aAAA;IAAKC,GAAG,EAAErB,QAAS;IAACsB,SAAS,EAAC,UAAU;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAMrC9B,KAAK,CAAC+B,QAAQ,CAACC,UAAU,CAACC,GAAG,CAAEC,QAAQ,iBAAKxC,KAAA,CAAA4B,aAAA,CAACvB,eAAe;IAACoC,GAAG,EAAED,QAAQ,CAACV,SAAU;IAACU,QAAQ,EAAEA,QAAS;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,CAC1G,CAAC;AAEV,CAAC,CAAC;AAEF,eAAe7B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module"}