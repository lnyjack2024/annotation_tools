{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/keypoint/components/SideMenus.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from 'react-contextmenu';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport cx from 'classnames';\nimport { observer } from 'mobx-react';\nimport { LandmarkEditType, DELETETYPE } from '../types';\nimport RectangleFillIcon from '../../common/icons/RectangleFill';\nimport KeypointsIcon from '../../common/icons/Keypoints';\nimport DownArrow from '../../common/icons/DownArrow';\nimport rootStore from '../store/RootStore';\nimport formatMessage from '../locales';\nimport { DotFill, PlusCircleStroke } from '../../common/icons';\nimport './SideMenus.scss';\nvar MENUTYPE = /*#__PURE__*/function (MENUTYPE) {\n  MENUTYPE[\"DELETE\"] = \"delete\";\n  return MENUTYPE;\n}(MENUTYPE || {});\nconst SideMenus = ({\n  canvas,\n  readonly,\n  loading,\n  currentFrame,\n  selectedOntologyGroup,\n  instances,\n  selectedInstance,\n  instancesReviewsMap,\n  selectGroup,\n  addInstance,\n  addInstanceInFrame,\n  removeInstanceFrames\n}) => {\n  const [unfoldOntology, setUnfoldOntology] = useState([]);\n  const [delIsntace, setDelInstance] = useState();\n  useEffect(() => {\n    if (selectedInstance) {\n      if (unfoldOntology.length === 0) {\n        setUnfoldOntology([selectedInstance.category]);\n      } else {\n        const newUnfoldOntology = [...unfoldOntology];\n        const index = newUnfoldOntology.findIndex(v => v === selectedInstance.category);\n        if (index < 0) {\n          newUnfoldOntology.push(selectedInstance.category);\n          setUnfoldOntology(newUnfoldOntology);\n        }\n      }\n    }\n  }, [selectedInstance]);\n  const handleUnFold = name => {\n    const newUnfoldOntology = [...unfoldOntology];\n    const index = newUnfoldOntology.findIndex(v => v === name);\n    if (index >= 0) {\n      newUnfoldOntology.splice(index, 1);\n    } else {\n      newUnfoldOntology.push(name);\n    }\n    setUnfoldOntology(newUnfoldOntology);\n  };\n  const menuHandleClick = type => {\n    if (!delIsntace) return;\n    removeInstanceFrames(type, delIsntace.instance, delIsntace.name);\n    setDelInstance(null);\n  };\n  const Instances = ({\n    ontologyInstances,\n    ontology,\n    isUnfold\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"instances-container\",\n    style: isUnfold ? {\n      height: 'auto'\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, ontologyInstances.map(instance => {\n    let empty = true;\n    for (let i = 0; i < instance.children.length; i += 1) {\n      const currentframeGroup = instance.children[i].frames[currentFrame];\n      if (currentframeGroup && currentframeGroup.count > 0) {\n        empty = false;\n        break;\n      }\n    }\n    const instanceCanAdd = instance.notEmpty > 0 && empty && !readonly;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instance\",\n      key: instance.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ContextMenuTrigger, {\n      id: MENUTYPE.DELETE,\n      holdToDisplay: 1000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx('instance-label', {\n        empty: instanceCanAdd\n      }),\n      onContextMenu: e => {\n        if (readonly) {\n          e.preventDefault();\n        } else {\n          setDelInstance({\n            instance\n          });\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, `${ontology.display_name || ontology.class_name} ${instance.number}${!instance.notEmpty ? '（empty）' : ''}`), instanceCanAdd && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"add right\",\n      onClick: () => {\n        addInstanceInFrame(instance.id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(PlusCircleStroke, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instance-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }, ontology.children.map((group, n) => {\n      var _instancesReviewsMap$, _instancesReviewsMap$2, _instancesReviewsMap$3, _instancesReviewsMap$4;\n      const child = instance.children.find(g => g.name === group.name);\n      const groupIsEmpty = !child || child.frames[currentFrame] === undefined || child.frames[currentFrame].count === 0;\n      const canAdd = child && child.count > 0 && groupIsEmpty && !readonly || false;\n      return /*#__PURE__*/React.createElement(ContextMenuTrigger, {\n        id: MENUTYPE.DELETE,\n        holdToDisplay: 1000,\n        key: instance.id + group.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: cx('instance-group-item', {\n          empty: canAdd\n        }),\n        style: selectedInstance && selectedInstance.id === instance.id && selectedOntologyGroup === group.name ? {\n          backgroundColor: '#4A90E2'\n        } : {},\n        onClick: () => {\n          if ((instance.id !== (selectedInstance === null || selectedInstance === void 0 ? void 0 : selectedInstance.id) || group.name !== selectedOntologyGroup) && !loading) {\n            selectGroup(instance.id, group.name);\n          }\n        },\n        onContextMenu: () => {\n          if (!readonly) {\n            setDelInstance({\n              instance,\n              name: group.name\n            });\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 23\n        }\n      }, group.type === LandmarkEditType.KEYPOINT ? /*#__PURE__*/React.createElement(KeypointsIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 69\n        }\n      }) : /*#__PURE__*/React.createElement(RectangleFillIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 89\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 23\n        }\n      }, group.display_name || group.name), canAdd ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"add right\",\n        onClick: e => {\n          e.preventDefault();\n          addInstanceInFrame(instance.id, group.name);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(PlusCircleStroke, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 31\n        }\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: cx('dot', `${(_instancesReviewsMap$ = instancesReviewsMap[instance.id]) === null || _instancesReviewsMap$ === void 0 ? void 0 : (_instancesReviewsMap$2 = _instancesReviewsMap$[currentFrame]) === null || _instancesReviewsMap$2 === void 0 ? void 0 : (_instancesReviewsMap$3 = _instancesReviewsMap$2.children) === null || _instancesReviewsMap$3 === void 0 ? void 0 : (_instancesReviewsMap$4 = _instancesReviewsMap$3[group.name]) === null || _instancesReviewsMap$4 === void 0 ? void 0 : _instancesReviewsMap$4.result}`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 31\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"number\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 31\n        }\n      }, instance.children[n].frames[currentFrame] && instance.children[n].frames[currentFrame].count || 0))));\n    })));\n  }));\n  const Ontology = ({\n    ontology,\n    ontologyInstances,\n    canAdd\n  }) => {\n    const isUnfold = unfoldOntology && unfoldOntology.findIndex(v => v === ontology.class_name) >= 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ontology-item\",\n      key: ontology.class_name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ontology-item-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"label-color\",\n      style: {\n        backgroundColor: ontology.display_color\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"label-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, ontology.display_name || ontology.class_name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, ontologyInstances.length), /*#__PURE__*/React.createElement(\"span\", {\n      className: cx('label-add', {\n        disabled: !canAdd\n      }),\n      onClick: () => {\n        if (canAdd) {\n          addInstance(ontology.class_name);\n          if (!unfoldOntology.find(v => v === ontology.class_name)) {\n            handleUnFold(ontology.class_name);\n          }\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PlusCircleOutlined, {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: cx('label-arrow', {\n        unfold: isUnfold\n      }),\n      onClick: () => {\n        handleUnFold(ontology.class_name);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DownArrow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(Instances, {\n      currentFrame: currentFrame,\n      ontologyInstances: ontologyInstances,\n      ontology: ontology,\n      isUnfold: isUnfold,\n      selectedOntologyGroup: selectedOntologyGroup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }));\n  };\n  const Missings = observer(() => {\n    if (!rootStore.review.showReviews) {\n      return null;\n    }\n    const {\n      drawMode,\n      missingName,\n      missingReviews,\n      selectedMissingReview\n    } = rootStore.review;\n    const currentFrameMissingReviews = missingReviews.filter(r => r.frameIndex === currentFrame);\n    const canAdd = !drawMode && (!selectedMissingReview || selectedMissingReview.data !== undefined);\n    const isUnfold = unfoldOntology.findIndex(i => i === rootStore.review.missingName) >= 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ontology-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ontology-item-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"label-color\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"label-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }\n    }, \"Missing\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }\n    }, currentFrameMissingReviews.length), /*#__PURE__*/React.createElement(\"span\", {\n      className: cx('label-add', {\n        disabled: !canAdd\n      }),\n      onClick: () => {\n        if (canAdd) {\n          rootStore.review.addMissingReview(currentFrame);\n          if (!isUnfold) {\n            handleUnFold(missingName);\n          }\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PlusCircleOutlined, {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: cx('label-arrow', {\n        unfold: isUnfold\n      }),\n      onClick: () => {\n        handleUnFold(missingName);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DownArrow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instances-container\",\n      style: {\n        ...(isUnfold && {\n          height: 'auto'\n        })\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }\n    }, currentFrameMissingReviews.map(r => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instance missing\",\n      key: r.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instance-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 17\n      }\n    }, `Missing ${r.number}`)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instance-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx('instance-group-item missing', {\n        selected: (selectedMissingReview === null || selectedMissingReview === void 0 ? void 0 : selectedMissingReview.id) === r.id\n      }),\n      onClick: () => {\n        var _r$data;\n        rootStore.review.setSelectedMissingReview(r);\n        if ((_r$data = r.data) === null || _r$data === void 0 ? void 0 : _r$data.position) {\n          canvas === null || canvas === void 0 ? void 0 : canvas.fitPoint(r.data.position);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(DotFill, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 19\n      }\n    }, \"Dot\")))))));\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"side-menus-container\",\n    onContextMenu: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"side-menus-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Missings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 9\n    }\n  }), rootStore.ontology.ontology.map(ontologyItem => {\n    const ontologyInstances = instances.filter(instance => instance.category === ontologyItem.class_name);\n    return /*#__PURE__*/React.createElement(Ontology, {\n      key: ontologyItem.class_name,\n      ontology: ontologyItem,\n      ontologyInstances: ontologyInstances,\n      canAdd: ontologyInstances.filter(instance => !instance.notEmpty).length <= 0 && !readonly,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 13\n      }\n    });\n  })), !readonly && /*#__PURE__*/React.createElement(ContextMenu, {\n    id: MENUTYPE.DELETE,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }\n  }, Object.keys(DELETETYPE).map(v => /*#__PURE__*/React.createElement(MenuItem, {\n    key: v,\n    onClick: () => {\n      menuHandleClick(v);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 13\n    }\n  }, formatMessage(`DELETE_${v}_FRAMES`)))));\n};\nexport default SideMenus;","map":{"version":3,"names":["React","useState","useEffect","ContextMenu","MenuItem","ContextMenuTrigger","PlusCircleOutlined","cx","observer","LandmarkEditType","DELETETYPE","RectangleFillIcon","KeypointsIcon","DownArrow","rootStore","formatMessage","DotFill","PlusCircleStroke","MENUTYPE","SideMenus","canvas","readonly","loading","currentFrame","selectedOntologyGroup","instances","selectedInstance","instancesReviewsMap","selectGroup","addInstance","addInstanceInFrame","removeInstanceFrames","unfoldOntology","setUnfoldOntology","delIsntace","setDelInstance","length","category","newUnfoldOntology","index","findIndex","v","push","handleUnFold","name","splice","menuHandleClick","type","instance","Instances","ontologyInstances","ontology","isUnfold","createElement","className","style","height","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","empty","i","children","currentframeGroup","frames","count","instanceCanAdd","notEmpty","key","id","DELETE","holdToDisplay","onContextMenu","e","preventDefault","display_name","class_name","number","onClick","group","n","_instancesReviewsMap$","_instancesReviewsMap$2","_instancesReviewsMap$3","_instancesReviewsMap$4","child","find","g","groupIsEmpty","undefined","canAdd","backgroundColor","KEYPOINT","result","Ontology","display_color","disabled","unfold","Missings","review","showReviews","drawMode","missingName","missingReviews","selectedMissingReview","currentFrameMissingReviews","filter","r","frameIndex","data","addMissingReview","selected","_r$data","setSelectedMissingReview","position","fitPoint","ontologyItem","Object","keys"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/keypoint/components/SideMenus.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ContextMenu, MenuItem, ContextMenuTrigger } from 'react-contextmenu';\nimport { PlusCircleOutlined } from '@ant-design/icons';\nimport cx from 'classnames';\nimport { observer } from 'mobx-react';\nimport { InstanceAct, LandmarkEditType, DELETETYPE, Frame } from '../types';\nimport RectangleFillIcon from '../../common/icons/RectangleFill';\nimport KeypointsIcon from '../../common/icons/Keypoints';\nimport DownArrow from '../../common/icons/DownArrow';\nimport { InstancesReviewsMap } from '../index';\nimport rootStore from '../store/RootStore';\nimport { OntologyChild, OntologyItem } from '../store/OntologyStore';\nimport formatMessage from '../locales';\nimport { DotFill, PlusCircleStroke } from '../../common/icons';\nimport './SideMenus.scss';\nimport Canvas from './Canvas';\n\nenum MENUTYPE {\n  DELETE = 'delete'\n}\n\nexport interface SideMenusProps {\n  canvas: Canvas | null;\n  readonly: boolean;\n  loading: boolean;\n  currentFrame: number;\n  instances: InstanceAct[];\n  instancesFrames: {\n    [id: string]: {\n      [frameIndex: number]: boolean;\n    }\n  },\n  selectedInstance?: InstanceAct;\n  selectedOntologyGroup: string;\n  instancesReviewsMap: InstancesReviewsMap;\n  addInstance: (ontologyName: string) => void;\n  selectGroup: (groupId: string, name: string) => void;\n  addInstanceInFrame: (instanceId: string, groupName?: string) => void;\n  removeInstanceFrames: (type: DELETETYPE, instance: InstanceAct, name?: string) => void;\n}\n\ntype OntologyProps = {\n  ontology: OntologyItem;\n  ontologyInstances: InstanceAct[];\n  canAdd: boolean;\n};\n\ntype InstanceProps = {\n  currentFrame: number;\n  ontologyInstances: InstanceAct[];\n  ontology: OntologyItem;\n  isUnfold: boolean;\n  selectedOntologyGroup: string;\n};\n\ninterface DelInstance {\n  instance: InstanceAct,\n  name?: string\n}\n\nconst SideMenus = ({\n  canvas,\n  readonly,\n  loading,\n  currentFrame,\n  selectedOntologyGroup,\n  instances,\n  selectedInstance,\n  instancesReviewsMap,\n  selectGroup,\n  addInstance,\n  addInstanceInFrame,\n  removeInstanceFrames\n}: SideMenusProps) => {\n  const [unfoldOntology, setUnfoldOntology] = useState<string[]>([]);\n  const [delIsntace, setDelInstance] = useState<DelInstance | null>();\n\n  useEffect(() => {\n    if (selectedInstance) {\n      if (unfoldOntology.length === 0) {\n        setUnfoldOntology([selectedInstance.category]);\n      } else {\n        const newUnfoldOntology = [...unfoldOntology];\n        const index = newUnfoldOntology.findIndex((v) => v === selectedInstance.category);\n        if (index < 0) {\n          newUnfoldOntology.push(selectedInstance.category);\n          setUnfoldOntology(newUnfoldOntology);\n        }\n      }\n    }\n  }, [selectedInstance]);\n  const handleUnFold = (name: string) => {\n    const newUnfoldOntology = [...unfoldOntology];\n    const index = newUnfoldOntology.findIndex((v) => v === name);\n    if (index >= 0) {\n      newUnfoldOntology.splice(index, 1);\n    } else {\n      newUnfoldOntology.push(name);\n    }\n    setUnfoldOntology(newUnfoldOntology);\n  };\n\n  const menuHandleClick = (type: DELETETYPE) => {\n    if (!delIsntace) return;\n    removeInstanceFrames(type, delIsntace.instance, delIsntace.name);\n    setDelInstance(null);\n  };\n\n  const Instances = ({\n    ontologyInstances,\n    ontology,\n    isUnfold\n  }: InstanceProps) => (\n    <div\n      className=\"instances-container\"\n      style={isUnfold ? { height: 'auto' } : {}}\n    >\n      {ontologyInstances.map((instance: InstanceAct) => {\n        let empty = true;\n        for (let i = 0; i < instance.children.length; i += 1) {\n          const currentframeGroup = instance.children[i].frames[currentFrame];\n          if (currentframeGroup && currentframeGroup.count > 0) {\n            empty = false;\n            break;\n          }\n        }\n        const instanceCanAdd = instance.notEmpty > 0 && empty && !readonly;\n        return (\n          <div className=\"instance\" key={instance.id}>\n            <ContextMenuTrigger\n              id={MENUTYPE.DELETE}\n              holdToDisplay={1000}\n            >\n              <div\n                className={cx('instance-label', { empty: instanceCanAdd })}\n                onContextMenu={(e) => {\n                  if (readonly) {\n                    e.preventDefault();\n                  } else {\n                    setDelInstance({ instance });\n                  }\n                }}\n              >\n                <span>{`${ontology.display_name || ontology.class_name} ${instance.number}${!instance.notEmpty ? '（empty）' : ''}`}</span>\n                {instanceCanAdd && (\n                  <span\n                    className=\"add right\"\n                    onClick={() => { addInstanceInFrame(instance.id); }}\n                  >\n                    <PlusCircleStroke />\n                  </span>\n                )}\n              </div>\n            </ContextMenuTrigger>\n            <div className=\"instance-group\">\n              {ontology.children.map((group: OntologyChild, n: number) => {\n                const child = instance.children.find((g) => g.name === group.name);\n                const groupIsEmpty = !child || (child.frames[currentFrame] === undefined || child.frames[currentFrame].count === 0);\n                const canAdd = child && child.count > 0 && groupIsEmpty && !readonly || false;\n                return (\n                  <ContextMenuTrigger id={MENUTYPE.DELETE} holdToDisplay={1000} key={instance.id + group.name}>\n                    <div\n                      className={cx('instance-group-item', { empty: canAdd })}\n                      style={selectedInstance && selectedInstance.id === instance.id && selectedOntologyGroup === group.name ? { backgroundColor: '#4A90E2' } : {}}\n                      onClick={() => {\n                        if ((instance.id !== selectedInstance?.id || group.name !== selectedOntologyGroup) && !loading) {\n                          selectGroup(instance.id, group.name);\n                        }\n                      }}\n                      onContextMenu={() => {\n                        if (!readonly) {\n                          setDelInstance({ instance, name: group.name });\n                        }\n                      }}\n                    >\n                      <div className=\"icon\">\n                        {group.type === LandmarkEditType.KEYPOINT ? <KeypointsIcon /> : <RectangleFillIcon />}\n                      </div>\n                      <div className=\"name\">{group.display_name || group.name}</div>\n                      {\n                        canAdd ?\n                          (\n                            <div\n                              className=\"add right\"\n                              onClick={(e) => {\n                                e.preventDefault();\n                                addInstanceInFrame(instance.id, group.name);\n                              }}\n                            >\n                              <PlusCircleStroke />\n                            </div>\n                          ) : (\n                            <div className=\"right\">\n                              <span className={cx('dot', `${instancesReviewsMap[instance.id]?.[currentFrame]?.children?.[group.name]?.result}`)} />\n                              <span className=\"number\">{(instance.children[n].frames[currentFrame] && (instance.children[n].frames[currentFrame] as Frame).count) || 0}</span>\n                            </div>\n                          )\n                      }\n                    </div>\n                  </ContextMenuTrigger>\n                );\n              })}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n\n  const Ontology = ({\n    ontology,\n    ontologyInstances,\n    canAdd\n  }: OntologyProps) => {\n    const isUnfold = unfoldOntology && unfoldOntology.findIndex((v: string) => v === ontology.class_name) >= 0;\n    return (\n      <div className=\"ontology-item\" key={ontology.class_name}>\n        <div className=\"ontology-item-label\">\n          <div className=\"label-left\">\n            <span className=\"label-color\" style={{ backgroundColor: ontology.display_color }} />\n            <span className=\"label-name\">{ontology.display_name || ontology.class_name}</span>\n          </div>\n          <div className=\"label-right\">\n            <span className=\"number\">{ontologyInstances.length}</span>\n            <span\n              className={cx('label-add', { disabled: !canAdd })}\n              onClick={() => {\n                if (canAdd) {\n                  addInstance(ontology.class_name);\n                  if (!unfoldOntology.find((v) => v === ontology.class_name)) {\n                    handleUnFold(ontology.class_name);\n                  }\n                }\n              }}\n            >\n              <PlusCircleOutlined className=\"icon\" />\n            </span>\n            <span className={cx('label-arrow', { unfold: isUnfold })} onClick={() => { handleUnFold(ontology.class_name); }}>\n              <DownArrow />\n            </span>\n          </div>\n        </div>\n        <Instances\n          currentFrame={currentFrame}\n          ontologyInstances={ontologyInstances}\n          ontology={ontology}\n          isUnfold={isUnfold}\n          selectedOntologyGroup={selectedOntologyGroup}\n        />\n      </div>\n    );\n  };\n\n  const Missings = observer(() => {\n    if (!rootStore.review.showReviews) {\n      return null;\n    }\n\n    const { drawMode, missingName, missingReviews, selectedMissingReview } = rootStore.review;\n    const currentFrameMissingReviews = missingReviews.filter((r) => r.frameIndex === currentFrame);\n    const canAdd = !drawMode && (!selectedMissingReview || selectedMissingReview.data !== undefined);\n    const isUnfold = unfoldOntology.findIndex((i) => i === rootStore.review.missingName) >= 0;\n    return (\n      <div className=\"ontology-item\">\n        <div className=\"ontology-item-label\">\n          <div className=\"label-left\">\n            <span className=\"label-color\" />\n            <span className=\"label-name\">Missing</span>\n          </div>\n          <div className=\"label-right\">\n            <span className=\"number\">{currentFrameMissingReviews.length}</span>\n            <span\n              className={cx('label-add', { disabled: !canAdd })}\n              onClick={() => {\n                if (canAdd) {\n                  rootStore.review.addMissingReview(currentFrame);\n                  if (!isUnfold) {\n                    handleUnFold(missingName);\n                  }\n                }\n              }}\n            >\n              <PlusCircleOutlined className=\"icon\" />\n            </span>\n            <span\n              className={cx('label-arrow', { unfold: isUnfold })}\n              onClick={() => {\n                handleUnFold(missingName);\n              }}\n            >\n              <DownArrow />\n            </span>\n          </div>\n        </div>\n        <div\n          className=\"instances-container\"\n          style={{\n            ...isUnfold && { height: 'auto' },\n          }}\n        >\n          {currentFrameMissingReviews.map((r) => (\n            <div className=\"instance missing\" key={r.id}>\n              <div className=\"instance-label\">\n                <span>{`Missing ${r.number}`}</span>\n              </div>\n              <div className=\"instance-group\">\n                <div\n                  className={cx('instance-group-item missing', {\n                    selected: selectedMissingReview?.id === r.id,\n                  })}\n                  onClick={() => {\n                    rootStore.review.setSelectedMissingReview(r);\n                    if (r.data?.position) {\n                      canvas?.fitPoint(r.data.position);\n                    }\n                  }}\n                >\n                  <div className=\"icon\">\n                    <DotFill />\n                  </div>\n                  <div className=\"name\">Dot</div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  });\n\n  return (\n    <div\n      className=\"side-menus-container\"\n      onContextMenu={(e) => e.preventDefault()}\n    >\n      <div className=\"side-menus-box\">\n        <Missings />\n        {rootStore.ontology.ontology.map((ontologyItem: OntologyItem) => {\n          const ontologyInstances = instances.filter((instance) => instance.category === ontologyItem.class_name);\n          return (\n            <Ontology\n              key={ontologyItem.class_name}\n              ontology={ontologyItem}\n              ontologyInstances={ontologyInstances}\n              canAdd={ontologyInstances.filter((instance) => !instance.notEmpty).length <= 0 && !readonly}\n            />\n          );\n        })}\n      </div>\n      {!readonly && (\n        <ContextMenu id={MENUTYPE.DELETE}>\n          {Object.keys(DELETETYPE).map((v) => (\n            <MenuItem key={v} onClick={() => { menuHandleClick(v as DELETETYPE); }}>{formatMessage(`DELETE_${v}_FRAMES`)}</MenuItem>\n          ))}\n        </ContextMenu>\n      )}\n    </div>\n  );\n};\n\nexport default SideMenus;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}