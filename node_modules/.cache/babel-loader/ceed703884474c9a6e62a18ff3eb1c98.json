{"ast":null,"code":"import React from'react';import{observer}from'mobx-react';import{toJS}from'mobx';import cx from'classnames';import ChatItem,{ChatItemType}from'../../../common/llm/chat/ChatItem';import{Sortable}from'../../../common/icons';import store from'../../store';const Answer=observer(_ref=>{var _store$selectedAnswer;let{draggableProvided,draggableSnapshot,index,answer}=_ref;const selected=answer.id===((_store$selectedAnswer=store.selectedAnswer)===null||_store$selectedAnswer===void 0?void 0:_store$selectedAnswer.id);const valueEditable=!store.readonly&&(!answer.original||store.editable);const rankEditable=!store.readonly&&store.ranking;return/*#__PURE__*/React.createElement(ChatItem,{dragging:store.isDraggingAnswer,draggableProvided:draggableProvided,draggableSnapshot:draggableSnapshot,type:ChatItemType.A,label:\"A\",value:toJS(answer.value),onValueChange:value=>store.updateAnswer(answer,value),originalValue:toJS(answer.originalValue),error:selected&&store.hasError,selected:selected,onSelect:()=>store.selectAnswer(answer),valueEditable:valueEditable,valueEditing:selected&&store.isEditingAnswer,onValueEdit:()=>store.editAnswer(answer),rankingType:store.rankingType,rankingOptions:toJS(store.rankingOptions),rankEditable:rankEditable,rankEditing:selected&&store.isRankingAnswer,onRankEdit:()=>store.rankAnswer(answer),rank:toJS(answer.rank),onRankChange:rank=>store.saveRank(answer,rank),attributesEditable:!store.readonly,itemAttributesConfig:store.itemAttributesConfig,attributesEditing:selected&&store.isItemAttributesEditing,attributes:toJS(answer.attributes),onItemAttributesEdit:()=>store.onItemAttributesEdit(answer),onItemAttributesChange:attributes=>store.saveItemAttributes(answer,attributes),onItemAttributesDelete:()=>store.deleteItemAttributes(answer),prefix:/*#__PURE__*/React.createElement(\"div\",Object.assign({},draggableProvided.dragHandleProps,{className:cx('chat-item-sorter',{sortable:store.sortable})}),store.sortable&&/*#__PURE__*/React.createElement(\"div\",{className:\"chat-item-sorter-handle\"},/*#__PURE__*/React.createElement(Sortable,null)),/*#__PURE__*/React.createElement(\"div\",null,\"A \".concat(index+1)))});});export default Answer;","map":{"version":3,"names":["React","observer","toJS","cx","ChatItem","ChatItemType","Sortable","store","Answer","_ref","_store$selectedAnswer","draggableProvided","draggableSnapshot","index","answer","selected","id","selectedAnswer","valueEditable","readonly","original","editable","rankEditable","ranking","createElement","dragging","isDraggingAnswer","type","A","label","value","onValueChange","updateAnswer","originalValue","error","hasError","onSelect","selectAnswer","valueEditing","isEditingAnswer","onValueEdit","editAnswer","rankingType","rankingOptions","rankEditing","isRankingAnswer","onRankEdit","rankAnswer","rank","onRankChange","saveRank","attributesEditable","itemAttributesConfig","attributesEditing","isItemAttributesEditing","attributes","onItemAttributesEdit","onItemAttributesChange","saveItemAttributes","onItemAttributesDelete","deleteItemAttributes","prefix","Object","assign","dragHandleProps","className","sortable","concat"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/question-answering/components/answers/Answer.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport cx from 'classnames';\nimport type { DraggableProvided, DraggableStateSnapshot } from 'react-beautiful-dnd';\nimport ChatItem, { ChatItemType } from '../../../common/llm/chat/ChatItem';\nimport { Sortable } from '../../../common/icons';\nimport MAnswer from '../../models/Answer';\nimport store from '../../store';\n\ninterface AnswerProps {\n  draggableProvided: DraggableProvided;\n  draggableSnapshot: DraggableStateSnapshot;\n  index: number;\n  answer: MAnswer;\n}\n\nconst Answer: React.FC<AnswerProps> = observer(({\n  draggableProvided,\n  draggableSnapshot,\n  index,\n  answer,\n}) => {\n  const selected = answer.id === store.selectedAnswer?.id;\n  const valueEditable = !store.readonly && (!answer.original || store.editable);\n  const rankEditable = !store.readonly && store.ranking;\n\n  return (\n    <ChatItem\n      dragging={store.isDraggingAnswer}\n      draggableProvided={draggableProvided}\n      draggableSnapshot={draggableSnapshot}\n      type={ChatItemType.A}\n      label=\"A\"\n      value={toJS(answer.value)}\n      onValueChange={(value) => store.updateAnswer(answer, value)}\n      originalValue={toJS(answer.originalValue)}\n      error={selected && store.hasError}\n      selected={selected}\n      onSelect={() => store.selectAnswer(answer)}\n      valueEditable={valueEditable}\n      valueEditing={selected && store.isEditingAnswer}\n      onValueEdit={() => store.editAnswer(answer)}\n      rankingType={store.rankingType}\n      rankingOptions={toJS(store.rankingOptions)}\n      rankEditable={rankEditable}\n      rankEditing={selected && store.isRankingAnswer}\n      onRankEdit={() => store.rankAnswer(answer)}\n      rank={toJS(answer.rank)}\n      onRankChange={(rank) => store.saveRank(answer, rank)}\n      attributesEditable={!store.readonly}\n      itemAttributesConfig={store.itemAttributesConfig}\n      attributesEditing={selected && store.isItemAttributesEditing}\n      attributes={toJS(answer.attributes)}\n      onItemAttributesEdit={() => store.onItemAttributesEdit(answer)}\n      onItemAttributesChange={(attributes) => store.saveItemAttributes(answer, attributes)}\n      onItemAttributesDelete={() => store.deleteItemAttributes(answer)}\n      prefix={(\n        <div\n          {...draggableProvided.dragHandleProps}\n          className={cx('chat-item-sorter', {\n            sortable: store.sortable,\n          })}\n        >\n          {store.sortable && (\n            <div className=\"chat-item-sorter-handle\">\n              <Sortable />\n            </div>\n          )}\n          <div>\n            {`A ${index + 1}`}\n          </div>\n        </div>\n      )}\n    />\n  );\n});\n\nexport default Answer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}