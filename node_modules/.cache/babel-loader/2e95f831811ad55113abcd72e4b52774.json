{"ast":null,"code":"import React,{useMemo}from'react';import{observer}from'mobx-react';import cx from'classnames';import hexToRgba from'hex-to-rgba';import{MissingIcon}from'../../../common/icons';import{TAG,ReviewMode}from'../../types';import KeysTransform from'./const';import{generateConfigKeyByKeys}from'../../utils/helper';import{isQATag}from'../../store/tag_mode';const ToolItem=observer(_ref=>{let{ontologyItem,setCurrentBrush,currentBrush,ontologiesStatusMap,showReview,reviewable,isRework,reviewMode,type}=_ref;const isSelected=useMemo(()=>currentBrush&&generateConfigKeyByKeys(ontologyItem.keys)===generateConfigKeyByKeys(currentBrush.keys),[currentBrush,ontologyItem]);const statusInfo=useMemo(()=>{const statusItem=ontologiesStatusMap===null||ontologiesStatusMap===void 0?void 0:ontologiesStatusMap.get(generateConfigKeyByKeys(ontologyItem.keys));if(!statusItem){return{tagCount:undefined,rejectCount:undefined};}if(statusItem.isCollapse){return{tagCount:statusItem.tagCountContainChildren,rejectCount:statusItem.rejectCountContainChildren};}return{tagCount:statusItem.tagCount,rejectCount:statusItem.rejectCount};},[ontologiesStatusMap,ontologyItem]);return/*#__PURE__*/React.createElement(\"div\",{className:cx('tool-item',{selected:isSelected}),style:{backgroundColor:isSelected&&ontologyItem.color?hexToRgba(ontologyItem.color,0.3):'#4C5366'},onClick:()=>{if((reviewable||isRework)&&isQATag(ontologyItem.type)&&reviewMode!==ReviewMode.REVIEW){return;}setCurrentBrush(ontologyItem);}},/*#__PURE__*/React.createElement(\"div\",{className:\"tool-item-left\"},KeysTransform[type]===TAG.LABEL_QA?/*#__PURE__*/React.createElement(\"span\",{className:\"tool-item-left-icon\"},/*#__PURE__*/React.createElement(MissingIcon,null)):/*#__PURE__*/React.createElement(\"span\",{className:\"tool-item-left-color\",style:{background:ontologyItem.color}}),/*#__PURE__*/React.createElement(\"span\",{className:\"tool-item-left-text\"},' ',ontologyItem.displayName||ontologyItem.text)),statusInfo&&/*#__PURE__*/React.createElement(\"div\",{className:\"tool-item-right\"},showReview&&!isQATag(ontologyItem.type)&&statusInfo.rejectCount?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{className:\"tool-count-reviewed\"},statusInfo.rejectCount),\"/\"):null,statusInfo.tagCount));});export default ToolItem;","map":{"version":3,"names":["React","useMemo","observer","cx","hexToRgba","MissingIcon","TAG","ReviewMode","KeysTransform","generateConfigKeyByKeys","isQATag","ToolItem","_ref","ontologyItem","setCurrentBrush","currentBrush","ontologiesStatusMap","showReview","reviewable","isRework","reviewMode","type","isSelected","keys","statusInfo","statusItem","get","tagCount","undefined","rejectCount","isCollapse","tagCountContainChildren","rejectCountContainChildren","createElement","className","selected","style","backgroundColor","color","onClick","REVIEW","LABEL_QA","background","displayName","text","Fragment"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/editable-text/components/toolBar/toolItem.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport hexToRgba from 'hex-to-rgba';\nimport { MissingIcon } from '../../../common/icons';\nimport { TAG, ReviewMode } from '../../types';\nimport KeysTransform from './const';\nimport { generateConfigKeyByKeys } from '../../utils/helper';\nimport { isQATag } from '../../store/tag_mode';\n\nconst ToolItem = observer(({ ontologyItem, setCurrentBrush, currentBrush, ontologiesStatusMap, showReview, reviewable, isRework, reviewMode, type }) => {\n  const isSelected = useMemo(() => currentBrush && generateConfigKeyByKeys(ontologyItem.keys) === generateConfigKeyByKeys(currentBrush.keys), [currentBrush, ontologyItem]);\n  const statusInfo = useMemo(() => {\n    const statusItem = ontologiesStatusMap?.get(generateConfigKeyByKeys(ontologyItem.keys));\n    if (!statusItem) {\n      return {\n        tagCount: undefined,\n        rejectCount: undefined\n      };\n    }\n    if (statusItem.isCollapse) {\n      return {\n        tagCount: statusItem.tagCountContainChildren,\n        rejectCount: statusItem.rejectCountContainChildren\n      };\n    }\n    return {\n      tagCount: statusItem.tagCount,\n      rejectCount: statusItem.rejectCount\n    };\n  }, [ontologiesStatusMap, ontologyItem]);\n\n  return (\n    <div\n      className={cx('tool-item', { selected: isSelected })}\n      style={{ backgroundColor: isSelected && ontologyItem.color ? hexToRgba(ontologyItem.color, 0.3) : '#4C5366' }}\n      onClick={() => {\n        if ((reviewable || isRework) && isQATag(ontologyItem.type) && reviewMode !== ReviewMode.REVIEW) {\n          return;\n        }\n        setCurrentBrush(ontologyItem);\n      }}\n    >\n      <div className=\"tool-item-left\">\n        {KeysTransform[type] === TAG.LABEL_QA ?\n          (<span className=\"tool-item-left-icon\"><MissingIcon /></span>) :\n          (<span className=\"tool-item-left-color\" style={{ background: ontologyItem.color }} />)}\n        <span className=\"tool-item-left-text\">\n          {' '}\n          {ontologyItem.displayName || ontologyItem.text}\n        </span>\n      </div>\n      {statusInfo && (\n      <div className=\"tool-item-right\">\n        {\n          showReview && !isQATag(ontologyItem.type) && statusInfo.rejectCount\n            ? (\n              <>\n                <span className=\"tool-count-reviewed\">\n                  {statusInfo.rejectCount}\n                </span>\n                /\n              </>\n            )\n            : null\n        }\n\n        {statusInfo.tagCount }\n      </div>\n      )}\n    </div>\n  );\n});\n\nexport default ToolItem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}