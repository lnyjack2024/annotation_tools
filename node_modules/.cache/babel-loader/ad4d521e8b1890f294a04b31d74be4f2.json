{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/modal/Modal.tsx\";\nimport React from 'react';\nimport cx from 'classnames';\nimport Draggable from 'react-draggable';\nimport { CloseOutlined } from '@ant-design/icons';\nimport './Modal.scss';\nconst getPosition = dragId => {\n  try {\n    const position = JSON.parse(localStorage.getItem(dragId || 'modal-posistion') || '{}');\n    return {\n      x: position.x || 0,\n      y: position.y || 0\n    };\n  } catch (error) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n};\nconst savePosition = (x, y, dragId) => {\n  localStorage.setItem(dragId || 'modal-posistion', JSON.stringify({\n    x,\n    y\n  }));\n};\nclass Modal extends React.PureComponent {\n  renderContent() {\n    const {\n      className,\n      title,\n      closable,\n      onClose,\n      children\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: `annotation-tools-modal ${className}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }\n    }, title, closable !== false && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"close\",\n      onClick: onClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CloseOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }\n    }, children));\n  }\n  render() {\n    const {\n      visible,\n      draggable,\n      dragId,\n      maskClosable,\n      onClose,\n      onMaskClick\n    } = this.props;\n    return visible && /*#__PURE__*/React.createElement(\"div\", {\n      className: cx('annotation-tools-mask', {\n        draggable\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"annotation-tools-layer\",\n      onClick: e => {\n        e.preventDefault();\n        if (onMaskClick) {\n          onMaskClick();\n        }\n        if (maskClosable && onClose) {\n          onClose();\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }), draggable ? /*#__PURE__*/React.createElement(Draggable, {\n      handle: \".title\",\n      bounds: \"parent\",\n      defaultPosition: getPosition(dragId),\n      onStop: (_, data) => savePosition(data.x, data.y, dragId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, this.renderContent()) : this.renderContent());\n  }\n}\nexport default Modal;","map":{"version":3,"names":["React","cx","Draggable","CloseOutlined","getPosition","dragId","position","JSON","parse","localStorage","getItem","x","y","error","savePosition","setItem","stringify","Modal","PureComponent","renderContent","className","title","closable","onClose","children","props","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","render","visible","draggable","maskClosable","onMaskClick","e","preventDefault","handle","bounds","defaultPosition","onStop","_","data"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/modal/Modal.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\nimport Draggable from 'react-draggable';\nimport { CloseOutlined } from '@ant-design/icons';\nimport './Modal.scss';\n\nconst getPosition = (dragId?: string) => {\n  try {\n    const position = JSON.parse(localStorage.getItem(dragId || 'modal-posistion') || '{}');\n    return { x: position.x || 0, y: position.y || 0 };\n  } catch (error) {\n    return { x: 0, y: 0 };\n  }\n};\nconst savePosition = (x: number, y: number, dragId?: string) => {\n  localStorage.setItem(dragId || 'modal-posistion', JSON.stringify({ x, y }));\n};\n\ninterface ModalProps {\n  children: React.ReactNode;\n  visible: boolean;\n  draggable?: boolean;\n  dragId?: string;\n  title?: string;\n  className?: string;\n  closable?: boolean;\n  maskClosable?: boolean;\n  onClose?: () => void;\n  onMaskClick?: () => void;\n}\n\nclass Modal extends React.PureComponent<ModalProps> {\n  renderContent() {\n    const { className, title, closable, onClose, children } = this.props;\n    return (\n      <div className={`annotation-tools-modal ${className}`}>\n        <div className=\"title\">\n          {title}\n          {closable !== false && (\n            <div className=\"close\" onClick={onClose}>\n              <CloseOutlined />\n            </div>\n          )}\n        </div>\n        <div className=\"content\">\n          {children}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { visible, draggable, dragId, maskClosable, onClose, onMaskClick } = this.props;\n    return visible && (\n      <div className={cx('annotation-tools-mask', { draggable })}>\n        <div\n          className=\"annotation-tools-layer\"\n          onClick={(e) => {\n            e.preventDefault();\n            if (onMaskClick) {\n              onMaskClick();\n            }\n            if (maskClosable && onClose) {\n              onClose();\n            }\n          }}\n        />\n        {draggable ? (\n          <Draggable\n            handle=\".title\"\n            bounds=\"parent\"\n            defaultPosition={getPosition(dragId)}\n            onStop={(_, data) => savePosition(data.x, data.y, dragId)}\n          >\n            {this.renderContent()}\n          </Draggable>\n        ) : this.renderContent()}\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}