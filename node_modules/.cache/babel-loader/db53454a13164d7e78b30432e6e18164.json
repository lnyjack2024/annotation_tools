{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/keypoint/components/Sidebar.tsx\";\nimport React from 'react';\nimport cx from 'classnames';\nimport { observer } from 'mobx-react';\nimport formatMessage from '../locales';\nimport { CategoryPathShape } from '../types';\nimport './Sidebar.scss';\nimport rootStore from '../store/RootStore';\nconst SideBar = ({\n  categories = [],\n  selectedShapeStatus,\n  categoryPathShapes = {},\n  points = {},\n  selectedPoint,\n  readonly,\n  groupReviewsMap,\n  setSelectedPoint\n}) => {\n  const renderCategory = pointCategory => {\n    const {\n      name,\n      range = [],\n      keys = []\n    } = pointCategory;\n    if (range.length < 2) {\n      return null;\n    }\n    const allPoints = Array.from({\n      length: range[1] - range[0] + 1\n    }).map((_, index) => range[0] + index);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: name,\n      className: \"pointCategory\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }\n    }, name, categoryPathShapes[`${selectedShapeStatus === null || selectedShapeStatus === void 0 ? void 0 : selectedShapeStatus.frameIndex}_${selectedShapeStatus === null || selectedShapeStatus === void 0 ? void 0 : selectedShapeStatus.instanceId}_${selectedShapeStatus === null || selectedShapeStatus === void 0 ? void 0 : selectedShapeStatus.groupName}_${name}`] === CategoryPathShape.CIRCLE ? `(${formatMessage('CATEGORY_CIRCLE')})` : ''), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"points-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }\n    }, allPoints.map(p => /*#__PURE__*/React.createElement(\"div\", {\n      key: p,\n      className: cx('point-box', groupReviewsMap && groupReviewsMap[p]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx('point', {\n        'point--key': keys.includes(p),\n        'point--empty': !points[p] || !points[p].position,\n        'point--selected': p === selectedPoint || rootStore.shape.selectedShapes.includes(p),\n        'point--invisible': points[p] && points[p].visible === false,\n        'point--disabeld': !rootStore.review.drawMode && (!points[p] || !points[p].position)\n      }),\n      onClick: () => {\n        if (!readonly) {\n          // Empty point cannot be clicked in non-drawing mode\n          if (!rootStore.review.drawMode && (!points[p] || !points[p].position)) return;\n          setSelectedPoint(p);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 15\n      }\n    }, p)))));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, categories.map(c => renderCategory(c)));\n};\nexport default observer(SideBar);","map":{"version":3,"names":["React","cx","observer","formatMessage","CategoryPathShape","rootStore","SideBar","categories","selectedShapeStatus","categoryPathShapes","points","selectedPoint","readonly","groupReviewsMap","setSelectedPoint","renderCategory","pointCategory","name","range","keys","length","allPoints","Array","from","map","_","index","createElement","key","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","frameIndex","instanceId","groupName","CIRCLE","p","includes","position","shape","selectedShapes","visible","review","drawMode","onClick","c"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/keypoint/components/Sidebar.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'classnames';\nimport { observer } from 'mobx-react';\nimport formatMessage from '../locales';\nimport { CategoryItem, CategoryPathShape, Point, ShapeInfo } from '../types';\nimport './Sidebar.scss';\nimport rootStore from '../store/RootStore';\nimport { PointReviewResult } from '../store/ReviewsStore';\n\ninterface Props {\n  categories: CategoryItem[];\n  selectedShapeStatus: ShapeInfo | undefined;\n  categoryPathShapes: {[categoryKey: string]: CategoryPathShape};\n  points: {\n    [index: number]: Point;\n  };\n  selectedPoint: number;\n  readonly: boolean;\n  groupReviewsMap?: PointReviewResult;\n  setSelectedPoint: (point: number) => void;\n}\n\nconst SideBar = ({\n  categories = [],\n  selectedShapeStatus,\n  categoryPathShapes = {},\n  points = {},\n  selectedPoint,\n  readonly,\n  groupReviewsMap,\n  setSelectedPoint,\n}: Props) => {\n  const renderCategory = (pointCategory: CategoryItem) => {\n    const { name, range = [], keys = [] } = pointCategory;\n    if (range.length < 2) {\n      return null;\n    }\n    const allPoints = Array.from({ length: range[1] - range[0] + 1 }).map((_, index) => range[0] + index);\n    return (\n      <div key={name} className=\"pointCategory\">\n        <div className=\"name\">\n          {name}\n          {categoryPathShapes[`${selectedShapeStatus?.frameIndex}_${selectedShapeStatus?.instanceId}_${selectedShapeStatus?.groupName}_${name}`] === CategoryPathShape.CIRCLE ? `(${formatMessage('CATEGORY_CIRCLE')})` : ''}\n        </div>\n        <div className=\"points-container\">\n          {allPoints.map((p) => (\n            <div\n              key={p}\n              className={cx('point-box', groupReviewsMap && groupReviewsMap[p])}\n            >\n              <div\n                className={cx('point', {\n                  'point--key': keys.includes(p),\n                  'point--empty': !points[p] || !points[p].position,\n                  'point--selected': p === selectedPoint || (rootStore.shape.selectedShapes as number[]).includes(p),\n                  'point--invisible': points[p] && points[p].visible === false,\n                  'point--disabeld': !rootStore.review.drawMode && (!points[p] || !points[p].position),\n                })}\n                onClick={() => {\n                  if (!readonly) {\n                    // Empty point cannot be clicked in non-drawing mode\n                    if (!rootStore.review.drawMode && (!points[p] || !points[p].position)) return;\n                    setSelectedPoint(p);\n                  }\n                }}\n              >\n                {p}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"sidebar\">\n      {categories.map((c) => renderCategory(c))}\n    </div>\n  );\n};\n\nexport default observer(SideBar);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}