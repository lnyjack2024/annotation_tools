{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/ValidationItem.tsx\";\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { ArrowRightOutlined } from '@ant-design/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ValidationType } from '../../types';\nconst ValidationItem = observer(({\n  warning\n}) => {\n  const {\n    type,\n    id,\n    message,\n    frames = [],\n    info = {}\n  } = warning;\n  const instanceId = info.instanceId || id;\n  const instanceItemId = info.instanceItemId;\n  const instance = store.instance.getInstanceById(instanceId);\n  let instanceItem;\n  let displayColor = '';\n  if (instance && instanceItemId) {\n    var _instanceItem;\n    instanceItem = instance.items[instanceItemId];\n    displayColor = (_instanceItem = instanceItem) === null || _instanceItem === void 0 ? void 0 : _instanceItem.categoryItemRef.displayColor;\n  }\n  const isEmptyArea = type === ValidationType.EMPTY_AREA;\n  const isFrameAttr = type === ValidationType.ATTR_EMPTY && info.type === 'frame' || type === ValidationType.FRAME_VALID_ANNOTATE;\n  const renderTitle = () => {\n    const {\n      isSingleCamera,\n      cameraNames\n    } = store.frame;\n    let cameraIndex;\n    if (!isSingleCamera && info.camera !== undefined) {\n      const index = cameraNames.indexOf(info.camera);\n      if (index >= 0) {\n        cameraIndex = index + 1;\n      }\n    }\n    if (isEmptyArea) {\n      return `${cameraIndex === undefined ? '' : `C${cameraIndex}-`}${i18n.translate('VALIDATION_TYPE_EMPTY_AREA_TITLE', {\n        values: {\n          num: info.index + 1\n        }\n      })}`;\n    }\n    if (isFrameAttr) {\n      return `${cameraIndex === undefined ? i18n.translate('VALIDATION_ATTR_EMPTY_FRAME_TITLE') : `C${cameraIndex}-${info.camera}`}`;\n    }\n    if (instanceId && instanceItemId && instanceItem) {\n      // is an instance item\n      return `${instanceItem.label}${cameraIndex === undefined ? '' : `-C${cameraIndex}`}`;\n    }\n    if (instanceId && !instanceItemId && instance) {\n      // is an instance\n      return `${instance.label}${cameraIndex === undefined ? '' : `-C${cameraIndex}`}`;\n    }\n    return i18n.translate('VALIDATION_NO_INSTANCE');\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: `${type}-${id}`,\n    className: \"warning-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"warning-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cat-color-dot\",\n    style: {\n      backgroundColor: instanceId ? displayColor : '#DC4624'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }), renderTitle()), (instance || isEmptyArea || isFrameAttr) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"action\",\n    onClick: () => {\n      if (info.camera && info.camera !== store.frame.currentCamera) {\n        store.frame.setCamera(info.camera);\n      }\n      store.frame.setFrame(frames[0]);\n      if (isEmptyArea) {\n        var _store$frame$currentC;\n        (_store$frame$currentC = store.frame.currentCameraView) === null || _store$frame$currentC === void 0 ? void 0 : _store$frame$currentC.fitShapeToView(info.bbox);\n        return;\n      }\n      if (instanceItem) {\n        store.instance.selectInstanceItem(instanceItem, true);\n      } else if (instance) {\n        store.instance.selectInstance(instance, true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ArrowRightOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"warning-msg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, message));\n});\nexport default ValidationItem;","map":{"version":3,"names":["React","observer","ArrowRightOutlined","store","i18n","ValidationType","ValidationItem","warning","type","id","message","frames","info","instanceId","instanceItemId","instance","getInstanceById","instanceItem","displayColor","_instanceItem","items","categoryItemRef","isEmptyArea","EMPTY_AREA","isFrameAttr","ATTR_EMPTY","FRAME_VALID_ANNOTATE","renderTitle","isSingleCamera","cameraNames","frame","cameraIndex","camera","undefined","index","indexOf","translate","values","num","label","createElement","key","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","backgroundColor","onClick","currentCamera","setCamera","setFrame","_store$frame$currentC","currentCameraView","fitShapeToView","bbox","selectInstanceItem","selectInstance"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/sidebar/ValidationItem.tsx"],"sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport { ArrowRightOutlined } from '@ant-design/icons';\nimport InstanceItem from '../../model/InstanceItem';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ValidationResult, ValidationType } from '../../types';\n\ninterface ValidationItemProps {\n  warning: ValidationResult;\n}\n\nconst ValidationItem = observer(({ warning }: ValidationItemProps) => {\n  const { type, id, message, frames = [], info = {} } = warning;\n  const instanceId = info.instanceId || id;\n  const instanceItemId = info.instanceItemId;\n  const instance = store.instance.getInstanceById(instanceId);\n  let instanceItem: InstanceItem;\n  let displayColor = '';\n  if (instance && instanceItemId) {\n    instanceItem = instance.items[instanceItemId];\n    displayColor = instanceItem?.categoryItemRef.displayColor;\n  }\n  const isEmptyArea = type === ValidationType.EMPTY_AREA;\n  const isFrameAttr = (type === ValidationType.ATTR_EMPTY && info.type === 'frame') || type === ValidationType.FRAME_VALID_ANNOTATE;\n\n  const renderTitle = () => {\n    const { isSingleCamera, cameraNames } = store.frame;\n    let cameraIndex;\n    if (!isSingleCamera && info.camera !== undefined) {\n      const index = cameraNames.indexOf(info.camera);\n      if (index >= 0) {\n        cameraIndex = index + 1;\n      }\n    }\n    if (isEmptyArea) {\n      return `${cameraIndex === undefined ? '' : `C${cameraIndex}-`}${i18n.translate('VALIDATION_TYPE_EMPTY_AREA_TITLE', { values: { num: info.index + 1 } })}`;\n    }\n    if (isFrameAttr) {\n      return `${cameraIndex === undefined ? i18n.translate('VALIDATION_ATTR_EMPTY_FRAME_TITLE') : `C${cameraIndex}-${info.camera}`}`;\n    }\n    if (instanceId && instanceItemId && instanceItem) {\n      // is an instance item\n      return `${instanceItem.label}${cameraIndex === undefined ? '' : `-C${cameraIndex}`}`;\n    }\n    if (instanceId && !instanceItemId && instance) {\n      // is an instance\n      return `${instance.label}${cameraIndex === undefined ? '' : `-C${cameraIndex}`}`;\n    }\n    return i18n.translate('VALIDATION_NO_INSTANCE');\n  };\n\n  return (\n    <div\n      key={`${type}-${id}`}\n      className=\"warning-item\"\n    >\n      <div className=\"warning-title\">\n        <div className=\"name\">\n          <div\n            className=\"cat-color-dot\"\n            style={{ backgroundColor: instanceId ? displayColor : '#DC4624' }}\n          />\n          {renderTitle()}\n        </div>\n        {(instance || isEmptyArea || isFrameAttr) && (\n          <div\n            className=\"action\"\n            onClick={() => {\n              if (info.camera && info.camera !== store.frame.currentCamera) {\n                store.frame.setCamera(info.camera);\n              }\n              store.frame.setFrame(frames[0]);\n              if (isEmptyArea) {\n                store.frame.currentCameraView?.fitShapeToView(info.bbox);\n                return;\n              }\n              if (instanceItem) {\n                store.instance.selectInstanceItem(instanceItem, true);\n              } else if (instance) {\n                store.instance.selectInstance(instance, true);\n              }\n            }}\n          >\n            <ArrowRightOutlined />\n          </div>\n        )}\n      </div>\n      <div className=\"warning-msg\">\n        {message}\n      </div>\n    </div>\n  );\n});\n\nexport default ValidationItem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}