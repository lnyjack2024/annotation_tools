{"ast":null,"code":"var _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/InstanceItemRelationships.tsx\";\nimport React, { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Up } from '../../../common/icons';\nimport RelationshipItem from './RelationshipItem';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './InstanceItemRelationships.scss';\nconst InstanceItemRelationships = observer(({\n  instanceItem\n}) => {\n  const [collapsed, setCollapsed] = useState(false);\n  const {\n    relationshipEnabled\n  } = store.relationship;\n  if (!relationshipEnabled) {\n    return null;\n  }\n  const {\n    currentCamera,\n    currentFrame\n  } = store.frame;\n  const cameraData = instanceItem.getCamera(currentCamera);\n  const {\n    frames = {}\n  } = cameraData || {};\n  const frameData = frames[currentFrame];\n  if (!frameData) {\n    return null;\n  }\n  const {\n    relationships\n  } = cameraData;\n  const currRelationships = relationships.filter(r => !!r.frames[currentFrame]);\n  const currRelationshipsCount = currRelationships.length;\n  const lastRelationshipsCount = relationships.filter(r => !!r.frames[currentFrame - 1]).length;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('collapse-panel relationship', {\n      collapsed\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse-panel-title space-between\",\n    onClick: () => setCollapsed(!collapsed),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse-panel-collapse-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Up, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  })), i18n.translate('RELATIONSHIP_TITLE')), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: 'rgba(255,255,255,0.6)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, i18n.translate('RELATIONSHIP_TITLE_COUNT', {\n    values: {\n      count: currRelationshipsCount\n    }\n  }))), (currRelationshipsCount > 0 || lastRelationshipsCount > 0) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"collapse-panel-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, currRelationshipsCount === 0 && lastRelationshipsCount > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  }, i18n.translate('RELATIONSHIP_LAST_FRAME_COUNT', {\n    values: {\n      count: lastRelationshipsCount\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relationship-copy-btn\",\n    onClick: () => store.relationship.copyFromLastFrame(instanceItem),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, i18n.translate('RELATIONSHIP_LAST_FRAME_COPY'))), currRelationships.map(r => /*#__PURE__*/React.createElement(RelationshipItem, {\n    key: r.id,\n    relationship: r,\n    currentInstanceItem: instanceItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }))));\n});\nexport default InstanceItemRelationships;","map":{"version":3,"names":["React","useState","observer","cx","Up","RelationshipItem","store","i18n","InstanceItemRelationships","instanceItem","collapsed","setCollapsed","relationshipEnabled","relationship","currentCamera","currentFrame","frame","cameraData","getCamera","frames","frameData","relationships","currRelationships","filter","r","currRelationshipsCount","length","lastRelationshipsCount","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","translate","style","color","values","count","Fragment","copyFromLastFrame","map","key","id","currentInstanceItem"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/attributes/InstanceItemRelationships.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport { Up } from '../../../common/icons';\nimport RelationshipItem from './RelationshipItem';\nimport InstanceItem from '../../model/InstanceItem';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport './InstanceItemRelationships.scss';\n\nconst InstanceItemRelationships = observer(({ instanceItem }: {\n  instanceItem: InstanceItem;\n}) => {\n  const [collapsed, setCollapsed] = useState(false);\n\n  const { relationshipEnabled } = store.relationship;\n  if (!relationshipEnabled) {\n    return null;\n  }\n\n  const { currentCamera, currentFrame } = store.frame;\n  const cameraData = instanceItem.getCamera(currentCamera);\n  const { frames = {} } = cameraData || {};\n  const frameData = frames[currentFrame];\n  if (!frameData) {\n    return null;\n  }\n\n  const { relationships } = cameraData;\n  const currRelationships = relationships.filter((r) => !!r.frames[currentFrame]);\n  const currRelationshipsCount = currRelationships.length;\n  const lastRelationshipsCount = relationships.filter((r) => !!r.frames[currentFrame - 1]).length;\n  return (\n    <div\n      className={cx('collapse-panel relationship', {\n        collapsed,\n      })}\n    >\n      <div\n        className=\"collapse-panel-title space-between\"\n        onClick={() => setCollapsed(!collapsed)}\n      >\n        <span>\n          <div className=\"collapse-panel-collapse-icon\">\n            <Up />\n          </div>\n          {i18n.translate('RELATIONSHIP_TITLE')}\n        </span>\n        <span style={{ color: 'rgba(255,255,255,0.6)' }}>\n          {i18n.translate('RELATIONSHIP_TITLE_COUNT', {\n            values: { count: currRelationshipsCount },\n          })}\n        </span>\n      </div>\n      {(currRelationshipsCount > 0 || lastRelationshipsCount > 0) && (\n        <div className=\"collapse-panel-content\">\n          {currRelationshipsCount === 0 && lastRelationshipsCount > 0 && (\n            <>\n              <div>{i18n.translate('RELATIONSHIP_LAST_FRAME_COUNT', { values: { count: lastRelationshipsCount } })}</div>\n              <div\n                className=\"relationship-copy-btn\"\n                onClick={() => store.relationship.copyFromLastFrame(instanceItem)}\n              >\n                {i18n.translate('RELATIONSHIP_LAST_FRAME_COPY')}\n              </div>\n            </>\n          )}\n          {currRelationships.map((r) => (\n            <RelationshipItem\n              key={r.id}\n              relationship={r}\n              currentInstanceItem={instanceItem}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default InstanceItemRelationships;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}