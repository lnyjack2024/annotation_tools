{"ast":null,"code":"import{ContentItemType}from'./types';export function contentToPlainText(content){if(!content){return'';}let result='';content.forEach(item=>{if(item.type===ContentItemType.UNSTYLED){result+=\"\".concat(item.content,\"\\n\");}});if(result.endsWith('\\n')){return result.replace(/\\n$/,'');}return result;}export function parseContent(content){if(content===undefined||content===null){// no content\nreturn[];}if(typeof content==='string'){// content is string\n// parse to one content item\nreturn[{type:ContentItemType.UNSTYLED,content}];}if(!Array.isArray(content)){// not valid content\n// set to empty\nreturn[];}// parse from legacy data if needed\nconst allTypes=Object.values(ContentItemType);const parsedContent=[];for(let i=0;i<content.length;i+=1){const item=content[i];if(item===null||item===void 0?void 0:item.insert){// legacy data\n// should be removed later\nif(typeof item.insert==='string'){parsedContent.push({type:ContentItemType.UNSTYLED,content:item.insert});}}else if(allTypes.includes(item===null||item===void 0?void 0:item.type)&&typeof item.content==='string'){parsedContent.push(item);}}return parsedContent;}export function isContentEmpty(content){return content.length===0||content.length===1&&content[0].type===ContentItemType.UNSTYLED&&content[0].content==='';}","map":{"version":3,"names":["ContentItemType","contentToPlainText","content","result","forEach","item","type","UNSTYLED","concat","endsWith","replace","parseContent","undefined","Array","isArray","allTypes","Object","values","parsedContent","i","length","insert","push","includes","isContentEmpty"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/common/llm/helper.ts"],"sourcesContent":["import { Content, ContentItemType } from './types';\n\nexport function contentToPlainText(content?: Content) {\n  if (!content) {\n    return '';\n  }\n  let result = '';\n  content.forEach((item) => {\n    if (item.type === ContentItemType.UNSTYLED) {\n      result += `${item.content}\\n`;\n    }\n  });\n  if (result.endsWith('\\n')) {\n    return result.replace(/\\n$/, '');\n  }\n  return result;\n}\n\nexport function parseContent(content: unknown): Content {\n  if (content === undefined || content === null) {\n    // no content\n    return [];\n  }\n\n  if (typeof content === 'string') {\n    // content is string\n    // parse to one content item\n    return [{\n      type: ContentItemType.UNSTYLED,\n      content,\n    }];\n  }\n\n  if (!Array.isArray(content)) {\n    // not valid content\n    // set to empty\n    return [];\n  }\n\n  // parse from legacy data if needed\n  const allTypes = Object.values(ContentItemType);\n  const parsedContent: Content = [];\n  for (let i = 0; i < content.length; i += 1) {\n    const item = content[i];\n    if (item?.insert) {\n      // legacy data\n      // should be removed later\n      if (typeof item.insert === 'string') {\n        parsedContent.push({\n          type: ContentItemType.UNSTYLED,\n          content: item.insert,\n        });\n      }\n    } else if (allTypes.includes(item?.type)\n      && typeof item.content === 'string') {\n      parsedContent.push(item);\n    }\n  }\n  return parsedContent;\n}\n\nexport function isContentEmpty(content: Content) {\n  return content.length === 0 || (\n    content.length === 1 &&\n    content[0].type === ContentItemType.UNSTYLED &&\n    content[0].content === ''\n  );\n}\n"],"mappings":"AAAA,OAAkBA,eAAe,KAAQ,SAAS,CAElD,MAAO,SAAS,CAAAC,kBAAkBA,CAACC,OAAiB,CAAE,CACpD,GAAI,CAACA,OAAO,CAAE,CACZ,MAAO,EAAE,CACX,CACA,GAAI,CAAAC,MAAM,CAAG,EAAE,CACfD,OAAO,CAACE,OAAO,CAAEC,IAAI,EAAK,CACxB,GAAIA,IAAI,CAACC,IAAI,GAAKN,eAAe,CAACO,QAAQ,CAAE,CAC1CJ,MAAM,KAAAK,MAAA,CAAOH,IAAI,CAACH,OAAO,MAAI,CAC/B,CACF,CAAC,CAAC,CACF,GAAIC,MAAM,CAACM,QAAQ,CAAC,IAAI,CAAC,CAAE,CACzB,MAAO,CAAAN,MAAM,CAACO,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAClC,CACA,MAAO,CAAAP,MAAM,CACf,CAEA,MAAO,SAAS,CAAAQ,YAAYA,CAACT,OAAgB,CAAW,CACtD,GAAIA,OAAO,GAAKU,SAAS,EAAIV,OAAO,GAAK,IAAI,CAAE,CAC7C;AACA,MAAO,EAAE,CACX,CAEA,GAAI,MAAO,CAAAA,OAAO,GAAK,QAAQ,CAAE,CAC/B;AACA;AACA,MAAO,CAAC,CACNI,IAAI,CAAEN,eAAe,CAACO,QAAQ,CAC9BL,OACF,CAAC,CAAC,CACJ,CAEA,GAAI,CAACW,KAAK,CAACC,OAAO,CAACZ,OAAO,CAAC,CAAE,CAC3B;AACA;AACA,MAAO,EAAE,CACX,CAEA;AACA,KAAM,CAAAa,QAAQ,CAAGC,MAAM,CAACC,MAAM,CAACjB,eAAe,CAAC,CAC/C,KAAM,CAAAkB,aAAsB,CAAG,EAAE,CACjC,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGjB,OAAO,CAACkB,MAAM,CAAED,CAAC,EAAI,CAAC,CAAE,CAC1C,KAAM,CAAAd,IAAI,CAAGH,OAAO,CAACiB,CAAC,CAAC,CACvB,GAAId,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgB,MAAM,CAAE,CAChB;AACA;AACA,GAAI,MAAO,CAAAhB,IAAI,CAACgB,MAAM,GAAK,QAAQ,CAAE,CACnCH,aAAa,CAACI,IAAI,CAAC,CACjBhB,IAAI,CAAEN,eAAe,CAACO,QAAQ,CAC9BL,OAAO,CAAEG,IAAI,CAACgB,MAChB,CAAC,CAAC,CACJ,CACF,CAAC,IAAM,IAAIN,QAAQ,CAACQ,QAAQ,CAAClB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEC,IAAI,CAAC,EACnC,MAAO,CAAAD,IAAI,CAACH,OAAO,GAAK,QAAQ,CAAE,CACrCgB,aAAa,CAACI,IAAI,CAACjB,IAAI,CAAC,CAC1B,CACF,CACA,MAAO,CAAAa,aAAa,CACtB,CAEA,MAAO,SAAS,CAAAM,cAAcA,CAACtB,OAAgB,CAAE,CAC/C,MAAO,CAAAA,OAAO,CAACkB,MAAM,GAAK,CAAC,EACzBlB,OAAO,CAACkB,MAAM,GAAK,CAAC,EACpBlB,OAAO,CAAC,CAAC,CAAC,CAACI,IAAI,GAAKN,eAAe,CAACO,QAAQ,EAC5CL,OAAO,CAAC,CAAC,CAAC,CAACA,OAAO,GAAK,EACxB,CACH","ignoreList":[]},"metadata":{},"sourceType":"module"}