{"ast":null,"code":"import _applyDecoratedDescriptor from \"/Users/qzheng/Documents/webroot/annotation_tools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nvar _class,\n  _jsxFileName = \"/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/components/Helper/Assist.tsx\";\nimport React from 'react';\nimport { makeObservable, computed } from 'mobx';\nimport rootStore from '../../store/RootStore';\nimport { Align, Style } from '../../types';\nimport { wrapText } from '../../utils';\nconst pitchRange = {\n  min: 75,\n  max: 500\n};\nconst intensityRange = {\n  min: 50,\n  max: 100\n};\nlet Assist = (_class = class Assist extends React.Component {\n  constructor(props) {\n    super(props);\n    this.ratio = 1;\n    this.lineWidth = 1;\n    this.canvasRef = React.createRef();\n    this.ctx = null;\n    this.setupAssistCanvas = () => {\n      this.ratio = window.devicePixelRatio;\n      const canvas = this.canvasRef.current;\n      const rect = canvas.getBoundingClientRect();\n      canvas.width = rect.width * this.ratio;\n      canvas.height = rect.height * this.ratio;\n      this.ctx = canvas.getContext('2d');\n    };\n    this.updateAssist = () => {\n      const canvas = this.canvasRef.current;\n      const rect = canvas.getBoundingClientRect();\n      canvas.width = rect.width * this.ratio;\n      canvas.height = rect.height * this.ratio;\n      this.updateLine();\n    };\n    this.updateLine = () => {\n      if (!this.ctx) return;\n      if (!this.withinRangeWidth || !this.withinRangeHeight) {\n        return;\n      }\n      const {\n        margin,\n        timelineHeight,\n        atlasHeight,\n        atlasWidth\n      } = this.props.ratioPlacement;\n      const pos = {\n        x: this.props.mousePosition.x * this.ratio,\n        y: this.props.mousePosition.y * this.ratio\n      };\n      const line1 = [];\n      const line2 = [];\n      line1.push([pos.x, 0], [pos.x, timelineHeight + atlasHeight]);\n      line2.push([margin + 1, pos.y], [margin + atlasWidth + 1, pos.y]);\n      this.ctx.setLineDash([5]);\n      this.ctx.save();\n      this.ctx.strokeStyle = Style.STROKE;\n      this.ctx.lineWidth = this.lineWidth * this.ratio;\n      this.ctx.beginPath();\n      if (line2.length === 2) {\n        this.ctx.moveTo(line1[0][0], line1[0][1]);\n        this.ctx.lineTo(line1[1][0], line1[1][1]);\n        this.ctx.moveTo(line2[0][0], line2[0][1]);\n        this.ctx.lineTo(line2[1][0], line2[1][1]);\n      }\n      this.ctx.stroke();\n      this.ctx.beginPath();\n      this.ctx.setLineDash([]);\n      this.ctx.moveTo(pos.x - 6 * this.ratio, 0);\n      this.ctx.lineTo(pos.x + 6 * this.ratio, 0);\n      this.ctx.lineTo(pos.x, timelineHeight / 3);\n      wrapText(this.ctx, rootStore.analyse.cursorTime.toFixed(6), line1[0][0] + 6, timelineHeight / 2, Align.LEFT, Style.STROKE);\n      this.ctx.closePath();\n      this.ctx.fillStyle = Style.STROKE;\n      this.ctx.fill();\n      this.drawScale();\n    };\n    this.drawScale = () => {\n      const {\n        amplitude,\n        sampleRate,\n        visible\n      } = rootStore.analyse;\n      const {\n        margin,\n        timelineHeight,\n        atlasHeight,\n        atlasWidth\n      } = this.props.ratioPlacement;\n      const fontSize = Style.FONTSIZE * this.ratio;\n      const y = this.props.mousePosition.y * this.ratio;\n      const atlasY = 1 - (y - (timelineHeight + atlasHeight / 2)) / (atlasHeight / 2);\n      // mouse move on praat atlas\n      const isOnAtlasMouseMove = atlasY > 0 && atlasY < 1;\n      // draw start x\n      const leftStart = margin - 6;\n      const halfFont = fontSize / 2;\n      // waveform curve scale\n      if (amplitude.max !== 0 && atlasY > 1 && atlasY < 2) {\n        const waveformVal = (atlasY - 1.5) * 2 * amplitude.max;\n        wrapText(this.ctx, waveformVal.toFixed(6), leftStart, y + halfFont / 2, Align.RIGHT);\n      }\n      if (isOnAtlasMouseMove) {\n        /**\n         * spectrogram curve scale\n         */\n        if (visible.spectrogram) {\n          const spectrogramVal = atlasY * (sampleRate / 2);\n          wrapText(this.ctx, `${spectrogramVal.toFixed(1)} Hz`, leftStart, y + halfFont / 2, Align.RIGHT);\n        }\n\n        /**\n         * pitch curve scale\n         */\n        if (visible.pitch) {\n          const pitchVal = atlasY * (pitchRange.max - pitchRange.min) + pitchRange.min;\n          wrapText(this.ctx, `${pitchVal.toFixed(2)} Hz`, leftStart + atlasWidth + fontSize, y + halfFont / 2, Align.LEFT, Style.PITCH);\n        }\n\n        /**\n         * intensity curve scale\n         */\n        if (visible.intensity) {\n          const align = visible.pitch ? Align.RIGHT : Align.LEFT;\n          const offsetX = visible.pitch ? 0 : fontSize;\n          const intensityVal = atlasY * (intensityRange.max - intensityRange.min) + intensityRange.min;\n          wrapText(this.ctx, `${intensityVal.toFixed(2)} dB`, leftStart + atlasWidth + offsetX, y - halfFont / 2, align, Style.INTENSITY);\n        }\n      }\n    };\n    makeObservable(this, {});\n  }\n  get withinRangeWidth() {\n    const {\n      margin,\n      atlasWidth\n    } = rootStore.analyse.placement;\n    return this.props.mousePosition.x > margin + 1 && this.props.mousePosition.x < margin + atlasWidth + 1;\n  }\n  get withinRangeHeight() {\n    const {\n      timelineHeight,\n      atlasHeight\n    } = rootStore.analyse.placement;\n    return this.props.mousePosition.y > timelineHeight && this.props.mousePosition.y < timelineHeight + atlasHeight;\n  }\n  componentDidMount() {\n    this.setupAssistCanvas();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.mousePosition.x !== this.props.mousePosition.x || prevProps.mousePosition.y !== this.props.mousePosition.y || JSON.stringify(prevProps.ratioPlacement) !== JSON.stringify(this.props.ratioPlacement)) {\n      this.updateAssist();\n    }\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"canvas\", {\n      ref: this.canvasRef,\n      style: {\n        pointerEvents: 'none'\n      },\n      className: \"absoluteTopLeftZeroW100H100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 7\n      }\n    });\n  }\n}, _applyDecoratedDescriptor(_class.prototype, \"withinRangeWidth\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"withinRangeWidth\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"withinRangeHeight\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"withinRangeHeight\"), _class.prototype), _class);\n;\nexport default Assist;","map":{"version":3,"names":["React","makeObservable","computed","rootStore","Align","Style","wrapText","pitchRange","min","max","intensityRange","Assist","_class","Component","constructor","props","ratio","lineWidth","canvasRef","createRef","ctx","setupAssistCanvas","window","devicePixelRatio","canvas","current","rect","getBoundingClientRect","width","height","getContext","updateAssist","updateLine","withinRangeWidth","withinRangeHeight","margin","timelineHeight","atlasHeight","atlasWidth","ratioPlacement","pos","x","mousePosition","y","line1","line2","push","setLineDash","save","strokeStyle","STROKE","beginPath","length","moveTo","lineTo","stroke","analyse","cursorTime","toFixed","LEFT","closePath","fillStyle","fill","drawScale","amplitude","sampleRate","visible","fontSize","FONTSIZE","atlasY","isOnAtlasMouseMove","leftStart","halfFont","waveformVal","RIGHT","spectrogram","spectrogramVal","pitch","pitchVal","PITCH","intensity","align","offsetX","intensityVal","INTENSITY","placement","componentDidMount","componentDidUpdate","prevProps","JSON","stringify","render","createElement","ref","style","pointerEvents","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","_applyDecoratedDescriptor","prototype","Object","getOwnPropertyDescriptor"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/phonetic-transcription/components/Helper/Assist.tsx"],"sourcesContent":["import React from 'react';\nimport { makeObservable, computed } from 'mobx';\nimport rootStore from '../../store/RootStore';\nimport { Align, Style } from '../../types';\nimport { wrapText } from '../../utils';\n\nexport interface AssistLineProps {\n  mousePosition: { x: number; y: number };\n  ratioPlacement: {[key: string]: number};\n}\n\nconst pitchRange = { min: 75, max: 500 };\nconst intensityRange = { min: 50, max: 100 };\n\nclass Assist extends React.Component<AssistLineProps> {\n  ratio = 1;\n\n  lineWidth = 1;\n\n  canvasRef: React.RefObject<HTMLCanvasElement> = React.createRef();\n\n  ctx: CanvasRenderingContext2D | null = null;\n\n  constructor(props: AssistLineProps) {\n    super(props);\n    makeObservable(this, {});\n  }\n\n  @computed get withinRangeWidth() {\n    const { margin, atlasWidth } = rootStore.analyse.placement;\n    return this.props.mousePosition.x > (margin + 1) && this.props.mousePosition.x < (margin + atlasWidth + 1);\n  }\n\n  @computed get withinRangeHeight() {\n    const { timelineHeight, atlasHeight } = rootStore.analyse.placement;\n    return this.props.mousePosition.y > timelineHeight && this.props.mousePosition.y < (timelineHeight + atlasHeight);\n  }\n\n  componentDidMount() {\n    this.setupAssistCanvas();\n  }\n\n  componentDidUpdate(prevProps: AssistLineProps) {\n    if (\n      prevProps.mousePosition.x !== this.props.mousePosition.x ||\n      prevProps.mousePosition.y !== this.props.mousePosition.y ||\n      JSON.stringify(prevProps.ratioPlacement) !== JSON.stringify(this.props.ratioPlacement)\n    ) {\n      this.updateAssist();\n    }\n  }\n\n  setupAssistCanvas = () => {\n    this.ratio = window.devicePixelRatio;\n    const canvas = this.canvasRef.current! as HTMLCanvasElement;\n    const rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width * this.ratio;\n    canvas.height = rect.height * this.ratio;\n    this.ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n  };\n\n  updateAssist = () => {\n    const canvas = this.canvasRef.current! as HTMLCanvasElement;\n    const rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width * this.ratio;\n    canvas.height = rect.height * this.ratio;\n    this.updateLine();\n  };\n\n  updateLine = () => {\n    if (!this.ctx) return;\n    if (!this.withinRangeWidth || !this.withinRangeHeight) {\n      return;\n    }\n    const { margin, timelineHeight, atlasHeight, atlasWidth } = this.props.ratioPlacement;\n    const pos = {\n      x: this.props.mousePosition.x * this.ratio,\n      y: this.props.mousePosition.y * this.ratio,\n    };\n\n    const line1 = [];\n    const line2 = [];\n\n    line1.push([pos.x, 0], [pos.x, timelineHeight + atlasHeight]);\n    line2.push([margin + 1, pos.y], [margin + atlasWidth + 1, pos.y]);\n    this.ctx.setLineDash([5]);\n    this.ctx.save();\n    this.ctx.strokeStyle = Style.STROKE;\n    this.ctx.lineWidth = this.lineWidth * this.ratio;\n    this.ctx.beginPath();\n    if (line2.length === 2) {\n      this.ctx.moveTo(line1[0][0], line1[0][1]);\n      this.ctx.lineTo(line1[1][0], line1[1][1]);\n      this.ctx.moveTo(line2[0][0], line2[0][1]);\n      this.ctx.lineTo(line2[1][0], line2[1][1]);\n    }\n    this.ctx.stroke();\n\n    this.ctx.beginPath();\n    this.ctx.setLineDash([]);\n    this.ctx.moveTo(pos.x - 6 * this.ratio, 0);\n    this.ctx.lineTo(pos.x + 6 * this.ratio, 0);\n    this.ctx.lineTo(pos.x, timelineHeight / 3);\n    wrapText(this.ctx, rootStore.analyse.cursorTime.toFixed(6), line1[0][0] + 6, timelineHeight / 2, Align.LEFT, Style.STROKE);\n    this.ctx.closePath();\n    this.ctx.fillStyle = Style.STROKE;\n    this.ctx.fill();\n    this.drawScale();\n  };\n\n  drawScale = () => {\n    const {\n      amplitude,\n      sampleRate,\n      visible\n    } = rootStore.analyse;\n    const { margin, timelineHeight, atlasHeight, atlasWidth } = this.props.ratioPlacement;\n    const fontSize = Style.FONTSIZE * this.ratio;\n    const y = this.props.mousePosition.y * this.ratio;\n\n    const atlasY = 1 - ((y - (timelineHeight + atlasHeight / 2)) / (atlasHeight / 2));\n    // mouse move on praat atlas\n    const isOnAtlasMouseMove = atlasY > 0 && atlasY < 1;\n    // draw start x\n    const leftStart = margin - 6;\n    const halfFont = fontSize / 2;\n    // waveform curve scale\n    if (amplitude.max !== 0 && atlasY > 1 && atlasY < 2) {\n      const waveformVal = (atlasY - 1.5) * 2 * amplitude.max;\n      wrapText(this.ctx, waveformVal.toFixed(6), leftStart, y + halfFont / 2, Align.RIGHT);\n    }\n\n    if (isOnAtlasMouseMove) {\n      /**\n       * spectrogram curve scale\n       */\n      if (visible.spectrogram) {\n        const spectrogramVal = atlasY * (sampleRate / 2);\n        wrapText(this.ctx, `${spectrogramVal.toFixed(1)} Hz`, leftStart, y + halfFont / 2, Align.RIGHT);\n      }\n\n      /**\n       * pitch curve scale\n       */\n      if (visible.pitch) {\n        const pitchVal = atlasY * (pitchRange.max - pitchRange.min) + pitchRange.min;\n        wrapText(this.ctx, `${pitchVal.toFixed(2)} Hz`, leftStart + atlasWidth + fontSize, y + halfFont / 2, Align.LEFT, Style.PITCH);\n      }\n\n      /**\n       * intensity curve scale\n       */\n      if (visible.intensity) {\n        const align = visible.pitch ? Align.RIGHT : Align.LEFT;\n        const offsetX = visible.pitch ? 0 : fontSize;\n        const intensityVal = atlasY * (intensityRange.max - intensityRange.min) + intensityRange.min;\n        wrapText(this.ctx, `${intensityVal.toFixed(2)} dB`, leftStart + atlasWidth + offsetX, y - halfFont / 2, align, Style.INTENSITY);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <canvas\n        ref={this.canvasRef}\n        style={{ pointerEvents: 'none' }}\n        className=\"absoluteTopLeftZeroW100H100\"\n      />\n    );\n  }\n};\n\nexport default Assist;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}