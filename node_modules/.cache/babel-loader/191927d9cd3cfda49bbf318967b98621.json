{"ast":null,"code":"import React,{useMemo}from'react';import{observer}from'mobx-react';import cx from'classnames';import Dropdown from'../../../common/dropdown/Dropdown';import{ReviewApprove,ReviewReject,ReviewSuspend}from'../../../common/icons';import store from'../../store/RootStore';import i18n from'../../locales';import{ReviewMode,ReviewResult}from'../../types';const ReviewTool=observer(()=>{var _menu$selectedIndex;const types=useMemo(()=>store.review.reviewResultTypes.map((type,index)=>{let icon=/*#__PURE__*/React.createElement(ReviewApprove,null);let name=i18n.translate('REVIEW_APPROVE');if(type===ReviewResult.REJECT){icon=/*#__PURE__*/React.createElement(ReviewReject,null);name=i18n.translate('REVIEW_REJECT');}else if(type===ReviewResult.SUSPEND){icon=/*#__PURE__*/React.createElement(ReviewSuspend,null);name=i18n.translate('REVIEW_SUSPEND');}return{type,hotkey:index+1,icon,name};}),[store.review.reviewResultTypes]);if(!store.reviewable||store.config.reviewMode!==ReviewMode.REVIEW){return null;}const selectedIndex=types.findIndex(i=>i.type===store.review.selectedReviewResultType);const menu=types.map(_ref=>{let{type,hotkey,icon,name}=_ref;return{label:name,value:type,active:type===store.review.selectedReviewResultType,render:()=>/*#__PURE__*/React.createElement(\"div\",{className:\"create-tool-tool-item__label\"},/*#__PURE__*/React.createElement(\"span\",{className:\"create-tool-tool-item__shortcut\"},hotkey),/*#__PURE__*/React.createElement(\"span\",{className:\"create-tool-tool-item__icon tool-icon\"},icon),/*#__PURE__*/React.createElement(\"span\",{className:\"create-tool-tool-item__name\"},name))};});return/*#__PURE__*/React.createElement(\"div\",{className:\"create-tool\"},i18n.translate('COMMON_CREATE'),/*#__PURE__*/React.createElement(\"span\",{onClick:()=>store.review.setAddMode(true)},/*#__PURE__*/React.createElement(Dropdown,{className:cx('create-tool-selector',{active:store.review.addMode}),arrow:true,triggerArea:\"arrow\",menu:menu,onClick:(n,i,item)=>store.review.activateReview(item.value)},(_menu$selectedIndex=menu[selectedIndex])===null||_menu$selectedIndex===void 0?void 0:_menu$selectedIndex.render())));});export default ReviewTool;","map":{"version":3,"names":["React","useMemo","observer","cx","Dropdown","ReviewApprove","ReviewReject","ReviewSuspend","store","i18n","ReviewMode","ReviewResult","ReviewTool","_menu$selectedIndex","types","review","reviewResultTypes","map","type","index","icon","createElement","name","translate","REJECT","SUSPEND","hotkey","reviewable","config","reviewMode","REVIEW","selectedIndex","findIndex","i","selectedReviewResultType","menu","_ref","label","value","active","render","className","onClick","setAddMode","addMode","arrow","triggerArea","n","item","activateReview"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/src/components/video-tracking2/components/review/ReviewToolSelector.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { observer } from 'mobx-react';\nimport cx from 'classnames';\nimport Dropdown from '../../../common/dropdown/Dropdown';\nimport { ReviewApprove, ReviewReject, ReviewSuspend } from '../../../common/icons';\nimport store from '../../store/RootStore';\nimport i18n from '../../locales';\nimport { ReviewMode, ReviewResult } from '../../types';\n\nconst ReviewTool = observer(() => {\n  const types = useMemo(() => store.review.reviewResultTypes.map((type, index) => {\n    let icon = <ReviewApprove />;\n    let name = i18n.translate('REVIEW_APPROVE');\n    if (type === ReviewResult.REJECT) {\n      icon = <ReviewReject />;\n      name = i18n.translate('REVIEW_REJECT');\n    } else if (type === ReviewResult.SUSPEND) {\n      icon = <ReviewSuspend />;\n      name = i18n.translate('REVIEW_SUSPEND');\n    }\n    return { type, hotkey: index + 1, icon, name };\n  }), [store.review.reviewResultTypes]);\n\n  if (!store.reviewable || store.config.reviewMode !== ReviewMode.REVIEW) {\n    return null;\n  }\n\n  const selectedIndex = types.findIndex((i) => i.type === store.review.selectedReviewResultType);\n  const menu = types.map(({ type, hotkey, icon, name }) => ({\n    label: name,\n    value: type,\n    active: type === store.review.selectedReviewResultType,\n    render: () => (\n      <div className=\"create-tool-tool-item__label\">\n        <span className=\"create-tool-tool-item__shortcut\">\n          {hotkey}\n        </span>\n        <span className=\"create-tool-tool-item__icon tool-icon\">\n          {icon}\n        </span>\n        <span className=\"create-tool-tool-item__name\">\n          {name}\n        </span>\n      </div>\n    ),\n  }));\n  return (\n    <div className=\"create-tool\">\n      {i18n.translate('COMMON_CREATE')}\n      <span onClick={() => store.review.setAddMode(true)}>\n        <Dropdown\n          className={cx('create-tool-selector', {\n            active: store.review.addMode,\n          })}\n          arrow\n          triggerArea=\"arrow\"\n          menu={menu}\n          onClick={(n, i, item) => store.review.activateReview(item.value)}\n        >\n          {menu[selectedIndex]?.render()}\n        </Dropdown>\n      </span>\n    </div>\n  );\n});\n\nexport default ReviewTool;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}