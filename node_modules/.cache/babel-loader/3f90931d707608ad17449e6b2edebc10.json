{"ast":null,"code":"import React from 'react';\nimport { AtomicBlockUtils, EditorState } from 'draft-js';\nimport clsx from 'clsx';\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nvar addImage = function (editorState, url, extraData) {\n  var urlType = 'IMAGE';\n  var contentState = editorState.getCurrentContent();\n  var contentStateWithEntity = contentState.createEntity(urlType, 'IMMUTABLE', _extends({}, extraData, {\n    src: url\n  }));\n  var entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  var newEditorState = AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ');\n  return EditorState.forceSelection(newEditorState, newEditorState.getCurrentContent().getSelectionAfter());\n};\nvar _excluded = [\"block\", \"className\", \"theme\"],\n  _excluded2 = [\"blockProps\", \"customStyleMap\", \"customStyleFn\", \"decorator\", \"forceSelection\", \"offsetKey\", \"selection\", \"tree\", \"blockStyleFn\", \"preventScroll\", \"contentState\"];\nvar ImageComponent = /*#__PURE__*/React.forwardRef(\n// eslint-disable-next-line prefer-arrow-callback\nfunction Image(props, ref) {\n  var block = props.block,\n    className = props.className,\n    _props$theme = props.theme,\n    theme = _props$theme === void 0 ? {} : _props$theme,\n    otherProps = _objectWithoutPropertiesLoose(props, _excluded);\n  // leveraging destructuring to omit certain properties from props\n  otherProps.blockProps;\n  otherProps.customStyleMap;\n  otherProps.customStyleFn;\n  otherProps.decorator;\n  otherProps.forceSelection;\n  otherProps.offsetKey;\n  otherProps.selection;\n  otherProps.tree;\n  otherProps.blockStyleFn;\n  otherProps.preventScroll;\n  var contentState = otherProps.contentState,\n    elementProps = _objectWithoutPropertiesLoose(otherProps, _excluded2);\n  var combinedClassName = clsx(theme.image, className);\n  var _contentState$getEnti = contentState.getEntity(block.getEntityAt(0)).getData(),\n    src = _contentState$getEnti.src;\n  return /*#__PURE__*/React.createElement(\"img\", _extends({}, elementProps, {\n    ref: ref,\n    src: src,\n    role: \"presentation\",\n    className: combinedClassName\n  }));\n});\nvar defaultTheme = {};\nvar index = function (config) {\n  if (config === void 0) {\n    config = {};\n  }\n  var theme = config.theme ? config.theme : defaultTheme;\n  var Image = config.imageComponent || ImageComponent;\n  if (config.decorator) {\n    Image = config.decorator(Image);\n  }\n  var ThemedImage = function ThemedImage(props) {\n    return /*#__PURE__*/React.createElement(Image, _extends({}, props, {\n      theme: theme\n    }));\n  };\n  return {\n    blockRendererFn: function blockRendererFn(block, _ref) {\n      var getEditorState = _ref.getEditorState;\n      if (block.getType() === 'atomic') {\n        var contentState = getEditorState().getCurrentContent();\n        var entity = block.getEntityAt(0);\n        if (!entity) return null;\n        var type = contentState.getEntity(entity).getType();\n        if (type === 'IMAGE' || type === 'image') {\n          return {\n            component: ThemedImage,\n            editable: false\n          };\n        }\n        return null;\n      }\n      return null;\n    },\n    addImage: addImage\n  };\n};\nvar Image = ImageComponent;\nexport { Image, index as default };","map":{"version":3,"names":["React","AtomicBlockUtils","EditorState","clsx","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","addImage","editorState","url","extraData","urlType","contentState","getCurrentContent","contentStateWithEntity","createEntity","src","entityKey","getLastCreatedEntityKey","newEditorState","insertAtomicBlock","forceSelection","getSelectionAfter","_excluded","_excluded2","ImageComponent","forwardRef","Image","props","ref","block","className","_props$theme","theme","otherProps","blockProps","customStyleMap","customStyleFn","decorator","offsetKey","selection","tree","blockStyleFn","preventScroll","elementProps","combinedClassName","image","_contentState$getEnti","getEntity","getEntityAt","getData","createElement","role","defaultTheme","index","config","imageComponent","ThemedImage","blockRendererFn","_ref","getEditorState","getType","entity","type","component","editable","default"],"sources":["/Users/qzheng/Documents/webroot/annotation_tools/node_modules/@draft-js-plugins/image/lib/index.esm.js"],"sourcesContent":["import React from 'react';\nimport { AtomicBlockUtils, EditorState } from 'draft-js';\nimport clsx from 'clsx';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nvar addImage = (function (editorState, url, extraData) {\n  var urlType = 'IMAGE';\n  var contentState = editorState.getCurrentContent();\n  var contentStateWithEntity = contentState.createEntity(urlType, 'IMMUTABLE', _extends({}, extraData, {\n    src: url\n  }));\n  var entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  var newEditorState = AtomicBlockUtils.insertAtomicBlock(editorState, entityKey, ' ');\n  return EditorState.forceSelection(newEditorState, newEditorState.getCurrentContent().getSelectionAfter());\n});\n\nvar _excluded = [\"block\", \"className\", \"theme\"],\n  _excluded2 = [\"blockProps\", \"customStyleMap\", \"customStyleFn\", \"decorator\", \"forceSelection\", \"offsetKey\", \"selection\", \"tree\", \"blockStyleFn\", \"preventScroll\", \"contentState\"];\nvar ImageComponent = /*#__PURE__*/React.forwardRef(\n// eslint-disable-next-line prefer-arrow-callback\nfunction Image(props, ref) {\n  var block = props.block,\n    className = props.className,\n    _props$theme = props.theme,\n    theme = _props$theme === void 0 ? {} : _props$theme,\n    otherProps = _objectWithoutPropertiesLoose(props, _excluded);\n  // leveraging destructuring to omit certain properties from props\n  otherProps.blockProps;\n    otherProps.customStyleMap;\n    otherProps.customStyleFn;\n    otherProps.decorator;\n    otherProps.forceSelection;\n    otherProps.offsetKey;\n    otherProps.selection;\n    otherProps.tree;\n    otherProps.blockStyleFn;\n    otherProps.preventScroll;\n    var contentState = otherProps.contentState,\n    elementProps = _objectWithoutPropertiesLoose(otherProps, _excluded2);\n  var combinedClassName = clsx(theme.image, className);\n  var _contentState$getEnti = contentState.getEntity(block.getEntityAt(0)).getData(),\n    src = _contentState$getEnti.src;\n  return /*#__PURE__*/React.createElement(\"img\", _extends({}, elementProps, {\n    ref: ref,\n    src: src,\n    role: \"presentation\",\n    className: combinedClassName\n  }));\n});\n\nvar defaultTheme = {};\nvar index = (function (config) {\n  if (config === void 0) {\n    config = {};\n  }\n  var theme = config.theme ? config.theme : defaultTheme;\n  var Image = config.imageComponent || ImageComponent;\n  if (config.decorator) {\n    Image = config.decorator(Image);\n  }\n  var ThemedImage = function ThemedImage(props) {\n    return /*#__PURE__*/React.createElement(Image, _extends({}, props, {\n      theme: theme\n    }));\n  };\n  return {\n    blockRendererFn: function blockRendererFn(block, _ref) {\n      var getEditorState = _ref.getEditorState;\n      if (block.getType() === 'atomic') {\n        var contentState = getEditorState().getCurrentContent();\n        var entity = block.getEntityAt(0);\n        if (!entity) return null;\n        var type = contentState.getEntity(entity).getType();\n        if (type === 'IMAGE' || type === 'image') {\n          return {\n            component: ThemedImage,\n            editable: false\n          };\n        }\n        return null;\n      }\n      return null;\n    },\n    addImage: addImage\n  };\n});\nvar Image = ImageComponent;\n\nexport { Image, index as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}