/*!
 * @pixi/canvas-sprite - v6.2.2
 * Compiled Wed, 26 Jan 2022 16:23:27 UTC
 *
 * @pixi/canvas-sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var constants=require("@pixi/constants"),math=require("@pixi/math"),canvasRenderer=require("@pixi/canvas-renderer"),sprite=require("@pixi/sprite"),canvasRenderWorldTransform=new math.Matrix,CanvasSpriteRenderer=function(){function e(e){this.renderer=e}return e.prototype.render=function(e){var r=e._texture,t=this.renderer,o=t.context;if(r.valid){var n=r._frame.width,a=r._frame.height,i=e.transform.worldTransform,s=0,l=0,d=r.baseTexture.getDrawableSource();if(!(r.orig.width<=0||r.orig.height<=0)&&r.valid&&d){t.setBlendMode(e.blendMode,!0),t.context.globalAlpha=e.worldAlpha;var h=r.baseTexture.scaleMode===constants.SCALE_MODES.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==h&&(o[t.smoothProperty]=h),r.trim?(s=r.trim.width/2+r.trim.x-e.anchor.x*r.orig.width,l=r.trim.height/2+r.trim.y-e.anchor.y*r.orig.height):(s=(.5-e.anchor.x)*r.orig.width,l=(.5-e.anchor.y)*r.orig.height),r.rotate&&(i.copyTo(canvasRenderWorldTransform),i=canvasRenderWorldTransform,math.groupD8.matrixAppendRotationInv(i,r.rotate,s,l),s=0,l=0),s-=n/2,l-=a/2,t.setContextTransform(i,e.roundPixels,1),e.roundPixels&&(s|=0,l|=0);var u=r.baseTexture.resolution,p=t._outerBlend;p&&(o.save(),o.beginPath(),o.rect(s*t.resolution,l*t.resolution,n*t.resolution,a*t.resolution),o.clip()),16777215!==e.tint?(e._cachedTint===e.tint&&e._tintedCanvas.tintId===e._texture._updateID||(e._cachedTint=e.tint,e._tintedCanvas=canvasRenderer.canvasUtils.getTintedCanvas(e,e.tint)),o.drawImage(e._tintedCanvas,0,0,Math.floor(n*u),Math.floor(a*u),Math.floor(s*t.resolution),Math.floor(l*t.resolution),Math.floor(n*t.resolution),Math.floor(a*t.resolution))):o.drawImage(d,r._frame.x*u,r._frame.y*u,Math.floor(n*u),Math.floor(a*u),Math.floor(s*t.resolution),Math.floor(l*t.resolution),Math.floor(n*t.resolution),Math.floor(a*t.resolution)),p&&o.restore(),t.setBlendMode(constants.BLEND_MODES.NORMAL)}}},e.prototype.destroy=function(){this.renderer=null},e}();sprite.Sprite.prototype._tintedCanvas=null,sprite.Sprite.prototype._renderCanvas=function(e){e.plugins.sprite.render(this)},exports.CanvasSpriteRenderer=CanvasSpriteRenderer;
//# sourceMappingURL=canvas-sprite.min.js.map
