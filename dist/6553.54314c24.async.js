"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6553],{56553:function(X,N,g){g.d(N,{M:function(){return J}});var y=g(75271),e=g(40507),b=function(){return b=Object.assign||function(t){for(var o,i=1,n=arguments.length;i<n;i++){o=arguments[i];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},b.apply(this,arguments)},T={onActivate:e.func,onAddUndo:e.func,onBeforeAddUndo:e.func,onBeforeExecCommand:e.func,onBeforeGetContent:e.func,onBeforeRenderUI:e.func,onBeforeSetContent:e.func,onBeforePaste:e.func,onBlur:e.func,onChange:e.func,onClearUndos:e.func,onClick:e.func,onContextMenu:e.func,onCopy:e.func,onCut:e.func,onDblclick:e.func,onDeactivate:e.func,onDirty:e.func,onDrag:e.func,onDragDrop:e.func,onDragEnd:e.func,onDragGesture:e.func,onDragOver:e.func,onDrop:e.func,onExecCommand:e.func,onFocus:e.func,onFocusIn:e.func,onFocusOut:e.func,onGetContent:e.func,onHide:e.func,onInit:e.func,onKeyDown:e.func,onKeyPress:e.func,onKeyUp:e.func,onLoadContent:e.func,onMouseDown:e.func,onMouseEnter:e.func,onMouseLeave:e.func,onMouseMove:e.func,onMouseOut:e.func,onMouseOver:e.func,onMouseUp:e.func,onNodeChange:e.func,onObjectResizeStart:e.func,onObjectResized:e.func,onObjectSelected:e.func,onPaste:e.func,onPostProcess:e.func,onPostRender:e.func,onPreProcess:e.func,onProgressState:e.func,onRedo:e.func,onRemove:e.func,onReset:e.func,onSaveContent:e.func,onSelectionChange:e.func,onSetAttrib:e.func,onSetContent:e.func,onShow:e.func,onSubmit:e.func,onUndo:e.func,onVisualAid:e.func},x=b({apiKey:e.string,id:e.string,inline:e.bool,init:e.object,initialValue:e.string,onEditorChange:e.func,outputFormat:e.oneOf(["html","text"]),value:e.string,tagName:e.string,cloudChannel:e.string,plugins:e.oneOfType([e.string,e.array]),toolbar:e.oneOfType([e.string,e.array]),disabled:e.bool,textareaName:e.string,tinymceScriptSrc:e.string,rollback:e.oneOfType([e.number,e.oneOf([!1])]),scriptLoading:e.shape({async:e.bool,defer:e.bool,delay:e.number})},T),k=function(t){return typeof t=="function"},O=function(t){return t in T},B=function(t){return t.substr(2)},V=function(t,o,i,n,a,u,c){var r=Object.keys(a).filter(O),s=Object.keys(u).filter(O),d=r.filter(function(f){return u[f]===void 0}),l=s.filter(function(f){return a[f]===void 0});d.forEach(function(f){var p=B(f),v=c[p];i(p,v),delete c[p]}),l.forEach(function(f){var p=n(t,f),v=B(f);c[v]=p,o(v,p)})},A=function(t,o,i,n,a){return V(a,t.on.bind(t),t.off.bind(t),function(u,c){return function(r){var s;return(s=u(c))===null||s===void 0?void 0:s(r,t)}},o,i,n)},D=0,M=function(t){var o=Date.now(),i=Math.floor(Math.random()*1e9);return D++,t+"_"+i+D+String(o)},j=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},L=function(t){return typeof t=="undefined"||t===""?[]:Array.isArray(t)?t:t.split(" ")},H=function(t,o){return L(t).concat(L(o))},F=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},K=function(t){if(!("isConnected"in Node.prototype)){for(var o=t,i=t.parentNode;i!=null;)o=i,i=o.parentNode;return o===t.ownerDocument}return t.isConnected},P=function(t,o){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(o):t.setMode(o))},R=function(){return{listeners:[],scriptId:M("tiny-script"),scriptLoading:!1,scriptLoaded:!1}},U=function(){var t=R(),o=function(a,u,c,r,s,d){var l=u.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=a,l.src=c,l.async=r,l.defer=s;var f=function(){l.removeEventListener("load",f),d()};l.addEventListener("load",f),u.head&&u.head.appendChild(l)},i=function(a,u,c,r,s,d){var l=function(){return o(t.scriptId,a,u,c,r,function(){t.listeners.forEach(function(f){return f()}),t.scriptLoaded=!0})};t.scriptLoaded?d():(t.listeners.push(d),t.scriptLoading||(t.scriptLoading=!0,s>0?setTimeout(l,s):l()))},n=function(){t=R()};return{load:i,reinitialize:n}},z=U(),G=function(){return typeof window!="undefined"?window:g.g},E=function(){var t=G();return t&&t.tinymce?t.tinymce:null},W=function(){var t=function(o,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])},t(o,i)};return function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(o,i);function n(){this.constructor=o}o.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=function(){return m=Object.assign||function(t){for(var o,i=1,n=arguments.length;i<n;i++){o=arguments[i];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t},m.apply(this,arguments)},S=function(){var t,o,i;return!((i=(o=(t=E())===null||t===void 0?void 0:t.Env)===null||o===void 0?void 0:o.browser)===null||i===void 0)&&i.isIE()?"change keyup compositionend setcontent":"change input compositionend setcontent"},_=function(){return F()?"beforeinput SelectionChange":"SelectionChange"},J=function(t){W(o,t);function o(i){var n=this,a,u,c;return n=t.call(this,i)||this,n.rollbackTimer=void 0,n.valueCursor=void 0,n.rollbackChange=function(){var r=n.editor,s=n.props.value;r&&s&&s!==n.currentContent&&r.undoManager.ignore(function(){if(r.setContent(s),n.valueCursor&&(!n.inline||r.hasFocus()))try{r.selection.moveToBookmark(n.valueCursor)}catch(d){}}),n.rollbackTimer=void 0},n.handleBeforeInput=function(r){if(n.props.value!==void 0&&n.props.value===n.currentContent&&n.editor&&(!n.inline||n.editor.hasFocus))try{n.valueCursor=n.editor.selection.getBookmark(3)}catch(s){}},n.handleBeforeInputSpecial=function(r){(r.key==="Enter"||r.key==="Backspace"||r.key==="Delete")&&n.handleBeforeInput(r)},n.handleEditorChange=function(r){var s=n.editor;if(s&&s.initialized){var d=s.getContent();if(n.props.value!==void 0&&n.props.value!==d&&n.props.rollback!==!1&&(n.rollbackTimer||(n.rollbackTimer=window.setTimeout(n.rollbackChange,typeof n.props.rollback=="number"?n.props.rollback:200))),d!==n.currentContent&&(n.currentContent=d,k(n.props.onEditorChange))){var l=n.props.outputFormat,f=l==="html"?d:s.getContent({format:l});n.props.onEditorChange(f,s)}}},n.handleEditorChangeSpecial=function(r){(r.key==="Backspace"||r.key==="Delete")&&n.handleEditorChange(r)},n.initialise=function(r){var s,d,l;r===void 0&&(r=0);var f=n.elementRef.current;if(f){if(!K(f)){if(r===0)setTimeout(function(){return n.initialise(1)},1);else if(r<100)setTimeout(function(){return n.initialise(r+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var p=E();if(!p)throw new Error("tinymce should have been loaded into global scope");var v=m(m({},n.props.init),{selector:void 0,target:f,readonly:n.props.disabled,inline:n.inline,plugins:H((s=n.props.init)===null||s===void 0?void 0:s.plugins,n.props.plugins),toolbar:(d=n.props.toolbar)!==null&&d!==void 0?d:(l=n.props.init)===null||l===void 0?void 0:l.toolbar,setup:function(h){n.editor=h,n.bindHandlers({}),n.inline&&!j(f)&&h.once("PostRender",function(C){h.setContent(n.getInitialValue(),{no_events:!0})}),n.props.init&&k(n.props.init.setup)&&n.props.init.setup(h)},init_instance_callback:function(h){var C,w,I=n.getInitialValue();n.currentContent=(C=n.currentContent)!==null&&C!==void 0?C:h.getContent(),n.currentContent!==I&&(n.currentContent=I,h.setContent(I),h.undoManager.clear(),h.undoManager.add(),h.setDirty(!1));var Q=(w=n.props.disabled)!==null&&w!==void 0?w:!1;P(n.editor,Q?"readonly":"design"),n.props.init&&k(n.props.init.init_instance_callback)&&n.props.init.init_instance_callback(h)}});n.inline||(f.style.visibility=""),j(f)&&(f.value=n.getInitialValue()),p.init(v)}},n.id=n.props.id||M("tiny-react"),n.elementRef=y.createRef(),n.inline=(c=(a=n.props.inline)!==null&&a!==void 0?a:(u=n.props.init)===null||u===void 0?void 0:u.inline)!==null&&c!==void 0?c:!1,n.boundHandlers={},n}return o.prototype.componentDidUpdate=function(i){var n=this,a,u;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var c=this.editor;c.undoManager.transact(function(){var s;if(!n.inline||c.hasFocus())try{s=c.selection.getBookmark(3)}catch(v){}var d=n.valueCursor;if(c.setContent(n.props.value),!n.inline||c.hasFocus())for(var l=0,f=[s,d];l<f.length;l++){var p=f[l];if(p)try{c.selection.moveToBookmark(p),n.valueCursor=p;break}catch(v){}}})}if(this.props.disabled!==i.disabled){var r=(u=this.props.disabled)!==null&&u!==void 0?u:!1;P(this.editor,r?"readonly":"design")}}},o.prototype.componentDidMount=function(){var i,n,a,u,c,r;E()!==null?this.initialise():this.elementRef.current&&this.elementRef.current.ownerDocument&&z.load(this.elementRef.current.ownerDocument,this.getScriptSrc(),(n=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async)!==null&&n!==void 0?n:!1,(u=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.defer)!==null&&u!==void 0?u:!1,(r=(c=this.props.scriptLoading)===null||c===void 0?void 0:c.delay)!==null&&r!==void 0?r:0,this.initialise)},o.prototype.componentWillUnmount=function(){var i=this,n=this.editor;n&&(n.off(S(),this.handleEditorChange),n.off(_(),this.handleBeforeInput),n.off("keypress",this.handleEditorChangeSpecial),n.off("keydown",this.handleBeforeInputSpecial),n.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){n.off(a,i.boundHandlers[a])}),this.boundHandlers={},n.remove(),this.editor=void 0)},o.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},o.prototype.renderInline=function(){var i=this.props.tagName,n=i===void 0?"div":i;return y.createElement(n,{ref:this.elementRef,id:this.id})},o.prototype.renderIframe=function(){return y.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},o.prototype.getScriptSrc=function(){if(typeof this.props.tinymceScriptSrc=="string")return this.props.tinymceScriptSrc;var i=this.props.cloudChannel,n=this.props.apiKey?this.props.apiKey:"no-api-key";return"https://cdn.tiny.cloud/1/".concat(n,"/tinymce/").concat(i,"/tinymce.min.js")},o.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},o.prototype.bindHandlers=function(i){var n=this;if(this.editor!==void 0){A(this.editor,i,this.props,this.boundHandlers,function(r){return n.props[r]});var a=function(r){return r.onEditorChange!==void 0||r.value!==void 0},u=a(i),c=a(this.props);!u&&c?(this.editor.on(S(),this.handleEditorChange),this.editor.on(_(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):u&&!c&&(this.editor.off(S(),this.handleEditorChange),this.editor.off(_(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},o.propTypes=x,o.defaultProps={cloudChannel:"5"},o}(y.Component)}}]);
