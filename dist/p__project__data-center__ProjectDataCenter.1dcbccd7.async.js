"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7545],{2838:function(Ye,fe,t){t.d(fe,{r5:function(){return Oe},Wf:function(){return W}});var Le=t(90228),A=t.n(Le),K=t(87999),U=t.n(K),De=t(48305),ne=t.n(De),Te=t(53577),f=t(75271),Ze=t(42400),he=t(31223),k=t.n(he);function se(g){var P=(0,f.useRef)(g),N=(0,f.useRef)(g);return P.current!==g&&(N.current=P.current,P.current=g),N.current}var Ae=t(81399);function Oe(g){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},T=(0,f.useState)(!1),Y=ne()(T,2),Q=Y[0],J=Y[1],oe=(0,f.useRef)(!1),$=(0,f.useState)(V),m=ne()($,2),M=m[0],ce=m[1],w=se(P),X=(0,f.useCallback)(function(){var ue=U()(A()().mark(function q(le){var re;return A()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return J(!0),z.prev=1,z.next=4,g(le||P);case 4:re=z.sent,re.status===Te.oj.OK?ce(re.data):Ze.ZP.error((0,Ae.R$)(re)),z.next=11;break;case 8:z.prev=8,z.t0=z.catch(1),console.log("error",z.t0);case 11:return z.prev=11,J(!1),z.finish(11);case 14:case"end":return z.stop()}},q,null,[[1,8,11,14]])}));function me(q){return ue.apply(this,arguments)}return me}(),[P,g]);return(0,f.useEffect)(function(){!N||oe.current&&k()(w,P)||(oe.current=!0,X())},[w,P,N]),{loading:Q,data:M,fetchData:X}}function Je(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,P=useState(g),N=_slicedToArray(P,2),V=N[0],T=N[1];function Y(Q){var J=typeof Q=="boolean"?Q:!V;T(J)}return{visible:V,toggle:Y}}var e=t(10089),$e=t(93396);function Xe(){var g=useState(!1),P=_slicedToArray(g,2),N=P[0],V=P[1],T=function(){return V(!N)};return{status:N,update:T}}var Fe=t(26068),ve=t.n(Fe),Se=t(99076),Re=t(70576),Ie=1,be=10;function Ue(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,T=(0,Re.useIntl)(),Y=T.formatMessage,Q=(0,f.useState)(g),J=ne()(Q,2),oe=J[0],$=J[1],m=(0,f.useState)(V?5:P),M=ne()(m,2),ce=M[0],w=M[1];function X(re,H){w(H)}var ue={showQuickJumper:!0,total:N,defaultCurrent:g,pageSize:ce,pageSizeOptions:V?["5"].concat(Se.TJ):Se.TJ,showSizeChanger:!0,showTotal:function(H){return Y({id:"common.total.items"},{items:H})},onChange:$,onShowSizeChange:X},me=(0,f.useCallback)(function(){$(Ie)},[]),q=(0,f.useCallback)(function(){w(be)},[]),le=(0,f.useCallback)(function(){$(Ie),w(be)},[]);return{pagination:ue,pageNum:oe,pageSize:ce,setPageNum:$,setPageSize:w,resetPageNum:me,resetPageSize:q,resetPageOptions:le}}function W(g){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,T=(0,f.useState)(!1),Y=ne()(T,2),Q=Y[0],J=Y[1],oe=(0,f.useState)(P),$=ne()(oe,2),m=$[0],M=$[1],ce=(0,f.useState)(N),w=ne()(ce,2),X=w[0],ue=w[1],me=(0,f.useState)(0),q=ne()(me,2),le=q[0],re=q[1],H=Ue(Ie,V?5:be,(X==null?void 0:X.totalElements)||0,V),z=H.pagination,ee=H.pageNum,ke=H.pageSize,Me=H.setPageNum,We=H.setPageSize,ye=H.resetPageOptions;(0,f.useEffect)(function(){function de(ze,Ce,Ne){return ge.apply(this,arguments)}function ge(){return ge=U()(A()().mark(function ze(Ce,Ne,Be){var je,xe;return A()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return J(!0),R.prev=1,je=ve()(ve()({},Ce),{},{pageSize:Be,pageNo:Ne-1,pageIndex:Ne-1}),R.next=5,g(je);case 5:xe=R.sent,xe.status===Te.oj.OK?ue(xe.data):Ze.ZP.error((0,Se.R$)(xe)),R.next=12;break;case 9:R.prev=9,R.t0=R.catch(1),console.log(g,R.t0);case 12:return R.prev=12,J(!1),R.finish(12);case 15:case"end":return R.stop()}},ze,null,[[1,9,12,15]])})),ge.apply(this,arguments)}de(m,ee,ke)},[m,ee,ke,le]);function Ve(){M(P)}function Pe(){re(le+1)}function Ge(de){de.sortOrder&&(de.sortOrder=de.sortOrder==="ascend"?"asc":"desc"),M(function(ge){return ve()(ve()({},ge),de)})}return{data:X,pagination:z,searchParams:m,pageNum:ee,loading:Q,setData:ue,onResetSearchParams:Ve,setMemoSearchParams:Ge,setPageSize:We,setPageNum:Me,resetPageOptions:ye,refresh:Pe}}},12132:function(Ye,fe,t){t.r(fe),t.d(fe,{default:function(){return ht}});var Le=t(48305),A=t.n(Le),K=t(66063),U=t(70576),De=t(77960),ne=t(20388),Te=t(90228),f=t.n(Te),Ze=t(87999),he=t.n(Ze),k=t(75271),se=t(42400),Ae=t(93579),Oe=t(51009),Je=t(81399),e=t(52676),$e="#01B97F",Xe="#5187F3",Fe="#42526E",ve={color:"#42526e",fontWeight:"bold"},Se=function(a){var l=a.style,c=l===void 0?{}:l,d=a.projectId,u=a.extraBtn,o=a.dataMgmtVisible,i=a.dispatch,s=a.statistics,v=a.loading,p=(0,U.useIntl)(),y=p.formatMessage,b=s||{},S=b.pendingNum,Z=S===void 0?0:S,F=b.assignedNum,_=F===void 0?0:F,j=b.totalNum,x=j===void 0?0:j,O=b.completedNum,E=O===void 0?0:O,G=[{key:"assignedNum",value:_,color:$e,label:y({id:"project.detail.data-center.statistics.in-workflow"}),fontSize:20},{key:"pendingNum",value:Z,color:Fe,label:y({id:"project.detail.data-center.statistics.out-workflow"}),fontSize:16},{key:"completedNum",value:E,color:Xe,label:y({id:"project.detail.data-center.statistics.finished"}),fontSize:20}],C=function(){var I=he()(f()().mark(function h(){return f()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:try{i({type:"dataCenter/getStatistics",payload:{projectId:d}})}catch(B){se.ZP.error((0,Je.R$)(B))}case 1:case"end":return D.stop()}},h)}));return function(){return I.apply(this,arguments)}}();return(0,k.useEffect)(function(){o||C()},[o]),(0,e.jsx)(Ae.Z,{bordered:!1,loading:v,className:"with-shadow",style:c,headStyle:{borderBottom:"none",color:"#42526e"},bodyStyle:{padding:0},title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{fontSize:14,fontWeight:"normal",verticalAlign:"text-bottom"},children:y({id:"project.detail.data-center.statistics"})}),(0,e.jsx)(Oe.Z,{style:{display:"inline-block"},title:null,value:x,valueStyle:{fontSize:24,color:"#42526e",marginLeft:8,verticalAlign:"middle"}})]}),extra:u,children:(0,e.jsx)("div",{style:{overflow:"hidden",marginTop:8},children:G.map(function(I,h){return(0,e.jsx)("div",{style:{paddingLeft:24,marginBottom:24,width:195,borderLeft:h?"1px solid #E5E7ED":"none",float:"left"},children:(0,e.jsx)(Oe.Z,{title:(0,e.jsx)("span",{style:{position:"relative"},children:I.label}),value:I.value,valueStyle:ve})},I.key)})})})};function Re(n){var a=n.dataCenter,l=n.loading;return{statistics:a.statistics,loading:l.effects["dataCenter/getStatistics"]}}var Ie=(0,De.$j)(Re)(Se),be=t(48111),Ue=t(26068),W=t.n(Ue),g=t(96394),P=t(56138),N=t(32109),V=t(82092),T=t.n(V),Y=t(35866),Q=t(90966),J=t(3973),oe=t(62057),$=t(43718),m=t(1689),M=t(28227);function ce(n){var a=n.dataType,l=n.onCancel,c=(0,U.useIntl)(),d=c.formatMessage;return(0,e.jsx)(N.Z,{open:!!a,footer:null,title:d({id:"project.detail.data-center.data-type.".concat(a)}),onCancel:l,children:(0,e.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:d({id:"project.detail.data-center.data-type.desc.".concat(a)})})})}var w=t(99076),X=T()(T()(T()({},m.PO.UPLOADED,100*Math.pow(1024,2)),m.PO.CSV_ZIP,100*Math.pow(1024,2)),m.PO.ORIGINAL_UPLOADED,Math.pow(1024,3));function ue(n){var a=n.form,l=n.fileAccept,c=n.projectId,d=n.isPushData,u=d===void 0?!1:d,o=n.sourceType,i=(0,U.useIntl)(),s=i.formatMessage,v=(0,k.useState)(),p=A()(v,2),y=p[0],b=p[1],S=o===m.PO.CSV_ZIP,Z=function(j){return Array.isArray(j)?j:j&&j.file};function F(_){return _.size>=X[o]?(se.ZP.error(s({id:"common.fileSizeExceeded"},{size:(0,w.td)(X[o])})),a.resetFields(["file"]),Y.Z.LIST_IGNORE):(u||a.setFieldsValue({batchName:_.name.slice(0,-4)}),!1)}return(0,k.useEffect)(function(){u&&a.validateFields(["dataType"])},[u]),(0,e.jsxs)(g.Z,{form:a,labelCol:{span:8},wrapperCol:{span:16},children:[(0,e.jsx)(g.Z.Item,{label:s({id:"data.batch.num"}),name:"batchNum",hidden:!u,children:(0,e.jsx)(Q.Z,{disabled:!0})}),(0,e.jsx)(g.Z.Item,{name:"dataType",label:s({id:"project.detail.data-center.add-data.data-type"}),rules:[{required:!0,message:s({id:"project.detail.data-center.add-data.data-type.required"})},{validateTrigger:["onChange"],validator:function(){var _=he()(f()().mark(function x(O,E){return f()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(o===m.PO.ORIGINAL_UPLOADED&&E===m.g.TEXT)){C.next=2;break}return C.abrupt("return",Promise.reject(s({id:"project.detail.data-center.upload.text.error"})));case 2:return C.abrupt("return",Promise.resolve());case 3:case"end":return C.stop()}},x)}));function j(x,O){return _.apply(this,arguments)}return j}()}],children:(0,e.jsx)(J.Z,{disabled:u,children:[m.g.TEXT,m.g.IMG,m.g.AUDIO,m.g.VIDEO,m.g.LIDAR].map(function(_){return(0,e.jsx)(J.Z.Option,{value:_,children:s({id:"data.type.".concat(_)})},_)})})}),(0,e.jsx)(g.Z.Item,{noStyle:!0,shouldUpdate:function(j,x){return j.dataType!==x.dataType||j.file!==x.file},children:function(j){var x=j.getFieldValue("dataType"),O=!(x&&x!==m.g.TEXT);return(0,e.jsx)("div",{className:"ant-form-item",children:(0,e.jsxs)(oe.Z,{className:"ant-row ant-form-item-row",children:[(0,e.jsx)($.Z,{span:8,className:"ant-col ant-col-8 ant-form-item-label",style:{textAlign:"end"},children:(0,e.jsxs)("label",{className:"ant-form-item-required",children:[s({id:"project.detail.data-center.add-data.select-file"}),"\uFF1A"]})}),(0,e.jsx)($.Z,{span:16,className:"ant-col ant-col-16 ant-form-item-control",children:(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsx)(g.Z.Item,{name:"file",extra:s({id:"project.detail.data-center.add-data.select-file.zip.extra"},{type:l.slice(1),size:(0,w.td)(X[o])}),getValueFromEvent:Z,rules:[{required:!0,message:s({id:"data.action.upload.required"})}],children:(0,e.jsx)(Y.Z,{accept:l,maxCount:1,beforeUpload:F,children:(0,e.jsx)(K.ZP,{type:"dashed",children:s({id:"data.action.upload"})})})}),o===m.PO.ORIGINAL_UPLOADED&&(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsx)(K.ZP,{type:"link",disabled:O,onClick:function(){b(x)},children:s({id:"project.detail.data-center.data-type"})}),(0,e.jsx)("a",{href:"https://onpremise-platform-assets.oss-cn-zhangjiakou.aliyuncs.com/template/".concat(x,".zip"),children:(0,e.jsx)(K.ZP,{type:"link",disabled:O,children:s({id:"project.detail.data-center.template-download"})})})]})]})})]})})}}),(0,e.jsx)(g.Z.Item,{label:s({id:"data.batch.name"}),name:"batchName",extra:S&&s({id:"project.detail.data-center.add-data.select-file.batchName.extra"}),rules:[{validateTrigger:["onChange"],validator:function(){var _=he()(f()().mark(function x(O,E){var G,C,I;return f()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(u||S)){r.next=2;break}return r.abrupt("return",Promise.resolve());case 2:if(E){r.next=4;break}return r.abrupt("return",Promise.reject(s({id:"data.action.batchName.required"})));case 4:if(!(E.length>100)){r.next=6;break}return r.abrupt("return",Promise.reject(s({id:"55075"})));case 6:return r.next=8,(0,M.p7)({projectId:c,batchName:E});case 8:if(G=r.sent,C=G.data,I=G.status,C){r.next=13;break}return r.abrupt("return",Promise.reject(s({id:I.toString()})));case 13:return r.abrupt("return",Promise.resolve());case 14:case"end":return r.stop()}},x)}));function j(x,O){return _.apply(this,arguments)}return j}()}],children:(0,e.jsx)(Q.Z,{disabled:S||u})}),y&&(0,e.jsx)(ce,{dataType:y,onCancel:function(){b(null)}})]})}var me=t(79143),q=t(28993),le=t(35285),re=t(7286),H=t(50728);function z(n){var a=n.addTypes,l=n.select,c=(0,U.useIntl)(),d=c.formatMessage,u=[{key:m.PO.ORIGINAL_UPLOADED,label:d({id:"project.detail.data-center.add-data.select-type.original_uploaded"}),icon:(0,e.jsx)(le.Z,{className:q.Z.icon}),tip:d({id:"project.detail.data-center.add-data.select-type.original_uploaded.tip"})},{key:m.PO.UPLOADED,label:d({id:"project.detail.data-center.add-data.select-type.uploaded"}),icon:(0,e.jsx)(re.Z,{className:q.Z.icon}),tip:d({id:"project.detail.data-center.add-data.select-type.uploaded.tip"})},{key:m.PO.CSV_ZIP,label:d({id:"project.detail.data-center.add-data.select-type.csv_zip"}),icon:(0,e.jsx)(le.Z,{className:q.Z.icon}),tip:d({id:"project.detail.data-center.add-data.select-type.csv_zip.tip"})}],o=u.filter(function(i){return a.includes(i.key)});return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(oe.Z,{children:o.map(function(i){var s=i.key,v=i.label,p=i.icon,y=i.tip;return(0,e.jsx)($.Z,{span:24/o.length,style:{textAlign:"center"},children:(0,e.jsxs)("button",{type:"button",className:q.Z.jobTypeContainer,onClick:function(){return l(s)},style:{height:230,cursor:"pointer"},children:[(0,e.jsx)("div",{children:p}),(0,e.jsx)(me.Z.Text,{strong:!0,children:v}),(0,e.jsxs)("div",{className:"margin-top-3 text-size-1",children:[(0,e.jsx)(H.Z,{className:"margin-right-1"}),(0,e.jsx)(me.Z.Text,{type:"secondary",children:y})]})]})},s)})})})}var ee=t(53577),ke=3;function Me(n){var a=n.visible,l=n.onCancel,c=n.projectId,d=n.handleSubmitSuccess,u=n.addTypes,o=u===void 0?[m.PO.ORIGINAL_UPLOADED,m.PO.UPLOADED,m.PO.CSV_ZIP]:u,i=n.isPushData,s=i===void 0?!1:i,v=n.formData,p=v===void 0?null:v,y=(0,U.useIntl)(),b=y.formatMessage,S=(0,U.useDispatch)(),Z=p||g.Z.useForm(),F=A()(Z,1),_=F[0],j=(0,k.useState)(0),x=A()(j,2),O=x[0],E=x[1],G=(0,k.useState)(),C=A()(G,2),I=C[0],h=C[1],r=(0,k.useState)(!1),D=A()(r,2),B=D[0],te=D[1],L=(0,e.jsxs)(e.Fragment,{children:[O===0&&b({id:s?"project.detail.data-center.add-data.upload-type":"project.detail.data-center.add-data.select-type"}),O===1&&b({id:s?"data.batch.add":"project.detail.data-center.add-data.select-type.".concat(I==null?void 0:I.toLowerCase())})]}),pe=function(ie){h(ie),E(1)},Qe=function(){h(null),E(0),te(!1),_.resetFields()};function gt(){_.validateFields().then(function(ae){var ie=ae.file,_e=ae.dataType,Ee=ae.batchName,we=ae.batchNum;if(te(!0),I===m.PO.UPLOADED){var pt=s?M.UD:M.Mx;return pt({projectId:c,file:ie,dataType:_e,batchName:Ee,batchNum:we})}if(I===m.PO.ORIGINAL_UPLOADED){if((0,w.vO)()>=ke)throw new Error(b({id:"project.detail.data-center.upload.maxsize.error"}));return(0,M.tf)({projectId:c,recordDataType:_e,batchName:Ee,fileName:ie.name,fileLength:ie.size,batchNum:we}).then(function(qe){if(qe.status===ee.oj.OK){var et=qe.data;S({type:"uploadProgress/uploadOriginalZipData",payload:{projectId:c,file:ie,recordDataType:_e,prjResourceId:et,size:ie.size,batchNum:we,onProgress:function(tt){tt.id=et,S({type:"uploadProgress/updateUploadProgress",payload:tt})}}})}})}return null},function(ae){throw ae}).then(function(){se.ZP.success(b({id:I===m.PO.ORIGINAL_UPLOADED?"project.detail.data-center.add-data.message.uploading":"common.message.success.add"})),d()}).catch(function(ae){var ie=ae.message,_e=ae.status;if(!(!ie&&!_e)){var Ee=b({id:_e+""}),we=[55074,55075,55076,55077,55040].includes(_e)?Ee:ie;se.ZP.error(we)}}).finally(function(){return te(!1)})}return(0,e.jsxs)(N.Z,{title:L,className:"custom-modal",visible:a,width:650,onCancel:l,afterClose:Qe,footer:null,maskClosable:!1,destroyOnClose:!0,children:[O===0&&(0,e.jsx)(z,{select:pe,addTypes:o}),O===1&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ue,{form:_,projectId:c,sourceType:I,fileAccept:I===m.PO.UPLOADED?".csv":".zip",isPushData:s}),(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)(K.ZP,{type:"primary",ghost:!0,onClick:l,className:"btn-width",children:b({id:"common.cancel"})}),(0,e.jsx)(K.ZP,{type:"primary",onClick:gt,className:"margin-left-2 btn-width",loading:B,children:b({id:"common.confirm"})})]})]})]})}var We=t(67825),ye=t.n(We),Ve=["render","children","onClick"],Pe=function(a){var l=a.render,c=a.children,d=a.onClick,u=ye()(a,Ve),o=(0,k.useState)(!1),i=A()(o,2),s=i[0],v=i[1],p=(0,k.useState)(!1),y=A()(p,2),b=y[0],S=y[1],Z=function(j){v(!0),S(!0),d instanceof Function&&d(j)},F=function(){v(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.ZP,W()(W()({onClick:Z},u),{},{children:c})),b&&l({visible:s,onCancel:F})]})},Ge=t(4013),de={"editable-cell":"editable-cell___eiDVR",editableCellValueWrap:"editableCellValueWrap___nzu74"},ge=["index"],ze=["title","editable","children","dataIndex","record","handleSave"],Ce=k.createContext(null),Ne=function(a){var l=a.index,c=ye()(a,ge),d=g.Z.useForm(),u=A()(d,1),o=u[0];return(0,e.jsx)(g.Z,{form:o,component:!1,children:(0,e.jsx)(Ce.Provider,{value:o,children:(0,e.jsx)("tr",W()({},c))})})},Be=function(a){var l=a.title,c=a.editable,d=a.children,u=a.dataIndex,o=a.record,i=a.handleSave,s=ye()(a,ze),v=(0,U.useIntl)(),p=v.formatMessage,y=(0,k.useState)(!1),b=A()(y,2),S=b[0],Z=b[1],F=(0,k.useRef)(null),_=(0,k.useContext)(Ce);(0,k.useEffect)(function(){S&&F.current.focus()},[S]);var j=function(){Z(!S),_.setFieldsValue(T()({},u,o[u]))},x=function(){var E=he()(f()().mark(function G(){var C,I;return f()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,_.validateFields();case 3:if(C=r.sent,I=d[1],I!==C.batchName){r.next=8;break}return j(),r.abrupt("return");case 8:i(W()(W()({},o),C),j),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.log("Save failed:",r.t0);case 14:case"end":return r.stop()}},G,null,[[0,11]])}));return function(){return E.apply(this,arguments)}}(),O=d;return c&&(O=S?(0,e.jsx)(g.Z.Item,{style:{margin:0,width:208},name:u,rules:[{required:!0,message:"".concat(l," is required.")},function(){return{validator:function(G,C){return C.length>100?Promise.reject(p({id:"55075"})):Promise.resolve()}}}],children:(0,e.jsx)(Q.Z,{ref:F,onPressEnter:x,onBlur:x})}):(0,e.jsxs)(g.Z.Item,{className:de.editableCellValueWrap,style:{margin:0,width:208},children:[(0,e.jsx)(K.ZP,{type:"link",size:"small",style:{paddingLeft:0},onClick:j,children:(0,e.jsx)(Ge.Z,{})}),d]})),(0,e.jsx)("td",W()(W()({},s),{},{children:O}))},je=t(2838),xe=t(85193);function He(n){var a=n.record,l=n.projectId,c=(0,U.useIntl)(),d=c.formatMessage,u=(0,je.r5)(M.Gx,{projectId:l,batchNum:a.batchNum},!1,[]),o=u.data,i=u.fetchData;function s(p){p&&i()}var v=(0,k.useMemo)(function(){return o==null?void 0:o.map(function(p){return(0,e.jsxs)("div",{style:{padding:8},children:[p.flowName,": ",p.count]},"".concat(a.batchNum,"-").concat(p.flowId))})},[o]);return(0,e.jsx)(xe.Z,{placement:"bottom",content:o?v:null,onVisibleChange:s,children:(0,e.jsx)(K.ZP,{type:"link",children:d({id:"job-detail.ticket.view"})})})}var R=t(1480),at=T()(T()(T()(T()(T()({},ee.nd.SUCCESS,"#01B97F"),ee.nd.CANCELLED,"#7a869a"),ee.nd.POST_SCRIPT_READY,"#5187F3"),ee.nd.PROCESSING,"#5187F3"),ee.nd.FAILURE,"#F56C6C");function nt(n){var a=n.visible,l=n.projectId,c=n.batchNum,d=n.onCancel,u=(0,U.useIntl)(),o=u.formatMessage,i=(0,je.Wf)(M.mg,{projectId:l,batchNum:c},[]),s=i.data,v=i.loading,p=i.pagination,y=i.onResetSearchParams;(0,k.useEffect)(function(){a&&y()},[a]);var b=[{title:o({id:"job-detail.audit.creation.data.column.uploadTime"}),dataIndex:"uploadTime",render:function(Z){return(0,w.vc)(Z,"YYYY-MM-DD HH:mm:ss")}},{title:o({id:"common.operator"}),dataIndex:"operator",render:function(Z){return(0,w.vq)(Z)}},{title:o({id:"file.name"}),dataIndex:"fileName",width:300},{title:o({id:"common.status"}),dataIndex:"status",render:function(Z){return(0,e.jsxs)("span",{children:[(0,e.jsx)(R.Z,{color:at[ee.nd.SUCCESS]}),o({id:"common.upload.status.success"})]})}},{title:o({id:"common.column.recordId"}),dataIndex:"rangeNote",render:w.vq}];return(0,e.jsx)(N.Z,{title:o({id:"data.batch.history"}),className:"custom-modal",width:1e3,visible:a,footer:null,maskClosable:!1,destroyOnClose:!0,onCancel:d,children:(0,e.jsx)(P.Z,{className:"tableStriped",rowKey:"uploadTime",loading:v,columns:b,dataSource:s,pagination:p})})}var rt={modelWrap:"modelWrap___I0sAW"},it=["children","reducedHeight","hasTable"];function Ke(n){return/list|table/gi.test(n.type.name)}var ot=function(a){var l=a.reducedHeight,c=l===void 0?236:l,d=a.children;return(0,e.jsx)("div",{className:rt.modelWrap,style:{height:c==="auto"?"calc(100vh - ".concat(c,"px)"):"auto"},children:d})},lt=function(a){var l,c,d=a.children,u=a.reducedHeight,o=a.hasTable,i=o===void 0?!0:o,s=ye()(a,it),v=Array.isArray(d)?d.find(Ke):Ke(d)?d:null,p=(v==null||(l=v.props)===null||l===void 0||(l=l.dataSource)===null||l===void 0?void 0:l.length)||(v==null||(c=v.props)===null||c===void 0||(c=c.data)===null||c===void 0?void 0:c.length);return(0,e.jsx)(N.Z,W()(W()({},s),{},{style:{top:40,bottom:40,minWidth:800,maxWidth:1200},children:p===0&&!i?d:(0,e.jsx)(ot,{reducedHeight:u,children:d})}))},dt={pageIndex:0,pageSize:10};function st(n){var a=n.visible,l=n.readonly,c=n.onCancel,d=n.onSearchDataBatch,u=n.projectId,o=(0,U.useIntl)(),i=o.formatMessage,s=g.Z.useForm(),v=A()(s,1),p=v[0],y=(0,je.Wf)(M.mQ,W()({projectId:u},dt)),b=y.pagination,S=y.data,Z=y.setMemoSearchParams,F=y.loading,_=y.refresh;(0,k.useEffect)(function(){a&&_()},[a]);function j(h,r){return x.apply(this,arguments)}function x(){return x=he()(f()().mark(function h(r,D){var B;return f()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,(0,M.p7)({projectId:u,batchName:r.batchName});case 3:B=L.sent,B.data?(0,w.wz)({params:{projectId:u,batchNum:r.batchNum,batchName:r.batchName},api:M.Sf,onSuccess:function(){D(),Z({}),se.ZP.success(i({id:"data.batch.name.edit.success"}))}}):se.ZP.error((0,w.R$)(B)),L.next=10;break;case 7:L.prev=7,L.t0=L.catch(0),console.log("e: ",L.t0);case 10:case"end":return L.stop()}},h,null,[[0,7]])})),x.apply(this,arguments)}function O(h){d(h),c()}var E=[{title:i({id:"data.batch"}),dataIndex:"batchNum",width:100,render:function(r,D){return(0,e.jsx)(K.ZP,{type:"link",disabled:!D.totalNum,onClick:function(){return O(r)},children:r})}},{title:i({id:"data.batch.name"}),dataIndex:"batchName",width:260,editable:!0},{title:i({id:"data.batch.upload.date"}),dataIndex:"latestUploadTime",width:240,render:function(r){return(0,w.vc)(r,"YYYY-MM-DD HH:mm:ss")}},{title:i({id:"data.total"}),dataIndex:"totalNum"},{title:i({id:"project.detail.data-center.add-data.data-type"}),dataIndex:"dataType",render:function(r){return i({id:r?"data.type.".concat(r):"common.nothing-symbol"})}},{title:i({id:"project.detail.data-center.origin-data-management.in-workflow"}),dataIndex:"dataLocations",render:function(r,D){return(0,e.jsx)(He,{record:D,projectId:u})}},{title:i({id:"data.batch.history"}),dataIndex:"history",render:function(r,D){return(0,e.jsx)(Pe,{type:"link",render:function(te){var L=te.visible,pe=te.onCancel;return(0,e.jsx)(nt,{visible:L,projectId:u,batchNum:D.batchNum,onCancel:pe})},children:i({id:"job-detail.ticket.view"})})}},{title:i({id:"common.operation"}),dataIndex:"dataLocations",render:function(r,D){return(0,e.jsx)(Pe,{type:"link",onClick:function(){return p.setFieldsValue(D)},render:function(te){var L=te.visible,pe=te.onCancel;return(0,e.jsx)(Me,{visible:L,onCancel:pe,projectId:u,formData:[p],addTypes:[m.PO.ORIGINAL_UPLOADED,m.PO.UPLOADED],handleSubmitSuccess:function(){return I(pe)},isPushData:!0})},children:i({id:"data.batch.add"})})}}],G={body:{row:Ne,cell:Be}},C=E.map(function(h){return h.editable?W()(W()({},h),{},{onCell:function(D){return{record:D,editable:h.editable,dataIndex:h.dataIndex,title:h.title,handleSave:j}}}):h});function I(h){h(),Z({})}return(0,e.jsxs)(lt,{width:"80%",className:"custom-modal",title:i({id:"project.detail.data-center.origin-data-management"}),footer:null,maskClosable:!1,open:a,onCancel:c,destroyOnClose:!0,children:[(0,e.jsx)("div",{className:"text-right",children:(0,e.jsx)(Pe,{type:"primary",disabled:l,render:function(r){var D=r.visible,B=r.onCancel;return(0,e.jsx)(Me,{visible:D,onCancel:B,projectId:u,addTypes:[m.PO.ORIGINAL_UPLOADED,m.PO.UPLOADED],handleSubmitSuccess:function(){return I(B)}})},children:i({id:"project.detail.data-center.data-batch.create"})})}),(0,e.jsx)(P.Z,{className:"tableStriped",rowClassName:function(){return de["editable-row"]},rowKey:"batchNum",loading:F,components:G,columns:C,dataSource:S.results,pagination:b})]})}var ct=t(10089);function ut(n){var a=n.project,l=n.dispatch,c=n.modalVisible,d=n.isReadonly,u=(0,U.useIntl)(),o=u.formatMessage,i=(0,ct.Z)(),s=(0,ne.Bo)("/projects/:projectId/:tabName/:type?").exec(i.pathname)||[],v=A()(s,2),p=v[1],y=a||{},b=y.projectDisplayId,S=c.dataMgmtVisible,Z=c.assignModalVisible;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ie,{projectId:p,extraBtn:(0,e.jsx)(K.ZP,{type:"primary",onClick:function(){return l({type:"dataCenter/updateVisible",payload:{dataMgmtVisible:!0}})},children:o({id:"project.detail.data-center.origin-data-management"})}),dataMgmtVisible:S||Z}),(0,e.jsx)(be.ZP,{projectId:p,projectDisplayId:b}),(0,e.jsx)(st,{visible:S,readonly:d,onCancel:function(){return l({type:"dataCenter/updateVisible",payload:{dataMgmtVisible:!1}})},onSearchDataBatch:function(_){return l({type:"dataCenter/updateFilters",payload:{batchNumList:[_]}})},projectId:p})]})}function mt(n){var a=n.project,l=n.projectAccess,c=n.dataCenter;return{project:a.currentProject,modalVisible:c.modalVisible,isReadonly:l.projectAccess===null||l.projectAccess==="VIEW"}}var ht=(0,De.$j)(mt)(ut)},28993:function(Ye,fe){fe.Z={root:"root___zolkE",colorWeak:"colorWeak___QZxr4","ant-layout":"ant-layout___Gnhed","ant-pro-sider-logo":"ant-pro-sider-logo___Ka_yQ","footer-bar":"footer-bar___Z98Uv","ant-pro-global-footer":"ant-pro-global-footer___NE9Dw","ant-layout-customize":"ant-layout-customize___N0sXz","ant-pro-layout-content":"ant-pro-layout-content___kErrg","ant-pro-sider-collapsed-button":"ant-pro-sider-collapsed-button___N_AFk","ant-tooltip-inner":"ant-tooltip-inner____DA5q","ant-list-item":"ant-list-item___VkXd7","ant-table":"ant-table___kV_k6","ant-table-thead":"ant-table-thead___YbBnP","ant-table-tbody":"ant-table-tbody____FwU7","ant-design-pro":"ant-design-pro___EstFP",ck:"ck___c4lRg","ck-content":"ck-content___CJVM5",table:"table___bzQPB",tableStriped:"tableStriped___qX4sP","table-narrow-row":"table-narrow-row___G3_Yj","ant-table-cell":"ant-table-cell___wwj2s","with-shadow":"with-shadow___MQDD8","table-placeholder":"table-placeholder___ojos7","ant-table-placeholder":"ant-table-placeholder___Pqbz3","pull-right":"pull-right___ZP0Jh","w-100":"w-100___JNp7u","page-header":"page-header___k38ac","ant-page-header-content":"ant-page-header-content___chibd","ant-page-header-back":"ant-page-header-back___TW1mR","ant-page-header-back-button":"ant-page-header-back-button___FVxTz","page-title-container":"page-title-container___lDtfz","page-title":"page-title___hJ7J6","page-content":"page-content___QgV4m","page-menu":"page-menu___aKFZs","ant-menu-item":"ant-menu-item___pG_Os","ant-menu-submenu-title":"ant-menu-submenu-title___YQnUu","ant-menu-inline-collapsed":"ant-menu-inline-collapsed___G2kb7",anticon:"anticon___BC5pV","ant-card-head-title":"ant-card-head-title___W0dAf","ant-layout-sider-collapsed":"ant-layout-sider-collapsed___GvYOn","ant-pro-sider-menu":"ant-pro-sider-menu___SnWye","ant-pro-sider":"ant-pro-sider___XFGjU","ant-pro-sider-menu-logo":"ant-pro-sider-menu-logo___Yz8JK","ant-layout-header":"ant-layout-header___PkfU0","ant-layout-footer":"ant-layout-footer___HP0h7","ant-pro-global-footer-links":"ant-pro-global-footer-links___T7SL4","ant-pro-global-footer-copyright":"ant-pro-global-footer-copyright___sNxWC",ruleGroup:"ruleGroup___cZr0a",rule:"rule___oKm6b","ruleGroup-combinators":"ruleGroup-combinators___RMDny",betweenRules:"betweenRules___dztyN","ruleGroup-notToggle":"ruleGroup-notToggle___rGJI4","highlight-tree":"highlight-tree___k04Eg","ant-tree-title":"ant-tree-title___pzIi9","border-none":"border-none___tWyXN",comment:"comment___xGPpv","ant-comment-actions":"ant-comment-actions___pGhKB","text-ellipsis":"text-ellipsis___ghzjF","text-right":"text-right___hMWIc","text-center":"text-center___hfFMg","text-left":"text-left___D0SkD","editor-content-img":"editor-content-img___d7OAC","image-style-align-left":"image-style-align-left___yatlE","question-card":"question-card___LTJ0W","ant-list-split":"ant-list-split___dmByH","ant-list-header":"ant-list-header___PfuNa","tree-body":"tree-body___bPiJG","ant-tree":"ant-tree___EhJ6m","ant-tree-node-content-wrapper":"ant-tree-node-content-wrapper___wWbM8","ant-tree-node-selected":"ant-tree-node-selected___tqfRC","ant-tree-child-tree":"ant-tree-child-tree___qfEiI","ant-tree-directory":"ant-tree-directory___NoKAA","ant-menu":"ant-menu___QK0Sw","ant-menu-horizontal":"ant-menu-horizontal___im5TV","ant-menu-item-selected":"ant-menu-item-selected___x3AYb","worker-question-card":"worker-question-card___a1ziB",formContainer:"formContainer___P5UfW",formWrap:"formWrap___SI71D","ant-legacy-form-item-label":"ant-legacy-form-item-label___JcUzx","g-recaptcha-wrapper":"g-recaptcha-wrapper___ynyYk","g-recaptcha":"g-recaptcha___jz_u4","text-muted":"text-muted___IFZNq","ck-height":"ck-height___cTYk2","editable-cell":"editable-cell___pijkg","editable-cell-value-wrap":"editable-cell-value-wrap___LnJno","editable-row":"editable-row___p1aw5","checkbox-custom":"checkbox-custom___Xoynv","ant-checkbox-checked":"ant-checkbox-checked___itXDH","ant-checkbox-inner":"ant-checkbox-inner___dcgZ4","ant-table-row-selected":"ant-table-row-selected___YplOK","ant-checkbox-wrapper":"ant-checkbox-wrapper___VlOrC","ant-checkbox":"ant-checkbox___Xfwle","ant-checkbox-input":"ant-checkbox-input___tbU5j","ck-editor-content":"ck-editor-content___Oj7d8","title-icon":"title-icon___F3wvV","margin-top-1":"margin-top-1___heno8","margin-bottom-1":"margin-bottom-1___UU8yh","margin-right-1":"margin-right-1___insus","margin-left-1":"margin-left-1___CRD9y","margin-top-2":"margin-top-2___utL4R","margin-bottom-2":"margin-bottom-2___ZeLYa","margin-right-2":"margin-right-2___fqFiB","margin-left-2":"margin-left-2___Urdqm","margin-top-3":"margin-top-3___kXMRv","margin-bottom-3":"margin-bottom-3___h_XHh","margin-right-3":"margin-right-3___YlnHq","margin-left-3":"margin-left-3___NOPaq","margin-top-4":"margin-top-4___GERpJ","margin-bottom-4":"margin-bottom-4___uX9A9","margin-right-4":"margin-right-4___VQOHX","margin-left-4":"margin-left-4___Cbfx_","margin-top-5":"margin-top-5___HXhwd","margin-bottom-5":"margin-bottom-5___uFDai","margin-right-5":"margin-right-5___t0Usf","margin-left-5":"margin-left-5___QnhYO","margin-top-6":"margin-top-6___bYqSD","margin-bottom-6":"margin-bottom-6___C8jEy","margin-right-6":"margin-right-6___EZmVS","margin-left-6":"margin-left-6___LdoWX","margin-top-7":"margin-top-7___Iw3d9","margin-bottom-7":"margin-bottom-7___pkQib","margin-right-7":"margin-right-7___Rsp6q","margin-left-7":"margin-left-7___LuG8L","margin-top-8":"margin-top-8___rePfb","margin-bottom-8":"margin-bottom-8___khYq7","margin-right-8":"margin-right-8___TglT_","margin-left-8":"margin-left-8___utUha","margin-top-9":"margin-top-9___Pds7j","margin-bottom-9":"margin-bottom-9___ui4jA","margin-right-9":"margin-right-9___XJmcr","margin-left-9":"margin-left-9___l_dv0","margin-top-10":"margin-top-10___xrpgf","margin-bottom-10":"margin-bottom-10___zvId1","margin-right-10":"margin-right-10___ZNKkE","margin-left-10":"margin-left-10___o09D9","width-hundred-1":"width-hundred-1___Z7YlE","height-hundred-1":"height-hundred-1___xLQ0j","width-hundred-2":"width-hundred-2___J5oF4","height-hundred-2":"height-hundred-2___YbJJx","width-hundred-3":"width-hundred-3___hznms","height-hundred-3":"height-hundred-3___lNdLi","width-hundred-4":"width-hundred-4___YoM7H","height-hundred-4":"height-hundred-4___geGdK","width-hundred-5":"width-hundred-5____7e3P","height-hundred-5":"height-hundred-5___ItrwJ","width-hundred-6":"width-hundred-6___s1oI2","height-hundred-6":"height-hundred-6___IqfIq","width-hundred-7":"width-hundred-7___jV02n","height-hundred-7":"height-hundred-7___fln8L","width-hundred-8":"width-hundred-8___IRkac","height-hundred-8":"height-hundred-8___TjDXT","width-hundred-9":"width-hundred-9___aBT06","height-hundred-9":"height-hundred-9___s2IpS","width-hundred-10":"width-hundred-10___RoDRS","height-hundred-10":"height-hundred-10___Gwln5","width-ten-1":"width-ten-1___qmKCZ","height-ten-1":"height-ten-1___UPnnq","width-ten-2":"width-ten-2___BnSYM","height-ten-2":"height-ten-2___CjKyi","width-ten-3":"width-ten-3___ei8ab","height-ten-3":"height-ten-3___cTssI","width-ten-4":"width-ten-4___unUYO","height-ten-4":"height-ten-4___uCyi_","width-ten-5":"width-ten-5___WWYw9","height-ten-5":"height-ten-5___haYUF","width-ten-6":"width-ten-6___MwLeI","height-ten-6":"height-ten-6___xHWLc","width-ten-7":"width-ten-7___SwtWL","height-ten-7":"height-ten-7___sO7Lo","width-ten-8":"width-ten-8___E2m56","height-ten-8":"height-ten-8___njMR1","width-ten-9":"width-ten-9___fmFkF","height-ten-9":"height-ten-9___ubGwC","width-ten-10":"width-ten-10___ZPxGA","height-ten-10":"height-ten-10___Jp9BI","text-size-1":"text-size-1___PzAG3","text-size-2":"text-size-2___dcsHZ","text-size-3":"text-size-3___RGv4U","text-size-4":"text-size-4___aTHbX","text-size-5":"text-size-5___DaioR","text-size-6":"text-size-6___Ppg1a","text-size-7":"text-size-7___Sr8iW","text-size-8":"text-size-8___acW77","text-size-9":"text-size-9___HsACp","text-size-10":"text-size-10___CjuU7",flex:"flex___ZRKlN","flex-1":"flex-1___Ti1am","flex-2":"flex-2___hFlXB","flex-3":"flex-3___cbC0Y","flex-between":"flex-between___nBo6Y","flex-center":"flex-center___U3nKt","flex-space-between":"flex-space-between___A3s3A","ant-card-body-bottom0":"ant-card-body-bottom0___r3vCg","ant-card-body":"ant-card-body___pIhX8","bpo-description":"bpo-description___etOcl","ant-descriptions-item":"ant-descriptions-item___ZpIW_","ant-message-notice-content":"ant-message-notice-content___l9bi9","custom-modal":"custom-modal___JnQ3l","ant-modal-header":"ant-modal-header___ZdSt4","ant-modal-footer":"ant-modal-footer___bvCVd","modal-wrap-fullscreen":"modal-wrap-fullscreen___BId5x","ant-modal":"ant-modal___FBeMc","primary-color":"primary-color___TiBhU","color-grey-9":"color-grey-9___dZ0pg","background-color-grey-9":"background-color-grey-9___JWKTJ","color-grey-6":"color-grey-6___T2gJr","background-color-grey-6":"background-color-grey-6___aMxeY","color-grey-7":"color-grey-7___aczyw","background-color-grey-7":"background-color-grey-7___BbOiD","color-grey-e":"color-grey-e___trDko","background-color-grey-e":"background-color-grey-e___tQakn","color-red":"color-red___RmhVx","background-color-red":"background-color-red___A92rM","color-blue":"color-blue___qdcqA","background-color-blue":"background-color-blue___auDbx","color-green":"color-green___wIFUh","background-color-green":"background-color-green___us2E6","color-yellow":"color-yellow___JfnMT","background-color-yellow":"background-color-yellow___voolX","color-purple":"color-purple___MXjKG","background-color-purple":"background-color-purple___rS8FC","color-warning-color":"color-warning-color___Xmz_r","background-color-warning-color":"background-color-warning-color___qElhL","ant-legacy-form-item-control-wrapper":"ant-legacy-form-item-control-wrapper___RnODK","ant-list-lg":"ant-list-lg___wLQbj","btn-width":"btn-width___rcXgG","btn-underline":"btn-underline___ftNak","spin-custom":"spin-custom___sC6tM","ant-spin":"ant-spin___JVYE0","grecaptcha-badge":"grecaptcha-badge___SmI83","react-flow__node":"react-flow__node___ssLFN","react-flow__node-qaJobNode":"react-flow__node-qaJobNode___s9r0H","react-flow__node-labelJobNode":"react-flow__node-labelJobNode___oufQW","text-dander":"text-dander___Zuo6u",jobTypeContainer:"jobTypeContainer___jEFmy",icon:"icon___Wd4Lx",upcoming:"upcoming___Aw2bh","content-container":"content-container___c7ywI",steps:"steps___DX_x8",actions:"actions___fdoRU","description-height":"description-height___UXRzC",tag:"tag___C1aji",linkContainer:"linkContainer___lkvBG",linkIcon:"linkIcon___SQ_cY",link:"link___EDZCR"}}}]);
