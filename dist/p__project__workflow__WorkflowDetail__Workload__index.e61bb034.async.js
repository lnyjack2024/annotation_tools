"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2748],{65167:function(V,L,o){o.d(L,{Z:function(){return C}});var y=o(82092),c=o.n(y),U=o(26068),s=o.n(U),f=o(48305),u=o.n(f),i=o(75271),n=o(45269),K=o(96394),D=o(90966),m=o(3973),W=o(34749),l=o(61234),T=o(21103),P=o(66063),v=o(70576),b=o(18023),a=o(52676);function C(A){var I=(0,v.useIntl)(),E=I.formatMessage,d=A||{},z=d.formLayout,le=z===void 0?"inline":z,N=d.formItems,ae=N===void 0?[]:N,Y=d.formStyle,_e=Y===void 0?{marginBottom:15}:Y,g=d.formItemStyle,se=g===void 0?{}:g,J=d.buttonStyle,re=J===void 0?{}:J,F=d.children,w=d.extraItems,G=d.initialValue,Q=G===void 0?{}:G,H=d.value,x=d.onFilterValueChange,X=d.onReset,$=d.searchMode,R=$===void 0?"change":$,q=d.isReset,de=q===void 0?!0:q,ee=(0,i.useState)(Q),p=u()(ee,2),M=p[0],k=p[1],oe=(0,b.Z)(x,1e3),O=function(t,_){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;k(s()(s()({},M),{},c()({},t.key,_))),R==="change"&&(S?oe(s()(s()({},M),{},c()({},t.key,_))):x(s()(s()({},M),{},c()({},t.key,_)))),t.onChange&&t.onChange(_)},ue=function(){x(M)},ce=function(){k({}),x({}),X&&X()};return(0,i.useEffect)(function(){H&&k(H)},[H]),(0,a.jsxs)(K.Z,{layout:le,style:_e,children:[w,ae.map(function(e){return(0,a.jsx)(K.Z.Item,{colon:!!(e!=null&&e.label),label:(0,a.jsx)("span",{style:{color:"#42526e"},children:e==null?void 0:e.label}),style:s()({marginBottom:16},se),children:function(){switch(e.type){case n.aH.Text:return(0,a.jsx)(D.Z,{allowClear:e.allowClear||!1,disabled:e.disabled||!1,value:M[e.key],onChange:function(_){return O(e,_.target.value,!0)},placeholder:e.placeholder||E({id:"common.input.placeholder"}),style:e.style||{width:220}});case n.aH.Single:return(0,a.jsx)(m.Z,{allowClear:e.allowClear||!1,disabled:e.disabled||!1,value:M[e.key],showSearch:"showSearch"in e?e.showSearch:!0,optionFilterProp:"children",filterOption:function(_,S){return S.props.children.toLowerCase().indexOf(_.toLowerCase())>=0},onChange:function(_){return O(e,_)},style:e.style||{width:220},placeholder:e.placeholder||E({id:"common.select.placeholder"}),children:e.options.map(function(t){return(0,a.jsx)(m.Z.Option,{value:e.optionValueKey?t[e.optionValueKey]:t,children:e.optionLabelKey?t[e.optionLabelKey]:e.optionLabel(t)},e.optionValueKey?t[e.optionValueKey]:t)})});case n.aH.Multiple:return(0,a.jsx)(m.Z,{allowClear:e.allowClear||!1,disabled:e.disabled||!1,mode:"multiple",showArrow:!0,value:M[e.key]||[],maxTagCount:e.maxTagCount||100,showSearch:"showSearch"in e?e.showSearch:!0,optionFilterProp:e.optionFilterProp||"children",filterOption:"optionFilterProp"in e||function(t,_){return _.props.children.toLowerCase().indexOf(t.toLowerCase())>=0},onChange:function(_){return O(e,_,!0)},style:e.style||{width:220},placeholder:e.placeholder||E({id:"common.select.placeholder"}),children:e.options.map(function(t){return(0,a.jsx)(m.Z.Option,{value:e.optionValueKey?t[e.optionValueKey]:t,label:e.optionLabelKey?t[e.optionLabelKey]:t,children:e.optionLabel?e.optionLabel(t):t[e.optionLabelKey]},e.optionValueKey?t[e.optionValueKey]:t)})});case n.aH.Cascader:return(0,a.jsx)(W.Z,{options:e.options,value:M[e.key]||[],fieldNames:e.fieldNames,style:e.style||{width:240},changeOnSelect:!0,showSearch:e.showSearch,onChange:function(_){return O(e,_,!0)}});case n.aH.CascaderMultiple:return(0,a.jsx)(W.Z,{options:e.options,value:M[e.key]||[],fieldNames:e.fieldNames,style:e.style||{width:240},changeOnSelect:!0,multiple:!0,maxTagCount:2,placeholder:E({id:"common.select.placeholder"}),showSearch:e.showSearch,onChange:function(_){return O(e,_,!0)}});case n.aH.Radio:return(0,a.jsx)(l.ZP.Group,{value:M[e.key],style:e.style,onChange:function(_){O(e,_.target.value,!0)},children:e.options.map(function(t){return(0,a.jsx)(l.ZP,{value:e.optionValueKey?t[e.optionValueKey]:t,children:e.optionLabelKey?t[e.optionLabelKey]:e.optionLabel(t)},e.optionValueKey?t[e.optionValueKey]:t)})});case n.aH.DateRanger:return(0,a.jsx)(T.Z.RangePicker,{style:e.style||{width:240},allowClear:e.allowClear,value:M[e.key],onChange:function(_){return O(e,_,!0)},disabledDate:e.disabledDate});default:return null}}()},e.key||JSON.stringify(e))}),R==="click"&&(0,a.jsxs)("div",{style:re,children:[(0,a.jsx)(P.ZP,{type:"primary",className:"btn-width",style:{margin:"0 16px 0 0"},onClick:ue,children:E({id:"common.search"})}),de&&(0,a.jsx)(P.ZP,{className:"btn-width",onClick:ce,children:E({id:"common.reset"})})]}),F]})}},93844:function(V,L,o){o.d(L,{Z:function(){return W}});var y=o(26068),c=o.n(y),U=o(75271),s=o(17078),f=o(70576),u=o(34375),i=o(72788),n=o(52676);function K(l){var T=l.onBack,P=l.title,v=l.content,b=l.actions,a=l.backTitle,C=l.titleIcon,A=function(){if(T){T();return}f.history.goBack()},I=function(){return typeof a=="string"?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{})," ",a]}):U.isValidElement(a)?a:null};return(0,n.jsx)(i.m,{className:u.Z["page-header"],ghost:!1,backIcon:I(),onBack:function(){return A()},title:" ",children:v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",c()(c()({className:u.Z["page-title-container"]},!I()&&{style:{marginTop:32}}),{},{children:(0,n.jsxs)("span",{className:u.Z["page-title"],children:[C&&(0,n.jsx)("span",{className:u.Z["title-icon"],children:C}),P]})})),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",overflowX:"auto"},children:[(0,n.jsx)("span",{children:v}),(0,n.jsx)("span",{children:b})]})]}):(0,n.jsxs)("div",c()(c()({className:u.Z["page-title-container"]},!I()&&{style:{marginTop:32}}),{},{children:[(0,n.jsxs)("span",{className:u.Z["page-title"],children:[C&&(0,n.jsx)("span",{className:u.Z["title-icon"],children:C}),P]}),(0,n.jsx)("span",{children:b})]}))})}var D=o(65715);function m(l){var T=l.children,P=l.menuItems,v=l.defaultSelectedKeys;return(0,n.jsxs)(n.Fragment,{children:[P&&(0,n.jsx)(D.Z,{className:u.Z["page-menu"],mode:"horizontal",selectedKeys:v||[],children:P.map(function(b){return(0,n.jsx)(D.Z.Item,{onClick:function(){b.action()},children:b.title},b.key)})}),(0,n.jsx)("div",{className:u.Z["page-content"],children:T})]})}function W(l){var T=l.title,P=l.titleIcon,v=l.backTitle,b=l.content,a=l.actions,C=l.children,A=l.onBack,I=l.menuItems,E=l.defaultSelectedKeys;return(0,n.jsxs)("div",{children:[(0,n.jsx)(K,{title:T,backTitle:v,actions:a,content:b,onBack:A,titleIcon:P}),(0,n.jsx)(m,{menuItems:I,defaultSelectedKeys:E,children:C})]})}},18023:function(V,L,o){var y=o(75271),c=function(s,f){var u=(0,y.useRef)({callback:s,timer:null}),i=u.current;return(0,y.useEffect)(function(){i.callback=s},[s]),(0,y.useCallback)(function(){for(var n=arguments.length,K=new Array(n),D=0;D<n;D++)K[D]=arguments[D];i.timer&&clearTimeout(i.timer),i.timer=setTimeout(function(){i.callback.apply(i,K)},f)},[])};L.Z=c},10089:function(V,L,o){o.d(L,{Z:function(){return u}});var y=o(26068),c=o.n(y),U=o(15944),s=o.n(U),f=o(70576);function u(i){var n=(0,f.useLocation)();return c()(c()({},n),{},{query:s().parse(n.search,i||{ignoreQueryPrefix:!0})})}},6370:function(V,L,o){o.r(L);var y=o(26068),c=o.n(y),U=o(67825),s=o.n(U),f=o(90228),u=o.n(f),i=o(87999),n=o.n(i),K=o(48305),D=o.n(K),m=o(75271),W=o(42400),l=o(61234),T=o(93579),P=o(66063),v=o(20388),b=o(79266),a=o(65167),C=o(45269),A=o(14543),I=o(55140),E=o(56285),d=o(75122),z=o(81399),le=o(93844),N=o(94721),ae=o(91526),Y=o(10089),_e=o(77960),g=o(52676),se=["date"];function J(F){var w=F.isReadonly,G=w===void 0?!1:w,Q=(0,Y.Z)(),H=(0,A.YB)(),x=H.formatMessage,X=(0,m.useState)([]),$=D()(X,2),R=$[0],q=$[1],de=(0,m.useState)(),ee=D()(de,2),p=ee[0],M=ee[1],k=(0,m.useState)({}),oe=D()(k,2),O=oe[0],ue=oe[1],ce=p||{},e=ce.jobType,t=(0,v.Bo)("/workflows/:flowId/jobs/workload").exec(Q.pathname),_=D()(t,2),S=_[1],ne=Q.query,te=ne.projectId,ie=ne.projectDisplayId,he=ne.flowDisplayId,me=ne.jobId,Ee=[{key:"date",label:null,type:C.aH.DateRanger},{key:"workerName",label:(0,g.jsx)("span",{style:{color:"#42526e"},children:x({id:"common.worker"})}),type:C.aH.Text}],pe=function(){var B=n()(u()().mark(function j(){var h;return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(!S||!te)){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,(0,d.lG)(S,te);case 5:h=r.sent,q(h.data.results[0].jobs),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),W.ZP.error((0,z.R$)(r.t0));case 12:case"end":return r.stop()}},j,null,[[2,9]])}));return function(){return B.apply(this,arguments)}}(),fe=function(){var j=e===b.O4.LABEL?N.Yo:N.Ww;j+="?jobId=".concat(p==null?void 0:p.id),Object.keys(O).filter(function(h){return!!O[h]}).forEach(function(h){j+="&".concat(h,"=").concat(O[h])}),(0,z.Sv)({url:j})};return(0,m.useEffect)(function(){R.length>0&&M(R.find(function(B){return B.id===me})||R[0])},[R]),(0,m.useEffect)(function(){pe()},[S,te]),(0,g.jsxs)(le.Z,{backTitle:(0,g.jsx)(ae.Z,{projectId:te,projectDisplayId:ie,flowDisplayId:he}),onBack:function(){},title:x({id:"workflow.detail.job.workload.title"},{jobName:p==null?void 0:p.jobName}),children:[(0,g.jsx)(l.ZP.Group,{size:"large",value:p,style:{marginBottom:24},onChange:function(j){return M(j.target.value)},children:R==null?void 0:R.map(function(B,j){var h;return(0,g.jsxs)(l.ZP.Button,{value:B,children:[x({id:"".concat((h=B.jobType)===null||h===void 0?void 0:h.toLowerCase(),"-job.type")}),j||j+1]},B.id)})}),(0,g.jsxs)(T.Z,{title:p==null?void 0:p.jobName,children:[(0,g.jsx)(a.Z,{formItems:Ee,formStyle:{float:"left"},initialValue:O||{},onFilterValueChange:function(j){var h,Z,r=j.date,De=s()(j,se),ve=c()(c()({},De),{},{startDate:r?r==null||(h=r[0])===null||h===void 0||(h=h.startOf("day"))===null||h===void 0?void 0:h.format("YYYY-MM-DD HH:mm:ss"):null,endDate:r?r==null||(Z=r[1])===null||Z===void 0||(Z=Z.endOf("day"))===null||Z===void 0?void 0:Z.format("YYYY-MM-DD HH:mm:ss"):null});ue(ve)},searchMode:"click"}),(0,g.jsx)(P.ZP,{style:{marginLeft:16},onClick:fe,disabled:G,children:x({id:"common.export"})}),e===b.O4.LABEL?(0,g.jsx)(E.Z,{job:p,filter:O||{}}):(0,g.jsx)(I.Z,{job:p,filter:O||{}})]})]})}function re(F){var w=F.projectAccess;return{isReadonly:w.projectAccess===null||w.projectAccess==="VIEW"}}L.default=(0,_e.$j)(re)(J)},91526:function(V,L,o){var y=o(48305),c=o.n(y),U=o(75271),s=o(70139),f=o(70576),u=o(20388),i=o(99076),n=o(52676),K=function(m){var W=m.projectId,l=m.projectDisplayId,T=m.flowDisplayId,P=(0,f.useIntl)(),v=P.formatMessage,b=(0,f.useLocation)(),a=b.pathname,C=(0,u.Bo)("/workflows/:flowId/jobs/workload").exec(a)||[],A=c()(C,2),I=A[1];return(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(s.Z.Item,{onClick:function(d){d.preventDefault(),f.history.push("/projects")},children:v({id:"projectList"})}),(0,n.jsx)(s.Z.Item,{onClick:function(d){d.preventDefault(),f.history.push({pathname:"/projects/".concat(W,"/workflow"),search:(0,i.PS)({projectDisplayId:l})})},children:"".concat(v({id:"project-details"})," [").concat(l,"]")}),(0,n.jsx)(s.Z.Item,{onClick:function(d){d.preventDefault(),I&&f.history.push({pathname:"/workflows/".concat(I,"/detail"),search:(0,i.PS)({projectId:W,projectDisplayId:l})})},children:"".concat(v({id:"flow-detail"})," [").concat(T,"]")}),I&&(0,n.jsx)(s.Z.Item,{children:v({id:"job.monitor.label.detail"})})]})};L.Z=K}}]);
