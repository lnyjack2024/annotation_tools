"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6352],{67489:function(tt,he,t){t.d(he,{Z:function(){return c}});var _e=t(70576),s={item:"item___Y02ZW",title:"title___PjO3l",content:"content___WUyiT"},W=t(52676);function c($){var Q=$.icon,x=$.title,A=$.content,o=(0,_e.useIntl)(),L=o.formatMessage;return(0,W.jsxs)("div",{className:s.item,children:[(0,W.jsxs)("div",{className:s.title,children:[Q,x]}),(0,W.jsx)("div",{className:s.content,children:A||L({id:"common.nothing"})})]})}},62388:function(tt,he,t){var _e=t(26068),s=t.n(_e),W=t(48305),c=t.n(W),$=t(75271),Q=t(42400),x=t(41388),A=t(56138),o=t(37704),L=t(70576),C=t(65167),de=t(45269),N=t(5916),pe=t(81399),be=t(73095),ve=t(94721),Ke=t(90761),ce=t(34375),X=t(11091),oe=t(52676);function Te(e){var Me=e.bpoId,Ne=e.jobId,F=e.isPM,D=F===void 0?!1:F,xe=e.visible,Ie=e.onClose,te=(0,L.useIntl)(),ne=te.formatMessage,re=(0,$.useState)({}),me=c()(re,2),q=me[0],Le=me[1],ze=(0,$.useState)([]),Ve=c()(ze,2),$e=Ve[0],fe=Ve[1],z=(0,$.useState)(!1),je=c()(z,2),B=je[0],j=je[1],Fe=(0,$.useState)(!1),Ce=c()(Fe,2),Re=Ce[0],we=Ce[1],We=(0,$.useState)([]),ye=c()(We,2),ee=ye[0],Ye=ye[1],nt=(0,$.useState)(0),qe=c()(nt,2),Be=qe[0],Ae=qe[1],Pe=(0,$.useState)(1),V=c()(Pe,2),Ze=V[0],ue=V[1],at=(0,$.useState)(ve.L8),mt=c()(at,2),ot=mt[0],ht=mt[1],pt=function(){we(!0),(0,N.h)(Ne,$e).then(function(ge){ge.status===be.o.OK?(Q.ZP.success(ne({id:"common.message.success.operation"})),Ie(),fe([]),Le({})):Q.ZP.error((0,pe.R$)(ge))}).catch(function(ge){return Q.ZP.error((0,pe.R$)(ge))}).finally(function(){return we(!1)})},ft=function(){!xe||!Ne||(j(!0),(0,X.oZ)(s()({bpoId:Me,pageSize:ot,pageIndex:Ze-1,role:4},q)).then(function(ge){ge.status===be.o.OK?(Ye(ge.data.results),Ae(ge.data.totalElements),fe([])):Q.ZP.error((0,pe.R$)(ge))}).catch(function(ge){return Q.ZP.error((0,pe.R$)(ge))}).finally(function(){return j(!1)}))},gt=[{key:"name",label:(0,oe.jsx)("span",{className:Ke.Z["filter-label"],children:ne({id:"bpo-worker.table.column.name"})}),type:de.aH.Text,style:{width:160}}],He=[{title:ne({id:"bpo-job-detail.workforce.columns.contact"}),dataIndex:"uniqueName"}],Ue={selectedRowKeys:$e,onChange:function(ge){return fe(ge)},getCheckboxProps:function(ge){return{disabled:!!ge.jobAssignStatus}}};return(0,$.useEffect)(function(){ft()},[q,Ze,ot,Ne,xe]),(0,oe.jsxs)(o.Z,{title:ne({id:"job-detail.workforce.add"}),visible:xe,width:1080,onClose:Ie,onSave:pt,saveLoading:Re,showFooter:!0,children:[(0,oe.jsx)(C.Z,{formItems:gt,formStyle:{marginBottom:0},formItemStyle:{marginBottom:15},initialValue:q,onFilterValueChange:Le}),(0,oe.jsx)(x.Z,{style:{margin:0}}),(0,oe.jsx)(A.Z,{columns:He,className:ce.Z.tableStriped,scroll:{x:"max-content"},dataSource:ee,rowSelection:Ue,rowKey:"workerId",pagination:{total:Be,pageSize:ot,current:Ze,onChange:function(ge,xt){ue(ge),ht(xt)},showSizeChanger:!0,pageSizeOptions:ve.TJ},loading:B})]})}he.Z=Te},91212:function(tt,he,t){t.d(he,{Z:function(){return C}});var _e=t(48305),s=t.n(_e),W=t(75271),c=t(42400),$=t(3973),Q=t(70576),x=t(5916),A={"bpo-step-container":"bpo-step-container___UR5dK","bpo-select":"bpo-select___BAiYE","option-label":"option-label___paovs","ant-select-item-option":"ant-select-item-option___GbkP3","ant-select-item-option-selected":"ant-select-item-option-selected___Qw6z3","ant-select-item-option-active":"ant-select-item-option-active___k8gG9"},o=t(52676),L=function(N){var pe=N.value,be=N.bpoId,ve=N.projectId,Ke=N.onChange,ce=N.width,X=ce===void 0?640:ce,oe=N.onLoadComplete,Te=(0,Q.useIntl)(),e=Te.formatMessage,Me=(0,W.useState)([]),Ne=s()(Me,2),F=Ne[0],D=Ne[1],xe=function(ne){var re=ne.bpoInfo;return(0,o.jsxs)("div",{className:A["bpo-select"],children:[(0,o.jsx)("table",{width:"100%",children:(0,o.jsx)("tbody",{children:(0,o.jsx)("tr",{children:(0,o.jsxs)("td",{width:"50%",children:[(0,o.jsx)("span",{className:A["option-label"],children:e({id:"common.id"})}),(0,o.jsx)("span",{children:re.bpoDisplayId})]})})})}),(0,o.jsx)("table",{width:"100%",children:(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{width:"50%",children:[(0,o.jsx)("span",{className:A["option-label"],children:e({id:"common.name"})}),(0,o.jsx)("span",{children:re.name||re.bpoName})]}),(0,o.jsxs)("td",{width:"50%",children:[(0,o.jsx)("span",{className:A["option-label"],children:e({id:"job-detail.contact"})}),(0,o.jsx)("span",{children:re.contact||re.contactName})]})]})})}),(0,o.jsx)("table",{width:"100%",children:(0,o.jsx)("tbody",{children:(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{width:"50%",children:[(0,o.jsx)("span",{className:A["option-label"],children:e({id:"common.email"})}),(0,o.jsx)("span",{children:re.contactEmail})]}),(0,o.jsxs)("td",{width:"50%",children:[(0,o.jsx)("span",{className:A["option-label"],children:e({id:"common.word.phone"})}),(0,o.jsx)("span",{children:re.contactPhone})]})]})})})]})};(0,W.useEffect)(function(){(0,x.$g)().then(function(te){D(te.data)}).catch(function(te){c.ZP.error(te.message)}).finally(function(){oe&&oe()})},[ve]);var Ie=function(ne,re){var me,q=re==null||(me=re.children)===null||me===void 0||(me=me.props)===null||me===void 0?void 0:me.bpoInfo,Le=q.contactEmail,ze=q.contactPhone,Ve=q.name,$e=q.bpoName,fe=q.contact,z=q.contactName;return Le&&Le.indexOf(ne)>-1||ze&&ze.indexOf(ne)>-1||Ve&&Ve.indexOf(ne)>-1||$e&&$e.indexOf(ne)>-1||fe&&fe.indexOf(ne)>-1||z&&z.indexOf(ne)>-1};return(0,o.jsx)($.Z,{showSearch:!0,defaultValue:pe||be,style:{width:X},optionLabelProp:"label",filterOption:Ie,onChange:function(ne){Ke(ne,F.find(function(re){return re.id===ne||re.bpoId===ne}))},children:F.map(function(te){return(0,o.jsx)($.Z.Option,{value:te.id||te.bpoId,label:"".concat(te.name||te.bpoName," - ").concat(te.contact||te.contactName),children:(0,o.jsx)(xe,{bpoInfo:te})},te.id||te.bpoId)})})},C=L},85984:function(tt,he,t){var _e=t(48305),s=t.n(_e),W=t(96394),c=t(32109),$=t(90966),Q=t(66063),x=t(70576),A=t(94721),o=t(42697),L=t(52676);function C(de){var N=de.visible,pe=de.timeout,be=de.submitting,ve=de.onCancel,Ke=de.onSubmit,ce=(0,x.useIntl)(),X=ce.formatMessage,oe=W.Z.useForm(),Te=s()(oe,1),e=Te[0],Me=function(){e.validateFields().then(function(F){var D=parseInt(F.timeout,10)*60;Ke(D)})};return(0,L.jsxs)(c.Z,{destroyOnClose:!0,visible:N,footer:null,maskClosable:!1,onCancel:ve,children:[(0,L.jsx)("h3",{children:X({id:"job-detail.timeout.edit"})}),(0,L.jsx)("br",{}),(0,L.jsxs)(W.Z,{form:e,hideRequiredMark:!0,colon:!1,onFinish:Me,initialValues:{timeout:pe?pe/60:A.nz},children:[(0,L.jsx)(W.Z.Item,{name:"timeout",label:X({id:"job-detail.timeout.form.timeout"}),rules:[{required:!0,message:X({id:"job-detail.timeout.form.timeout.required"})},{pattern:A.eH,message:X({id:"job-detail.timeout.form.timeout.error"})},{validator:o.qh}],children:(0,L.jsx)($.Z,{addonAfter:(0,L.jsx)("div",{style:{width:64},children:(0,L.jsx)(x.FormattedMessage,{id:"common.unit.minute"})})})}),(0,L.jsx)("div",{style:{textAlign:"right",paddingTop:24},children:(0,L.jsx)(Q.ZP,{type:"primary",htmlType:"submit",loading:be,children:(0,L.jsx)(x.FormattedMessage,{id:"common.save"})})})]})]})}he.Z=C},94619:function(tt,he,t){var _e=t(66063),s=t(70576),W=t(79266),c=t(52676);function $(Q){var x=Q.job,A=Q.updating,o=Q.handleTakeJobAction,L=Q.readonly,C=L===void 0?!1:L,de=(0,s.useIntl)(),N=de.formatMessage,pe=x||{},be=pe.jobStatus;switch(be){case W.By.READY:return(0,c.jsx)(_e.ZP,{type:"primary",loading:A,onClick:function(){return o(W.jS.LAUNCH_JOB)},disabled:C,children:N({id:"job-list.table.actions.launch"})},"launch");case W.By.LAUNCH:return(0,c.jsx)(_e.ZP,{type:"primary",loading:A,onClick:function(){return o(W.jS.START_JOB)},disabled:C,children:N({id:"job-list.table.actions.start"})},"start");case W.By.STARTING_ERROR:return(0,c.jsx)(_e.ZP,{type:"primary",loading:A,onClick:function(){return o(W.jS.START_JOB)},disabled:C,children:N({id:"job-list.table.actions.start"})},"restart");case W.By.RUNNING:return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(_e.ZP,{loading:A,onClick:function(){return o(W.jS.PAUSE_JOB)},disabled:C,children:N({id:"job-list.table.actions.pause"})},"pause")});case W.By.PAUSE:return(0,c.jsx)(_e.ZP,{loading:A,onClick:function(){return o(W.jS.RESUME_JOB)},disabled:C,children:N({id:"job-list.table.actions.resume"})},"resume");default:return null}}he.Z=$},60300:function(tt,he,t){var _e=t(26068),s=t.n(_e),W=t(48305),c=t.n(W),$=t(67825),Q=t.n($),x=t(75271),A=t(96394),o=t(42400),L=t(32109),C=t(90966),de=t(27253),N=t(3973),pe=t(70576),be=t(73095),ve=t(81399),Ke=t(22217),ce=t(52676),X=["projectId","loading","visible","initialFlow","onOk","onCancel"],oe=function(e){var Me=e.projectId,Ne=e.loading,F=Ne===void 0?!1:Ne,D=e.visible,xe=e.initialFlow,Ie=e.onOk,te=e.onCancel,ne=Q()(e,X),re=(0,pe.useIntl)(),me=re.formatMessage,q=(0,x.useState)([]),Le=c()(q,2),ze=Le[0],Ve=Le[1],$e=A.Z.useForm(),fe=c()($e,1),z=fe[0];(0,x.useEffect)(function(){Me&&(0,Ke.Yr)(Me).then(function(B){B.status===be.o.OK?Ve(B.data):o.ZP.error((0,ve.R$)(B))})},[Me]);var je=function(){z.validateFields().then(function(j){var Fe=j.flowName,Ce=j.testFlag,Re=j.templateIdType,we=Re===void 0?"":Re,We=we.split("."),ye=c()(We,2),ee=ye[0],Ye=ye[1];Ie==null||Ie({projectId:Me,flowName:Fe,testFlag:Ce,templateId:ee,templateType:Ye})}).catch(function(j){console.log(j)})};return(0,ce.jsx)(L.Z,s()(s()({},ne),{},{title:me({id:xe?"workflow.set":"workflow.create"}),className:"custom-modal",visible:D,onOk:je,onCancel:te,maskClosable:!1,confirmLoading:F,okText:me({id:"common.confirm"}),children:(0,ce.jsxs)(A.Z,{form:z,layout:"vertical",initialValues:s()(s()({},xe),{},{templateIdType:xe?"".concat(xe.templateId,".").concat(xe.templateType):void 0}),children:[(0,ce.jsx)(A.Z.Item,{label:me({id:"project.workflow.name"}),name:"flowName",rules:[{required:!0}],children:(0,ce.jsx)(C.Z,{})}),(0,ce.jsx)(A.Z.Item,{valuePropName:"checked",name:"testFlag",children:(0,ce.jsx)(de.Z,{children:me({id:"workflow.test"})})}),(0,ce.jsx)(A.Z.Item,{label:me({id:"workflow.template.select"}),name:"templateIdType",rules:[{required:!0}],children:(0,ce.jsx)(N.Z,{showSearch:!0,children:ze.map(function(B){return(0,ce.jsx)(N.Z.Option,{value:"".concat(B.id,".").concat(B.type),children:B.title},B.id)})})})]})}))};he.Z=oe},38633:function(tt,he,t){t.d(he,{V:function(){return yt},Z:function(){return Tn}});var _e=t(26068),s=t.n(_e),W=t(48305),c=t.n(W),$=t(89628),Q=t(66830),x=t(66063),A=t(9891),o=t(75271),L=t(13554),C=t(70576),de=t(77960),N=t(79266),pe=t(62057),be=t(43718),ve=t(23563),Ke=t(67489),ce=t(42697),X=t(96394),oe=t(32109),Te=t(90966),e=t(52676);function Me(n){var a=n.visible,i=n.contact,l=n.submitting,h=n.onCancel,b=n.onSubmit,f=(0,C.useIntl)(),p=f.formatMessage,g=X.Z.useForm(),y=c()(g,1),v=y[0],m=function(){v.validateFields().then(function(_){b(_)})};return(0,e.jsxs)(oe.Z,{destroyOnClose:!0,visible:a,footer:null,maskClosable:!1,onCancel:h,children:[(0,e.jsx)("h3",{children:p({id:"job-detail.contact.edit"})}),(0,e.jsx)("br",{}),(0,e.jsxs)(X.Z,{form:v,hideRequiredMark:!0,colon:!1,onFinish:m,initialValues:{contactEmail:i.contactEmail},children:[(0,e.jsx)(X.Z.Item,{name:"contactEmail",label:p({id:"job-detail.contact.form.contact-email"}),rules:[{required:!0,message:p({id:"job-detail.contact.form.contact-email.required"})},{validator:ce.on}],children:(0,e.jsx)(Te.Z,{})}),(0,e.jsx)("div",{style:{textAlign:"right",paddingTop:24},children:(0,e.jsx)(x.ZP,{type:"primary",htmlType:"submit",loading:l,children:p({id:"common.save"})})})]})]})}var Ne=Me;function F(n){var a=n.job,i=n.updating,l=n.readonly,h=n.onUpdateJob,b=(0,C.useIntl)(),f=b.formatMessage,p=(0,o.useState)({contact:!1}),g=c()(p,2),y=g[0],v=g[1],m=a||{},Z=m.jobDisplayId,_=m.contactEmail,w=m.createdTime,R=function(O){h(O,function(){v(s()(s()({},y),{},{contact:!1}))})},Y=[{key:"jobDisplayId",title:f({id:"jobId"}),content:Z},{key:"contact",title:(0,e.jsxs)("span",{children:[f({id:"job-detail.contact"}),!l&&(0,e.jsx)(x.ZP,{type:"link",style:{padding:0},onClick:function(){return v(s()(s()({},y),{},{contact:!0}))},icon:(0,e.jsx)(L.Z,{})})]}),content:_},{key:"creation",title:f({id:"job-detail.creation"}),content:(0,ve.vc)(w)}];return(0,e.jsxs)("div",{style:{padding:24,borderBottom:"1px solid #dcdfe3"},children:[(0,e.jsx)(pe.Z,{gutter:[16,16],children:Y.map(function(U){var O=U.key,T=U.title,E=U.content;return(0,e.jsx)(be.Z,{span:12,children:(0,e.jsx)(Ke.Z,{title:T,content:E})},O)})}),(0,e.jsx)(Ne,{visible:y.contact,contact:{contactEmail:a==null?void 0:a.contactEmail},submitting:i,onCancel:function(){return v(s()(s()({},y),{},{contact:!1}))},onSubmit:R})]})}var D=F,xe=t(50728),Ie=t(85193);function te(n){var a=n.visible,i=n.multipleRecords,l=n.distribution,h=n.submitting,b=n.showRecordNum,f=n.showWorkerNum,p=f===void 0?!0:f,g=n.onCancel,y=n.onSubmit,v=(0,C.useIntl)(),m=v.formatMessage,Z=X.Z.useForm(),_=c()(Z,1),w=_[0];(0,o.useEffect)(function(){a||w.resetFields()},[w,a]);var R=function(){w.validateFields().then(function(O){y(O)})},Y=(0,e.jsxs)("span",{children:[m({id:"job-detail.distribution.form.record-num"}),!i&&(0,e.jsx)(Ie.Z,{content:m({id:"job-detail.distribution.form.record-num.tip"}),children:(0,e.jsx)(xe.Z,{style:{margin:"0 5px"}})})]});return(0,e.jsxs)(oe.Z,{destroyOnClose:!0,visible:a,footer:null,maskClosable:!1,onCancel:g,children:[(0,e.jsx)("h3",{children:m({id:"job-detail.distribution.edit"})}),(0,e.jsx)("br",{}),(0,e.jsxs)(X.Z,{form:w,hideRequiredMark:!0,colon:!1,onFinish:R,initialValues:s()({},l),children:[b&&(0,e.jsx)(X.Z.Item,{name:"recordNum",label:Y,rules:[{required:!0,message:m({id:"job-detail.distribution.form.record-num.required"})},{pattern:/^[1-9]+[\d]*$/,message:m({id:"job-detail.distribution.form.number.error"})}],children:(0,e.jsx)(Te.Z,{disabled:!i})}),p&&(0,e.jsx)(X.Z.Item,{name:"workerNum",label:m({id:"job-detail.distribution.form.worker-num"}),rules:[{required:!0,message:m({id:"job-detail.distribution.form.worker-num.required"})},{pattern:/^[1-9]+[\d]*$/,message:m({id:"job-detail.distribution.form.number.error"})},{validator:ce.$o}],children:(0,e.jsx)(Te.Z,{})}),(0,e.jsx)("div",{style:{textAlign:"right",paddingTop:24},children:(0,e.jsx)(x.ZP,{type:"primary",htmlType:"submit",loading:h,children:m({id:"common.save"})})})]})]})}var ne=te,re=t(85984),me=t(171),q=t(97924);function Le(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return a?!1:n===N.By.DRAFT||n===N.By.READY||n===N.By.LAUNCH||n===N.By.STARTING_ERROR}function ze(n){var a=n.job,i=n.updating,l=n.readonly,h=n.onUpdateJob,b=(0,o.useState)(!1),f=c()(b,2),p=f[0],g=f[1],y=(0,o.useState)(!1),v=c()(y,2),m=v[0],Z=v[1],_=a||{},w=_.recordNum,R=_.workerNum,Y=_.jobStatus,U=_.jobType,O=_.timeout,T=_.templateType,E=O,J=T!==me.WY.LIDAR&&T!==me.WY.LIDAR_SSE,M=function(ke){h(ke,function(){g(!1)})},ae=function(ke){h({timeout:ke},function(){Z(!1)})};return(0,e.jsxs)("div",{style:{padding:24,borderBottom:"1px solid #dcdfe3"},children:[(0,e.jsxs)(pe.Z,{gutter:[16,16],children:[(0,e.jsxs)(be.Z,{span:8,children:[(0,e.jsxs)("span",{className:q.Z.title,children:[(0,e.jsx)(C.FormattedMessage,{id:"job-detail.timeout"}),Y!==N.By.FINISHED&&(0,e.jsx)(x.ZP,{type:"link",className:q.Z.edit,onClick:function(){return Z(!0)},disabled:l,icon:(0,e.jsx)(L.Z,{})})]}),(0,e.jsxs)("div",{className:q.Z.number,children:[E?E/60:"-",(0,e.jsx)("span",{className:q.Z.unit,children:(0,e.jsx)(C.FormattedMessage,{id:"common.unit.minute"})})]})]}),(0,e.jsxs)(be.Z,{span:12,children:[(0,e.jsxs)("span",{className:q.Z.title,children:[(0,e.jsx)(C.FormattedMessage,{id:"job-detail.distribution"}),Le(Y)&&(0,e.jsx)(x.ZP,{type:"link",className:q.Z.edit,onClick:function(){return g(!0)},disabled:l,icon:(0,e.jsx)(L.Z,{})})]}),(0,e.jsxs)(pe.Z,{children:[(0,e.jsx)(be.Z,{xs:24,sm:8,children:(0,e.jsxs)("div",{className:q.Z.number,children:[w||"-",(0,e.jsx)("span",{className:q.Z.unit,children:(0,e.jsx)(C.FormattedMessage,{id:"job-detail.record-num"})})]})}),(0,e.jsx)(be.Z,{xs:24,sm:7,children:(0,e.jsxs)("div",{className:q.Z.number,children:[R||"-",(0,e.jsx)("span",{className:q.Z.unit,children:(0,e.jsx)(C.FormattedMessage,{id:"job-detail.worker-num"})})]})})]})]})]}),(0,e.jsx)(ne,{visible:p,multipleRecords:J,distribution:{recordNum:w,workerNum:R},submitting:i,showDataSelection:U===N.O4.QA,showRecordNum:!0,showWorkerNum:!1,onCancel:function(){return g(!1)},onSubmit:M}),(0,e.jsx)(re.Z,{visible:m,timeout:E,submitting:i,onCancel:function(){return Z(!1)},onSubmit:ae})]})}var Ve=ze,$e=t(82092),fe=t.n($e),z=t(27253),je=t(15558),B=t.n(je),j=t(42400),Fe=t(64191),Ce=t(61234),Re=t(54833),we=t(41388),We=t(56138),ye=t(37704),ee=t(63264),Ye=t(89633),nt=t(15409),qe=t(50025),Be=function(a){var i=a.value,l=a.onSubmit,h=a.loading,b=a.disabled,f=(0,o.useState)(!1),p=c()(f,2),g=p[0],y=p[1],v=(0,o.useState)(),m=c()(v,2),Z=m[0],_=m[1],w=(0,o.useState)(!1),R=c()(w,2),Y=R[0],U=R[1];(0,o.useEffect)(function(){_(i)},[i,h,g]);var O=function(){Y||(l(Number(Z)),y(!1))},T=function(){y(!0)},E=function(ae){if(ae.indexOf(".")>-1)return!1;var ie=Number(ae);return Number.isInteger(ie)&&ie>=0&&ie<=100},J=function(ae){U(!E(ae.target.value)),_(ae.target.value)};return(0,e.jsx)(Q.Z,{spinning:h,children:(0,e.jsx)("div",{style:{height:36},children:g?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(X.Z.Item,{style:{marginBottom:0},validateStatus:Y?"error":"success",children:[(0,e.jsx)(Te.Z,{style:{width:"80px",marginRight:8},autoFocus:!0,value:Z,onChange:J}),(0,e.jsx)("span",{style:{marginRight:8},children:"%"}),(0,e.jsx)(x.ZP,{style:{width:"28px",height:"28px"},type:"link",icon:(0,e.jsx)(Ye.Z,{}),onClick:O}),(0,e.jsx)(x.ZP,{style:{width:"28px",height:"28px"},type:"link",icon:(0,e.jsx)(nt.Z,{}),onClick:function(){return y(!1)}})]})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(qe.Z,{color:"geekblue",style:{borderRadius:4,marginTop:"2px",width:"80px",height:"32px",lineHeight:"32px",textAlign:"center"},children:[Z," %"]}),(0,e.jsx)(x.ZP,{disabled:b,style:{width:"28px",height:"28px"},type:"link",icon:(0,e.jsx)(L.Z,{}),onClick:T})]})})})},Ae=Be,Pe=t(94721),V=t(81399),Ze=t(73095),ue=t(65167),at=t(45269);function mt(n){var a=n.mode,i=a===void 0?"all":a,l=n.workers,h=l===void 0?[]:l,b=n.jobId,f=n.totalNum,p=n.visible,g=n.onClose,y=n.onRefresh,v=(0,C.useIntl)(),m=v.formatMessage,Z=(0,o.useState)(!1),_=c()(Z,2),w=_[0],R=_[1],Y=X.Z.useForm(),U=c()(Y,1),O=U[0],T=function(){O.validateFields().then(function(J){R(!0),(i==="all"?(0,ee.K$)(b,J.sampleRate):(0,ee.pP)(h.map(function(M){return s()(s()({},M),{},{qaJobId:b,sampleRate:J.sampleRate})}))).then(function(M){M.status===Ze.o.OK?(g(),y()):j.ZP.error((0,V.R$)(M))}).catch(function(M){return j.ZP.error((0,V.R$)(M))}).finally(function(){return R(!1)})})};return(0,e.jsxs)(ye.Z,{title:i&&m({id:"job.qa.set-rate.modify-".concat(i)}),width:760,visible:p,onClose:g,onSave:T,saveLoading:w,children:[i==="batch"?(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{style:{margin:"0 0 12px",color:"#42526e"},children:m({id:"job.qa.set-rate.selected-worker"},{number:h.length})}),h.map(function(E){return(0,e.jsx)(qe.Z,{style:{marginBottom:16,marginRight:16,borderRadius:4,background:"#f6f7f9",height:28,lineHeight:"28px"},children:E.workerEmail})})]}):(0,e.jsx)("p",{style:{color:"#42526e"},children:m({id:"job.qa.set-rate.all-worker"},{number:f})}),(0,e.jsx)(X.Z,{form:O,children:(0,e.jsxs)(X.Z.Item,{label:(0,e.jsx)("span",{style:{color:"#42526e"},children:m({id:"job.qa.set-rate.modify-label"})}),children:[(0,e.jsx)(X.Z.Item,{noStyle:!0,name:"sampleRate",rules:[{validator:function(J,M,ae){!M&&M!==0?ae(m({id:"job.qa.set-rate.required"})):ae()}}],children:(0,e.jsx)(Re.Z,{style:{width:160},min:0,max:100,precision:0})}),(0,e.jsx)("span",{style:{marginLeft:8},children:"%"})]})})]})}var ot=mt,ht=t(34375),pt=t(18023);function ft(n){var a=n.visible,i=n.onClose,l=n.jobId,h=n.isMultiWorkerPerRow,b=h===void 0?!1:h,f=(0,C.useIntl)(),p=f.formatMessage,g=(0,o.useState)([]),y=c()(g,2),v=y[0],m=y[1],Z=(0,o.useState)([]),_=c()(Z,2),w=_[0],R=_[1],Y=(0,o.useState)(),U=c()(Y,2),O=U[0],T=U[1],E=(0,o.useState)(),J=c()(E,2),M=J[0],ae=J[1],ie=(0,o.useState)({}),ke=c()(ie,2),le=ke[0],De=ke[1],ct=(0,o.useState)(1),lt=c()(ct,2),Ge=lt[0],Qe=lt[1],st=(0,o.useState)(Pe.L8),H=c()(st,2),S=H[0],u=H[1],d=(0,o.useState)(0),I=c()(d,2),k=I[0],r=I[1],K=(0,o.useState)(!1),Je=c()(K,2),ut=Je[0],_t=Je[1],Mn=(0,o.useState)([]),Nt=c()(Mn,2),St=Nt[0],Rt=Nt[1],Nn=(0,o.useState)(),At=c()(Nn,2),jt=At[0],It=At[1],Rn=function(P,G){var Oe=v.find(function(Xe){return Xe.workerId===P});Oe.sampleRate!==G&&(Rt([].concat(B()(St),[P])),(0,ee.pP)([s()(s()({},Oe),{},{qaJobId:l,sampleRate:G})]).then(function(Xe){Xe.status===Ze.o.OK?(m(v.map(function(bt){return s()(s()({},bt),{},{sampleRate:bt.workerId===P?G:bt.sampleRate})})),j.ZP.success(p({id:"common.message.success.update"}))):j.ZP.error((0,V.R$)(Xe))}).finally(function(){Rt(St.filter(function(Xe){return Xe!==P}))}))},An=function(P,G){Qe(P),u(G)},Wt=function(){_t(!0),R([]),(0,ee.T_)(l,Ge-1,S,le).then(function(P){if(P.status===Ze.o.OK){var G=P.data,Oe=G.totalElements,Xe=G.results;m(Xe||[]),r(Oe)}else j.ZP.error((0,V.R$)(P))}).finally(function(){_t(!1)})},Wn=function(P){return Number.isInteger(P)&&P>=0&&P<=100},Lt=function(P){if(Wn(M)){var G=P?P.target.value:O;T(G),_t(!0),(0,ee.td)(l,M,G).then(function(Oe){Oe.status!==Ze.o.OK&&(j.ZP.error((0,V.R$)(Oe)),P&&T(!G))}).catch(function(Oe){j.ZP.error((0,V.R$)(Oe)),P&&T(!G)}).finally(function(){return _t(!1)})}},Ln=(0,pt.Z)(Lt,1e3);(0,o.useEffect)(function(){a&&(_t(!0),Promise.all([(0,ee.Zn)(l),(0,ee.T_)(l,Ge-1,S,le)]).then(function(se){var P=c()(se,2),G=P[0],Oe=P[1];if(Oe.status===Ze.o.OK){var Xe=Oe.data,bt=Xe.totalElements,Jn=Xe.results;m(Jn||[]),r(bt)}else j.ZP.error((0,V.R$)(Oe));if(G.status===Ze.o.OK){var Ft=G.data,Kn=Ft.globalSampleRate,zn=Ft.globalSampleSwitchOn;T(zn),ae(+Kn)}else j.ZP.error((0,V.R$)(G))}).catch(function(se){return j.ZP.error((0,V.R$)(se))}).finally(function(){return _t(!1)}))},[l,a]),(0,o.useEffect)(function(){a&&Wt()},[S,Ge,le]);var Fn=[{title:p({id:"job-detail.workforce.col.email"}),dataIndex:"workerEmail",render:function(P,G){return(0,V.E5)(P,G.workerId)}},{title:p({id:"job-detail.workforce.col.name"}),dataIndex:"workerName",render:function(P,G){return(0,V.E5)(P,G.workerId)}},{title:(0,e.jsxs)("span",{children:[p({id:"job.qa.set-rate.sample-rate"}),(0,e.jsx)(Ie.Z,{content:(0,e.jsx)("div",{className:"color-grey-6",children:(0,e.jsx)("div",{style:{wordBreak:"break-all"},children:(0,e.jsx)("div",{children:p({id:"qa-job-create.data-selection.extra"})})})}),children:(0,e.jsx)(xe.Z,{className:"color-grey-9",style:{marginLeft:"8px"}})})]}),render:function(P){return(0,e.jsx)(Ae,{disabled:P.workerEmail===V._$,loading:!!St.find(function(G){return G===P.workerId}),value:P.sampleRate,onSubmit:function(Oe){return Rn(P.workerId,Oe)}})}}],Bn=[{key:"emailsOrNames",type:at.aH.Text,placeholder:p({id:"job.qa.rate-search-placeholder"})}],Un={selectedRowKeys:w.map(function(se){return se.workerId}),onChange:function(P,G){return R(G)},getCheckboxProps:function(P){return{disabled:P.workerEmail===V._$}}};return(0,e.jsx)(ye.Z,{title:(0,e.jsxs)(e.Fragment,{children:[p({id:"job.qa.setSampleRate"}),(0,e.jsx)(Fe.Z,{title:p({id:"job.qa.setSampleRate.tip"}),children:(0,e.jsx)(xe.Z,{style:{marginLeft:8}})})]}),visible:a,width:800,onClose:i,onSave:i,showFooter:!1,children:(0,e.jsxs)(Q.Z,{spinning:ut,children:[(0,e.jsxs)(Ce.ZP.Group,{value:O,style:{display:"block",marginBottom:16},onChange:Lt,children:[(0,e.jsx)("div",{children:(0,e.jsxs)(Ce.ZP,{value:!0,style:{display:"inline-block",height:32,color:O?"#3e5270":"#7a869a"},children:[p({id:"job.qa.set-rate.all"}),(0,e.jsx)(Re.Z,{style:{width:160,margin:"0 8px"},min:0,max:100,precision:0,disabled:!O,value:Number(M),onChange:function(P){ae(+P),Ln()}}),"%"]})}),(0,e.jsx)(we.Z,{style:{margin:"16px 0"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)(Ce.ZP,{value:!1,style:{display:"inline-block",height:32,color:O?"#7a869a":"#3e5270"},disabled:b,children:p({id:"job.qa.set-rate.customized"})}),(0,e.jsx)(x.ZP,{style:{float:"right"},onClick:function(){return It("all")},disabled:O||b,children:p({id:"job.qa.set-rate.modify-all"})})]})]}),(0,e.jsx)(ue.Z,{formItems:Bn,formStyle:{marginBottom:0},formItemStyle:{marginBottom:15},initialValue:le,onFilterValueChange:function(P){De(P),Qe(1)}}),(0,e.jsx)(we.Z,{style:{margin:0}}),(0,e.jsx)(We.Z,{rowKey:"workerId",scroll:{y:440},className:ht.Z.tableStriped,columns:Fn,dataSource:v,rowSelection:Un,pagination:{total:k,pageSize:S,current:Ge,onChange:An,showSizeChanger:!0,pageSizeOptions:Pe.TJ,showTotal:function(P){return p({id:"common.total.items"},{items:P})}}}),(0,e.jsx)("div",{style:{marginTop:-48},children:(0,e.jsx)(x.ZP,{type:"primary",onClick:function(){return It("batch")},disabled:w.length===0,children:p({id:"job.qa.set-rate.modify-batch"})})}),(O||b)&&(0,e.jsx)("div",{style:{position:"absolute",width:"100%",height:"calc(100% - 100px)",top:100,background:"white",opacity:.4,zIndex:1,cursor:"not-allowed"}}),(0,e.jsx)(ot,{visible:!!jt,totalNum:jt==="all"?k:w.length,mode:jt,jobId:l,workers:jt==="all"?[]:w,onClose:function(){It(null)},onRefresh:function(){Wt()}})]})})}var gt=ft;function He(n){var a=n.job,i=n.updating,l=n.readonly,h=n.onUpdateJob,b=(0,C.useIntl)(),f=b.formatMessage,p=(0,o.useState)(!1),g=c()(p,2),y=g[0],v=g[1],m=a||{},Z=m.jobStatus,_=m.id,w=m.globalSampleRate,R=m.globalSampleSwitchOn,Y=m.qaModifiable,U=m.showWorkerName,O=function(E,J){h(fe()({},E,J))};return(0,e.jsxs)("div",{style:{padding:24,borderBottom:"1px solid #dcdfe3"},children:[(0,e.jsx)("h3",{style:{fontWeight:"bold",color:"#42526e"},children:f({id:"workflow.job.qa.rule"})}),(0,e.jsxs)("p",{style:{color:"#42526e"},children:[R?(0,e.jsx)("span",{children:"".concat(f({id:"job.qa.set-rate.all"})," ").concat(w,"%")}):f({id:"job.qa.set-rate.customized"}),(0,e.jsx)(x.ZP,{type:"link",style:{padding:0},icon:(0,e.jsx)(L.Z,{}),onClick:function(){return v(!0)},disabled:l})]}),(0,e.jsx)("div",{style:{marginBottom:12},children:(0,e.jsx)(z.Z,{disabled:Z!==N.By.READY||i,checked:Y,onChange:function(E){return O("qaModifiable",E.target.checked)},children:f({id:"job.qa.create.form.qaModifiable"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(z.Z,{disabled:Z!==N.By.READY||i,checked:U,onChange:function(E){return O("showWorkerName",E.target.checked)},children:f({id:"labeling-job-create.wizard.overview.form.showWorkerName"})})}),(0,e.jsx)(gt,{visible:y,jobId:_,onClose:function(){return v(!1)}})]})}var Ue=He,rt=t(49093);function ge(n){var a=n.job,i=n.readonly,l=n.updating,h=n.onUpdateJob;return(0,e.jsxs)("div",{children:[(0,e.jsx)(D,{job:a,readonly:i,updating:l,onUpdateJob:h}),(0,e.jsx)(Ve,{job:a,readonly:i,updating:l,onUpdateJob:h}),(a==null?void 0:a.jobType)===N.O4.QA&&(0,e.jsx)(Ue,{job:a,readonly:i,updating:l,onUpdateJob:h}),(0,e.jsx)(rt.Z,{job:a,readonly:i,updating:l,onUpdateJob:h})]})}var xt=ge,Bt=t(90228),Ee=t.n(Bt),Ut=t(87999),it=t.n(Ut),Jt=t(89314),Kt=t(48648),zt=t(27207),Ct=t(23048),Vt=t(887),vt={"bpo-info-label":"bpo-info-label___l41SJ","bpo-info-icon":"bpo-info-icon___TbiNk","bpo-info-value":"bpo-info-value___aRTcK","bpo-filter-container":"bpo-filter-container___fayke","form-item":"form-item___HbvQ5",label:"label___deQwM",btn:"btn___fcPaW","bpo-worker-export":"bpo-worker-export___CejJn",action:"action___vzJAK",disable:"disable___FFHPs"},$t=t(62388),Yt=t(48194),Ht=t(69164),Gt=t(79312),Qt=t(98868),wt=t(35866);function Xt(n){var a=n.job,i=n.onUploading,l=n.onFileUploaded,h=n.config,b=n.isDragger,f=b===void 0?!1:b,p=n.uploadURL,g=(0,C.useIntl)(),y=g.formatMessage,v=(0,o.useState)(!1),m=c()(v,2),Z=m[0],_=m[1],w="".concat(p,"?jobId=").concat(a.id),R=s()({name:"file",accept:".csv",action:w,showUploadList:!1,withCredentials:!0,onChange:function(U){var O=U.file;i&&i(!0),O.status==="done"?(l&&(j.ZP.success(y({id:"job.form.upload.success"},{name:O.name})),l(O)),_(!1),i&&i(!1)):O.status==="error"&&(j.ZP.error(y({id:"job.form.upload.error"},{name:O.name})),_(!1),i&&i(!1))}},h);return f?(0,e.jsx)(wt.Z.Dragger,s()(s()({},R),{},{children:(0,e.jsxs)("div",{style:{margin:"32px 0"},children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Ht.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:y({id:"component.uploader.dragger.title"})}),(0,e.jsx)("p",{className:"ant-upload-hint",children:y({id:"component.uploader.dragger.support"},{list:".csv"})})]})})):(0,e.jsx)(wt.Z,s()(s()({},R),{},{disabled:Z,children:(0,e.jsx)(x.ZP,{icon:Z?(0,e.jsx)(Gt.Z,{}):(0,e.jsx)(Qt.Z,{}),disabled:Z,children:y({id:"job-create.email.upload.button"})})}))}function Vn(n){var a=n.onFileUpdate,i=useIntl(),l=i.formatMessage,h={name:"file",accept:".csv",maxCount:1,onRemove:function(){a(null)},beforeUpload:function(f){return a(f),!1}};return _jsx(Upload.Dragger,_objectSpread(_objectSpread({},h),{},{children:_jsxs("div",{style:{margin:"32px 0"},children:[_jsx("p",{className:"ant-upload-drag-icon",children:_jsx(InboxOutlined,{})}),_jsx("p",{className:"ant-upload-text",children:l({id:"component.uploader.dragger.title"})}),_jsx("p",{className:"ant-upload-hint",children:l({id:"component.uploader.dragger.support"},{list:".csv"})})]})}))}var qt=Xt,en=t(45774);function tn(n){var a=n.job,i=n.visible,l=n.onWorkersChange,h=n.onClose,b=(0,C.useIntl)(),f=b.formatMessage,p=(0,o.useState)(!1),g=c()(p,2),y=g[0],v=g[1];return(0,e.jsxs)(oe.Z,{width:768,visible:i,footer:null,maskClosable:!1,onCancel:h,children:[(0,e.jsx)("h3",{children:f({id:"job-detail.workforce.add"})}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[f({id:"job-detail.workforce.add.modal-text"}),(0,e.jsx)("a",{href:"".concat((0,en.Ak)(),"/templates/workers-sample.csv"),children:(0,e.jsx)(x.ZP,{type:"link",icon:(0,e.jsx)(Yt.Z,{}),children:(0,e.jsx)(C.FormattedMessage,{id:"job-detail.workforce.download-template"})})})]}),(0,e.jsx)(Q.Z,{spinning:y,children:(0,e.jsx)(qt,{isDragger:!0,job:a,onFileUploaded:function(Z){var _=Z.response,w=_.data;l(w),h()},onUploading:v,uploadURL:Pe.N$})})]})}var nn=tn,an=t(10954),on=t(33917),rn=t(82187),ln=t.n(rn),et={"filter-label":"filter-label____v7bM","revoke-btn":"revoke-btn___yXvyU","list-box":"list-box___hMPN4",list:"list___rzcff","selected-list":"selected-list___xC9C5",header:"header___epF51","clear-btn":"clear-btn___pBV6_","select-list-item":"select-list-item___GF6Nc","close-btn":"close-btn___Ljezo",label:"label___DpjC3","progress-item":"progress-item___aaUSv",rate:"rate___dcf9T","list-item":"list-item___HMeZ7","job-desc":"job-desc___aeJRO",checkbox:"checkbox___lPkJy",name:"name___JxUZ4",type:"type___Iyv1i","job-progress":"job-progress___tTMlK","select-all":"select-all___quOq5",pagination:"pagination___bZBr6"},Et=t(20527),kt=function(n){return n.ACTIVE="ACTIVE",n.TO_BE_ACTIVE="TO_BE_ACTIVE",n}(kt||{});function sn(n){var a=n.projectId,i=n.jobId,l=n.visible,h=n.onClose,b=n.onSave,f=(0,C.useIntl)(),p=f.formatMessage,g=(0,o.useState)(0),y=c()(g,2),v=y[0],m=y[1],Z=(0,o.useState)([]),_=c()(Z,2),w=_[0],R=_[1],Y=(0,o.useState)(!1),U=c()(Y,2),O=U[0],T=U[1],E=(0,o.useState)({pageSize:Pe.L8,pageIndex:0}),J=c()(E,2),M=J[0],ae=J[1],ie=(0,o.useState)([]),ke=c()(ie,2),le=ke[0],De=ke[1],ct=[{key:"uniqueName",placeholder:p({id:"common.worker.unique-name"}),type:at.aH.Text,style:{width:160}},{key:"activeStatus",placeholder:p({id:"common.status"}),style:{width:160},type:at.aH.Single,options:Object.keys(kt),optionLabel:function(d){return p({id:"common.user.status.".concat(d.toLowerCase())})},allowClear:!0}],lt=[{title:p({id:"common.worker.unique-name"}),render:function(d){return(0,e.jsxs)("p",{style:{margin:0,color:"#42526e"},children:[d.uniqueName,(0,e.jsx)("span",{style:{marginLeft:4,color:"#7a869a"},children:d.email})]})}},{title:p({id:"common.status"}),render:function(d){return(0,e.jsx)("p",{style:{margin:0,color:"#42526e"},children:p({id:"common.user.status.".concat(d.activeStatus.toLowerCase())})})}}],Ge=function(){var u=it()(Ee()().mark(function d(){var I;return Ee()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,Et.LG)({jobId:i,userIds:le.map(function(K){return K.id})});case 3:if(I=r.sent,I.status===Ze.o.OK){r.next=7;break}return j.ZP.error((0,V.R$)(I)),r.abrupt("return");case 7:j.ZP.success(p({id:"common.message.success.update"})),b(),h(),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),j.ZP.error((0,V.R$)(r.t0));case 15:case"end":return r.stop()}},d,null,[[0,12]])}));return function(){return u.apply(this,arguments)}}(),Qe=function(){Ge()},st=function(){var u=it()(Ee()().mark(function d(){var I;return Ee()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(l){r.next=2;break}return r.abrupt("return");case 2:return T(!0),r.prev=3,r.next=6,(0,Et.$U)(s()(s()({},M),{},{projectId:a}));case 6:I=r.sent,I.status===Ze.o.OK?(R(I.data.results),m(I.data.totalElements)):j.ZP.error((0,V.R$)(I)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),j.ZP.error((0,V.R$)(r.t0));case 13:return r.prev=13,T(!1),r.finish(13);case 16:case"end":return r.stop()}},d,null,[[3,10,13,16]])}));return function(){return u.apply(this,arguments)}}(),H={selectedRowKeys:le.map(function(u){return u.id}),onSelect:function(d,I){if(I)De(le.concat([d]));else{var k=le.filter(function(r){return r.id!==d.id});De(k)}},onSelectAll:function(d,I,k){if(d){var r=k.filter(function(Je){return!le.find(function(ut){return ut.id===Je.id})});De(le.concat(r||[]))}else{var K=le.filter(function(Je){return!k.find(function(ut){return ut.id===Je.id})});De(K||[])}}},S=function(){var d=B()(le);De([]),j.ZP.warning((0,e.jsxs)("span",{children:[p({id:"project.detail.analysis.workload.clear-all-tip"},{num:d.length}),(0,e.jsx)(x.ZP,{className:et["revoke-btn"],type:"link",onClick:function(){De(d),j.ZP.destroy()},children:p({id:"common.revoke"})})]}),3)};return(0,o.useEffect)(function(){l&&st()},[l,M]),(0,o.useEffect)(function(){l||(ae({pageSize:Pe.L8,pageIndex:0}),De([]))},[l]),(0,e.jsxs)(ye.Z,{width:1100,title:p({id:"job-detail.workforce.select.internal"}),visible:l,onClose:h,onSave:Qe,children:[(0,e.jsx)(ue.Z,{formItems:ct,onFilterValueChange:function(d){return ae(s()(s()({},d),{},{pageIndex:0,pageSize:M.pageSize}))},initialValue:{},searchMode:"click"}),(0,e.jsxs)("div",{className:et["list-box"],children:[(0,e.jsx)(We.Z,{rowKey:"id",className:ln()("tableStriped",et.list),style:{borderTop:"1px solid #F0F0F0",paddingTop:0},columns:lt,dataSource:w,rowSelection:H,loading:O,pagination:!1}),(0,e.jsx)(an.Z,{className:et["selected-list"],dataSource:le,header:(0,e.jsxs)("div",{className:et.header,children:[p({id:"job-detail.bpo-workforce.select-tip"},{count:le.length}),(0,e.jsx)(x.ZP,{type:"link",className:et["clear-btn"],onClick:S,disabled:le.length===0,children:p({id:"common.clear"})})]}),renderItem:function(d){return(0,e.jsxs)("div",{className:et["select-list-item"],children:[(0,e.jsx)(nt.Z,{className:et["close-btn"],onClick:function(){return De(le.filter(function(k){return k.id!==d.id}))}}),(0,e.jsx)("span",{className:et.label,children:d.uniqueName||d.email})]})}})]}),(0,e.jsx)(on.Z,{className:et.pagination,showTotal:function(d){return(0,e.jsx)(e.Fragment,{children:p({id:"bpo-project-invitation.total"},{total:d})})},current:M.pageIndex+1,total:v,pageSize:M.pageSize,pageSizeOptions:Pe.TJ,showSizeChanger:!0,onChange:function(d,I){ae(s()(s()({},M),{},{pageIndex:d-1,pageSize:I}))}})]})}var Dt=t(62135),dn=t(91212),cn=t(40769);function un(n){var a=n.job,i=n.readonly,l=i===void 0?!1:i,h=n.workerNum,b=n.submitting,f=n.dispatch,p=(0,C.useIntl)(),g=p.formatMessage,y=(0,o.useState)(),v=c()(y,2),m=v[0],Z=v[1],_=(0,o.useState)(),w=c()(_,2),R=w[0],Y=w[1],U=(0,o.useState)({internalUpload:!1,internalAdd:!1,bpoWorker:!1,publicWorker:!1,bpoTeam:!1}),O=c()(U,2),T=O[0],E=O[1],J=a||{},M=J.projectId,ae=J.bpoFlag,ie=J.id,ke=J.bpoId,le=function(){var S=(0,Dt.o)(a);return ae?"".concat(g({id:"workflow.job-type.team.".concat(S==null?void 0:S.toLowerCase())}),": [").concat((m==null?void 0:m.bpoDisplayId)||"","] ").concat((m==null?void 0:m.name)||""):g({id:"workflow.job-type.team.".concat(S==null?void 0:S.toLowerCase())})},De=[{icon:(0,e.jsx)(Jt.Z,{className:vt["bpo-info-icon"]}),label:g({id:"common.contact-name"}),key:"contact"},{icon:(0,e.jsx)(Kt.Z,{className:vt["bpo-info-icon"]}),label:g({id:"project.detail.workforce.contact-phone"}),key:"contactPhone"},{icon:(0,e.jsx)(zt.Z,{className:vt["bpo-info-icon"]}),label:g({id:"common.contact-email"}),key:"contactEmail"}],ct=function(){var S=(0,Dt.o)(a);E(s()(s()({},T),{},{internalUpload:S===N.cy.PRIVATE,bpoWorker:S===N.cy.COMPANY}))},lt=function(){f({type:"jobDetailDrawer/getJobWorkerNum",payload:{jobId:ie}})},Ge=function(){var H=it()(Ee()().mark(function S(u){var d;return Ee()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(u){k.next=2;break}return k.abrupt("return");case 2:return k.prev=2,k.next=5,(0,cn.Nj)(u);case 5:d=k.sent,Z(d.data),k.next=12;break;case 9:k.prev=9,k.t0=k.catch(2),j.ZP.error((0,V.R$)(k.t0));case 12:case"end":return k.stop()}},S,null,[[2,9]])}));return function(u){return H.apply(this,arguments)}}(),Qe=function(){E({internalUpload:!1,internalAdd:!1,bpoWorker:!1,publicWorker:!1,bpoTeam:!1}),f({type:"jobDetailDrawer/getJobWorkerList",payload:{jobId:ie}}),lt()},st=function(){f({type:"jobDetailDrawer/updateJobBpo",payload:{jobId:ie,bpoId:R.id||R.bpoId,bpoName:R.name||R.bpoName,callback:function(){Y(null),E(s()(s()({},T),{},{bpoTeam:!1})),Qe(),Ge(R.id||R.bpoId)}}})};return(0,o.useEffect)(function(){Ge(ke)},[ke]),(0,e.jsxs)("div",{style:{marginTop:"-16px",marginBottom:"16px",padding:"0 24px",background:"#F6F7F9"},children:[(0,e.jsxs)("h3",{style:{margin:0,lineHeight:"52px",color:"#3e5270"},children:[le(),(0,e.jsxs)("span",{style:{float:"right",fontSize:20},children:[h,ae?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ie.Z,{placement:"bottomLeft",arrowPointAtCenter:!0,content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x.ZP,{style:{marginRight:12},onClick:function(){return E(s()(s()({},T),{},{bpoWorker:!0}))},disabled:l,children:g({id:"job-detail.workforce.add.COMPANY"})}),(0,e.jsx)(x.ZP,{onClick:function(){return E(s()(s()({},T),{},{internalUpload:!0}))},disabled:l,children:g({id:"job-detail.workforce.add.internal"})})]}),children:(0,e.jsx)(Ct.Z,{twoToneColor:"#a0aabc",style:{marginLeft:12},disabled:l})}),(a==null?void 0:a.jobStatus)!==N.By.RUNNING&&(a==null?void 0:a.jobStatus)!==N.By.PAUSE&&!l&&(0,e.jsx)(Ie.Z,{placement:"bottomLeft",arrowPointAtCenter:!0,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(x.ZP,{onClick:function(){return E(s()(s()({},T),{},{bpoTeam:!0}))},children:g({id:"job-detail.bpo-workforce.change-title"})})}),children:(0,e.jsx)(Vt.Z,{style:{marginLeft:12}})})]}):!l&&(0,e.jsx)(Ie.Z,{placement:"bottomLeft",arrowPointAtCenter:!0,content:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x.ZP,{style:{marginRight:12},onClick:function(){return E(s()(s()({},T),{},{internalAdd:!0}))},disabled:l,children:g({id:"job-detail.workforce.select.internal"})}),(0,e.jsx)(x.ZP,{onClick:ct,disabled:l,children:g({id:"job-detail.workforce.add.internal"})})]}),children:(0,e.jsx)(Ct.Z,{twoToneColor:"#a0aabc",style:{marginLeft:12}})})]}),m&&(0,e.jsx)("div",{style:{lineHeight:"42px",fontSize:14},children:De.map(function(H){return(0,e.jsxs)("span",{style:{marginRight:24},children:[H.icon,(0,e.jsx)("span",{className:vt["bpo-info-value"],children:m==null?void 0:m[H.key]})]},H.key)})})]}),(0,e.jsx)($t.Z,{visible:T.bpoWorker,jobId:ie,bpoId:m==null?void 0:m.bpoId,isPM:!0,onClose:function(){Qe()}}),(0,e.jsx)(sn,{projectId:M,jobId:ie,visible:T.internalAdd,onSave:Qe,onClose:function(){E(s()(s()({},T),{},{internalAdd:!1}))}}),(0,e.jsx)(nn,{job:a,visible:T.internalUpload,onClose:function(){E(s()(s()({},T),{},{internalUpload:!1}))},onWorkersChange:Qe}),(0,e.jsx)(oe.Z,{visible:T.bpoTeam,title:g({id:"job-detail.bpo-workforce.change-title"}),width:600,onCancel:function(){return E(s()(s()({},T),{},{bpoTeam:!1}))},okButtonProps:{disabled:!R,loading:b},onOk:st,okText:g({id:"common.confirm"}),children:(0,e.jsx)(dn.Z,{bpoId:ke,projectId:M,onChange:function(S,u){return Y(u)},width:500})})]})}function mn(n){var a=n.jobDetailDrawer,i=n.loading;return{job:a.job,workerNum:a.workerNum,submitting:i.effects["jobDetailDrawer/updateJobBpo"]}}var hn=(0,de.$j)(mn)(un),Se=t(53577),Pt=function(n){return n.ORIENTATION="orientation",n.NOT_ORIENTATION="not-orientation",n}({});function _n(n){var a=n.onFilterChange,i=n.initialValue,l=n.isOrientation,h=l===void 0?!0:l,b=n.isOrientationWithAll,f=b===void 0?!1:b,p=n.formStyle,g=(0,C.useIntl)(),y=g.formatMessage,v=[{key:"uniqueName",type:Se.aH.Text,label:null,placeholder:y({id:"common.input.placeholder"}),style:{width:160}},{key:"statusList",type:Se.aH.Single,label:null,options:[Se.aY.ALL,Se.aY.CONFIRMED,Se.aY.DETAINED,Se.aY.REJECT,Se.aY.ASSIGNED,Se.aY.DECLINED],optionLabel:function(_){return y({id:"workflow.worker.status.".concat(_==null?void 0:_.toLowerCase())})},style:{width:160}}];if(h){var m=[{label:Pt.ORIENTATION,value:!0},{label:Pt.NOT_ORIENTATION,value:!1}];v.push({key:"assignedFlag",type:Se.aH.Single,label:f?y({id:"qa.batch.setting.query.is-orientate"}):null,options:f?[{label:"all",value:""}].concat(m):m,placeholder:y({id:"workflow.worker.orientation-type.if-orientation"}),optionLabel:function(_){return y({id:"workflow.worker.orientation-type.".concat(_==null?void 0:_.label.toLowerCase())})},optionValueKey:"value",style:{width:f?80:160}})}return(0,e.jsx)(ue.Z,{formItems:v,formStyle:s()({marginBottom:0},p),formItemStyle:f?{marginRight:0}:null,initialValue:i,onFilterValueChange:a})}var pn=_n,fn=t(39399),gn=t(63091),Zt=t(65715),bn=t(34443),vn={container:"container___vVBVf"},jn=(0,o.memo)(function(n){var a,i=n.children,l=(a=o.Children.toArray(i))===null||a===void 0?void 0:a.filter(function(h){var b;return!(h!=null&&(b=h.props)!==null&&b!==void 0&&b.hidden)});return l.length?(0,e.jsx)(gn.Z,{className:"flex-center",overlay:(0,e.jsx)(Zt.Z,{children:l.map(function(h){return(0,e.jsx)(Zt.Z.Item,{children:Ot(h)},h.key)})}),children:(0,e.jsx)(bn.Z,{})}):null}),xn=function(a){var i,l=a.children,h=a.moreItems;return(0,e.jsxs)("div",{className:vn.container,children:[(i=o.Children.toArray(l).filter(function(b){var f;return!(b!=null&&(f=b.props)!==null&&f!==void 0&&f.hidden)}))===null||i===void 0?void 0:i.map(function(b,f){return(0,e.jsxs)("div",{children:[!!f&&(0,e.jsx)(we.Z,{type:"vertical"}),Ot(b)]},b.key)}),(0,e.jsx)(jn,{children:h})]})};function Ot(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:"small"};return o.cloneElement(n,a)}var dt=t(99076);function Tt(n){var a={ENABLE:!1,DISABLE:!1,DETAIN:!1,REVERT:!1};return n.forEach(function(i){switch(i.status){case Se.aY.ASSIGNED:a=s()(s()({},a),{},{ENABLE:!0,DETAIN:!0,REVERT:!0});break;case Se.aY.CONFIRMED:a=s()(s()({},a),{},{ENABLE:!0,REVERT:!0});break;case Se.aY.DECLINED:a=s()(s()({},a),{},{DISABLE:!0,DETAIN:!0,REVERT:!0});break;case Se.aY.DETAINED:a=s()(s()({},a),{},{ENABLE:!0,DETAIN:!0});break;case Se.aY.REJECT:a={ENABLE:!0,DETAIN:!0,REVERT:!0,DISABLE:!0};break;default:break}}),a}function yn(n){var a=n.job,i=n.workerList,l=n.filter,h=n.sorter,b=n.total,f=n.dispatch,p=n.loading,g=n.readonly,y=(0,C.useIntl)(),v=y.formatMessage,m=(0,o.useState)([]),Z=c()(m,2),_=Z[0],w=Z[1],R=(0,o.useState)(!1),Y=c()(R,2),U=Y[0],O=Y[1],T=a||{},E=T.id,J=Tt(_),M=function(){E&&f({type:"jobDetailDrawer/getJobWorkerList",payload:{jobId:E}})},ae=function(){var S=it()(Ee()().mark(function u(d){var I;return Ee()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return I=d?[d]:_,r.prev=1,r.next=4,(0,ee.Ad)(E,I.map(function(K){return K.workerId}));case 4:w([]),j.ZP.success(v({id:"common.message.success.operation"})),M(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),j.ZP.error((0,dt.R$)(r.t0));case 12:case"end":return r.stop()}},u,null,[[1,9]])}));return function(d){return S.apply(this,arguments)}}(),ie=function(){var S=it()(Ee()().mark(function u(d){var I;return Ee()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return I=d?[d]:_,r.prev=1,r.next=4,(0,ee.wV)(E,I.map(function(K){return K.workerId}));case 4:w([]),j.ZP.success(v({id:"common.message.success.operation"})),M(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),j.ZP.error((0,dt.R$)(r.t0));case 12:case"end":return r.stop()}},u,null,[[1,9]])}));return function(d){return S.apply(this,arguments)}}(),ke=function(){var S=it()(Ee()().mark(function u(d){var I;return Ee()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return I=d?[d]:_,r.prev=1,r.next=4,(0,ee.rH)(I.map(function(K){return K.workerId}),E);case 4:w([]),j.ZP.success(v({id:"common.message.success.operation"})),M(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),j.ZP.error((0,dt.R$)(r.t0));case 12:case"end":return r.stop()}},u,null,[[1,9]])}));return function(d){return S.apply(this,arguments)}}(),le=function(){var S=it()(Ee()().mark(function u(d){var I;return Ee()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return I=d?[d]:_,r.prev=1,r.next=4,(0,ee.yb)(I.map(function(K){return K.workerId}),E);case 4:w([]),j.ZP.success(v({id:"common.message.success.operation"})),M(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),j.ZP.error((0,dt.R$)(r.t0));case 12:case"end":return r.stop()}},u,null,[[1,9]])}));return function(d){return S.apply(this,arguments)}}(),De=[{title:(0,e.jsx)(C.FormattedMessage,{id:"common.user.nickname"}),render:function(u){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{margin:0,color:"#42526e",fontWeight:"bold"},children:u.uniqueName}),(0,e.jsx)("div",{style:{marginLeft:0,fontWeight:"normal",color:"#7a869a"},children:u.workerEmail})]})}},{title:(0,e.jsx)(C.FormattedMessage,{id:"common.status"}),width:130,render:function(u){var d;return(0,e.jsx)(C.FormattedMessage,{id:"workflow.worker.status.".concat((d=u.status||u.labelWorkerStatus)===null||d===void 0?void 0:d.toLowerCase())})}},{title:(0,e.jsx)(C.FormattedMessage,{id:"common.operation"}),width:90,render:function(u){var d=Tt([u]),I=[(0,e.jsx)(x.ZP,{type:"link",hidden:d.DETAIN,onClick:function(){return ke(u)},children:v({id:"workflow.worker.status.detained"})},"detained"),(0,e.jsx)(x.ZP,{type:"link",hidden:d.REVERT,onClick:function(){return le(u)},children:v({id:"workflow.worker.revert-data"})},"revert")];return(0,e.jsxs)(xn,{moreItems:I,children:[(0,e.jsx)(x.ZP,{type:"link",danger:!d.ENABLE,hidden:d.ENABLE,onClick:function(){return ae(u)},children:v({id:"bpo-list.bpo.operation.activate"})}),(0,e.jsx)(x.ZP,{type:"link",hidden:d.DISABLE,onClick:function(){return ie(u)},children:v({id:"job-detail.workforce.revoke"})})]})}}];((a==null?void 0:a.jobType)!==Se.O4.QA||U)&&De.splice(2,1);var ct=function(){var S=it()(Ee()().mark(function u(){var d,I,k;return Ee()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return d=a.labelingJobId,K.prev=1,K.next=4,(0,ee.Zn)(d);case 4:I=K.sent,I.status===Se.oj.OK?(k=I.data.workerNum>1,O(k)):j.ZP.error((0,dt.R$)(I)),K.next=11;break;case 8:K.prev=8,K.t0=K.catch(1),j.ZP.error((0,dt.R$)(K.t0));case 11:case"end":return K.stop()}},u,null,[[1,8]])}));return function(){return S.apply(this,arguments)}}();(0,o.useEffect)(function(){!a||(a==null?void 0:a.jobType)!==Se.O4.QA||ct()},[a]),(0,o.useEffect)(function(){M()},[a,l,h]),(0,o.useEffect)(function(){return function(){f({type:"jobDetailDrawer/clearFilter"})}},[]);var lt=function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x.ZP,{disabled:!_.length||J.ENABLE||g,type:"ghost",onClick:function(){return ae()},style:{marginRight:12},children:(0,e.jsx)(C.FormattedMessage,{id:"bpo-list.bpo.operation.activate"})}),(0,e.jsx)(x.ZP,{disabled:!_.length||J.DISABLE||g,type:"ghost",danger:!0,onClick:function(){return ie()},style:{marginRight:12},children:(0,e.jsx)(C.FormattedMessage,{id:"job-detail.workforce.revoke"})}),(0,e.jsx)(x.ZP,{style:{marginRight:12},type:"ghost",onClick:function(){return ke()},disabled:!_.length||J.DETAIN||g,children:(0,e.jsx)(C.FormattedMessage,{id:"workflow.worker.status.detained"})}),(0,e.jsx)(x.ZP,{type:"ghost",disabled:!_.length||J.REVERT||g,onClick:function(){return le()},children:(0,e.jsx)(C.FormattedMessage,{id:"workflow.worker.revert-data"})})]})},Ge=function(u){w(_.filter(function(d){return d.workerId!==u.workerId}))},Qe={selectedRowKeys:_.map(function(S){return S.workerId}),onSelect:function(u,d){if(d)w(_.concat([u]));else{var I=_.filter(function(k){return k.workerId!==u.workerId});w(I)}},onSelectAll:function(u,d,I){if(u){var k=I.filter(function(K){return!_.find(function(Je){return Je.workerId===K.workerId})});w(_.concat(k||[]))}else{var r=_.filter(function(K){return!I.find(function(Je){return Je.workerId===K.workerId})});w(r||[])}}},st=function(u){f({type:"jobDetailDrawer/saveFilter",payload:{newFilter:u}})},H=function(u,d,I){var k=I,r=k.field,K=k.order,Je=K==="descend"?"DESC":"ASC",ut={sortField:r,sortOrder:Je};f({type:"jobDetailDrawer/saveSorter",payload:{newSorter:ut}})};return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{display:"flex"},children:(0,e.jsx)(pn,{isOrientation:!1,onFilterChange:st,initialValue:l})}),(0,e.jsx)(We.Z,{rowKey:"workerId",rowClassName:"table-narrow-row",style:{borderTop:"1px solid #F0F0F0",paddingBottom:136},columns:De,dataSource:i,rowSelection:Qe,loading:p,pagination:!1,onChange:H}),(0,e.jsx)(fn.Z,{style:{position:"absolute",left:0,bottom:0,width:"100%"},barVisible:!0,columns:De.slice(0,2),actions:lt(),pagination:{total:b,pageSize:l.pageSize,onChange:function(u,d){return st({pageSize:d,pageIndex:u-1})},current:l.pageIndex+1,showTotal:function(u){return v({id:"common.total.items"},{items:u})},showSizeChanger:!0,pageSizeOptions:dt.TJ},selectedData:_,onDeselect:Ge,onClear:function(){w([])}})]})}function Sn(n){var a=n.loading,i=n.jobDetailDrawer;return{loading:a.effects["jobDetailDrawer/getJobWorkerList"],job:i.job,workerList:i.workerList,total:i.total,filter:i.filter,sorter:i.sorter}}var In=(0,de.$j)(Sn)(yn);function Cn(n){var a=n.readonly;return(0,e.jsxs)("div",{children:[(0,e.jsx)(hn,{readonly:a}),(0,e.jsx)(In,{readonly:a})]})}var wn=Cn,En=t(7005),kn=t(94619);function Dn(n){var a=n.submitting,i=n.visible,l=n.defaultJobName,h=l===void 0?"":l,b=n.onClose,f=n.onSave,p=(0,C.useIntl)(),g=p.formatMessage,y=(0,o.useState)(h),v=c()(y,2),m=v[0],Z=v[1];return(0,o.useEffect)(function(){Z(h)},[i]),(0,e.jsxs)(ye.Z,{visible:i,title:g({id:"common.rename"}),onClose:b,onSave:function(){return f(m)},saveLoading:a,children:[(0,e.jsx)("p",{style:{margin:"8px 0",color:"#42526e"},children:g({id:"jobName"})}),(0,e.jsx)(Te.Z,{value:m,onChange:function(w){return Z(w.target.value)}})]})}var Pn=Dn,Mt={"job-detail-drawer":"job-detail-drawer___rjuZz",title:"title___Yw0Bn","orientated-selector":"orientated-selector___RpUwc","middle-circle":"middle-circle___xwqdB",clear:"clear___kpjWN",error:"error___aDTNF","select-box":"select-box___B1egE",targetJob:"targetJob___IeEwT",disabled:"disabled___IZBIb",arrow:"arrow___DrKJd",tip:"tip___InpnY"},yt=function(n){return n.OVERVIEW="overview",n.WORKFORCE="WORKFORCE",n}({});function Zn(n){var a=n.workerNum,i=n.dispatch,l=n.jobId,h=n.job,b=n.visible,f=n.isReadonly,p=n.updating,g=n.actionLoading,y=n.loading,v=n.onClose,m=n.initialTab,Z=(0,C.useIntl)(),_=Z.formatMessage,w=(0,o.useState)(!1),R=c()(w,2),Y=R[0],U=R[1],O=function(J){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};i({type:"jobDetailDrawer/updateJob",payload:{job:s()(s()({},h),J),callback:M}})},T=function(J){i({type:"jobDetailDrawer/executeJobAction",payload:{jobId:l,jobAction:J}})};return(0,o.useEffect)(function(){l&&(i({type:"jobDetailDrawer/getJob",payload:{jobId:l}}),i({type:"jobDetailDrawer/getJobWorkerNum",payload:{jobId:l}}))},[l]),(0,e.jsxs)($.Z,{className:Mt["job-detail-drawer"],bodyStyle:{padding:0},title:(0,e.jsx)(Q.Z,{spinning:y,style:{height:"100%"},children:(0,e.jsxs)("div",{className:Mt.title,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:h==null?void 0:h.jobName}),(0,e.jsx)(x.ZP,{type:"link",style:{padding:0,fontSize:20},onClick:function(){return U(!0)},disabled:f,icon:(0,e.jsx)(L.Z,{})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(En.Z,{status:h==null?void 0:h.jobStatus}),(0,e.jsx)(kn.Z,{job:h,readonly:f,updating:g,handleTakeJobAction:T})]})]})}),width:600,visible:b,closable:!1,onClose:v,destroyOnClose:!0,children:[(0,e.jsxs)(A.Z,{centered:!0,defaultActiveKey:m,children:[(0,e.jsx)(A.Z.TabPane,{tab:_({id:"menu.job-detail"}),children:(0,e.jsx)(xt,{job:h,readonly:f,onUpdateJob:O,updating:p})},yt.OVERVIEW),(0,e.jsx)(A.Z.TabPane,{tab:"".concat(_({id:"menu.workers-management"}),"(").concat(a,")"),children:(0,e.jsx)(wn,{readonly:f})},yt.WORKFORCE)]}),(0,e.jsx)(Pn,{visible:Y,defaultJobName:h==null?void 0:h.jobName,onSave:function(J){return O({jobName:J},function(){return U(!1)})},onClose:function(){return U(!1)},submitting:p})]})}function On(n){var a=n.projectAccess,i=n.loading,l=n.jobDetailDrawer;return{loading:i.effects["jobDetailDrawer/getJob"],updating:i.effects["jobDetailDrawer/updateJob"],actionLoading:i.effects["jobDetailDrawer/executeJobAction"],job:l.job,workerNum:l.workerNum,isReadonly:a.projectAccess===null||a.projectAccess==="VIEW"}}var Tn=(0,de.$j)(On)(Zn)},62135:function(tt,he,t){t.d(he,{Z:function(){return $e},o:function(){return ze}});var _e=t(48305),s=t.n(_e),W=t(75271),c=t(42400),$=t(32109),Q=t(93579),x=t(66063),A=t(70576),o=t(57499),L=t(38633),C=t(79266),de=t(81399),N=t(75122),pe=t(73095),be=t(90228),ve=t.n(be),Ke=t(87999),ce=t.n(Ke),X=t(62057),oe=t(43718),Te=t(98570),e=t(7005),Me=t(94619),Ne=t(63264),F={"clickable-text":"clickable-text___tm3H3","workflow-card":"workflow-card____r33B",title:"title___fCtfI",text:"text___rDjTl",point:"point___klNm3","list-item-column":"list-item-column___pr__m",header:"header___Pe23k",content:"content___FjCkN"},D=t(52676),xe=function(z){var je,B=z.job,j=z.onClick,Fe=z.afterJobAction,Ce=z.readonly,Re=(0,A.useIntl)(),we=Re.formatMessage,We=(0,W.useState)(!1),ye=s()(We,2),ee=ye[0],Ye=ye[1],nt=(0,W.useMemo)(function(){var Be=B.progressInfo,Ae=(Be||"").split("/").map(function(Pe){return parseInt(Pe,10)});return Ae[1]&&Ae[0]/Ae[1]},[B]),qe=function(){var Be=ce()(ve()().mark(function Ae(Pe,V){return ve()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return Ye(!0),ue.prev=1,ue.next=4,(0,Ne.qC)(Pe.id,V);case 4:Fe(V),ue.next=10;break;case 7:ue.prev=7,ue.t0=ue.catch(1),c.ZP.error((0,de.R$)(ue.t0));case 10:return ue.prev=10,Ye(!1),ue.finish(10);case 13:case"end":return ue.stop()}},Ae,null,[[1,7,10,13]])}));return function(Pe,V){return Be.apply(this,arguments)}}();return(0,D.jsxs)(X.Z,{children:[(0,D.jsxs)(oe.Z,{span:6,className:"".concat(F["list-item-column"]," ").concat(F["clickable-text"]),onClick:function(){j(L.V.OVERVIEW)},children:[(0,D.jsx)("p",{className:F.header,children:B.jobName}),(0,D.jsxs)("span",{className:F.content,children:["[",B.jobDisplayId,"]"]})]}),(0,D.jsx)(oe.Z,{span:6,className:"".concat(F["list-item-column"]," ").concat(F["clickable-text"]),onClick:function(){j(L.V.WORKFORCE)},children:(0,D.jsxs)("div",{style:{height:44},children:[(0,D.jsx)("p",{className:F.header,children:we({id:"workflow.job-type.team.".concat((je=ze(B))===null||je===void 0?void 0:je.toLowerCase())})}),(0,D.jsx)("span",{className:F.content,children:B.bpoName})]})}),(0,D.jsxs)(oe.Z,{span:6,className:F["list-item-column"],children:[(0,D.jsxs)("p",{className:F.header,children:[(0,de.gt)(nt),(0,D.jsx)("span",{style:{float:"right",color:"#7a869a",fontSize:14},children:B.progressInfo})]}),(0,D.jsx)(Te.Z,{showInfo:!1,percent:nt*100,strokeColor:"#01b97f"})]}),(0,D.jsxs)(oe.Z,{span:6,className:F["list-item-column"],style:{textAlign:"right",lineHeight:"45px"},children:[(0,D.jsx)(e.Z,{status:B==null?void 0:B.jobStatus}),(0,D.jsx)(Me.Z,{readonly:Ce,job:B,updating:ee,handleTakeJobAction:function(Ae){return qe(B,Ae)}})]})]})},Ie=xe,te=t(83322),ne=t(3923),re=t(79282),me=t(99076),q=function(z){var je=z.workflow,B=z.projectId,j=z.projectDisplayId,Fe=(0,A.useIntl)(),Ce=Fe.formatMessage,Re=je||{},we=Re.flowName,We=Re.totalNum;return(0,D.jsxs)("div",{className:F.title,onClick:function(ee){ee.preventDefault(),A.history.push({pathname:"/workflows/".concat(je.id,"/detail"),search:(0,me.PS)({projectId:B,projectDisplayId:j})})},children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(te.Z,{className:F.text,style:{marginRight:20}}),(0,D.jsx)("span",{className:F.text,style:{fontSize:14},children:Ce({id:"project.detail.workflow"})}),je.testFlag&&(0,D.jsx)(re.Z,{style:{marginLeft:4}}),(0,D.jsx)("span",{className:F["clickable-text"],style:{marginLeft:8,color:"#42526e",fontWeight:"bold"},children:we})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{className:F.text,style:{fontSize:14},children:Ce({id:"workflow.assigned.num"})}),(0,D.jsx)("span",{className:F.text,style:{margin:"0 8px 0 8px",color:"#3e5270",fontSize:24,fontWeight:"bold"},children:We||0}),(0,D.jsx)(ne.Z,{className:F.text})]})]})},Le=q,ze=function(z){if(!z)return null;var je=z.bpoFlag;return je?C.cy.COMPANY:C.cy.PRIVATE};function Ve(fe){var z=fe.workflow,je=fe.projectId,B=fe.projectDisplayId,j=fe.onRefresh,Fe=fe.readonly,Ce=Fe===void 0?!1:Fe,Re=(0,A.useIntl)(),we=Re.formatMessage,We=(0,W.useState)(null),ye=s()(We,2),ee=ye[0],Ye=ye[1],nt=(0,W.useState)(null),qe=s()(nt,2),Be=qe[0],Ae=qe[1],Pe=(0,W.useState)(!1),V=s()(Pe,2),Ze=V[0],ue=V[1],at=z||{},mt=at.totalNum,ot=at.jobs,ht=ot===void 0?[]:ot,pt=ht.length===0&&!mt,ft=function(){ue(!0),(0,N.fE)(z==null?void 0:z.id).then(function(Ue){Ue.status===pe.o.OK?(c.ZP.success(we({id:"common.message.success.delete"})),j()):c.ZP.error((0,de.R$)(Ue))}).catch(function(Ue){return c.ZP.error((0,de.R$)(Ue))}).finally(function(){return ue(!1)})},gt=function(){$.Z.confirm({title:we({id:"common.confirm.delete"}),icon:(0,D.jsx)(o.Z,{}),onOk:ft})};return(0,D.jsxs)(Q.Z,{className:F["workflow-card"],style:{marginBottom:24},bodyStyle:{borderTop:"1px solid #E5E7ED",padding:0},title:(0,D.jsx)(Le,{workflow:z,projectId:je,projectDisplayId:B}),children:[pt?(0,D.jsx)("div",{style:{textAlign:"center",padding:"40px 0"},children:(0,D.jsx)(x.ZP,{loading:Ze,disabled:Ce,onClick:function(Ue){Ue.preventDefault(),gt()},children:we({id:"workflow.delete"})})}):ht.map(function(He){return(0,D.jsx)(Ie,{job:He,readonly:Ce,afterJobAction:function(){j()},onClick:function(rt){Ye(He),Ae(rt)}},He.id)}),(0,D.jsx)(L.Z,{visible:!!ee,initialTab:Be,jobId:ee==null?void 0:ee.id,onClose:function(){return Ye(null)}})]})}var $e=Ve},90761:function(tt,he){he.Z={list:"list___u4sjW","filter-label":"filter-label___mlxbV",tag:"tag___zrwQI",icon:"icon___k3547",view:"view___wSPWr",divider:"divider___ZCDwR","test-tag":"test-tag___JXEhW"}},97924:function(tt,he){he.Z={root:"root___O79Fh",colorWeak:"colorWeak___umKJG","ant-layout":"ant-layout___fVcWx","ant-pro-sider-logo":"ant-pro-sider-logo___eI3PU","footer-bar":"footer-bar___reFs9","ant-pro-global-footer":"ant-pro-global-footer___IIWNY","ant-layout-customize":"ant-layout-customize___utnIV","ant-pro-layout-content":"ant-pro-layout-content___wZZZa","ant-pro-sider-collapsed-button":"ant-pro-sider-collapsed-button___sth_f","ant-tooltip-inner":"ant-tooltip-inner___DuD8M","ant-list-item":"ant-list-item____rYVT","ant-table":"ant-table___k0ySe","ant-table-thead":"ant-table-thead___N9TB6","ant-table-tbody":"ant-table-tbody___taS3L","ant-design-pro":"ant-design-pro___X0z2w",ck:"ck___Lef7S","ck-content":"ck-content___CIzrn",table:"table___OX4qF",tableStriped:"tableStriped___w2BU4","table-narrow-row":"table-narrow-row___FztyW","ant-table-cell":"ant-table-cell___mjatn","with-shadow":"with-shadow___eTvTO","table-placeholder":"table-placeholder___qMOwm","ant-table-placeholder":"ant-table-placeholder___Iv9yQ","pull-right":"pull-right___Pv4AA","w-100":"w-100___j83lQ","page-header":"page-header___h94LQ","ant-page-header-content":"ant-page-header-content___oQAyH","ant-page-header-back":"ant-page-header-back___ojgzN","ant-page-header-back-button":"ant-page-header-back-button___qZK5A","page-title-container":"page-title-container___LXruG","page-title":"page-title___UAHgz","page-content":"page-content____VZZ4","page-menu":"page-menu___fsneN","ant-menu-item":"ant-menu-item___f_Vq_","ant-menu-submenu-title":"ant-menu-submenu-title___yHQUF","ant-menu-inline-collapsed":"ant-menu-inline-collapsed___Ou1Gy",anticon:"anticon___nTVUC","ant-card-head-title":"ant-card-head-title___ddaR1","ant-layout-sider-collapsed":"ant-layout-sider-collapsed___a4Med","ant-pro-sider-menu":"ant-pro-sider-menu___wQWYn","ant-pro-sider":"ant-pro-sider___HiA6w","ant-pro-sider-menu-logo":"ant-pro-sider-menu-logo___NOlKV","ant-layout-header":"ant-layout-header___YLST3","ant-layout-footer":"ant-layout-footer___x41cV","ant-pro-global-footer-links":"ant-pro-global-footer-links___pr86d","ant-pro-global-footer-copyright":"ant-pro-global-footer-copyright___fQSKN",ruleGroup:"ruleGroup___vrSSe",rule:"rule___yPY6S","ruleGroup-combinators":"ruleGroup-combinators___zFVCZ",betweenRules:"betweenRules___jbyl3","ruleGroup-notToggle":"ruleGroup-notToggle___IWYUR","highlight-tree":"highlight-tree___Okfed","ant-tree-title":"ant-tree-title___Bjzy5","border-none":"border-none___noW61",comment:"comment___XyjAj","ant-comment-actions":"ant-comment-actions___MGhMj","text-ellipsis":"text-ellipsis___GCSZo","text-right":"text-right___us_O0","text-center":"text-center___gfBHR","text-left":"text-left___qepBR","editor-content-img":"editor-content-img___p96_Z","image-style-align-left":"image-style-align-left___Ficmt","question-card":"question-card___ObKcg","ant-list-split":"ant-list-split___E5ETs","ant-list-header":"ant-list-header___k2C6h","tree-body":"tree-body___n6V78","ant-tree":"ant-tree___eQ2gk","ant-tree-node-content-wrapper":"ant-tree-node-content-wrapper___Quj2M","ant-tree-node-selected":"ant-tree-node-selected___aYKse","ant-tree-child-tree":"ant-tree-child-tree___fSWO8","ant-tree-directory":"ant-tree-directory___kE11w","ant-menu":"ant-menu___E4FSz","ant-menu-horizontal":"ant-menu-horizontal____Bqlk","ant-menu-item-selected":"ant-menu-item-selected___WtJ_D","worker-question-card":"worker-question-card___Rxkym",formContainer:"formContainer___Euibq",formWrap:"formWrap___oZLG5","ant-legacy-form-item-label":"ant-legacy-form-item-label___p_EXq","g-recaptcha-wrapper":"g-recaptcha-wrapper___FyT_o","g-recaptcha":"g-recaptcha___Geo2T","text-muted":"text-muted___aapzv","ck-height":"ck-height___QHMx4","editable-cell":"editable-cell___YFBOa","editable-cell-value-wrap":"editable-cell-value-wrap___uaVXf","editable-row":"editable-row___mUJuE","checkbox-custom":"checkbox-custom___TW0h2","ant-checkbox-checked":"ant-checkbox-checked___WLSaQ","ant-checkbox-inner":"ant-checkbox-inner___oLWUl","ant-table-row-selected":"ant-table-row-selected___FVvZu","ant-checkbox-wrapper":"ant-checkbox-wrapper___jKCji","ant-checkbox":"ant-checkbox___lalHp","ant-checkbox-input":"ant-checkbox-input___SE_Da","ck-editor-content":"ck-editor-content___H_KWd","title-icon":"title-icon___cKyT_","margin-top-1":"margin-top-1___rUhhY","margin-bottom-1":"margin-bottom-1___vtmkL","margin-right-1":"margin-right-1___IcWVO","margin-left-1":"margin-left-1___V4iWJ","margin-top-2":"margin-top-2___e9UEw","margin-bottom-2":"margin-bottom-2___IokvH","margin-right-2":"margin-right-2___bcMK6","margin-left-2":"margin-left-2___Z5qvi","margin-top-3":"margin-top-3___yJeG0","margin-bottom-3":"margin-bottom-3___sv53B","margin-right-3":"margin-right-3___m5PPJ","margin-left-3":"margin-left-3___FSe93","margin-top-4":"margin-top-4___OPEW2","margin-bottom-4":"margin-bottom-4___j6ZHT","margin-right-4":"margin-right-4___I54zH","margin-left-4":"margin-left-4___Wb2d1","margin-top-5":"margin-top-5___pvYMm","margin-bottom-5":"margin-bottom-5___HkRxb","margin-right-5":"margin-right-5___ekuPH","margin-left-5":"margin-left-5___utRdr","margin-top-6":"margin-top-6___ku100","margin-bottom-6":"margin-bottom-6___vq4MF","margin-right-6":"margin-right-6___IqxNL","margin-left-6":"margin-left-6___R3YFE","margin-top-7":"margin-top-7___veYCz","margin-bottom-7":"margin-bottom-7___hT2A6","margin-right-7":"margin-right-7___DgsSU","margin-left-7":"margin-left-7___mjtmF","margin-top-8":"margin-top-8___S_EMD","margin-bottom-8":"margin-bottom-8___Gz5sB","margin-right-8":"margin-right-8___SxvNE","margin-left-8":"margin-left-8___IzYRj","margin-top-9":"margin-top-9___XE8S7","margin-bottom-9":"margin-bottom-9___Yh31F","margin-right-9":"margin-right-9___dfTo4","margin-left-9":"margin-left-9___Ic549","margin-top-10":"margin-top-10___Gg38L","margin-bottom-10":"margin-bottom-10___mPO38","margin-right-10":"margin-right-10___XY9dY","margin-left-10":"margin-left-10___v1KBj","width-hundred-1":"width-hundred-1___AV_im","height-hundred-1":"height-hundred-1___WlQyW","width-hundred-2":"width-hundred-2___pOPkV","height-hundred-2":"height-hundred-2___yAZW2","width-hundred-3":"width-hundred-3___URG9y","height-hundred-3":"height-hundred-3___eI8H_","width-hundred-4":"width-hundred-4___OzTR7","height-hundred-4":"height-hundred-4___fTxdD","width-hundred-5":"width-hundred-5___vyN0H","height-hundred-5":"height-hundred-5___dehvv","width-hundred-6":"width-hundred-6___JIZZY","height-hundred-6":"height-hundred-6___NT_sD","width-hundred-7":"width-hundred-7___UxYkC","height-hundred-7":"height-hundred-7___ydj_x","width-hundred-8":"width-hundred-8___VUZYL","height-hundred-8":"height-hundred-8___JpwbC","width-hundred-9":"width-hundred-9___XAjaz","height-hundred-9":"height-hundred-9___CfQt0","width-hundred-10":"width-hundred-10___iUdHc","height-hundred-10":"height-hundred-10___oAKBg","width-ten-1":"width-ten-1___u8lXr","height-ten-1":"height-ten-1___eWQWd","width-ten-2":"width-ten-2___SGEAw","height-ten-2":"height-ten-2___tqKaU","width-ten-3":"width-ten-3___hL7At","height-ten-3":"height-ten-3___DI4Wr","width-ten-4":"width-ten-4___KIsq0","height-ten-4":"height-ten-4___avA6w","width-ten-5":"width-ten-5___FFnhR","height-ten-5":"height-ten-5___JYPwk","width-ten-6":"width-ten-6___vzVjJ","height-ten-6":"height-ten-6___ErCQa","width-ten-7":"width-ten-7___eYrVN","height-ten-7":"height-ten-7___Ap44_","width-ten-8":"width-ten-8___bgTxr","height-ten-8":"height-ten-8___aVKLo","width-ten-9":"width-ten-9___K9WCD","height-ten-9":"height-ten-9___iLII2","width-ten-10":"width-ten-10___nzQoh","height-ten-10":"height-ten-10____ezVd","text-size-1":"text-size-1___FOKPI","text-size-2":"text-size-2___Pu38k","text-size-3":"text-size-3___mGRtI","text-size-4":"text-size-4___uCI0g","text-size-5":"text-size-5___zTNq3","text-size-6":"text-size-6___MsWgw","text-size-7":"text-size-7___Om4B2","text-size-8":"text-size-8___ThrqE","text-size-9":"text-size-9___QpSIz","text-size-10":"text-size-10___hsUOn",flex:"flex___HZC42","flex-1":"flex-1___UmcB1","flex-2":"flex-2___pKTgP","flex-3":"flex-3___BYoy0","flex-between":"flex-between___pCftb","flex-center":"flex-center___iTvo_","flex-space-between":"flex-space-between___IT6NN","ant-card-body-bottom0":"ant-card-body-bottom0___nmEy6","ant-card-body":"ant-card-body___xNOu_","bpo-description":"bpo-description___b2eIV","ant-descriptions-item":"ant-descriptions-item___VctE5","ant-message-notice-content":"ant-message-notice-content___XRbfC","custom-modal":"custom-modal___CU5ro","ant-modal-header":"ant-modal-header___ibiOT","ant-modal-footer":"ant-modal-footer___cFqIC","modal-wrap-fullscreen":"modal-wrap-fullscreen___T6i5B","ant-modal":"ant-modal___iWi1g","primary-color":"primary-color___gS6d7","color-grey-9":"color-grey-9___q2TQJ","background-color-grey-9":"background-color-grey-9___t624N","color-grey-6":"color-grey-6___nYTxQ","background-color-grey-6":"background-color-grey-6___sHZYx","color-grey-7":"color-grey-7___y137W","background-color-grey-7":"background-color-grey-7___GMF0w","color-grey-e":"color-grey-e___FwRm0","background-color-grey-e":"background-color-grey-e___CGLEL","color-red":"color-red___luOV6","background-color-red":"background-color-red___Nmxbj","color-blue":"color-blue___LG6Lf","background-color-blue":"background-color-blue___bKUbv","color-green":"color-green___CSuYw","background-color-green":"background-color-green___MOfXm","color-yellow":"color-yellow___Hg4Cn","background-color-yellow":"background-color-yellow___hIH1S","color-purple":"color-purple___j7sbg","background-color-purple":"background-color-purple___uURpb","color-warning-color":"color-warning-color___OWypS","background-color-warning-color":"background-color-warning-color___cF99Q","ant-legacy-form-item-control-wrapper":"ant-legacy-form-item-control-wrapper____qgUD","ant-list-lg":"ant-list-lg___yGLqa","btn-width":"btn-width___tOWAO","btn-underline":"btn-underline___os29L","spin-custom":"spin-custom___Gz95y","ant-spin":"ant-spin___H31Qr","grecaptcha-badge":"grecaptcha-badge___QHEmx","react-flow__node":"react-flow__node___UvI9v","react-flow__node-qaJobNode":"react-flow__node-qaJobNode___Ecwjc","react-flow__node-labelJobNode":"react-flow__node-labelJobNode___aMAmL","text-dander":"text-dander___ZhEB1","with-right-border":"with-right-border___gRHrs",title:"title____UtVI",edit:"edit___pDqFh",number:"number____7T11",unit:"unit___rhHYT"}}}]);
