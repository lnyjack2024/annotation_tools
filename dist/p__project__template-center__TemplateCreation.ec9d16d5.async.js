(self.webpackChunk=self.webpackChunk||[]).push([[6770],{43273:function(Jn,bt,_){"use strict";var Jt=_(48305),s=_.n(Jt),Tt=_(66830),P=_(56553),d=_(75271),ue=_(70576),J=_(28227),Qt=_(45774),Kt=_(45269),X=_(52676);function B(ne){var Me=ne.value,$t=ne.onChange,ft=ne.imageApi,Le=ne.formData,U=ne.height,Xe=U===void 0?400:U,qe=ne.emailVariableMenuVisible,Ae=qe===void 0?!1:qe,e=(0,d.useState)(!0),Dt=s()(e,2),Nt=Dt[0],Xt=Dt[1],vt=(0,ue.useIntl)(),et=vt.formatMessage,Be=Kt.tB.get((0,ue.getLocale)()).editorLang||"en",Oe={tc:{title:"Comments",items:"addcomment showcomments deleteallconversations"}};Ae&&(Oe.custom={title:et({id:"email.variable"}),items:et({id:"email.variable.user-name"})});var Lt=function(_e){$t&&$t(_e)};return(0,X.jsx)(Tt.Z,{spinning:Nt,children:(0,X.jsx)("div",{style:{height:Xe},children:(0,X.jsx)(P.M,{tinymceScriptSrc:"".concat((0,Qt.Ak)(),"/lib/editor/tinymce.min.js"),apiKey:"wkf6fajolq0yyjcrhc4y1y5xnft5nsq4c9cq3m77mc93p319",value:Me,init:{language:Be,plugins:"preview importcss searchreplace autolink autosave visualblocks visualchars fullscreen image link table charmap hr nonbreaking toc insertdatetime advlist lists wordcount imagetools textpattern noneditable help charmap",images_replace_blob_uris:!0,paste_data_images:!0,images_upload_handler:function(_e,Pe){(0,J.J7)(_e,ft,Le).then(function(yt){Pe(yt.data)})},menu:Oe,setup:function(_e){Ae&&_e.ui.registry.addMenuItem(et({id:"email.variable.user-name"}),{text:et({id:"email.variable.user-name"}),onAction:function(){_e.insertContent("{{user_name}}")}})},menubar:"custom file edit view insert format tools table tc help",toolbar:"undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist checklist | forecolor backcolor casechange permanentpen formatpainter removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media pageembed template link anchor codesample | a11ycheck ltr rtl | showcomments addcomment",autosave_ask_before_unload:!0,autosave_interval:"30s",autosave_prefix:"{path}{query}-{id}-",autosave_restore_when_empty:!1,autosave_retention:"2m",image_advtab:!0,link_list:[],image_list:[],image_class_list:[{title:"None",value:""},{title:"Some class",value:"class-name"}],importcss_append:!0,templates:[{title:"New Table",description:"creates a new table",content:'<div class="mceTmpl"><table width="98%%"  border="0" cellspacing="0" cellpadding="0"><tr><th scope="col"> </th><th scope="col"> </th></tr><tr><td> </td><td> </td></tr></table></div>'},{title:"Starting my story",description:"A cure for writers block",content:"Once upon a time..."},{title:"New list with dates",description:"New List with dates",content:'<div class="mceTmpl"><span class="cdate">cdate</span><br /><span class="mdate">mdate</span><h2>My List</h2><ul><li></li><li></li></ul></div>'}],template_cdate_format:"[Date Created (CDATE): %m/%d/%Y : %H:%M:%S]",template_mdate_format:"[Date Modified (MDATE): %m/%d/%Y : %H:%M:%S]",height:Xe,image_caption:!0,quickbars_selection_toolbar:"bold italic | quicklink h2 h3 blockquote quickimage quicktable",noneditable_noneditable_class:"mceNonEditable",toolbar_mode:"sliding",spellchecker_ignore_list:["Ephox","Moxiecode"],tinycomments_mode:"embedded",content_style:".mymention{ color: gray; }",contextmenu:"link image imagetools table configurepermanentpen",a11y_advanced_options:!0,mentions_selector:".mymention",mentions_item_type:"profile",branding:!1},onEditorChange:Lt,scriptLoading:{async:!0},onInit:function(){Xt(!1)},onPaste:function(_e,Pe){setTimeout(function(){Pe.editorUpload.uploadImages()},0)}},Be)})})}bt.Z=B},4765:function(Jn,bt,_){"use strict";_.r(bt),_.d(bt,{default:function(){return rd}});var Jt=_(26068),s=_.n(Jt),Tt=_(48305),P=_.n(Tt),d=_(75271),ue=_(42400),J=_(66063),Qt=_(93579),Kt=_(20388),X=_(70576),B=_(96394),ne=_(90966),Me=_(3973),$t=_(11333),ft=_.n($t),Le=_(43273),U=_(171),Xe=_(1689),qe=_(10089),Ae=_(99076),e=_(52676),Dt={labelCol:{span:3},wrapperCol:{span:20}},Nt=function(a){var n=a.templateInfo,r=a.visible,i=a.onNext,o=B.Z.useForm(),u=P()(o,1),l=u[0],m=(0,X.useIntl)(),c=m.formatMessage,g=(0,qe.Z)(),h=g.query;return(0,d.useEffect)(function(){n&&l.setFieldsValue({title:h.action==="CREATE"?"".concat(n.title," [").concat(ft()().format("YYYY-MM-DD hh:mm:ss"),"]"):n.title,instruction:n.instruction,dataType:n.dataType,isSupportedByApp:n.isSupportedByApp,supportedLowestIOSVersion:n.supportedLowestIOSVersion,supportedLowestAndroidVersion:n.supportedLowestAndroidVersion})},[n]),(0,e.jsxs)("div",{style:r?void 0:{display:"none"},children:[(0,e.jsxs)(B.Z,s()(s()({form:l},Dt),{},{children:[(0,e.jsx)(B.Z.Item,{name:"title",label:c({id:"template-title"}),rules:[{required:!0}],children:(0,e.jsx)(ne.Z,{})}),(0,e.jsx)(B.Z.Item,{name:"dataType",label:c({id:"project.detail.data-center.filter.data-type"}),rules:[{required:!0}],children:(0,e.jsx)(Me.Z,{disabled:n.type!==U.WY.CUSTOM,children:Object.values(Xe.g).map(function(p){return(0,e.jsx)(Me.Z.Option,{value:p,children:c({id:"data.type.".concat(p)})},p)})})}),(0,e.jsx)(B.Z.Item,{name:"instruction",label:c({id:"template-instruction"}),rules:[{required:!0}],children:(0,e.jsx)(Le.Z,{height:380,imageApi:Ae.t9})})]})),(0,e.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:24},children:(0,e.jsx)(J.ZP,{type:"primary",style:{width:80},onClick:function(M){M.preventDefault(),l.validateFields().then(function(C){i(C)}).catch(function(C){console.log(C)})},children:c({id:"common.next-step"})})})]})},Xt=Nt,vt=_(46285),et=_(30760),Be=_(9891),Oe=_(60462),Lt=_(90228),ve=_.n(Lt),_e=_(87999),Pe=_.n(_e),yt=_(87867),In=_(48989),_t=_(35617),wt=function(a){return"<root>".concat(a,"</root>")};function Mi(t){var a=wt(t);return new Promise(function(n,r){_t.parseString(a,function(i,o){i?r(i):n(o)})})}var Cn=_(83843),Ve=_(65715),Mt=_(63091),Ot=ne.Z.TextArea,Pt=Oe.Z.Panel,jn=`<div class="form-group">
    <h4>Example select</h4>
    <select name="sample" class="form-control">
        <option>1</option>
        <option>2</option>
    </select>
</div>`,xn=`<div class="form-group">
    <input name="sample" type="checkbox">
    <label>Check me out</label>
</div>`,An=`<div class="form-group">
    <h4>Example Option</h4>
    <div class="form-check">
        <label class="form-check-label">
            <input name="sample1" type="checkbox" class=" form-check-input">Option 1
        </label>
    </div>
    <div class="form-check">
        <label class="form-check-label">
            <input name="sample2" type="checkbox" class=" form-check-input">Option 2
        </label>
    </div>
</div>`,En=`<div class="form-group">
    <h4>Example Radios</h4>
    <div>
        <input name="sample" type="radio">
        <label>First radio</label>
    </div>
    <div>
        <input name="sample" type="radio">
        <label>Second radio</label>
    </div>
</div>`,Sn=`<div class="form-group">
    <h4>Sample Input</h4>
    <input name="sample" type="email" class="form-control">
</div>`,bn=`<div class="form-group">
    <h4>Example textarea</h4>
    <textarea name="sample" class="form-control" rows="3"/>
</div>`;function Ii(t){var a=t.itemSelect,n=(0,X.useIntl)(),r=n.formatMessage,i=(0,d.useState)(!1),o=P()(i,2),u=o[0],l=o[1],m=function(M){a(M)},c=function(M){l(M)},g=function(M){return M.split(`
`).length},h=(0,e.jsxs)(Ve.Z,{style:{width:"650px"},children:[(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsx)(Oe.Z,{accordion:!0,bordered:!1,children:(0,e.jsxs)(Pt,{showArrow:!1,header:"Select - select value from options.",children:[(0,e.jsx)(Ot,{readOnly:!0,value:jn,rows:g(jn)}),(0,e.jsx)("div",{style:{marginTop:"10px",textAlign:"right"},children:(0,e.jsx)(J.ZP,{onClick:function(){return m(jn)},size:"small",children:r({id:"template.htmlReference.add"})})})]},"1")})}),(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsx)(Oe.Z,{accordion:!0,bordered:!1,children:(0,e.jsxs)(Pt,{showArrow:!1,header:"Checkbox - toggle between two states.",children:[(0,e.jsx)(Ot,{readOnly:!0,value:xn,rows:g(xn)}),(0,e.jsx)("div",{style:{marginTop:"10px",textAlign:"right"},children:(0,e.jsx)(J.ZP,{onClick:function(){return m(xn)},size:"small",children:r({id:"template.htmlReference.add"})})})]},"1")})}),(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsx)(Oe.Z,{accordion:!0,bordered:!1,children:(0,e.jsxs)(Pt,{showArrow:!1,header:"Checkbox group - selecting multiple values from several options.",children:[(0,e.jsx)(Ot,{readOnly:!0,value:An,rows:g(An)}),(0,e.jsx)("div",{style:{marginTop:"10px",textAlign:"right"},children:(0,e.jsx)(J.ZP,{onClick:function(){return m(An)},size:"small",children:r({id:"template.htmlReference.add"})})})]},"1")})}),(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsx)(Oe.Z,{accordion:!0,bordered:!1,children:(0,e.jsxs)(Pt,{showArrow:!1,header:"Radio - select a single state from multiple options.",children:[(0,e.jsx)(Ot,{readOnly:!0,value:En,rows:g(En)}),(0,e.jsx)("div",{style:{marginTop:"10px",textAlign:"right"},children:(0,e.jsx)(J.ZP,{onClick:function(){return m(En)},size:"small",children:r({id:"template.htmlReference.add"})})})]},"1")})}),(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsx)(Oe.Z,{accordion:!0,bordered:!1,children:(0,e.jsxs)(Pt,{showArrow:!1,header:"Text - single line text field.",children:[(0,e.jsx)(Ot,{readOnly:!0,value:Sn,rows:g(Sn)}),(0,e.jsx)("div",{style:{marginTop:"10px",textAlign:"right"},children:(0,e.jsx)(J.ZP,{onClick:function(){return m(Sn)},size:"small",children:r({id:"template.htmlReference.add"})})})]},"1")})}),(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsx)(Oe.Z,{accordion:!0,bordered:!1,children:(0,e.jsxs)(Pt,{showArrow:!1,header:"Textarea - multi line text field.",children:[(0,e.jsx)(Ot,{readOnly:!0,value:bn,rows:g(bn)}),(0,e.jsx)("div",{style:{marginTop:"10px",textAlign:"right"},children:(0,e.jsx)(J.ZP,{onClick:function(){return m(bn)},size:"small",children:r({id:"template.htmlReference.add"})})})]},"1")})})]});return(0,e.jsx)(Mt.Z,{overlay:h,trigger:["click"],placement:"bottomRight",visible:u,onVisibleChange:c,children:(0,e.jsxs)(J.ZP,{type:"link",children:[r({id:"template.htmlReference.title"}),(0,e.jsx)(Cn.Z,{})]})})}var Ci=Ii,Qn=_(17114);function ji(t){var a=t.itemSelect,n=t.sourceFileHeaders,r=(0,X.useIntl)(),i=r.formatMessage,o=n.map(function(m){var c=m.toLowerCase(),g=c.split(" "),h=g.filter(function(p){return!!p});return h.length===1?c:h.join("_")}),u=function(c){a(c)},l=(0,e.jsx)(Ve.Z,{style:{width:"300px"},children:o.map(function(m){return(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsxs)("div",{onClick:function(){return u(m)},children:[(0,e.jsx)(Qn.Z,{style:{marginRight:"5px"}}),m]})},m)})});return(0,e.jsx)(Mt.Z,{placement:"bottomRight",overlay:l,trigger:["click"],children:(0,e.jsxs)(J.ZP,{type:"link",children:[i({id:"template.insert-data.title"}),(0,e.jsx)(Cn.Z,{})]})})}var xi=ji,od=_(72173),ld=_(80257),sd=_(23173),dd=_(42786),ud=_(57422),Ai=["tomorrow","dracula","monokai","github","solarized_light"],Ei=function(a){var n=a.onThemeChange,r=(0,X.useIntl)(),i=r.formatMessage,o=(0,e.jsx)(Ve.Z,{style:{width:"300px"},children:Ai.map(function(u){return(0,e.jsx)(Ve.Z.Item,{children:(0,e.jsx)("div",{onClick:function(){return n(u)},children:u})},u)})});return(0,e.jsx)(Mt.Z,{placement:"bottomRight",overlay:o,trigger:["click"],children:(0,e.jsxs)(J.ZP,{type:"link",children:[i({id:"template.theme-change"}),(0,e.jsx)(Cn.Z,{})]})})},Si=Ei,bi={"code-editor-title":"code-editor-title___sgWlZ"};function Ti(t){var a=t.content,n=t.onContentChange,r=t.sourceFileHeaders,i=t.theme,o=i===void 0?"tomorrow":i,u=t.onThemeChange,l=(0,d.useState)([]),m=P()(l,2),c=m[0],g=m[1],h=(0,d.useState)(),p=P()(h,2),M=p[0],C=p[1],v=(0,d.useState)(),j=P()(v,2),f=j[0],x=j[1],y=function(){var R=Pe()(ve()().mark(function D(O){var I,A,N,z,Z,k,G,Y;return ve()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return n(O),T.prev=1,T.next=4,Mi(O);case 4:g([]),T.next=13;break;case 7:T.prev=7,T.t0=T.catch(1),I=T.t0.message.split(`
`),A=P()(I,4),N=A[0],z=A[1],Z=A[2],k=A[3],G=+z.split(":")[1],Y=+Z.split(":")[1],g([{text:"".concat(N," - ").concat(k),row:G,columns:Y,type:"error"}]);case 13:case"end":return T.stop()}},D,null,[[1,7]])}));return function(O){return R.apply(this,arguments)}}(),w=function(D){var O="".concat(a,`
`).concat(D);n(O)},b=function(D){var O=D.getCursor();C(O),x(D)},S=function(D){f!=null&&f.session&&(f==null||f.session.insert(M,"{{".concat(D,"}}")))};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:bi["code-editor-title"],children:[(0,e.jsx)(Si,{onThemeChange:u}),(0,e.jsx)(Ci,{itemSelect:w}),r.length>0&&(0,e.jsx)(xi,{sourceFileHeaders:r,itemSelect:S})]}),(0,e.jsx)(yt.ZP,{width:"100%",fontSize:14,mode:"html",theme:o,name:"template-html-editor",editorProps:{$blockScrolling:!0},value:a,onChange:y,onCursorChange:b,annotations:c})]})}var Di=Ti,cd=_(20873);function Ni(t){var a=t.css,n=t.onCssChange,r=t.theme,i=r===void 0?"tomorrow":r;return(0,e.jsxs)("div",{style:{margin:"8px 0"},children:[(0,e.jsx)("h3",{children:"CSS"}),(0,e.jsx)(yt.ZP,{width:"100%",fontSize:14,mode:"css",theme:i,name:"template-css-editor",editorProps:{$blockScrolling:!0},value:a,onChange:n})]})}var Li=Ni,gd=_(4849);function _i(t){var a=t.jsCode,n=t.onJsCodeChange,r=t.theme,i=r===void 0?"tomorrow":r,o=(0,X.useIntl)(),u=o.formatMessage;return(0,e.jsxs)("div",{style:{margin:"8px 0"},children:[(0,e.jsx)("h3",{children:"JavaScript"}),(0,e.jsx)(yt.ZP,{width:"100%",fontSize:14,mode:"javascript",theme:i,name:u({id:"job.content.script.template_editor"}),editorProps:{$blockScrolling:!0},value:a,onChange:n})]})}var wi=_i;function Oi(t){var a=t.onEditorModeChange,n=t.editorMode,r=t.content,i=t.onContentChange,o=t.jsCode,u=t.cssCode,l=t.onJsCodeChange,m=t.onCssCodeChange,c=t.sourceFileHeaders,g=t.error,h=(0,X.useIntl)(),p=h.formatMessage,M=(0,d.useState)(!1),C=P()(M,2),v=C[0],j=C[1],f=(0,d.useState)("tomorrow"),x=P()(f,2),y=x[0],w=x[1];return(0,e.jsxs)(e.Fragment,{children:[n===U.je.GRAPH&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h2",{children:"Content"}),(0,e.jsx)(J.ZP,{type:"link",onClick:function(S){return a(S,U.je.CODE)},children:"Switch to Code Editor"})]}),n===U.je.CODE&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.Z.Item,s()(s()({},g&&{validateStatus:"error",help:g}),{},{children:(0,e.jsx)(Di,{theme:y,content:r,onContentChange:i,sourceFileHeaders:c,onThemeChange:w})})),(0,e.jsx)(J.ZP,{type:"link",onClick:function(S){return a(S,U.je.GRAPH)},style:{display:"none"},children:"Switch to Graphical Editor"}),(0,e.jsx)(J.ZP,{type:"link",style:{float:"right",padding:0},onClick:function(S){S.preventDefault(),j(!v)},children:p({id:v?"labeling-job-create.wizard.configuration.code-editor.hide-css-js-editor":"labeling-job-create.wizard.configuration.code-editor.show-css-js-editor"})}),(0,e.jsx)("div",{style:{clear:"both"}}),v&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Li,{theme:y,css:u,onCssChange:m}),(0,e.jsx)(wi,{theme:y,jsCode:o,onJsCodeChange:l})]})]})]})}var Kn=Oi,Pi=_(82092),W=_.n(Pi),qt=_(37610),ki=_(27253),tt=_(61234),Ye=_(13386),Ge=_(62057),ae=_(43718),Re=_(32109),Ri=_(67825),en=_.n(Ri),tn=_(85062),$n=_(3560),Zi=_(36379).Buffer,zi=["size"],ot=function(t){return t.DEFAULT="default",t.SMALL="small",t.LARGE="large",t}(ot||{}),Tn="ef-ontology";function Ui(t,a){var n=s()({fields:[]},t),r=a.map(function(o){return{value:o.class_name,label:o.class_name}}),i=n.fields.find(function(o){return o.name===Tn});return i?(i.type="RADIO",i.valueType="string",i.options=r):n.fields.splice(0,0,{name:Tn,type:"RADIO",valueType:"string",options:r}),n}var Fi=function(a){var n=a.config,r=a.ontologySyncDisabled,i=a.defaultOntology,o=a.getOntology,u=a.onSave,l=a.title,m=(0,X.useIntl)(),c=m.formatMessage,g=(0,d.useState)(null),h=P()(g,2),p=h[0],M=h[1],C=(0,d.useState)(ot.DEFAULT),v=P()(C,2),j=v[0],f=v[1],x=(0,d.useState)([]),y=P()(x,2),w=y[0],b=y[1];(0,d.useEffect)(function(){try{var O=Zi.from(n||"","base64").toString("utf-8"),I=JSON.parse(O),A=I.size,N=en()(I,zi);M(N),A&&Object.values(ot).includes(A)?f(A):f(ot.DEFAULT)}catch(z){M(null),f(ot.DEFAULT)}},[n]),(0,d.useEffect)(function(){var O=i;!O&&o&&(O=o()),b(O)},[i,o]);var S=function(I){var A=s()(s()({},I),{},{size:j});A.fields.length===0?u(void 0):u((0,tn.h$)(A))},R=function(I){var A=I.fields.findIndex(function(Z){return Z.name===Tn});if(A>=0&&!r){var N=I.fields[A].options,z=N===void 0?[]:N;if(z.some(function(Z){return w.findIndex(function(k){return k.class_name===Z.value})<0})||z.length!==w.length){Re.Z.confirm({title:c({id:"labeling-job-create.wizard.configuration.attributes.form.ontology.alert"}),onOk:function(){return S(I)}});return}}S(I)},D=function(){r||(M(Ui(p,w)),ue.ZP.success(c({id:"labeling-job-create.wizard.configuration.attributes.form.sync.success"})))};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{padding:16,display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("div",{children:[c({id:"labeling-job-create.wizard.configuration.attributes.form.size"}),(0,e.jsxs)(tt.ZP.Group,{value:j,onChange:function(I){return f(I.target.value)},children:[(0,e.jsx)(tt.ZP.Button,{value:ot.LARGE,children:c({id:"labeling-job-create.wizard.configuration.attributes.form.size.large"})}),(0,e.jsx)(tt.ZP.Button,{value:ot.DEFAULT,children:c({id:"labeling-job-create.wizard.configuration.attributes.form.size.default"})}),(0,e.jsx)(tt.ZP.Button,{value:ot.SMALL,children:c({id:"labeling-job-create.wizard.configuration.attributes.form.size.small"})})]})]}),!r&&(0,e.jsx)(qt.Z,{placement:"bottomRight",title:c({id:"labeling-job-create.wizard.configuration.attributes.form.sync.alert"}),onConfirm:D,children:(0,e.jsx)(J.ZP,{children:c({id:"labeling-job-create.wizard.configuration.attributes.form.sync"})})})]}),(0,e.jsx)($n.ZP,{locale:(0,X.getLocale)(),config:p,onSubmit:R})]})},Dn=Fi,Bi=_(15558),ee=_.n(Bi),gn=_(62950),Xn=_(89633),nn=_(15409),kt=_(13554),lt=_(38913),an=_(33179),Ze={"size-group-editor":"size-group-editor___IcaLN","desc-label":"desc-label___kVRGb","has-error":"has-error___yUIKb","size-group-label":"size-group-label___YEiWZ","size-editor":"size-editor___x2mdN"},qn=_(36379).Buffer,Nn=/^\d+(.\d+){0,1}$/,Ln=function(a){var n=Number(a);return Number.isNaN(n)?!1:n>=1e-4&&n<=1e3},Vi=function(a){var n;try{var r=qn.from(a||"","base64").toString("utf-8");n=JSON.parse(r)}catch(i){}return n},Yi=function(a){return qn.from(JSON.stringify(a),"utf-8").toString("base64")},ea=function(a){var n=a.editing,r=n===void 0?!1:n,i=a.size,o=a.onChange,u=a.onDelete,l=a.onCancel,m=a.onEditingChange,c=(0,X.useIntl)(),g=c.formatMessage,h=(0,d.useState)(r),p=P()(h,2),M=p[0],C=p[1],v=(0,d.useState)(((i==null?void 0:i.label)||"").toString().trim()||""),j=P()(v,2),f=j[0],x=j[1],y=(0,d.useState)((i==null?void 0:i.width)!==void 0?i.width.toString():""),w=P()(y,2),b=w[0],S=w[1],R=(0,d.useState)((i==null?void 0:i.height)!==void 0?i.height.toString():""),D=P()(R,2),O=D[0],I=D[1],A=(0,d.useState)((i==null?void 0:i.length)!==void 0?i.length.toString():""),N=P()(A,2),z=N[0],Z=N[1],k=(0,d.useState)({}),G=P()(k,2),Y=G[0],L=G[1];(0,d.useEffect)(function(){m&&m(M)},[M]);var T=function(){L({}),C(!1),l&&l()},E=function(){if(!Object.values(Y).some(function(V){return V})){var H=f.trim();if(!H||!b||!O||!z){L(s()(s()(s()(s()(s()({},Y),!H&&{label:!0}),!b&&{width:!0}),!O&&{height:!0}),!z&&{length:!0}));return}o(s()(s()({},i),{},{label:H,width:parseFloat(b),height:parseFloat(O),length:parseFloat(z)})),x(H),T()}},F=function(){x(((i==null?void 0:i.label)||"").toString().trim()||""),S((i==null?void 0:i.width)!==void 0?i.width.toString():""),I((i==null?void 0:i.height)!==void 0?i.height.toString():""),Z((i==null?void 0:i.length)!==void 0?i.length.toString():""),T()};return(0,e.jsxs)(Ge.Z,{className:Ze["size-editor"],align:"middle",gutter:16,style:{margin:"4px 0"},children:[(0,e.jsxs)(ae.Z,{span:8,children:[(0,e.jsx)("span",{className:Ze["desc-label"],style:{marginRight:8},children:g({id:"labeling-job-create.wizard.configuration.attributes.lidar.sizes.item.label"})}),M?(0,e.jsx)(ne.Z,s()({autoFocus:!0,value:f,onChange:function(H){var V=H.target.value;V.trim()?L(s()(s()({},Y),{},{label:!1})):L(s()(s()({},Y),{},{label:!0})),x(V)}},Y.label&&{className:Ze["has-error"]})):i==null?void 0:i.label]}),(0,e.jsxs)(ae.Z,{span:4,children:[(0,e.jsx)("span",{className:Ze["desc-label"],style:{marginRight:8},children:"W (m)"}),M?(0,e.jsx)(ne.Z,s()({value:b,onChange:function(H){var V=H.target.value;!V||!Nn.test(V)||!Ln(V)?L(s()(s()({},Y),{},{width:!0})):L(s()(s()({},Y),{},{width:!1})),S(V)}},Y.width&&{className:Ze["has-error"]})):i==null?void 0:i.width]}),(0,e.jsxs)(ae.Z,{span:4,children:[(0,e.jsx)("span",{className:Ze["desc-label"],style:{marginRight:8},children:"H (m)"}),M?(0,e.jsx)(ne.Z,s()({value:O,onChange:function(H){var V=H.target.value;!V||!Nn.test(V)||!Ln(V)?L(s()(s()({},Y),{},{height:!0})):L(s()(s()({},Y),{},{height:!1})),I(V)}},Y.height&&{className:Ze["has-error"]})):i==null?void 0:i.height]}),(0,e.jsxs)(ae.Z,{span:4,children:[(0,e.jsx)("span",{className:Ze["desc-label"],style:{marginRight:8},children:"L (m)"}),M?(0,e.jsx)(ne.Z,s()({value:z,onChange:function(H){var V=H.target.value;!V||!Nn.test(V)||!Ln(V)?L(s()(s()({},Y),{},{length:!0})):L(s()(s()({},Y),{},{length:!1})),Z(V)}},Y.length&&{className:Ze["has-error"]})):i==null?void 0:i.length]}),(0,e.jsx)(ae.Z,{span:4,children:M?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(Xn.Z,{}),onClick:E}),(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(nn.Z,{}),onClick:F})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(kt.Z,{}),onClick:function(){return C(!0)}}),(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(lt.Z,{}),onClick:u})]})})]})},ta=function(a){var n=a.editing,r=n===void 0?!1:n,i=a.group,o=a.onChange,u=a.onDelete,l=a.onCancel,m=a.onEditingChange,c=(0,X.useIntl)(),g=c.formatMessage,h=(0,d.useState)(!1),p=P()(h,2),M=p[0],C=p[1],v=(0,d.useState)(r),j=P()(v,2),f=j[0],x=j[1],y=(0,d.useState)([]),w=P()(y,2),b=w[0],S=w[1],R=(0,d.useState)(i?i.label.toString().trim():""),D=P()(R,2),O=D[0],I=D[1],A=(0,d.useState)(!1),N=P()(A,2),z=N[0],Z=N[1];(0,d.useEffect)(function(){m&&m(M||f||b.length>0)},[M,f,b]);var k=function(){Z(!1),x(!1),l&&l()},G=function(){if(!z){var Q=O.trim();if(!Q){Z(!0);return}o(s()(s()({},i),{},{label:Q})),I(Q),k()}},Y=function(){I(i?i.label.toString().trim():""),k()},L=function(Q,H){var V=s()({},i);Q<0?(V.sizes||(V.sizes=[]),V.sizes.push(s()(s()({},H),{},{id:(0,gn.Z)()}))):V.sizes[Q]=s()({},H),o(V)},T=function(Q){var H=s()({},i);H.sizes.splice(Q,1),o(H)},E=function(Q,H){var V=ee()(b);if(H)b.includes(Q)||V.push(Q);else{var K=b.indexOf(Q);K>=0&&V.splice(K,1)}S(V)};return(0,e.jsxs)("div",{className:Ze["size-group-editor"],children:[(0,e.jsxs)("div",{className:Ze["size-group-label"],children:[(0,e.jsx)("span",{className:Ze["desc-label"],style:{width:60},children:g({id:"labeling-job-create.wizard.configuration.attributes.lidar.sizes.group.label"})}),f?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ne.Z,s()({autoFocus:!0,style:{width:600},value:O,onChange:function(Q){var H=Q.target.value;I(H),H.trim()?Z(!1):Z(!0)}},z&&{className:Ze["has-error"]})),(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(Xn.Z,{}),onClick:G}),(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(nn.Z,{}),onClick:Y})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:8},children:i.label}),(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(kt.Z,{}),onClick:function(){return x(!0)}}),(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(lt.Z,{}),onClick:u})]})]}),(0,e.jsx)("div",{style:{paddingLeft:52},children:i&&(0,e.jsxs)(e.Fragment,{children:[(i.sizes||[]).map(function(F,Q){return(0,e.jsx)(ea,{size:F,onChange:function(V){return L(Q,V)},onDelete:function(){return T(Q)},onEditingChange:function(V){return E(Q,V)}},F.id)}),M?(0,e.jsx)(ea,{editing:!0,onChange:function(Q){return L(-1,Q)},onCancel:function(){return C(!1)}}):(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(an.Z,{}),onClick:function(){return C(!0)}})]})})]})},Hi=function(a){var n=a.value,r=a.onChange,i=(0,X.useIntl)(),o=i.formatMessage,u=(0,d.useState)(!1),l=P()(u,2),m=l[0],c=l[1],g=(0,d.useState)([]),h=P()(g,2),p=h[0],M=h[1],C=(0,d.useState)(!1),v=P()(C,2),j=v[0],f=v[1],x=(0,d.useState)([]),y=P()(x,2),w=y[0],b=y[1],S=function(){var N=Vi(n)||[];N.forEach(function(z){z.id=(0,gn.Z)(),z.sizes&&z.sizes.forEach(function(Z){Z.id=(0,gn.Z)()})}),M(N),c(!0)},R=function(){j||w.length>0||(p.forEach(function(N){delete N.id,N.sizes&&N.sizes.forEach(function(z){delete z.id})}),r(Yi(p)),c(!1))},D=function(N,z){var Z=ee()(p);N<0?Z.push(s()(s()({},z),{},{id:(0,gn.Z)()})):Z[N]=s()({},z),M(Z)},O=function(N){var z=ee()(p);z.splice(N,1),M(z)},I=function(N,z){var Z=ee()(w);if(z)Z.includes(N)||Z.push(N);else{var k=Z.indexOf(N);k>=0&&Z.splice(k,1)}b(Z)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.ZP,{onClick:S,children:o({id:"common.edit"})}),(0,e.jsxs)(Re.Z,{destroyOnClose:!0,width:960,bodyStyle:{paddingTop:48},visible:m,okButtonProps:{disabled:j||w.length>0},onOk:R,onCancel:function(){return c(!1)},okText:o({id:"common.confirm"}),children:[p.map(function(A,N){return(0,e.jsx)(ta,{group:A,onChange:function(Z){return D(N,Z)},onDelete:function(){return O(N)},onEditingChange:function(Z){return I(N,Z)}},A.id)}),j?(0,e.jsx)(ta,{editing:!0,onChange:function(N){return D(-1,N)},onCancel:function(){return f(!1)}}):(0,e.jsx)(J.ZP,{block:!0,onClick:function(){return f(!0)},children:o({id:"common.add"})})]})]})},Gi=Hi,Wi=[{name:"manifest_url",label:{"en-US":"Manifest URL","zh-CN":"\u6570\u636E\u5730\u5740","ja-JP":"\u30C7\u30FC\u30BF\u30A2\u30C9\u30EC\u30B9","ko-KR":"\uB370\uC774\uD130 \uC8FC\uC18C"},type:U.x$.INPUT,defaultValue:""},{name:"label_config",label:{"en-US":"3D Cuboid Attributes","zh-CN":"3D\u6846\u5C5E\u6027","ja-JP":"3D\u30DC\u30C3\u30AF\u30B9\u306E\u30D7\u30ED\u30D1\u30C6\u30A3","ko-KR":"3D \uD504\uB808\uC784 \uC18D\uC131"},type:U.x$.FORM},{name:"label_config_2d",label:{"en-US":"2D Shape Attributes","zh-CN":"2D\u6846\u5C5E\u6027","ja-JP":"2D\u30DC\u30C3\u30AF\u30B9\u306E\u30D7\u30ED\u30D1\u30C6\u30A3","ko-KR":"2D \uC0C1\uC790 \uC18D\uC131"},type:U.x$.FORM},{name:"frame_label_config",label:{"en-US":"Frame Attributes","zh-CN":"\u5E27\u5C5E\u6027","ja-JP":"\u30D5\u30EC\u30FC\u30E0\u30D7\u30ED\u30D1\u30C6\u30A3","ko-KR":"\uD504\uB808\uC784 \uC18D\uC131"},type:U.x$.FORM},{name:"default_add_mode",label:{"en-US":"Default Add Tool","zh-CN":"\u9ED8\u8BA4\u6DFB\u52A0\u5DE5\u5177","ja-JP":"\u30C7\u30D5\u30A9\u30EB\u30C8\u3067\u8FFD\u52A0\u3055\u308C\u305F\u30C4\u30FC\u30EB","ko-KR":"\uAE30\uBCF8\uC801\uC73C\uB85C \uCD94\uAC00\uB41C \uB3C4\uAD6C"},type:U.x$.RADIO,defaultValue:"DRAG",options:[{name:"DRAG",label:{"en-US":"Drag","zh-CN":"\u62D6\u62FD","ja-JP":"\u30C9\u30E9\u30C3\u30B0\u30A2\u30F3\u30C9\u30C9\u30ED\u30C3\u30D7","ko-KR":"\uB4DC\uB798\uADF8"}},{name:"CLICK",label:{"en-US":"Click","zh-CN":"\u70B9\u51FB","ja-JP":"\u30AF\u30EA\u30C3\u30AF","ko-KR":"\uD074\uB9AD"}}]},{name:"color_mode",label:{"en-US":"Color Mode","zh-CN":"\u7740\u8272\u6A21\u5F0F","ja-JP":"\u30B7\u30A7\u30FC\u30C7\u30A3\u30F3\u30B0\u30E2\u30FC\u30C9","ko-KR":"\uC74C\uC601 \uBAA8\uB4DC"},type:U.x$.INPUT,tips:{"en-US":"Example: speed / elevation / reflection / elevation:[x, y][z, w] / reflection:[x, y][z, w]","zh-CN":"\u586B\u5199\u793A\u4F8B\uFF1Aspeed\u3001elevation\u3001reflection\u3001elevation:[x, y][z, w]\u3001reflection:[x, y][z, w]","ja-JP":"\u4F8B\u3092\u8A18\u5165\u3057\u3066\u304F\u3060\u3055\u3044\uFF1Aspeed\u3001elevation\u3001reflection\u3001elevation:[x, y][z, w]\u3001reflection:[x, y][z, w]","ko-KR":"\uC608\uB97C \uC785\uB825\uD558\uC138\uC694: speed\u3001elevation\u3001reflection\u3001elevation:[x, y][z, w]\u3001reflection:[x, y][z, w]"}},{name:"view_mode",label:{"en-US":"View Mode","zh-CN":"\u89C6\u56FE\u6A21\u5F0F","ja-JP":"\u8868\u793A\u30E2\u30FC\u30C9","ko-KR":"\uBCF4\uAE30 \uBAA8\uB4DC"},type:U.x$.RADIO,options:[{name:"united",label:{"en-US":"United","zh-CN":"\u8054\u5408\u6807\u6CE8","ja-JP":"\u30B8\u30E7\u30A4\u30F3\u30C8\u30A2\u30CE\u30C6\u30FC\u30B7\u30E7\u30F3","ko-KR":"Joint Callout"}},{name:"pcd",label:{"en-US":"PCD First","zh-CN":"\u70B9\u4E91\u4F18\u5148","ja-JP":"\u30DD\u30A4\u30F3\u30C8\u30AF\u30E9\u30A6\u30C9\u30D5\u30A1\u30FC\u30B9\u30C8","ko-KR":"\uD3EC\uC778\uD2B8 \uD074\uB77C\uC6B0\uB4DC \uC6B0\uC120"}}],defaultValue:"pcd"},{name:"united_mode",label:{"en-US":"United Annotation Mode","zh-CN":"\u8054\u5408\u6807\u6CE8\u6A21\u5F0F","ja-JP":"\u30B8\u30E7\u30A4\u30F3\u30C8\u30A2\u30CE\u30C6\u30FC\u30B7\u30E7\u30F3\u30E2\u30FC\u30C9","ko-KR":"\uACF5\uB3D9 \uC8FC\uC11D \uBAA8\uB4DC"},type:U.x$.RADIO,options:[{name:"UNITED_ADDING",label:{"en-US":"United Annotation. Auto Project to 2D when add new cube.","zh-CN":"\u8054\u5408\u6807\u6CE8\uFF0C\u9996\u6B21\u81EA\u52A8\u6295\u5F712D","ja-JP":"\u30B8\u30E7\u30A4\u30F3\u30C8\u30A2\u30CE\u30C6\u30FC\u30B7\u30E7\u30F3,\u6700\u521D\u306E\u81EA\u52D5\u6295\u5F712D","ko-KR":"\uC870\uC778\uD2B8 \uC8FC\uC11D, \uCD5C\uCD08\uC758 2D \uC790\uB3D9 \uD22C\uC601"}},{name:"UNITED_MANUAL",label:{"en-US":"United Annotation. Project to 2D by manual.","zh-CN":"\u8054\u5408\u6807\u6CE8\uFF0C\u624B\u52A8\u6295\u5F712D","ja-JP":"\u30B8\u30E7\u30A4\u30F3\u30C8\u30A2\u30CE\u30C6\u30FC\u30B7\u30E7\u30F3,\u624B\u52D5\u30D7\u30ED\u30B8\u30A7\u30AF\u30B7\u30E7\u30F32D","ko-KR":"\uC870\uC778\uD2B8 \uC8FC\uC11D, \uC218\uB3D9 \uD22C\uC601 2D"}},{name:"UNUNITED_ALWAYS",label:{"en-US":"Non-united Annotation. Auto projection real-time","zh-CN":"\u975E\u8054\u5408\u6807\u6CE8\uFF0C\u5B9E\u65F6\u81EA\u52A8\u6295\u5F71","ja-JP":"\u975E\u30B8\u30E7\u30A4\u30F3\u30C8\u30A2\u30CE\u30C6\u30FC\u30B7\u30E7\u30F3,\u30EA\u30A2\u30EB\u30BF\u30A4\u30E0\u81EA\u52D5\u30D7\u30ED\u30B8\u30A7\u30AF\u30B7\u30E7\u30F3","ko-KR":"\uBE44\uC870\uC778\uD2B8 \uC8FC\uC11D, \uC2E4\uC2DC\uAC04 \uC790\uB3D9 \uD22C\uC601"}}]},{name:"project_type",label:{"en-US":"Project Shape Type","zh-CN":"\u6295\u5F71\u56FE\u5F62\u7C7B\u578B","ja-JP":"\u6295\u5F71\u30B0\u30E9\u30D5\u30A3\u30C3\u30AF\u30BF\u30A4\u30D7","ko-KR":"\uB3CC\uCD9C \uD615\uC0C1 \uC720\uD615"},type:U.x$.RADIO,options:[{name:"RECT",label:{"en-US":"Rectangle","zh-CN":"\u77E9\u5F62\u6846","ja-JP":"\u9577\u65B9\u5F62\u30D5\u30EC\u30FC\u30E0","ko-KR":"\uC9C1\uC0AC\uAC01\uD615 \uD504\uB808\uC784"}},{name:"RECT_CUBE",label:{"en-US":"Cube with Two Rectangles","zh-CN":"\u524D\u540E\u77E9\u5F62\u7ACB\u4F53\u6846","ja-JP":"\u524D\u5F8C\u306E\u9577\u65B9\u5F62\u7ACB\u4F53\u30D5\u30EC\u30FC\u30E0","ko-KR":"\uC804\uD6C4\uBC29 \uC0AC\uAC01 \uC785\uCCB4 \uD504\uB808\uC784"}}]},{name:"measurement_box",label:{"en-US":"Measurement Box","zh-CN":"\u5C3A\u5BF8\u8F85\u52A9\u6846","ja-JP":"\u30B5\u30A4\u30BA\u30A2\u30B7\u30B9\u30C8\u30D5\u30EC\u30FC\u30E0","ko-KR":"\uD06C\uAE30 \uBCF4\uC870 \uD504\uB808\uC784"},type:U.x$.INPUT,tips:{"en-US":"Example: [[5,5],[3,3]]","zh-CN":"\u586B\u5199\u793A\u4F8B\uFF1A[[5,5],[3,3]]","ja-JP":"\u4F8B\u3092\u8A18\u5165\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A[[5,5],[3,3]]","ko-KR":"\uC608\uB97C \uC785\uB825\uD558\uC138\uC694: [[5,5],[3,3]]"}},{name:"range_indicators",label:{"en-US":"Range Indicators","zh-CN":"\u8DDD\u79BB\u6307\u793A\u5708","ja-JP":"\u8DDD\u96E2\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC\u30B5\u30FC\u30AF\u30EB","ko-KR":"\uAC70\uB9AC \uD45C\uC2DC\uAE30 \uC6D0"},type:U.x$.INPUT,tips:{"en-US":"Example: 5,10,20 / 5:#FF0000,10:#FFFF00,20:#0000FF","zh-CN":"\u586B\u5199\u793A\u4F8B\uFF1A5,10,20\uFF0C\u62165:#FF0000,10:#FFFF00,20:#0000FF","ja-JP":"\u4F8B\u3092\u8A18\u5165\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A5,10,20 / 5:#FF0000,10:#FFFF00,20:#0000FF","ko-KR":"\uC608\uB97C \uC785\uB825\uD558\uC138\uC694: 5,10,20 / 5:#FF0000,10:#FFFF00,20:#0000FF"}},{name:"show_grid",label:{"en-US":"Show Checkerboard on Ground","zh-CN":"\u663E\u793A\u5730\u9762\u68CB\u76D8\u683C","ja-JP":"\u30B0\u30E9\u30A6\u30F3\u30C9\u30C1\u30A7\u30C3\u30AB\u30FC\u30DC\u30FC\u30C9\u3092\u8868\u793A","ko-KR":"\uADF8\uB77C\uC6B4\uB4DC \uBC14\uB451\uD310 \uD45C\uC2DC"},type:U.x$.SWITCH,defaultValue:"false"},{name:"overflow",label:{"en-US":"Outside Image","zh-CN":"\u53EF\u8D85\u51FA\u56FE\u7247\u8FB9\u754C","ja-JP":"\u753B\u50CF\u306E\u5883\u754C\u3092\u8D85\u3048\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059","ko-KR":"\uADF8\uB9BC \uACBD\uACC4\uB97C \uCD08\uACFC\uD560 \uC218 \uC788\uC74C"},type:U.x$.SWITCH,defaultValue:"false"},{name:"axes_transform_matrix",label:{"en-US":"Axes Transform Matrix","zh-CN":"\u5750\u6807\u8F6C\u6362\u77E9\u9635","ja-JP":"\u5EA7\u6A19\u5909\u63DB\u884C\u5217","ko-KR":"\uC88C\uD45C \uBCC0\uD658 \uD589\uB82C"},type:U.x$.RADIO,options:[{name:"UPPER_Z_RIGHT",label:{"en-US":"Z-Axis Up Right Hand","zh-CN":"Z\u8F74\u671D\u4E0A\u53F3\u624B\u5750\u6807\u7CFB","ja-JP":"Z\u8EF8\u4E0A\u53F3\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Z\uCD95 \uC704\uCABD \uC624\uB978\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_Z_LEFT",label:{"en-US":"Z-Axis Up Left Hand","zh-CN":"Z\u8F74\u671D\u4E0A\u5DE6\u624B\u5750\u6807\u7CFB","ja-JP":"Z\u8EF8\u4E0A\u5DE6\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Z\uCD95 \uC704\uCABD \uC67C\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_Y_RIGHT",label:{"en-US":"Y-Axis Up Right Hand","zh-CN":"Y\u8F74\u671D\u4E0A\u53F3\u624B\u5750\u6807\u7CFB","ja-JP":"Y\u8EF8\u4E0A\u53F3\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Y\uCD95 \uC704\uCABD \uC624\uB978\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_Y_LEFT",label:{"en-US":"Y-Axis Up Left Hand","zh-CN":"Y\u8F74\u671D\u4E0A\u5DE6\u624B\u5750\u6807\u7CFB","ja-JP":"Y\u8EF8\u4E0A\u5DE6\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Y\uCD95 \uC704\uCABD \uC67C\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_X_RIGHT",label:{"en-US":"X-Axis Up Right Hand","zh-CN":"X\u8F74\u671D\u4E0A\u53F3\u624B\u5750\u6807\u7CFB","ja-JP":"X\u8EF8\u53F3\u4E0A\u5EA7\u6A19\u7CFB","ko-KR":"X\uCD95 \uC704\uCABD \uC624\uB978\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_X_LEFT",label:{"en-US":"X-Axis Up Left Hand","zh-CN":"X\u8F74\u671D\u4E0A\u5DE6\u624B\u5750\u6807\u7CFB","ja-JP":"X\u8EF8\u4E0A\u5DE6\u624B\u5EA7\u6A19\u7CFB","ko-KR":"X\uCD95 \uC704\uCABD \uC67C\uCABD \uC88C\uD45C\uACC4"}}]},{name:"revert_x",label:{"en-US":"Invert X-Axis","zh-CN":"\u53CD\u8F6CX\u8F74","ja-JP":"X\u8EF8\u3092\u53CD\u8EE2","ko-KR":"X\uCD95 \uBC18\uC804"},type:U.x$.SWITCH,defaultValue:"false"},{name:"revert_y",label:{"en-US":"Invert Y-Axis","zh-CN":"\u53CD\u8F6CY\u8F74","ja-JP":"Y\u8EF8\u3092\u53CD\u8EE2","ko-KR":"Y\uCD95 \uBC18\uC804"},type:U.x$.SWITCH,defaultValue:"false"},{name:"revert_z",label:{"en-US":"Invert Z-Axis","zh-CN":"\u53CD\u8F6CZ\u8F74","ja-JP":"\u9006Z\u8EF8","ko-KR":"Z\uCD95 \uBC18\uC804"},type:U.x$.SWITCH,defaultValue:"false"},{name:"show_truncation_cast",label:{"en-US":"Display Truncated 2D Cast","zh-CN":"\u663E\u793A\u88AB\u622A\u65AD\u76842D\u6846","ja-JP":"\u5207\u308A\u6368\u3066\u3089\u308C\u305F2D\u30DC\u30C3\u30AF\u30B9\u3092\u8868\u793A\u3059\u308B","ko-KR":"\uC798\uB9B0 2D \uC0C1\uC790 \uD45C\uC2DC"},type:U.x$.SWITCH,defaultValue:"false"},{name:"front_side",label:{"en-US":"Front Side Of Cuboid","zh-CN":"\u7ACB\u4F53\u6846\u524D\u9762\u65B9\u5411","ja-JP":"\u30BD\u30EA\u30C3\u30C9\u30D5\u30EC\u30FC\u30E0\u306E\u6B63\u9762\u65B9\u5411","ko-KR":"\uC194\uB9AC\uB4DC \uD504\uB808\uC784\uC758 \uC804\uBA74 \uBC29\uD5A5"},type:U.x$.RADIO,defaultValue:"0",options:[{name:"0",label:{"en-US":"positive x-axis","zh-CN":"x\u8F74\u6B63\u5411","ja-JP":"\u6B63\u306Ex\u8EF8","ko-KR":"\uC591\uC758 x\uCD95"}},{name:"1",label:{"en-US":"positive y-axis","zh-CN":"y\u8F74\u6B63\u5411","ja-JP":"\u6B63\u306Ey\u8EF8","ko-KR":"\uC591\uC758 y\uCD95"}},{name:"2",label:{"en-US":"negative x-axis","zh-CN":"x\u8F74\u8D1F\u5411","ja-JP":"\u8CA0\u306Ex\u8EF8","ko-KR":"\uC74C\uC758 x\uCD95"}},{name:"3",label:{"en-US":"negative y-axis","zh-CN":"y\u8F74\u8D1F\u5411","ja-JP":"\u8CA0\u306Ey\u8EF8","ko-KR":"\uC74C\uC758 y\uCD95"}}]}],Ji=[{name:"manifest_url",label:{"en-US":"Manifest URL","zh-CN":"\u6570\u636E\u5730\u5740","ja-JP":"\u30C7\u30FC\u30BF\u30A2\u30C9\u30EC\u30B9","ko-KR":"\uB370\uC774\uD130 \uC8FC\uC18C"},type:U.x$.INPUT,defaultValue:""},{name:"label_config",label:{"en-US":"Instance Attributes","zh-CN":"\u5B9E\u4F8B\u5C5E\u6027","ja-JP":"\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u306E\u30D7\u30ED\u30D1\u30C6\u30A3","ko-KR":"\uC778\uC2A4\uD134\uC2A4 \uC18D\uC131"},type:U.x$.FORM},{name:"frame_label_config",label:{"en-US":"Frame Attributes","zh-CN":"\u5E27\u5C5E\u6027","ja-JP":"\u30D5\u30EC\u30FC\u30E0\u30D7\u30ED\u30D1\u30C6\u30A3","ko-KR":"\uD504\uB808\uC784 \uC18D\uC131"},type:U.x$.FORM},{name:"show_grid",label:{"en-US":"Show Checkerboard on Ground","zh-CN":"\u663E\u793A\u5730\u9762\u68CB\u76D8\u683C","ja-JP":"\u30B0\u30E9\u30A6\u30F3\u30C9\u30C1\u30A7\u30C3\u30AB\u30FC\u30DC\u30FC\u30C9\u3092\u8868\u793A","ko-KR":"\uADF8\uB77C\uC6B4\uB4DC \uBC14\uB451\uD310 \uD45C\uC2DC"},type:U.x$.SWITCH,defaultValue:"false"},{name:"color_mode",label:{"en-US":"Color Mode","zh-CN":"\u7740\u8272\u6A21\u5F0F","ja-JP":"\u30B7\u30A7\u30FC\u30C7\u30A3\u30F3\u30B0\u30E2\u30FC\u30C9","ko-KR":"\uC74C\uC601 \uBAA8\uB4DC"},type:U.x$.INPUT,tips:{"en-US":"Example: Intensity:0.00:#0000FF,0.25:#00FFFF,0.75:#FFFF00,1.00:#FF0000 / Elevation:0.00:#0000FF,1:#00FFFF","zh-CN":"\u586B\u5199\u793A\u4F8B\uFF1AIntensity:0.00:#0000FF,0.25:#00FFFF,0.75:#FFFF00,1.00:#FF0000\u3001Elevation:0.00:#0000FF,1:#00FFFF","ja-JP":"\u4F8B\u3092\u8A18\u5165\u3057\u3066\u304F\u3060\u3055\u3044\uFF1AIntensity:0.00:#0000FF,0.25:#00FFFF,0.75:#FFFF00,1.00:#FF0000\u3001Elevation:0.00:#0000FF,1:#00FFFF","ko-KR":"\uC608\uB97C \uC785\uB825\uD558\uC138\uC694: Intensity:0.00:#0000FF,0.25:#00FFFF,0.75:#FFFF00,1.00:#FF0000\u3001Elevation:0.00:#0000FF,1:#00FFFF"}},{name:"segmentation_tools",label:{"en-US":"Tools","zh-CN":"\u5DE5\u5177","ja-JP":"\u30C4\u30FC\u30EB","ko-KR":"\uB3C4\uAD6C"},type:U.x$.CHECKBOX,options:[{name:"POLYGON",label:{"en-US":"Polygon","zh-CN":"\u591A\u8FB9\u5F62","ja-JP":"\u30DD\u30EA\u30B4\u30F3","ko-KR":"\uB2E4\uAC01\uD615"}},{name:"PAINT",label:{"en-US":"Paint Brush","zh-CN":"\u7B14\u5237","ja-JP":"\u30D6\u30E9\u30B7","ko-KR":"\uBE0C\uB7EC\uC2DC"}},{name:"SINGLE",label:{"en-US":"Single Point","zh-CN":"\u5355\u70B9","ja-JP":"\u30B7\u30F3\u30B0\u30EB\u30DD\u30A4\u30F3\u30C8","ko-KR":"\uC2F1\uAE00 \uD3EC\uC778\uD2B8"}}],defaultValue:"POLYGON,PAINT,SINGLE"},{name:"segmentation_qa_type",label:{"en-US":"QA Type","zh-CN":"\u8D28\u68C0\u65B9\u5F0F","ja-JP":"\u54C1\u8CEA\u691C\u67FB\u65B9\u6CD5","ko-KR":"\uD488\uC9C8 \uAC80\uC0AC \uBC29\uBC95"},type:U.x$.RADIO,options:[{name:"points",label:{"en-US":"By Points","zh-CN":"\u6309\u70B9\u8D28\u68C0","ja-JP":"\u30DD\u30A4\u30F3\u30C8\u306B\u3088\u308B\u54C1\u8CEA\u691C\u67FB","ko-KR":"\uD3EC\uC778\uD2B8\uBCC4 \uD488\uC9C8\uAC80\uC0AC"}},{name:"instance",label:{"en-US":"By Instance","zh-CN":"\u6309\u7269\u4F53\u8D28\u68C0","ja-JP":"\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u306B\u3088\u308B\u54C1\u8CEA\u691C\u67FB","ko-KR":"\uB300\uC0C1\uBCC4 \uD488\uC9C8\uAC80\uC0AC"}}],defaultValue:"points"},{name:"range_indicators",label:{"en-US":"Range Indicators","zh-CN":"\u8DDD\u79BB\u6307\u793A\u5708","ja-JP":"\u8DDD\u96E2\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC\u30B5\u30FC\u30AF\u30EB","ko-KR":"\uAC70\uB9AC \uD45C\uC2DC\uAE30 \uC6D0"},type:U.x$.INPUT,tips:{"en-US":"Example: 5,10,20 / 5:#FF0000,10:#FFFF00,20:#0000FF","zh-CN":"\u586B\u5199\u793A\u4F8B\uFF1A5,10,20\uFF0C\u62165:#FF0000,10:#FFFF00,20:#0000FF","ja-JP":"\u4F8B\u3092\u8A18\u5165\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A5,10,20 / 5:#FF0000,10:#FFFF00,20:#0000FF","ko-KR":"\uC608\uB97C \uC785\uB825\uD558\uC138\uC694: 5,10,20 / 5:#FF0000,10:#FFFF00,20:#0000FF"}},{name:"axes_transform_matrix",label:{"en-US":"Axes Transform Matrix","zh-CN":"\u5750\u6807\u8F6C\u6362\u77E9\u9635","ja-JP":"\u5EA7\u6A19\u5909\u63DB\u884C\u5217","ko-KR":"\uC88C\uD45C \uBCC0\uD658 \uD589\uB82C"},type:U.x$.RADIO,options:[{name:"UPPER_Z_RIGHT",label:{"en-US":"Z-Axis Up Right Hand","zh-CN":"Z\u8F74\u671D\u4E0A\u53F3\u624B\u5750\u6807\u7CFB","ja-JP":"Z\u8EF8\u4E0A\u53F3\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Z\uCD95 \uC704\uCABD \uC624\uB978\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_Z_LEFT",label:{"en-US":"Z-Axis Up Left Hand","zh-CN":"Z\u8F74\u671D\u4E0A\u5DE6\u624B\u5750\u6807\u7CFB","ja-JP":"Z\u8EF8\u4E0A\u5DE6\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Z\uCD95 \uC704\uCABD \uC67C\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_Y_RIGHT",label:{"en-US":"Y-Axis Up Right Hand","zh-CN":"Y\u8F74\u671D\u4E0A\u53F3\u624B\u5750\u6807\u7CFB","ja-JP":"Y\u8EF8\u4E0A\u53F3\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Y\uCD95 \uC704\uCABD \uC624\uB978\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_Y_LEFT",label:{"en-US":"Y-Axis Up Left Hand","zh-CN":"Y\u8F74\u671D\u4E0A\u5DE6\u624B\u5750\u6807\u7CFB","ja-JP":"Y\u8EF8\u4E0A\u5DE6\u624B\u5EA7\u6A19\u7CFB","ko-KR":"Y\uCD95 \uC704\uCABD \uC67C\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_X_RIGHT",label:{"en-US":"X-Axis Up Right Hand","zh-CN":"X\u8F74\u671D\u4E0A\u53F3\u624B\u5750\u6807\u7CFB","ja-JP":"X\u8EF8\u53F3\u4E0A\u5EA7\u6A19\u7CFB","ko-KR":"X\uCD95 \uC704\uCABD \uC624\uB978\uCABD \uC88C\uD45C\uACC4"}},{name:"UPPER_X_LEFT",label:{"en-US":"X-Axis Up Left Hand","zh-CN":"X\u8F74\u671D\u4E0A\u5DE6\u624B\u5750\u6807\u7CFB","ja-JP":"X\u8EF8\u4E0A\u5DE6\u624B\u5EA7\u6A19\u7CFB","ko-KR":"X\uCD95 \uC704\uCABD \uC67C\uCABD \uC88C\uD45C\uACC4"}}]},{name:"revert_x",label:{"en-US":"Invert X-Axis","zh-CN":"\u53CD\u8F6CX\u8F74","ja-JP":"X\u8EF8\u3092\u53CD\u8EE2","ko-KR":"X\uCD95 \uBC18\uC804"},type:U.x$.SWITCH,defaultValue:"false"},{name:"revert_y",label:{"en-US":"Invert Y-Axis","zh-CN":"\u53CD\u8F6CY\u8F74","ja-JP":"Y\u8EF8\u3092\u53CD\u8EE2","ko-KR":"Y\uCD95 \uBC18\uC804"},type:U.x$.SWITCH,defaultValue:"false"},{name:"revert_z",label:{"en-US":"Invert Z-Axis","zh-CN":"\u53CD\u8F6CZ\u8F74","ja-JP":"\u9006Z\u8EF8","ko-KR":"Z\uCD95 \uBC18\uC804"},type:U.x$.SWITCH,defaultValue:"false"}],Qi=[{name:"audio_url",label:{"en-US":"Audio URL","zh-CN":"\u97F3\u9891\u5730\u5740"},type:U.x$.INPUT,defaultValue:"{{{audio_url}}}"},{name:"word_timestamps",label:{"en-US":"Word Timestamp URL","zh-CN":"\u5B57\u7B26\u65F6\u95F4\u6570\u636E\u5730\u5740"},type:U.x$.INPUT,defaultValue:""},{name:"label_config_segment",label:{"en-US":"Segment Attributes","zh-CN":"\u6BB5\u5C5E\u6027"},type:U.x$.FORM},{name:"label_config",label:{"en-US":"Line Attributes","zh-CN":"\u884C\u5C5E\u6027"},type:U.x$.FORM},{name:"global_config",label:{"en-US":"Global Attributes","zh-CN":"\u5168\u5C40\u5C5E\u6027"},type:U.x$.FORM,tips:{"en-US":"Field is_valid (options: valid & invalid) can be added as audio validity mark","zh-CN":"\u53EF\u6DFB\u52A0\u5C5E\u6027\u5B57\u6BB5 is_valid\uFF08\u503C\u4E3A valid \u548C invalid\uFF09\u4F5C\u4E3A\u97F3\u9891\u6709\u6548\u6027\u6807\u8BB0"}},{name:"invalid_annotatable",label:{"en-US":"Annotatable when Invalid","zh-CN":"\u65E0\u6548\u60C5\u51B5\u662F\u5426\u5141\u8BB8\u6807\u6CE8"},type:U.x$.SWITCH,defaultValue:"true"},{name:"valid_duration",label:{"en-US":"Valid Duration","zh-CN":"\u6709\u6548\u65F6\u957F","ja-JP":"\u6709\u52B9\u671F\u9593","ko-KR":"\uC720\uD6A8 \uAE30\uAC04"},type:U.x$.RADIO,defaultValue:"attributes",options:[{name:"attributes",label:{"en-US":"Statistics by key attributes","zh-CN":"\u6309\u5173\u952E\u5C5E\u6027\u7EDF\u8BA1","ja-JP":"\u30AD\u30FC\u5C5E\u6027\u5225\u7D71\u8A08","ko-KR":"\uC8FC\uC694 \uC18D\uC131\uBCC4 \uD1B5\uACC4"}},{name:"translations",label:{"en-US":"Statistics by translations","zh-CN":"\u6309\u662F\u5426\u6709\u8BD1\u6587\u7EDF\u8BA1","ja-JP":"\u7FFB\u8A33\u306E\u6709\u7121\u306B\u3088\u308B\u7D71\u8A08","ko-KR":"\uBC88\uC5ED \uC5EC\uBD80\uC5D0 \uB530\uB978 \uD1B5\uACC4"}}]},{name:"key_attribute",label:{"en-US":"Key Attribute","zh-CN":"\u5173\u952E\u5C5E\u6027"},type:U.x$.INPUT},{name:"tag_group",label:{"en-US":"Tags","zh-CN":"\u6587\u672C\u6807\u7B7E"},type:U.x$.INPUT},{name:"overlap",label:{"en-US":"Multiple Roles","zh-CN":"\u5355\u6BB5\u591A\u884C"},type:U.x$.SWITCH,defaultValue:"true"},{name:"min_length",label:{"en-US":"Minimum Segment Length","zh-CN":"\u6BB5\u6700\u77ED\u957F\u5EA6"},type:U.x$.INPUT,defaultValue:"",tips:{"en-US":"Unit In Seconds","zh-CN":"\u5355\u4F4D\u4E3A\u79D2"}},{name:"segment_mode",label:{"en-US":"Segmentation Mode","zh-CN":"\u5206\u6BB5\u6A21\u5F0F"},type:U.x$.RADIO,defaultValue:"continuous",options:[{name:"continuous",label:{"en-US":"Continuous","zh-CN":"\u8FDE\u7EED\u5206\u6BB5"}},{name:"individual",label:{"en-US":"Individual","zh-CN":"\u72EC\u7ACB\u5206\u6BB5"}}]},{name:"segment_overlap",label:{"en-US":"Segmentation Overlap","zh-CN":"\u53EF\u91CD\u53E0\u5206\u6BB5"},type:U.x$.SWITCH,defaultValue:"true"},{name:"space_line",label:{"en-US":"Space Line (seconds)","zh-CN":"\u5206\u6BB5\u9996\u5C3E\u8F85\u52A9\u7EBF\uFF08\u5355\u4F4D\uFF1A\u79D2\uFF09"},type:U.x$.INPUT,validator:function(a){if(a==="")return!0;var n=Number(a);return Number.isNaN(n)?!1:n>0}},{name:"measurement_box",label:{"en-US":"Measurement Box","zh-CN":"\u65F6\u95F4\u8F85\u52A9\u6846"},type:U.x$.INPUT,tips:{"en-US":"Use comma as delimitation","zh-CN":"\u591A\u4E2A\u65F6\u95F4\u8F85\u52A9\u6846\u5C3A\u5BF8\uFF08\u5355\u4F4D\uFF1A\u79D2\uFF09\u4E4B\u95F4\u4EE5\u82F1\u6587\u9017\u53F7\u5206\u5272\uFF0C\u4F8B\u5982\uFF1A1,5,10"}}],Ki=[{name:"frames",label:{"en-US":"Frame Image URLs","zh-CN":"\u56FE\u7247\u5730\u5740\u5217\u8868"},type:U.x$.INPUT,defaultValue:"{{{frames}}}"},{name:"base_url",label:{"en-US":"Data URL","zh-CN":"\u6570\u636E\u5730\u5740"},type:U.x$.INPUT},{name:"is_fill",label:{"en-US":"Shape Fill","zh-CN":"\u56FE\u5F62\u586B\u5145"},type:U.x$.SWITCH,defaultValue:"true"},{name:"fill_opacity",label:{"en-US":"Shape Fill Opacity","zh-CN":"\u56FE\u5F62\u586B\u5145\u7684\u4E0D\u900F\u660E\u5EA6"},type:U.x$.INPUT,defaultValue:"0.2"},{name:"show_vertex",label:{"en-US":"Show Vertexes (Polygons/lines)","zh-CN":"\u663E\u793A\u591A\u8FB9\u5F62/\u7EBF\u9876\u70B9"},type:U.x$.SWITCH,defaultValue:"false"},{name:"show_vertex_order",label:{"en-US":"Show Vertex Order (Polygons/lines)","zh-CN":"\u663E\u793A\u591A\u8FB9\u5F62/\u7EBF\u9876\u70B9\u5E8F\u53F7"},type:U.x$.SWITCH,defaultValue:"false"},{name:"measurement_box",label:{"en-US":"Measurement Box","zh-CN":"\u5C3A\u5BF8\u8F85\u52A9\u6846"},type:U.x$.INPUT,tips:{"en-US":"Example: [[5,5],[3,3]]","zh-CN":"\u586B\u5199\u793A\u4F8B\uFF1A[[5,5],[3,3]]"}},{name:"rotatable",label:{"en-US":"Shape Rotatable","zh-CN":"\u5141\u8BB8\u56FE\u5F62\u65CB\u8F6C"},type:U.x$.SWITCH,defaultValue:"false"},{name:"auto_snap_point",label:{"en-US":"Auto Snap to Vertexes","zh-CN":"\u9876\u70B9\u81EA\u52A8\u5438\u9644","ja-JP":"\u9802\u70B9\u30AA\u30FC\u30C8\u30B9\u30CA\u30C3\u30D7","ko-KR":"\uC815\uC810 \uC790\uB3D9 \uC2A4\uB0C5"},type:U.x$.SWITCH,defaultValue:"true"},{name:"frame_config",label:{"en-US":"Image Attributes","zh-CN":"\u56FE\u7247\u5C5E\u6027"},type:U.x$.FORM}],$i=[{name:"label_item",label:{"en-US":"Displayed Items","zh-CN":"\u6807\u7B7E\u663E\u793A\u5185\u5BB9"},type:U.x$.CHECKBOX,options:[{name:"category",label:{"en-US":"Category","zh-CN":"\u7C7B\u522B"}},{name:"attribute-keys",label:{"en-US":"Attribute Keys","zh-CN":"\u5C5E\u6027\u540D"}},{name:"attribute-values",label:{"en-US":"Attribute Values","zh-CN":"\u5C5E\u6027\u503C"}}],defaultValue:"category,attribute-keys,attribute-values"},{name:"point_label_item",label:{"en-US":"Displayed Point Items","zh-CN":"\u6807\u7B7E\u663E\u793A\u5185\u5BB9\uFF08\u70B9\uFF09"},type:U.x$.CHECKBOX,options:[{name:"number",label:{"en-US":"Number","zh-CN":"\u7F16\u53F7"}},{name:"attribute-keys",label:{"en-US":"Attribute Keys","zh-CN":"\u5C5E\u6027\u540D"}},{name:"attribute-values",label:{"en-US":"Attribute Values","zh-CN":"\u5C5E\u6027\u503C"}}],defaultValue:"number,attribute-keys,attribute-values"},{name:"label_style",label:{"en-US":"Label Style","zh-CN":"\u6807\u7B7E\u6837\u5F0F"},type:U.x$.RADIO,options:[{name:"default",label:{"en-US":"Default","zh-CN":"\u9ED8\u8BA4"}}],defaultValue:"default"},{name:"label_format",label:{"en-US":"Label Format","zh-CN":"\u6807\u7B7E\u6392\u5217\u6A21\u5F0F"},type:U.x$.RADIO,options:[{name:"default",label:{"en-US":"Default","zh-CN":"\u9ED8\u8BA4"}}],defaultValue:"default"},{name:"label_mode",label:{"en-US":"Label Display Mode","zh-CN":"\u6807\u7B7E\u663E\u793A\u6A21\u5F0F"},type:U.x$.RADIO,options:[{name:"hide",label:{"en-US":"Hide","zh-CN":"\u9690\u85CF"}},{name:"hover",label:{"en-US":"Hover","zh-CN":"\u60AC\u6D6E\u663E\u793A"}},{name:"always",label:{"en-US":"Always","zh-CN":"\u4E00\u76F4\u663E\u793A"}}],defaultValue:"hide"},{name:"point_label_mode",label:{"en-US":"Point Label Display Mode","zh-CN":"\u6807\u7B7E\u663E\u793A\u6A21\u5F0F\uFF08\u70B9\uFF09"},type:U.x$.RADIO,options:[{name:"hide",label:{"en-US":"Hide","zh-CN":"\u9690\u85CF"}},{name:"hover",label:{"en-US":"Hover","zh-CN":"\u60AC\u6D6E\u663E\u793A"}},{name:"always",label:{"en-US":"Always","zh-CN":"\u4E00\u76F4\u663E\u793A"}}],defaultValue:"always"}],It=W()(W()(W()(W()(W()({},U.WY.LIDAR,Wi),U.WY.LIDAR_SSE,Ji),U.WY.TRANSCRIPTION,Qi),U.WY.LANDMARK,$i),U.WY.GENERAL_IMAGE,Ki),Xi=[U.WY.LIDAR,U.WY.LIDAR_SSE],qi=W()(W()(W()(W()(W()(W()({},U.WY.LIDAR,"lidar"),U.WY.LIDAR_SSE,"lidar-segmentation"),U.WY.TEXT,"text-annotation"),U.WY.TRANSCRIPTION,"audio-annotation"),U.WY.LANDMARK,"landmark-annotation"),U.WY.GENERAL_IMAGE,"general-image"),rn=function(a){var n=(0,X.getLocale)();return a[n]||a["en-US"]},er=function(a){var n=a.templateType,r=a.templateInfo,i=a.attributes,o=a.onAttributesChange,u=a.getOntology,l=(0,X.useIntl)(),m=l.formatMessage,c=(0,d.useState)({}),g=P()(c,2),h=g[0],p=g[1],M=(0,d.useState)(!1),C=P()(M,2),v=C[0],j=C[1],f=(0,d.useState)(""),x=P()(f,2),y=x[0],w=x[1],b=function(L){var T=(It[n]||[]).find(function(E){return E.name===L});if(T&&T.defaultValue!==void 0)return T.defaultValue},S=(0,d.useMemo)(function(){var Y;try{Y=JSON.parse(i||"{}")}catch(T){Y={}}if(Object.keys(Y).length===0){var L={};(It[n]||[]).forEach(function(T){var E=T.name,F=b(E);F&&(L[E]=F)}),o(JSON.stringify(L))}return Y},[i]);(0,d.useEffect)(function(){var Y=r.content;if(Y)try{var L=document.createElement("div");L.innerHTML=Y;for(var T=L.getElementsByTagName(qi[n])[0],E={},F=0;F<T.attributes.length;F+=1)E[T.attributes[F].nodeName]=T.attributes[F].nodeValue;p(E)}catch(Q){}},[]);var R=function(L){if(S[L]!==void 0)return S[L];if(h[L]!==void 0)return h[L];var T=(It[n]||[]).find(function(E){return E.name===L});if(T&&T.defaultValue!==void 0)return T.defaultValue},D=function(L,T){o(JSON.stringify(s()(s()({},S),{},W()({},L,T))))},O=function(L){var T=s()({},S);T[L]&&delete T[L],o(JSON.stringify(T)),ue.ZP.success(m({id:"labeling-job-create.wizard.configuration.attributes.form.delete.success"}))},I=function(L){j(!0),w(L)},A=function(){j(!1),w("")},N=function(L){L&&(D(y,L),A())},z=function(){var L={};(It[n]||[]).forEach(function(E){var F=E.name,Q=R(F);Q&&(L[F]=Q)});var T=document.createElement("a");T.href="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(L))),T.download="attributes.json",T.click()},Z=function(){var L=document.createElement("input");L.type="file",L.accept=".json, .txt",L.onchange=function(T){var E=T.target.files,F=E===void 0?[]:E;if(F.length>0){var Q=new FileReader;Q.onload=function(H){var V;try{V=JSON.parse(H.target.result)}catch($){console.log($.message);return}if(V){var K=s()({},S);Object.keys(V).forEach(function($){It[n]&&It[n].findIndex(function(re){return re.name===$})>=0&&(K[$]=V[$])}),o(JSON.stringify(K)),ue.ZP.success(m({id:"labeling-job-create.wizard.configuration.ontology.import.success"}))}},Q.readAsText(F[0])}else ue.ZP.error(m({id:"labeling-job-create.wizard.configuration.ontology.import.no-file"}))},L.click()},k=function(L){var T=L.type,E=L.name,F=L.options,Q=F===void 0?[]:F,H=L.regex,V=L.validator,K=L.placeholder;switch(T){case U.x$.FORM:return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.ZP,{onClick:function(){return I(E)},children:m({id:"labeling-job-create.wizard.configuration.attributes.form.config"})}),(0,e.jsx)(qt.Z,{title:m({id:"labeling-job-create.wizard.configuration.attributes.form.confirm"}),onConfirm:function(){return O(E)},children:(0,e.jsx)(J.ZP,{type:"link",children:m({id:"labeling-job-create.wizard.configuration.attributes.form.delete"})})})]});case U.x$.CHECKBOX:return(0,e.jsx)(ki.Z.Group,{options:Q.map(function($){return{label:rn($.label),value:$.name}}),value:(R(E)||"").split(","),onChange:function(re){return D(E,re.join(","))}});case U.x$.RADIO:return(0,e.jsx)(tt.ZP.Group,{options:Q.map(function($){return{label:rn($.label),value:$.name}}),value:R(E),onChange:function(re){return D(E,re.target.value)}});case U.x$.INPUT:return(0,e.jsx)(ne.Z,{value:R(E),onChange:function(re){var ce=re.target.value;ce&&(H&&!H.test(ce)||V&&!V(ce))||D(E,ce)},placeholder:K&&rn(K)});case U.x$.SWITCH:return(0,e.jsx)(Ye.Z,{checked:R(E)===!0||R(E)==="true",onChange:function(re){return D(E,re.toString())}});case U.x$.LIDAR_SIZES:return(0,e.jsx)(Gi,{value:R(E),onChange:function(re){return D(E,re)}});default:}return null},G=function(L){var T=L.name,E=L.tips;return(0,e.jsxs)(Ge.Z,{align:"middle",style:{minHeight:32,padding:"8px 0",borderBottom:"1px solid #e8e8e8"},children:[(0,e.jsx)(ae.Z,{span:5,children:(0,e.jsx)("b",{children:T})}),(0,e.jsx)(ae.Z,{span:5,children:rn(L.label)||L.name}),(0,e.jsxs)(ae.Z,{span:14,children:[(0,e.jsx)("div",{children:k(L)}),E&&(0,e.jsx)("div",{style:{marginTop:4,fontSize:12,color:"#909090"},children:"* ".concat(rn(E))})]})]},T)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(J.ZP,{type:"link",style:{paddingRight:0},onClick:z,children:m({id:"labeling-job-create.wizard.configuration.ontology.export"})}),(0,e.jsx)(J.ZP,{type:"link",style:{paddingRight:0},onClick:Z,children:m({id:"labeling-job-create.wizard.configuration.ontology.import"})})]}),(It[n]||[]).map(function(Y){return G(Y)}),(0,e.jsx)(Re.Z,{destroyOnClose:!0,width:960,bodyStyle:{padding:"45px 8px 8px"},visible:v,footer:null,onCancel:A,children:(0,e.jsx)(Dn,{config:R(y),ontologySyncDisabled:!Xi.includes(n),getOntology:u,onSave:N})})]})},tr=er,na=_(70361),aa=_(66255),nr=_(79143),Rt=_(41388),ia=_(30771),ra=_(9485),on={"ontology-item":"ontology-item___xCdSO",color:"color___f0_Yo",name:"name___npcCa",size:"size___Wnh_q","rich-text-container":"rich-text-container___ZlTmC","action-btn":"action-btn___fvh61"},mn=nr.Z.Text,ar=function(t){var a,n,r,i,o,u,l,m,c,g,h,p,M,C,v,j,f,x=t.index,y=t.ontology,w=t.activateItem,b=t.colorEnabled,S=t.sizeEnabled,R=t.descriptionType,D=t.dragType,O=t.moveOntology,I=t.handleMouseHover,A=t.handleMouseLeave,N=t.handleEditClick,z=t.handleDelete,Z=(0,X.useIntl)(),k=Z.formatMessage,G=(0,d.useRef)(null),Y=(0,ia.L)({accept:D,hover:function(re,ce){var fe;if(G.current){var je=re.index,he=x;if(je!==he){var xe=(fe=G.current)===null||fe===void 0?void 0:fe.getBoundingClientRect(),Ue=(xe.bottom-xe.top)/2,gt=ce.getClientOffset(),at=gt.y-xe.top;je<he&&at<Ue||je>he&&at>Ue||(O(je,he),re.index=he)}}}}),L=P()(Y,2),T=L[1],E=(0,ra.c)({type:D,collect:function(re){return{isDragging:re.isDragging()}},item:function(){return{index:x}}}),F=P()(E,2),Q=F[0].isDragging,H=F[1],V=Q?0:1;H(T(G));var K=k({id:"labeling-job-create.wizard.configuration.ontology.editor.size.null"});return(0,e.jsxs)("div",{ref:G,className:on["ontology-item"],style:{opacity:V},onMouseOver:function(re){re.preventDefault(),I(y.key)},onMouseLeave:function(re){re.preventDefault(),A()},onFocus:function(re){return re.preventDefault()},children:[(0,e.jsxs)("div",{style:{width:"30%"},children:[b&&(0,e.jsx)("span",{className:on.color,style:{background:y.display_color}}),(0,e.jsx)("span",{className:on.name,children:y.class_name}),S&&(0,e.jsxs)("div",{className:on.size,children:[(0,e.jsx)(mn,{type:"secondary",children:k({id:"labeling-job-create.wizard.configuration.ontology.editor.size.label"},{length:((a=y.default_size)===null||a===void 0?void 0:a.length)>=0?"".concat(y.default_size.length,"m"):K,width:((n=y.default_size)===null||n===void 0?void 0:n.width)>=0?"".concat(y.default_size.width,"m"):K,height:((r=y.default_size)===null||r===void 0?void 0:r.height)>=0?"".concat(y.default_size.height,"m"):K})}),(0,e.jsx)("br",{}),((i=y.default_size)===null||i===void 0?void 0:i.threshold)>=0&&(0,e.jsx)(mn,{type:"secondary",children:k({id:"labeling-job-create.wizard.configuration.ontology.editor.threshold.label"},{threshold:((o=y.default_size)===null||o===void 0?void 0:o.threshold)*100})}),(((u=y.default_size)===null||u===void 0?void 0:u.minWidth)>=0||((l=y.default_size)===null||l===void 0?void 0:l.maxWidth)>=0||((m=y.default_size)===null||m===void 0?void 0:m.minHeight)>=0||((c=y.default_size)===null||c===void 0?void 0:c.maxHeight)>=0||((g=y.default_size)===null||g===void 0?void 0:g.minLength)>=0||((h=y.default_size)===null||h===void 0?void 0:h.maxLength)>=0)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(mn,{type:"secondary",children:k({id:"labeling-job-create.wizard.configuration.ontology.editor.max-size.label"},{length:((p=y.default_size)===null||p===void 0?void 0:p.maxLength)>=0?"".concat(y.default_size.maxLength,"m"):K,width:((M=y.default_size)===null||M===void 0?void 0:M.maxWidth)>=0?"".concat(y.default_size.maxWidth,"m"):K,height:((C=y.default_size)===null||C===void 0?void 0:C.maxHeight)>=0?"".concat(y.default_size.maxHeight,"m"):K})}),(0,e.jsx)("br",{}),(0,e.jsx)(mn,{type:"secondary",children:k({id:"labeling-job-create.wizard.configuration.ontology.editor.min-size.label"},{length:((v=y.default_size)===null||v===void 0?void 0:v.minLength)>=0?"".concat(y.default_size.minLength,"m"):K,width:((j=y.default_size)===null||j===void 0?void 0:j.minWidth)>=0?"".concat(y.default_size.minWidth,"m"):K,height:((f=y.default_size)===null||f===void 0?void 0:f.minHeight)>=0?"".concat(y.default_size.minHeight,"m"):K})})]})]})]}),(0,e.jsx)("div",{style:{width:"62%"},children:R==="text"?y.description:(0,e.jsx)("div",{className:on["rich-text-container"],dangerouslySetInnerHTML:{__html:y.description}})}),(0,e.jsx)("div",{style:{width:"8%",textAlign:"right"},children:w===y.key&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(kt.Z,{onClick:function(re){re.preventDefault(),N(y)}}),(0,e.jsx)(Rt.Z,{type:"vertical"}),(0,e.jsx)(lt.Z,{onClick:function(re){re.preventDefault(),z(y.key)}})]})})]})},st=_(54833),hn=_(50253),ir=_(42475),_n=_.n(ir),We=_(89232),rr={modal:"modal___AIEuG"};function oa(t){return t&&!t.startsWith(" ")&&!t.endsWith(" ")&&t.trim().length>0&&!/[\\'\\"\\\\/\\]/g.test(t)}var dt=function(t){return t.THRESHOLD="threshold",t.BOUNDARY="boundary",t}(dt||{}),or={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},lr=function(a){var n=a.default_size;return{length:(n==null?void 0:n.length)||4,width:(n==null?void 0:n.width)||2,height:(n==null?void 0:n.height)||2,threshold:(n==null?void 0:n.threshold)||-1,minWidth:(n==null?void 0:n.minWidth)||-1,maxWidth:(n==null?void 0:n.maxWidth)||-1,minHeight:(n==null?void 0:n.minHeight)||-1,maxHeight:(n==null?void 0:n.maxHeight)||-1,minLength:(n==null?void 0:n.minLength)||-1,maxLength:(n==null?void 0:n.maxLength)||-1}},la=["polygon","rectangle","line","dot"];function sr(t){var a=t.ontology,n=t.visible,r=t.onOk,i=t.onCancel,o=t.colorEnabled,u=o===void 0?!0:o,l=t.descriptionEnabled,m=l===void 0?!0:l,c=t.descriptionType,g=c===void 0?"text":c,h=t.sizeEnabled,p=h===void 0?!1:h,M=t.limitsEnabled,C=M===void 0?!1:M,v=t.validate,j=(0,X.useIntl)(),f=j.formatMessage,x=(0,d.useState)(!1),y=P()(x,2),w=y[0],b=y[1],S=(0,d.useState)(""),R=P()(S,2),D=R[0],O=R[1],I=(0,d.useState)(""),A=P()(I,2),N=A[0],z=A[1],Z=(0,d.useState)(""),k=P()(Z,2),G=k[0],Y=k[1],L=(0,d.useState)(""),T=P()(L,2),E=T[0],F=T[1],Q=(0,d.useState)({width:2,height:2,length:4}),H=P()(Q,2),V=H[0],K=H[1],$=(0,d.useState)(!1),re=P()($,2),ce=re[0],fe=re[1],je=(0,d.useState)(dt.BOUNDARY),he=P()(je,2),xe=he[0],Ue=he[1],gt=(0,d.useState)([]),at=P()(gt,2),Ee=at[0],mt=at[1],Ht=(0,d.useState)(!1),ke=P()(Ht,2),Qe=ke[0],Et=ke[1],cn=(0,d.useState)(""),Gt=P()(cn,2),St=Gt[0],it=Gt[1];(0,d.useEffect)(function(){if(a){if(O(a.class_name),z(a.display_name),u&&Y(a.display_color||_n()()),m&&F(a.description||""),p){var me,q,Ce,ie,rt,Ke,we;K(a.default_size||{width:2,height:2,length:4}),((me=a.default_size)===null||me===void 0?void 0:me.threshold)>=0?(fe(!0),Ue(dt.THRESHOLD)):((q=a.default_size)===null||q===void 0?void 0:q.minWidth)>=0||((Ce=a.default_size)===null||Ce===void 0?void 0:Ce.maxWidth)>=0||((ie=a.default_size)===null||ie===void 0?void 0:ie.minHeight)>=0||((rt=a.default_size)===null||rt===void 0?void 0:rt.maxHeight)>=0||((Ke=a.default_size)===null||Ke===void 0?void 0:Ke.minLength)>=0||((we=a.default_size)===null||we===void 0?void 0:we.maxLength)>=0?(fe(!0),Ue(dt.BOUNDARY)):(fe(!1),Ue(dt.BOUNDARY))}C&&(mt(a.limits||[]),Et(a.limits&&a.limits.length>0))}},[a,u,m,p,C]),(0,d.useEffect)(function(){var me=lr(a||{}),q={width:V.width,height:V.height,length:V.length,threshold:-1,minWidth:-1,maxWidth:-1,minHeight:-1,maxHeight:-1,minLength:-1,maxLength:-1};ce&&xe===dt.THRESHOLD?q.threshold=me.threshold>0?me.threshold:1:ce&&xe===dt.BOUNDARY&&["minWidth","maxWidth","minHeight","maxHeight","minLength","maxLength"].forEach(function(Ce){me[Ce]>0&&(q[Ce]=me[Ce])}),K(q)},[ce,xe]);var Te=function(){if(!oa(D)){it(f({id:"labeling-job-create.wizard.configuration.ontology.title.class-error"}));return}var q=s()(s()(s()(s()({key:a==null?void 0:a.key,class_name:D,display_name:N},u&&{display_color:G}),m&&{description:E}),p&&{default_size:V}),C&&Qe&&Ee.length>0&&{limits:Ee});if(!v(q)){it(f({id:"labeling-job-create.wizard.configuration.ontology.title.class-duplicate"}));return}r(q)},ye=function(){b(!1),it(""),i()},Fe=function(q){q.preventDefault(),b(!w)},ht=function(q){Y(q.hex)},se=function(q){q.preventDefault(),O(q.target.value),it("")},te=function(q){q.preventDefault(),z(q.target.value)},le=function(q){q.preventDefault(),F(q.target.value)},oe=function(q,Ce){var ie=s()(s()({},V),{},W()({},q,Ce));ce&&xe===dt.BOUNDARY&&(ie.minWidth>ie.width&&(ie.minWidth=ie.width),ie.maxWidth<ie.width&&(ie.maxWidth=ie.width),ie.minHeight>ie.height&&(ie.minHeight=ie.height),ie.maxHeight<ie.height&&(ie.maxHeight=ie.height),ie.minLength>ie.length&&(ie.minLength=ie.length),ie.maxLength<ie.length&&(ie.maxLength=ie.length)),K(ie)},pe=function(){var q=la.filter(function(rt){return Ee.findIndex(function(Ke){return Ke.shapeType===rt})<0});if(q.length>0){var Ce=q[0],ie={shapeType:Ce,operator:"ge",count:0};mt([].concat(ee()(Ee),[ie]))}},Ie=function(q,Ce){var ie=ee()(Ee);ie[q]=s()({},Ce),mt(ie)},Se=function(q){var Ce=ee()(Ee);Ce.splice(q,1),mt(Ce)},De=function(q){var Ce=q==="threshold"?0:.01,ie,rt=q==="threshold"?0:2,Ke=q==="threshold"?"%":"m",we=q==="threshold"?100:1;return q.startsWith("min")&&(ie=V[q.slice(3).toLowerCase()]),q.startsWith("max")&&(Ce=V[q.slice(3).toLowerCase()]),(0,e.jsx)(st.Z,{min:Ce,max:ie,precision:rt,formatter:function(Wt){return"".concat(Wt).concat(Ke)},parser:function(Wt){return Wt.replace(Ke,"").trim()},value:V[q]*we,onChange:function(Wt){if(Wt){var yi=parseFloat(Wt.toString());Number.isNaN(yi)||oe(q,yi/we)}}})},pt=function(q){var Ce=Ee[q],ie=Ce.shapeType,rt=Ce.operator,Ke=Ce.count;return(0,e.jsxs)(Ge.Z,{gutter:8,children:[(0,e.jsx)(ae.Z,{span:8,children:(0,e.jsx)(Me.Z,{value:ie,onChange:function($e){return Ie(q,s()(s()({},Ee[q]),{},{shapeType:$e}))},children:la.map(function(we){return(0,e.jsx)(Me.Z.Option,{value:we,disabled:ie!==we&&Ee.findIndex(function($e){return $e.shapeType===we})>=0,children:we},we)})})}),(0,e.jsx)(ae.Z,{span:6,children:(0,e.jsxs)(Me.Z,{value:rt,onChange:function($e){return Ie(q,s()(s()({},Ee[q]),{},{operator:$e}))},children:[(0,e.jsx)(Me.Z.Option,{value:"eq",children:"\uFF1D"}),(0,e.jsx)(Me.Z.Option,{value:"ne",children:"\u2260"}),(0,e.jsx)(Me.Z.Option,{value:"gt",children:"\uFF1E"}),(0,e.jsx)(Me.Z.Option,{value:"ge",children:"\u2265"}),(0,e.jsx)(Me.Z.Option,{value:"lt",children:"\uFF1C"}),(0,e.jsx)(Me.Z.Option,{value:"le",children:"\u2264"})]})}),(0,e.jsx)(ae.Z,{span:6,children:(0,e.jsx)(st.Z,{style:{width:"100%"},value:Ke,min:0,precision:0,onChange:function($e){return Ie(q,s()(s()({},Ee[q]),{},{count:$e}))}})}),(0,e.jsx)(ae.Z,{span:4,children:(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(lt.Z,{}),onClick:function(){return Se(q)}})})]},ie)};return(0,e.jsx)(Re.Z,{title:f({id:"labeling-job-create.wizard.configuration.ontology.title"}),visible:n,onOk:Te,onCancel:ye,maskClosable:!1,width:720,wrapClassName:rr.modal,destroyOnClose:!0,okText:f({id:"common.confirm"}),children:(0,e.jsxs)(B.Z,s()(s()({},or),{},{children:[(0,e.jsx)(B.Z.Item,s()(s()({label:f({id:"labeling-job-create.wizard.configuration.ontology.title.class"})},St&&{validateStatus:"error",help:St}),{},{children:(0,e.jsx)(ne.Z,{value:D,onChange:se})})),(0,e.jsx)(B.Z.Item,{label:f({id:"labeling-job-create.wizard.configuration.ontology.title.label"}),children:(0,e.jsx)(ne.Z,{value:N,onChange:te})}),u&&(0,e.jsx)(B.Z.Item,{label:f({id:"labeling-job-create.wizard.configuration.ontology.editor.color"}),children:(0,e.jsx)(Mt.Z,{trigger:["click"],overlay:function(){return(0,e.jsx)(hn.Ie,{styles:{default:{compact:{width:280}}},color:G,onChangeComplete:ht})},visible:w,children:(0,e.jsx)(J.ZP,{onClick:Fe,children:(0,e.jsx)("span",{style:{display:"inline-block",width:12,height:12,backgroundColor:G,margin:2}})})})}),m&&(0,e.jsx)(B.Z.Item,{label:f({id:"labeling-job-create.wizard.configuration.ontology.editor.description"}),children:g==="text"?(0,e.jsx)(ne.Z.TextArea,{value:E,onChange:le}):(0,e.jsx)(Le.Z,{value:E,onChange:F,imageApi:"/job/resource/upload",formData:{jobId:"ontology-".concat((0,We.x0)())}})}),p&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(B.Z.Item,{label:f({id:"labeling-job-create.wizard.configuration.ontology.editor.default-size"}),children:["length","width","height"].map(function(me){return(0,e.jsxs)("div",{style:{display:"inline-block"},children:[De(me),(0,e.jsx)("span",{style:{marginLeft:8,marginRight:24},children:me[0].toUpperCase()})]},me)})})}),C&&(0,e.jsxs)(B.Z.Item,{label:f({id:"labeling-job-create.wizard.configuration.ontology.editor.limits"}),children:[(0,e.jsx)(Ye.Z,{checkedChildren:f({id:"labeling-job-create.wizard.configuration.ontology.editor.validate.on"}),unCheckedChildren:f({id:"labeling-job-create.wizard.configuration.ontology.editor.validate.off"}),checked:Qe,onChange:Et}),Qe&&(0,e.jsxs)("div",{children:[Ee.map(function(me,q){return pt(q)}),Ee.length<4&&(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(an.Z,{}),onClick:pe})]})]})]}))})}var sa=sr;function dr(t,a){var n=t.type,r=t.ontologies,i=r===void 0?[]:r,o=t.options,u=(0,X.useIntl)(),l=u.formatMessage,m=(0,d.useState)(i||[]),c=P()(m,2),g=c[0],h=c[1],p=(0,d.useState)(""),M=P()(p,2),C=M[0],v=M[1],j=(0,d.useState)(null),f=P()(j,2),x=f[0],y=f[1],w=(o==null?void 0:o.colorEnabled)===void 0||(o==null?void 0:o.colorEnabled),b=(o==null?void 0:o.descriptionEnabled)===void 0||(o==null?void 0:o.descriptionEnabled),S=(o==null?void 0:o.descriptionType)==="richtext"?"richtext":"text",R=(o==null?void 0:o.sizeEnabled)===!0,D=(o==null?void 0:o.limitsEnabled)===!0;(0,d.useEffect)(function(){var L=[];Array.isArray(i)&&i.length>0&&(L=i.map(function(T,E){return T.key?T:s()(s()({},T),{},{key:"".concat(+new Date,"-").concat(E)})}),h(L))},[i]),(0,d.useImperativeHandle)(a,function(){return{getData:function(){return g}}});var O=(0,d.useCallback)(function(L,T){var E=g[L],F=[].concat(ee()(g.slice(0,L)),ee()(g.slice(L+1))),Q=[].concat(ee()(F.slice(0,T)),[E],ee()(F.slice(T)));h(Q)},[g]),I=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";v(T)},A=function(){v("")},N=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",E=g.filter(function(F){return F.key!==T});h(E)},z=function(T){y(T)},Z=function(T){T.preventDefault(),y({class_name:"",display_color:"",description:""})},k=function(T){var E;T.key?E=g.map(function(F){return F.key===T.key?T:F}):E=[].concat(ee()(g),[s()(s()({},T),{},{key:"".concat(+new Date)})]),h(E),y(null)},G=function(){y(null)},Y=function(T){return g.every(function(E){return E.key===T.key||E.class_name!==T.class_name})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(na.W,{backend:aa.PD,context:window,children:g.map(function(L,T){return(0,e.jsx)(ar,{index:T,ontology:L,activateItem:C,colorEnabled:w,sizeEnabled:R,descriptionType:S,handleMouseHover:I,handleMouseLeave:A,handleEditClick:z,handleDelete:N,moveOntology:O,dragType:"ONTOLOGY-".concat(n)},L.key)})}),(0,e.jsx)(J.ZP,{block:!0,type:"dashed",onClick:Z,children:l({id:"labeling-job-create.wizard.configuration.ontology.editor.add"})}),(0,e.jsx)(sa,{ontology:x,visible:!!x,onOk:k,onCancel:G,colorEnabled:w,descriptionEnabled:b,descriptionType:S,sizeEnabled:R,limitsEnabled:D,validate:Y})]})}var wn=(0,d.forwardRef)(dr),da=_(32699),Zt={"ontology-text-item":"ontology-text-item___aCHKP",color:"color___osGcy",name:"name___XC3g9",desc:"desc___JpxuN","right-wrapper":"right-wrapper___yBUQC"},ur=function(a){var n=a.width,r=n===void 0?88:n,i=a.value,o=a.onChange,u=function(m){o&&o(m.hex)};return(0,e.jsx)(Mt.Z,{trigger:["click"],overlay:function(){return(0,e.jsx)(hn.Ie,{styles:{default:{compact:{width:280}}},color:i,onChangeComplete:u})},children:(0,e.jsx)("div",{style:{background:"#FFFFFF",border:"1px solid #DCDFE3",borderRadius:2,width:r,height:32,padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:(0,e.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:i}})})})},ua=ur;function cr(t){return t&&!t.startsWith(" ")&&!t.endsWith(" ")&&t.trim().length>0&&!/[\\'\\"\\\\:;./\\]/g.test(t)}var gr=function(t){var a=t.maxDepth,n=t.depth,r=t.isEditting,i=t.ontology,o=t.colorEnabled,u=t.handleAddItem,l=t.handleDelete,m=t.updateEdittingKey,c=t.validate,g=t.handleEditClick,h=(0,d.useState)(""),p=P()(h,2),M=p[0],C=p[1],v=(0,d.useState)(null),j=P()(v,2),f=j[0],x=j[1],y=(0,d.useState)(""),w=P()(y,2),b=w[0],S=w[1],R=(0,d.useRef)(null),D=(0,X.useIntl)(),O=(0,d.useRef)(null),I=D.formatMessage;(0,d.useEffect)(function(){C(""),x(r?i:null)},[r]);var A=function(){C(""),x(null),m("")},N=function(){if(!f||!cr(f.text)){C(I({id:"labeling-job-create.wizard.configuration.template.identification.class-error"}));return}var E=s()(s()({},f),o&&{color:f.color});if(!c(E)){C(I({id:"labeling-job-create.wizard.configuration.ontology.title.class-duplicate"}));return}g(E),A()};(0,d.useEffect)(function(){return O.current=N,function(){}},[f]);var z=(0,d.useCallback)(function(T){var E,F=(E=R.current)===null||E===void 0?void 0:E.contains(T.target);F||O.current()},[]);(0,d.useEffect)(function(){r?document.addEventListener("mousedown",z):document.removeEventListener("mousedown",z)},[r]);var Z=function(){i.isAddingItem&&l(i.id),A()},k=function(E){x(s()(s()({},f),{},{color:E}))},G=function(E){E.preventDefault(),C(""),x(s()(s()({},f),{},{text:E.target.value}))},Y=function(E){E.preventDefault(),x(s()(s()({},f),{},{displayName:E.target.value}))},L=function(E){E.preventDefault(),x(s()(s()({},f),{},{desc:E.target.value}))};return(0,e.jsxs)("div",{ref:R,className:Zt["ontology-text-item"],style:{margin:"4px 0 4px ".concat(n===0?0:12,"px")},onMouseOver:function(E){E.stopPropagation(),S(i.id)},onMouseLeave:function(E){E.stopPropagation(),S("")},children:[!r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[o&&(0,e.jsx)("span",{className:Zt.color,style:{background:i.color}}),(0,e.jsx)("span",{className:Zt.name,children:i.displayName?"".concat(i.displayName," (").concat(i.text,")"):i.text}),i.desc&&(0,e.jsx)("div",{className:Zt.desc,children:i.desc})]}),(0,e.jsx)("div",{className:Zt["right-wrapper"],children:b===i.id&&(0,e.jsxs)(e.Fragment,{children:[!a||a&&typeof a=="number"&&n<a-1&&(0,e.jsx)(an.Z,{onClick:function(E){E.stopPropagation(),r||u(i.id)},style:{cursor:r?"not-allowed":"pointer"}}),(0,e.jsx)(kt.Z,{onClick:function(E){if(E.stopPropagation(),!r)if(f){var F=c(f);F&&m(i.id)}else m(i.id)},style:{cursor:r?"not-allowed":"pointer"}}),(0,e.jsx)(lt.Z,{onClick:function(E){E.stopPropagation(),r||l(i.id)},style:{cursor:r?"not-allowed":"pointer"}})]})})]}),r&&f&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(B.Z,{layout:"inline",children:[o&&(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(ua,{width:32,value:f.color,onChange:function(E){k(E)}})}),(0,e.jsx)(B.Z.Item,s()(s()({},r&&M&&{validateStatus:"error",help:M}),{},{children:(0,e.jsx)(ne.Z,{style:{width:210},value:f.text,onChange:G,placeholder:I({id:"labeling-job-create.wizard.configuration.ontology.title.class"})})})),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(ne.Z,{style:{width:210},value:f.displayName,onChange:Y,placeholder:I({id:"labeling-job-create.wizard.configuration.ontology.title.label"})})}),(0,e.jsx)(B.Z.Item,{style:{width:"100%",marginTop:8},children:(0,e.jsx)(ne.Z,{style:{width:562},value:f.desc,onChange:L,placeholder:I({id:"labeling-job-create.wizard.configuration.ontology.title.desc"})})})]}),(0,e.jsxs)("div",{className:Zt["right-wrapper"],children:[(0,e.jsx)(J.ZP,{type:"text",onClick:function(E){E.preventDefault(),E.stopPropagation(),N()},style:{padding:"0 8px",color:"#227A7A"},children:I({id:"common.save"})}),(0,e.jsx)(J.ZP,{type:"text",onClick:function(E){E.preventDefault(),E.stopPropagation(),Z()},style:{padding:"0 8px",color:"#42526E"},children:I({id:"common.cancel"})})]})]})]})},mr=_(25298),pn=_.n(mr),hr=_(17069),fn=_.n(hr),pr=_(62657),be=_.n(pr),fr=_(21742),On=_.n(fr),vr=_(83136),Pn=_.n(vr),yr=_(82187),zt=_.n(yr),Mr=_(85899),ca=_.n(Mr),ga=function(a){return Object.prototype.toString.call(a).slice(8,-1)},md=function(a){return typeof a!="undefined"},hd=function(a){return typeof a=="undefined"},pd=function(a){return typeof a=="function"},fd=function(a){return typeof a=="number"&&!isNaN(a)},vd=function(a){return ga(a)==="String"},Ir=function(a){return ga(a)==="Array"},Cr=function(a,n){for(;a;){if(a.matches&&a.matches(n))return a;a=a.parentNode}return null},jr=function(a){var n=a.getBoundingClientRect(),r=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||r.scrollTop,u=window.pageXOffset||i.scrollLeft||r.scrollLeft,l=i.clientTop||r.clientTop||0,m=i.clientLeft||r.clientLeft||0,c=n.top+o-l,g=n.left+u-m;return{top:Math.round(c),left:Math.round(g)}},xr=function(a){for(var n=0,r=0;a=a.parentNode;)n+=a.scrollTop||0,r+=a.scrollLeft||0;return{top:n,left:r}},Ar=function(a,n){return{transform:"translate("+a+"px, "+n+"px)"}},ma=function t(a,n){return a.map(function(r){return s()(s()({},r),{},W()({},n,r[n]?t(r[n],n):[]))})},kn=function t(a,n){var r=n.idProp,i=n.childrenProp,o=[],u=a.filter(function(l){return l[i].length}).map(function(l){return o=o.concat(t(l[i],{idProp:r,childrenProp:i})),l[r]});return u.concat(o)},Er=_(84816),Sr=function t(a){var n=a.item,r=a.isCopy,i=a.options,o=a.index,u=a.depth,l=u===void 0?0:u,m=function(N){var z=N.isCollapsed;return(0,e.jsx)("span",{className:zt()("nestable-icon","nestable-item-icon"),children:z?(0,e.jsx)(an.Z,{}):(0,e.jsx)(Er.Z,{})})},c=i.dragItem,g=i.renderItem,h=i.handler,p=i.idProp,M=p===void 0?"id":p,C=i.childrenProp,v=C===void 0?"children":C,j=i.isCollapsed,f=j(n),x=!r&&c&&c[M]===n[M],y=n[v]&&n[v].length>0,w={},b={},S;r||(c?w=s()(s()({},w),{},{onMouseEnter:function(N){return i.onMouseEnter(N,n)}}):b=s()(s()({},b),{},{draggable:!0,onDragStart:function(N){return i.onDragStart(N,n)}})),h?S=(0,e.jsx)("span",s()(s()({className:"nestable-item-handler"},b),{},{children:h})):w=s()(s()({},w),b);var R=y?(0,e.jsx)("span",{onClick:function(){return i.onToggleCollapse(n)},children:m({isCollapsed:f})}):null,D="nestable-item"+(r?"-copy":""),O={className:zt()(D,D+"-"+n[M],W()(W()(W()({"is-dragging":x},D+"--with-children",y),D+"--children-open",y&&!f),D+"--children-collapsed",y&&f))},I=g({collapseIcon:R,depth:l,handler:S,index:o,item:n});return I?(0,e.jsxs)("li",s()(s()({},O),{},{children:[(0,e.jsx)("div",s()(s()({className:"nestable-item-name"},w),{},{children:I})),y&&!f&&(0,e.jsx)("ol",{className:"nestable-list",children:n[v].map(function(A,N){return(0,e.jsx)(t,{index:N,depth:l+1,item:A,options:i,isCopy:r},A[M])})})]})):null},ha=Sr,pa=function(t){On()(n,t);var a=Pn()(n);function n(){var r;pn()(this,n);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return r=a.call.apply(a,[this].concat(o)),W()(be()(r),"el",null),W()(be()(r),"elCopyStyles",null),W()(be()(r),"mouse",{last:{x:0},shift:{x:0}}),W()(be()(r),"state",{isDirty:!1,items:[],itemsOld:null,dragItem:null,collapsedGroups:[]}),W()(be()(r),"collapse",function(l){var m=r.props,c=m.idProp,g=m.childrenProp,h=m.collapsed,p=r.state.items;l==="NONE"?r.setState({collapsedGroups:h?kn(p,{idProp:c,childrenProp:g}):[]}):l==="ALL"?r.setState({collapsedGroups:h?[]:kn(p,{idProp:c,childrenProp:g})}):Ir(l)&&r.setState({collapsedGroups:kn(p,{idProp:c,childrenProp:g}).filter(function(M){return l.indexOf(M)>-1!==h})})}),W()(be()(r),"startTrackMouse",function(){document.addEventListener("mousemove",r.onMouseMove),document.addEventListener("mouseup",r.onDragEndHandler),document.addEventListener("keydown",r.onKeyDown)}),W()(be()(r),"stopTrackMouse",function(){document.removeEventListener("mousemove",r.onMouseMove),document.removeEventListener("mouseup",r.onDragEndHandler),document.removeEventListener("keydown",r.onKeyDown),r.elCopyStyles=null}),W()(be()(r),"getItemDepth",function(l){var m=r.props.childrenProp,c=1;if(l[m].length>0){var g=l[m].map(r.getItemDepth);c+=Math.max.apply(Math,ee()(g))}return c}),W()(be()(r),"isCollapsed",function(l){var m=r.props,c=m.collapsed,g=m.idProp,h=r.state.collapsedGroups;return h.indexOf(l[g])>-1!==c}),W()(be()(r),"onDragStart",function(l,m){l&&(l.preventDefault(),l.stopPropagation()),r.el=Cr(l.target,".nestable-item"),r.startTrackMouse(),r.onMouseMove(l),r.setState({dragItem:m,itemsOld:r.state.items})}),W()(be()(r),"onDragEndHandler",function(l){r.onDragEnd(l,null)}),W()(be()(r),"onDragEnd",function(l,m){l.preventDefault(),r.stopTrackMouse(),r.el=null,m?r.dragRevert():r.dragApply()}),W()(be()(r),"onMouseMove",function(l){var m=r.props,c=m.group,g=m.threshold,h=r.state.dragItem,p=l.clientX,M=l.clientY,C=Ar(p,M),v=document.querySelector(".nestable-"+c+" .nestable-drag-layer > .nestable-list");if(r.elCopyStyles){r.elCopyStyles=s()(s()({},r.elCopyStyles),C);for(var x in C)C.hasOwnProperty(x)&&(v.style[x]=C[x]);var y=p-r.mouse.last.x;y>=0&&r.mouse.shift.x>=0||y<=0&&r.mouse.shift.x<=0?r.mouse.shift.x+=y:r.mouse.shift.x=0,r.mouse.last.x=p,Math.abs(r.mouse.shift.x)>g&&(r.mouse.shift.x>0?r.tryIncreaseDepth(h):r.tryDecreaseDepth(h),r.mouse.shift.x=0)}else{var j=jr(r.el),f=xr(r.el);r.elCopyStyles=s()({marginTop:j.top-M-f.top,marginLeft:j.left-p-f.left},C)}}),W()(be()(r),"onMouseEnter",function(l,m){l&&(l.preventDefault(),l.stopPropagation());var c=r.props,g=c.collapsed,h=c.idProp,p=c.childrenProp,M=r.state.dragItem;if(M[h]!==m[h]){var C=r.getPathById(M[h]),v=r.getPathById(m[h]),j={};if(g&&C.length>1){var f=r.getItemByPath(C.slice(0,-1));f[p].length===1&&(j=r.onToggleCollapse(f,!0))}r.moveItem({dragItem:M,pathFrom:C,pathTo:v},j)}}),W()(be()(r),"onToggleCollapse",function(l,m){var c=r.props,g=c.collapsed,h=c.idProp,p=r.state.collapsedGroups,M=r.isCollapsed(l),C={collapsedGroups:M!==g?p.filter(function(v){return v!==l[h]}):p.concat(l[h])};if(m)return C;r.setState(C)}),W()(be()(r),"onKeyDown",function(l){l.which===27&&r.onDragEnd(null,!0)}),r}return fn()(n,[{key:"componentDidMount",value:function(){var i=this.props.items,o=this.props.childrenProp,u=o===void 0?"children":o;i=ma(i,u),this.setState({items:i})}},{key:"componentDidUpdate",value:function(i){var o=this.props,u=o.items,l=o.childrenProp,m=!(0,da.isEqual)(i,this.props);if(m){this.stopTrackMouse();var c={};i.collapsed!==this.props.collapsed&&(c.collapsedGroups=[]),this.setState(s()({items:ma(u,l),dragItem:null,isDirty:!1},c))}}},{key:"componentWillUnmount",value:function(){this.stopTrackMouse()}},{key:"moveItem",value:function(i){var o=i.dragItem,u=i.pathFrom,l=i.pathTo,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.props,g=c.childrenProp,h=c.confirmChange,p=this.getItemDepth(o),M=this.state.items,C=this.getRealNextPath(u,l,p);if(C.length!==0){var v=C.length>l.length?l:l.slice(0,-1),j=this.getItemByPath(v);if(h({dragItem:o,destinationParent:j})){var f=this.getSplicePath(u,{numToRemove:1,childrenProp:g}),x=this.getSplicePath(C,{numToRemove:0,itemsToInsert:[o],childrenProp:g});M=ca()(M,f),M=ca()(M,x),this.setState(s()({items:M,isDirty:!0},m))}}}},{key:"tryIncreaseDepth",value:function(i){var o=this.props,u=o.maxDepth,l=o.idProp,m=o.childrenProp,c=o.collapsed,g=this.getPathById(i[l]),h=g[g.length-1],p=g.length+this.getItemDepth(i);if(h>0&&p<=u){var M=this.getItemByPath(g.slice(0,-1).concat(h-1));if(!M[m].length||!this.isCollapsed(M)){var C=g.slice(0,-1).concat(h-1).concat(M[m].length),v={};c&&!M[m].length&&(v=this.onToggleCollapse(M,!0)),this.moveItem({dragItem:i,pathFrom:g,pathTo:C},v)}}}},{key:"tryDecreaseDepth",value:function(i){var o=this.props,u=o.idProp,l=o.childrenProp,m=o.collapsed,c=this.getPathById(i[u]),g=c[c.length-1];if(c.length>1){var h=this.getItemByPath(c.slice(0,-1));if(g+1===h[l].length){var p=c.slice(0,-1);p[p.length-1]+=1;var M={};m&&h[l].length===1&&(M=this.onToggleCollapse(h,!0)),this.moveItem({dragItem:i,pathFrom:c,pathTo:p},M)}}}},{key:"dragApply",value:function(){var i=this.props,o=i.onChange,u=i.idProp,l=this.state,m=l.items,c=l.isDirty,g=l.dragItem;if(this.setState({itemsOld:null,dragItem:null,isDirty:!1}),o&&c){var h=this.getPathById(g[u],m);o({items:m,dragItem:g,targetPath:h})}}},{key:"dragRevert",value:function(){var i=this.state.itemsOld;this.setState({items:i,itemsOld:null,dragItem:null,isDirty:!1})}},{key:"getPathById",value:function(i){var o=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state.items,l=this.props,m=l.idProp,c=l.childrenProp,g=[];return u.every(function(h,p){if(h[m]===i)g.push(p);else if(h[c]){var M=o.getPathById(i,h[c]);M.length&&(g=g.concat(p).concat(M))}return g.length===0}),g}},{key:"getItemByPath",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state.items,u=this.props.childrenProp,l=null;return i.forEach(function(m){var c=l?l[u]:o;l=c[m]}),l}},{key:"getSplicePath",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={},l=o.numToRemove||0,m=o.itemsToInsert||[],c=i.length-1,g=u;return i.forEach(function(h,p){if(p===c)g.$splice=[[h,l].concat(ee()(m))];else{var M={};g[h]=W()({},o.childrenProp,M),g=M}}),u}},{key:"getRealNextPath",value:function(i,o,u){var l=this.props,m=l.childrenProp,c=l.maxDepth,g=i.length-1,h=o.length-1,p=o.length+u-1;if(i.length<o.length){var M=!1;return p>c&&o.length?this.getRealNextPath(i,o.slice(0,-1),u):o.map(function(v,j){return M?j===h?v+1:v:typeof i[j]!="number"?v:o[j]>i[j]&&j===g?(M=!0,v-1):v})}else if(i.length===o.length&&o[h]>i[h]){var C=this.getItemByPath(o);if(p<c&&C[m]&&C[m].length&&!this.isCollapsed(C))return o.slice(0,-1).concat(o[h]-1).concat(0)}return o}},{key:"getItemOptions",value:function(){var i=this.props,o=i.renderItem,u=i.renderCollapseIcon,l=i.handler,m=i.idProp,c=i.childrenProp,g=this.state.dragItem;return{dragItem:g,idProp:m,childrenProp:c,renderItem:o,renderCollapseIcon:u,handler:l,onDragStart:this.onDragStart,onMouseEnter:this.onMouseEnter,isCollapsed:this.isCollapsed,onToggleCollapse:this.onToggleCollapse}}},{key:"renderDragLayer",value:function(){var i=this.props,o=i.group,u=i.idProp,l=this.state.dragItem,m=document.querySelector(".nestable-"+o+" .nestable-item-"+l[u]),c={};m&&(c.width=m.clientWidth),this.elCopyStyles&&(c=s()(s()({},c),this.elCopyStyles));var g=this.getItemOptions();return(0,e.jsx)("div",{className:"nestable-drag-layer",children:(0,e.jsx)("ol",{className:"nestable-list",style:c,children:(0,e.jsx)(ha,{item:l,options:g,isCopy:!0,index:0,depth:0})})})}},{key:"render",value:function(){var i=this.props,o=i.group,u=i.className,l=this.state,m=l.items,c=l.dragItem,g=this.getItemOptions();return(0,e.jsxs)("div",{className:zt()(u,"nestable","nestable-"+o,{"is-drag-active":c}),children:[(0,e.jsx)("ol",{className:"nestable-list nestable-group",children:m.map(function(h,p){return(0,e.jsx)(ha,{index:p,item:h,options:g},h[g.idProp||"id"])})}),c&&this.renderDragLayer()]})}}]),n}(d.PureComponent);W()(pa,"defaultProps",{childrenProp:"children",collapsed:!1,confirmChange:function(){return!0},group:Math.random().toString(36).slice(2),idProp:"id",items:[],maxDepth:10,onChange:function(){},renderItem:function(a){var n=a.item;return String(n)},threshold:30});var br=pa,Tr={"ontology-text-wrapper":"ontology-text-wrapper___kToe5"};function Dr(t,a){var n=t.ontologies,r=n===void 0?[]:n,i=t.options,o=(0,X.useIntl)(),u=o.formatMessage,l=(0,d.useState)(""),m=P()(l,2),c=m[0],g=m[1],h=(0,d.useState)(r||[]),p=P()(h,2),M=p[0],C=p[1],v=(i==null?void 0:i.colorEnabled)===void 0||(i==null?void 0:i.colorEnabled),j=(i==null?void 0:i.maxDepth)||null;(0,d.useEffect)(function(){var I=[];Array.isArray(r)&&r.length>0&&(I=r.map(function(A,N){return A.id?A:s()(s()({},A),{},{id:"".concat(+new Date,"-").concat(N)})}),C(I))},[r]),(0,d.useImperativeHandle)(a,function(){return{getData:function(){return ee()(M)}}});var f=function I(A,N,z,Z){for(var k=ee()(A),G=Z||z.id,Y=0;Y<k.length;Y++){var L=k[Y];if(L.id===G){switch(N){case"delete":k.splice(Y,1);break;case"replace":k[Y]=(0,da.cloneDeep)(z);break}break}if(L.children&&L.children.length>0){var T=I(L.children,N,z,Z),E=T.newOntologies;k[Y].children=ee()(E)}}return{newOntologies:ee()(k),newKey:G}},x=function I(A,N,z){var Z=ee()(N);if(z)for(var k=0;k<Z.length;k++){var G=Z[k];if(G.id===z){Z[k].children?Z[k].children.push(A):Z[k].children=[A];break}if(G.children&&G.children.length>0){var Y=I(A,G.children,z),L=Y.newOntologies;Z[k].children=ee()(L)}}else Z=[].concat(ee()(N),[A]);return{newOntologies:ee()(Z),newKey:A.id}},y=function(A){delete A.isAddingItem;var N=f(M,"replace",A),z=N.newOntologies;C(ee()(z)),g("")},w=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",N=f(M,"delete",null,A),z=N.newOntologies;C(ee()(z))},b=function(A){var N="".concat(+new Date),z={text:"",color:_n()()||"",displayName:"",id:N,isAddingItem:!0},Z=x(z,M,A),k=Z.newOntologies,G=Z.newKey;C(ee()(k)),g(G)},S=function(){c||b()},R=function(A){var N=!0,z=function Z(k){for(var G=0;G<k.length;G++){var Y=k[G];if(Y.text===A.text&&Y.id!==A.id){N=!1;break}Y.children&&Y.children.length&&Z(Y.children)}};return z(M),N},D=function(A){var N=A.items;C(ee()(N))},O=function(A){var N=A.item,z=A.depth;return(0,e.jsx)(gr,{maxDepth:j,depth:z,ontology:N,isEditting:c===N.id,colorEnabled:v,updateEdittingKey:function(k){return g(k)},handleEditClick:y,handleDelete:w,handleAddItem:function(k){return b(k)},validate:R},N.id)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Tr["ontology-text-wrapper"],children:(0,e.jsx)(br,{maxDepth:j,items:M,renderItem:O,onChange:D,handler:c?(0,e.jsx)("span",{}):null})}),(0,e.jsx)(J.ZP,{block:!0,type:"dashed",onClick:S,style:{cursor:c?"not-allowed":"pointer",marginTop:4,marginBottom:40},children:u({id:"labeling-job-create.wizard.configuration.ontology.editor.first-level.add"})})]})}var Rn=(0,d.forwardRef)(Dr),Zn={color:"#42526E",fontSize:16,marginBottom:16},Nr=(0,d.forwardRef)(function(t,a){var n=t.config,r=(0,X.useIntl)(),i=r.formatMessage,o=(0,d.useRef)(),u=(0,d.useRef)(),l=(0,d.useRef)(),m=(0,d.useState)([]),c=P()(m,2),g=c[0],h=c[1],p=(0,d.useState)([]),M=P()(p,2),C=M[0],v=M[1],j=(0,d.useState)([]),f=P()(j,2),x=f[0],y=f[1],w=function(S){return S.map(function(R){return s()({id:R.id||R.key},R)})};return(0,d.useEffect)(function(){if(n){var b=n||{},S=b.labelCategories,R=S===void 0?[]:S,D=b.connectionCategories,O=D===void 0?[]:D,I=b.insertionCategories,A=I===void 0?[]:I;h(w(R)),v(w(O)),y(w(A))}},[n]),(0,d.useImperativeHandle)(a,function(){return{getData:function(){var S=o.current.getData(),R=u.current.getData(),D=l.current.getData();return{labelCategories:S,connectionCategories:R,insertionCategories:D}}}}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:Zn,children:i({id:"labeling-job-create.wizard.configuration.ontology.text-annotation.labels"})}),(0,e.jsx)(Rn,{ref:o,type:"".concat(U.WY.TEXT,"-labels"),ontologies:g,options:{descriptionEnabled:!1,maxDepth:5}}),(0,e.jsx)("div",{style:Zn,children:i({id:"labeling-job-create.wizard.configuration.ontology.text-annotation.connections"})}),(0,e.jsx)(Rn,{ref:u,type:"".concat(U.WY.TEXT,"-connections"),ontologies:C,options:{descriptionEnabled:!1,maxDepth:5}}),(0,e.jsx)("div",{style:Zn,children:i({id:"labeling-job-create.wizard.configuration.ontology.text-annotation.insertions"})}),(0,e.jsx)(Rn,{ref:l,type:"".concat(U.WY.TEXT,"-insertions"),ontologies:x,options:{descriptionEnabled:!1,maxDepth:5}})]})}),Lr={"landmark-modal":"landmark-modal___GTlUR"},_r=_(66830),fa=_(35866),ut={"image-uploader":"image-uploader___FCfbR",preview:"preview___IZm_h",modal:"modal___6BzDs",clear:"clear___pZ_UR",upload:"upload___l2aP4",reupload:"reupload___NSKku","plus-icon":"plus-icon___C87n0","upload-placeholder":"upload-placeholder___J3BfX"};function va(t){var a=t.onClear,n=t.onFinish,r=t.onError,i=t.accept,o=t.uploadUrl,u=t.method,l=u===void 0?"put":u,m=t.data,c=m===void 0?null:m,g=t.initialImgUrl,h=g===void 0?"":g,p=(0,X.useIntl)(),M=p.formatMessage,C=(0,d.useState)(!1),v=P()(C,2),j=v[0],f=v[1],x=(0,d.useState)(h),y=P()(x,2),w=y[0],b=y[1],S={name:"file",accept:i||".csv",action:(0,Ae.cM)()+o,method:l,withCredentials:!0,showUploadList:!1,data:c,onChange:function(D){if(D.file.status==="done")if(f(!1),D.file.size/1024/1024<10){var O;ue.ZP.success(M({id:"job.form.upload.success"},{name:D.file.name})),b(D==null||(O=D.file)===null||O===void 0||(O=O.response)===null||O===void 0?void 0:O.data),n(D.file)}else ue.ZP.error("Image must smaller than 10MB!");else D.file.status==="error"?(f(!1),r==null||r(D.file)):j||f(!0)}};return(0,e.jsx)("div",{className:ut["image-uploader"],children:(0,e.jsx)(_r.Z,{spinning:j,children:w?(0,e.jsxs)("div",{className:ut.preview,children:[(0,e.jsx)("img",{src:w,alt:"Business License",width:"100%",height:"100%"}),(0,e.jsxs)("div",{className:ut.modal,children:[(0,e.jsx)(J.ZP,{className:ut.clear,type:"link",onClick:function(){b(""),a()},children:M({id:"bpo-apply.clear"})}),(0,e.jsx)(fa.Z,s()(s()({},S),{},{disabled:j,className:ut.upload,children:(0,e.jsx)("span",{className:ut.reupload,children:M({id:"bpo-apply.re-upload"})})}))]})]}):(0,e.jsx)(fa.Z.Dragger,s()(s()({},S),{},{disabled:j,style:{width:188,height:104},children:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:ut["plus-icon"],children:(0,e.jsx)(Qn.Z,{})}),(0,e.jsx)("p",{className:ut["upload-placeholder"],children:M({id:"bpo-apply.placeholder.uploader"})})]})}))})})}var wr=Object.defineProperty,ya=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable,Ma=(t,a,n)=>a in t?wr(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,kr=(t,a)=>{for(var n in a||(a={}))Or.call(a,n)&&Ma(t,n,a[n]);if(ya)for(var n of ya(a))Pr.call(a,n)&&Ma(t,n,a[n]);return t};const yd=t=>React.createElement("svg",kr({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("path",{d:"M18.75 3A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h13.5zm-6.846 10.155L5.559 19.5H19.5v-2.753l-2.221-2.227-2.736 2.331-2.639-3.696zM19.5 4.5h-15v13.938l7.596-7.594 2.718 3.805 2.55-2.169 2.136 2.142V4.5zM7.5 6a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z",fill:"#3E5270"}));var Rr="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE4Ljc1IDNBMi4yNSAyLjI1IDAgMCAxIDIxIDUuMjV2MTMuNUEyLjI1IDIuMjUgMCAwIDEgMTguNzUgMjFINS4yNUEyLjI1IDIuMjUgMCAwIDEgMyAxOC43NVY1LjI1QTIuMjUgMi4yNSAwIDAgMSA1LjI1IDNoMTMuNXptLTYuODQ2IDEwLjE1NUw1LjU1OSAxOS41SDE5LjV2LTIuNzUzbC0yLjIyMS0yLjIyNy0yLjczNiAyLjMzMS0yLjYzOS0zLjY5NnpNMTkuNSA0LjVoLTE1djEzLjkzOGw3LjU5Ni03LjU5NCAyLjcxOCAzLjgwNSAyLjU1LTIuMTY5IDIuMTM2IDIuMTQyVjQuNXpNNy41IDZhMS41IDEuNSAwIDEgMSAwIDMgMS41IDEuNSAwIDAgMSAwLTN6IiBmaWxsPSIjM0U1MjcwIi8+PC9zdmc+",Zr=Object.defineProperty,Ia=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Ur=Object.prototype.propertyIsEnumerable,Ca=(t,a,n)=>a in t?Zr(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Fr=(t,a)=>{for(var n in a||(a={}))zr.call(a,n)&&Ca(t,n,a[n]);if(Ia)for(var n of Ia(a))Ur.call(a,n)&&Ca(t,n,a[n]);return t};const Md=t=>React.createElement("svg",Fr({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("defs",null,React.createElement("filter",{colorInterpolationFilters:"auto",id:"picture_none_svg__a"},React.createElement("feColorMatrix",{in:"SourceGraphic",values:"0 0 0 0 0.788235 0 0 0 0 0.796078 0 0 0 0 0.800000 0 0 0 1.000000 0"}))),React.createElement("path",{d:"M18.75 3A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h13.5zm-6.846 10.155L5.559 19.5H19.5v-2.753l-2.221-2.227-2.736 2.331-2.639-3.696zM19.5 4.5h-15v13.938l7.596-7.594 2.718 3.805 2.55-2.169 2.136 2.142V4.5zM7.5 6a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z",fill:"#3E5270",filter:"url(#picture_none_svg__a)"}));var Br="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGZpbHRlciBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9ImF1dG8iIGlkPSJhIj48ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlR3JhcGhpYyIgdmFsdWVzPSIwIDAgMCAwIDAuNzg4MjM1IDAgMCAwIDAgMC43OTYwNzggMCAwIDAgMCAwLjgwMDAwMCAwIDAgMCAxLjAwMDAwMCAwIi8+PC9maWx0ZXI+PC9kZWZzPjxwYXRoIGQ9Ik0xOC43NSAzQTIuMjUgMi4yNSAwIDAgMSAyMSA1LjI1djEzLjVBMi4yNSAyLjI1IDAgMCAxIDE4Ljc1IDIxSDUuMjVBMi4yNSAyLjI1IDAgMCAxIDMgMTguNzVWNS4yNUEyLjI1IDIuMjUgMCAwIDEgNS4yNSAzaDEzLjV6bS02Ljg0NiAxMC4xNTVMNS41NTkgMTkuNUgxOS41di0yLjc1M2wtMi4yMjEtMi4yMjctMi43MzYgMi4zMzEtMi42MzktMy42OTZ6TTE5LjUgNC41aC0xNXYxMy45MzhsNy41OTYtNy41OTQgMi43MTggMy44MDUgMi41NS0yLjE2OSAyLjEzNiAyLjE0MlY0LjV6TTcuNSA2YTEuNSAxLjUgMCAxIDEgMCAzIDEuNSAxLjUgMCAwIDEgMC0zeiIgZmlsbD0iIzNFNTI3MCIgZmlsdGVyPSJ1cmwoI2EpIi8+PC9zdmc+",Vr=Object.defineProperty,ja=Object.getOwnPropertySymbols,Yr=Object.prototype.hasOwnProperty,Hr=Object.prototype.propertyIsEnumerable,xa=(t,a,n)=>a in t?Vr(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Gr=(t,a)=>{for(var n in a||(a={}))Yr.call(a,n)&&xa(t,n,a[n]);if(ja)for(var n of ja(a))Hr.call(a,n)&&xa(t,n,a[n]);return t};const Id=t=>React.createElement("svg",Gr({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("path",{d:"M18.75 3A2.25 2.25 0 0 1 21 5.25l.001 7.553a6 6 0 1 1-8.198 8.198L5.25 21A2.25 2.25 0 0 1 3 18.75V5.25A2.25 2.25 0 0 1 5.25 3h13.5zm2.47 12.22-3.97 3.97-2.47-2.47-1.06 1.06 3.53 3.53 5.03-5.03-1.06-1.06zm-9.316-2.065L5.559 19.5h6.63a6.01 6.01 0 0 1 .808-4.814l-1.093-1.531zM19.5 4.5h-15v13.938l7.596-7.594 1.912 2.677a6.01 6.01 0 0 1 5.493-1.331L19.5 4.5zM7.5 6a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z",fill:"#3E5270"}));var Wr="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE4Ljc1IDNBMi4yNSAyLjI1IDAgMCAxIDIxIDUuMjVsLjAwMSA3LjU1M2E2IDYgMCAxIDEtOC4xOTggOC4xOThMNS4yNSAyMUEyLjI1IDIuMjUgMCAwIDEgMyAxOC43NVY1LjI1QTIuMjUgMi4yNSAwIDAgMSA1LjI1IDNoMTMuNXptMi40NyAxMi4yMi0zLjk3IDMuOTctMi40Ny0yLjQ3LTEuMDYgMS4wNiAzLjUzIDMuNTMgNS4wMy01LjAzLTEuMDYtMS4wNnptLTkuMzE2LTIuMDY1TDUuNTU5IDE5LjVoNi42M2E2LjAxIDYuMDEgMCAwIDEgLjgwOC00LjgxNGwtMS4wOTMtMS41MzF6TTE5LjUgNC41aC0xNXYxMy45MzhsNy41OTYtNy41OTQgMS45MTIgMi42NzdhNi4wMSA2LjAxIDAgMCAxIDUuNDkzLTEuMzMxTDE5LjUgNC41ek03LjUgNmExLjUgMS41IDAgMSAxIDAgMyAxLjUgMS41IDAgMCAxIDAtM3oiIGZpbGw9IiMzRTUyNzAiLz48L3N2Zz4=",Jr=Me.Z.Option,Je=function(t){return t.KEYPOINT="keypoint",t.RECTANGLE="rectangle",t}({});function zn(t){return/^[1-9]\d*|0$/.test(t.trim())}var Qr={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:18},sm:{span:12}}},nt={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:24}}},Kr={padding:4,background:"#dedede",borderRadius:4,fontSize:12,marginRight:4};function $r(t){var a=t.editItem,n=t.editGroup,r=t.visible,i=t.onOk,o=t.onCancel,u=(0,X.useIntl)(),l=u.formatMessage,m=(0,d.useState)([]),c=P()(m,2),g=c[0],h=c[1],p=(0,d.useState)(!1),M=P()(p,2),C=M[0],v=M[1],j=(0,d.useState)(!1),f=P()(j,2),x=f[0],y=f[1],w=(0,d.useState)(void 0),b=P()(w,2),S=b[0],R=b[1],D=(0,d.useState)(!1),O=P()(D,2),I=O[0],A=O[1],N=(0,d.useState)([]),z=P()(N,2),Z=z[0],k=z[1],G=B.Z.useForm(),Y=P()(G,1),L=Y[0],T=L.resetFields,E=L.validateFields,F=L.setFieldsValue,Q=L.getFieldsValue,H=[{label:l({id:"labeling-job-create.wizard.configuration.landmark.group.tool.option1"}),value:Je.KEYPOINT},{label:l({id:"labeling-job-create.wizard.configuration.landmark.group.tool.option2"}),value:Je.RECTANGLE}],V=function(fe,je,he){je&&a&&a.children.find(function(xe){return n.key!==xe.key&&xe.name===je})?he(l({id:"labeling-job-create.wizard.configuration.landmark.group.duplicate-error"})):he()};(0,d.useEffect)(function(){L&&n?(h(n.categories||[]),k(n.lines||[]),F({categories:n.categories||[],name:n.name,display_name:n.display_name,type:n.type,reference:n.reference,count:n.count}),R(n.reference)):(h([]),k([]),L.resetFields())},[n,L,F]);var K=function(fe){h(fe),T(["categories"]),v(!1),R(void 0)},$=function(){T(["categories"]),E().then(function(fe){C?ue.ZP.warning(l({id:"labeling-job-create.wizard.configuration.landmark.group.complete-error"})):i(s()(s()({},fe),{},{key:n.key,label_config:n.label_config,point_label_config:n.point_label_config}),a&&a.key)}).catch(function(fe){var je=fe.errorFields;je.forEach(function(he){var xe=he.name;Array.isArray(xe)&&xe.find(function(Ue){return Ue==="categories"})&&ue.ZP.error(l({id:"labeling-job-create.wizard.configuration.landmark.group.groups.required"}))})})},re=function(fe){A(fe)};return(0,e.jsxs)(Re.Z,{title:l({id:"labeling-job-create.wizard.configuration.landmark.group.editor-title"}),visible:r,onOk:$,onCancel:o,maskClosable:!1,width:950,wrapClassName:Lr["landmark-modal"],okText:l({id:"common.confirm"}),destroyOnClose:!0,children:[(0,e.jsxs)(B.Z,s()(s()({},Qr),{},{layout:"vertical",form:L,initialValues:{categories:g},children:[(0,e.jsx)(B.Z.Item,{label:l({id:"labeling-job-create.wizard.configuration.landmark.group.title"}),name:"name",rules:[{required:!0,message:l({id:"labeling-job-create.wizard.configuration.landmark.group.title.required"})},{validator:V}],children:(0,e.jsx)(ne.Z,{})}),(0,e.jsx)(B.Z.Item,{label:l({id:"labeling-job-create.wizard.configuration.landmark.group.label"}),name:"display_name",children:(0,e.jsx)(ne.Z,{})}),(0,e.jsx)(B.Z.Item,{label:l({id:"labeling-job-create.wizard.configuration.landmark.group.tool"}),name:"type",rules:[{required:!0,message:l({id:"labeling-job-create.wizard.configuration.landmark.group.tool.required"})}],initialValue:Je.KEYPOINT,children:(0,e.jsx)(Me.Z,{children:H.map(function(ce){return(0,e.jsx)(Jr,{value:ce.value,children:ce.label},ce.value)})})}),(0,e.jsx)(B.Z.Item,s()(s()({className:"clearStyle",noStyle:!0,shouldUpdate:function(fe,je){return fe.type!==je.type}},nt),{},{children:function(fe){var je=fe.getFieldValue;return je("type")===Je.RECTANGLE?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.Z.Item,{label:l({id:"labeling-job-create.wizard.configuration.landmark.group.reference"}),name:"reference",children:(0,e.jsx)(va,{initialImgUrl:S,accept:".png,.jpg,.jpeg,.bmp",onFinish:function(xe){L.setFieldsValue({reference:xe.response.data})},iconMessage:l({id:"common.upload"}),onClear:function(){L.setFieldsValue({reference:void 0})},method:"post",uploadUrl:Ae.t9})}),(0,e.jsx)(B.Z.Item,{label:l({id:"labeling-job-create.wizard.configuration.landmark.group.count"}),name:"count",rules:[{required:!0}],children:(0,e.jsx)(st.Z,{min:1,max:1})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B.Z.Item,{className:"clearStyle",label:l({id:"labeling-job-create.wizard.configuration.landmark.group.groups"}),noStyle:!0,name:"categories",rules:[{required:!0}],children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"ant-col ant-form-item-label ant-col-xs-24 ant-col-sm-24",children:(0,e.jsx)("label",{className:"ant-form-item-required",children:l({id:"labeling-job-create.wizard.configuration.landmark.group.groups"})})}),(0,e.jsxs)("div",{className:"modal-list",style:{textAlign:"center"},children:[(0,e.jsxs)(Ge.Z,{gutter:8,style:{marginBottom:8},children:[(0,e.jsx)(ae.Z,{span:3,children:l({id:"job-detail.uncommitted-task.column.contributor"})}),(0,e.jsx)(ae.Z,{span:6,children:l({id:"labeling-job-create.wizard.configuration.ontology.landmark.rang"})}),(0,e.jsx)(ae.Z,{span:6,children:l({id:"labeling-job-create.wizard.configuration.ontology.landmark.keys"})}),(0,e.jsx)(ae.Z,{span:3,children:l({id:"labeling-job-create.wizard.configuration.ontology.landmark.isConnect"})}),(0,e.jsx)(ae.Z,{span:2,children:l({id:"labeling-job-create.wizard.configuration.ontology.landmark.connection.color"})}),(0,e.jsx)(ae.Z,{span:4})]}),g.map(function(he){return(0,e.jsx)(Aa,{isAdding:C,referenceUrl:S,categories:g,category:he,handleVisibleUpload:re,setReferenceUrl:R,resetFields:T,onSave:K,setIsEditing:y},he.name)})]}),(0,e.jsx)("div",{className:"modal-edit",children:C?(0,e.jsx)(Aa,{editable:!0,referenceUrl:S,categories:g,setIsEditing:y,resetFields:T,setReferenceUrl:R,handleVisibleUpload:re,onCancel:function(){return v(!1)},onSave:K}):!x&&(0,e.jsx)(J.ZP,{block:!0,type:"dashed",style:{marginBottom:"24px"},onClick:function(){return v(!0)},children:l({id:"labeling-job-create.wizard.configuration.ontology.group.editor.add"})})})]})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"ant-col ant-form-item-label ant-col-xs-24 ant-col-sm-24",children:(0,e.jsxs)("label",{children:[l({id:"labeling-job-create.wizard.configuration.landmark.group.connections"}),l({id:"labeling-job-create.wizard.configuration.landmark.group.connections.tip"})]})}),(0,e.jsx)(Xr,{lines:Z,setFieldsValue:F,formatMessage:l,getFieldsValue:Q})]})]})}}))]})),(0,e.jsx)(Re.Z,{visible:I,onOk:function(){A(!1)},onCancel:function(){A(!1)},maskClosable:!1,width:400,destroyOnClose:!0,okText:l({id:"common.confirm"}),children:(0,e.jsx)(va,{initialImgUrl:S,accept:".png,.jpg,.jpeg,.bmp",onFinish:function(fe){R(fe.response.data)},iconMessage:l({id:"common.upload"}),onClear:function(){R(void 0)},method:"post",uploadUrl:Ae.t9})})]})}function Xr(t){var a=t.lines,n=t.formatMessage,r=t.setFieldsValue,i=t.getFieldsValue,o=(0,d.useState)(),u=P()(o,2),l=u[0],m=u[1],c=(0,d.useState)([]),g=P()(c,2),h=g[0],p=g[1];(0,d.useEffect)(function(){r({lines:a}),p(a)},[a,r]);var M=function(){var y=i(),w=y.lines?ee()(y.lines):[];w.push({points:["",""],color:"#5cdef0"}),p(w),r({lines:w})},C=function(y,w){var b=i(),S=b.lines?ee()(b.lines):[];S[w].color=y,p(S),r({lines:S})},v=function(y){var w=ee()(h);w.splice(y,1),p(w)},j=function(y,w){C(y.hex,w),m(null)},f=function(y){return function(w,b,S){b===y?S(n({id:"labeling-job-create.wizard.configuration.landmark.group.connections.points"})):S()}};return(0,e.jsxs)(Ge.Z,{gutter:10,style:{marginBottom:"20px"},children:[h.map(function(x,y){return(0,e.jsx)(ae.Z,{span:8,children:(0,e.jsx)(B.Z.Item,s()(s()({className:"clearStyle",noStyle:!0,shouldUpdate:!0},nt),{},{children:function(b){var S=b.getFieldValue;return(0,e.jsxs)(Ge.Z,{gutter:10,children:[(0,e.jsx)(ae.Z,{span:6,children:(0,e.jsx)(B.Z.Item,s()(s()({},nt),{},{name:["lines",y,"points",0],rules:[{required:!0,message:n({id:"labeling-job-create.wizard.configuration.landmark.group.connections.required"})},{validator:f(S(["lines",y,"points",1]))}],children:(0,e.jsx)(st.Z,{min:0,style:{width:"100%"}})}))}),(0,e.jsx)(ae.Z,{span:6,children:(0,e.jsx)(B.Z.Item,s()(s()({},nt),{},{name:["lines",y,"points",1],rules:[{required:!0,message:n({id:"labeling-job-create.wizard.configuration.landmark.group.connections.required"})},{validator:f(S(["lines",y,"points",0]))}],children:(0,e.jsx)(st.Z,{min:0,style:{width:"100%"}})}))}),(0,e.jsx)(ae.Z,{span:6,children:(0,e.jsx)(B.Z.Item,{name:["lines",y,"color"],children:(0,e.jsx)(Mt.Z,{trigger:["click"],overlay:function(){return(0,e.jsx)(hn.Ie,{color:x.color,onChangeComplete:function(O){j(O,y)}})},visible:l===y,children:(0,e.jsx)(J.ZP,{onClick:function(){m(y)},children:(0,e.jsx)("span",{style:{display:"inline-block",width:12,height:12,backgroundColor:x.color,margin:2}})})})})}),(0,e.jsx)(ae.Z,{span:6,children:(0,e.jsx)(J.ZP,{style:{height:"auto",padding:"4px 0 0 0",color:"#df3636"},type:"link",onClick:function(){return v(y)},children:n({id:"common.delete"})})})]})}}))})}),(0,e.jsx)(ae.Z,{children:(0,e.jsx)(J.ZP,{block:!0,type:"dashed",onClick:M,children:n({id:"labeling-job-create.wizard.configuration.landmark.group.connections.add"})})})]})}function Aa(t){var a=t.categories,n=t.category,r=t.editable,i=r===void 0?!1:r,o=t.isAdding,u=o===void 0?!1:o,l=t.referenceUrl,m=t.setIsEditing,c=t.handleVisibleUpload,g=t.setReferenceUrl,h=t.resetFields,p=t.onCancel,M=t.onSave,C=(0,X.useIntl)(),v=C.formatMessage,j=(0,d.useRef)(null),f=(0,d.useRef)(null),x=(0,d.useRef)(null),y=(0,d.useRef)(null),w=(n==null?void 0:n.name)||"new-category",b=(0,d.useState)(""),S=P()(b,2),R=S[0],D=S[1],O=(0,d.useState)(i),I=P()(O,2),A=I[0],N=I[1],z=(0,d.useState)(""),Z=P()(z,2),k=Z[0],G=Z[1],Y=(0,d.useState)(""),L=P()(Y,2),T=L[0],E=L[1],F=(0,d.useState)(""),Q=P()(F,2),H=Q[0],V=Q[1],K=(0,d.useState)(!0),$=P()(K,2),re=$[0],ce=$[1],fe=(0,d.useState)((n==null?void 0:n.displayColor)||"#5cdef0"),je=P()(fe,2),he=je[0],xe=je[1],Ue=(0,d.useState)(!1),gt=P()(Ue,2),at=gt[0],Ee=gt[1],mt=(0,d.useState)({}),Ht=P()(mt,2),ke=Ht[0],Qe=Ht[1];(0,d.useEffect)(function(){Qe(s()(s()({},ke),{},{name:void 0}))},[R]),(0,d.useEffect)(function(){Qe(s()(s()({},ke),{},{range:void 0}))},[k,T]),(0,d.useEffect)(function(){Qe(s()(s()({},ke),{},{keys:void 0}))},[H]);var Et=function(){N(!1),m(!1),D(""),G(""),E(""),V(""),ce(!0),h(["categories"]),Ee(!1),p&&p()},cn=function(){N(!0),m(!0),D(n.name),G(n.range[0].toString()),E(n.range[1].toString()),V(n.keys.join(",")),g(n.reference),ce(n.isConnect!==void 0?n.isConnect:!0),xe(n.displayColor||"#5cdef0")},Gt=function(){var ye=a.findIndex(function(ht){return ht.name===(n==null?void 0:n.name)}),Fe=ye<0?ee()(a):[].concat(ee()(a.slice(0,ye)),ee()(a.slice(ye+1)));M(Fe)},St=function(ye){xe(ye.hex),Ee(null)},it=function(){var ye=a.findIndex(function(Se){return Se.name===(n==null?void 0:n.name)}),Fe=[],ht=[],se={};if(oa(R)?a.find(function(Se,De){return De!==ye&&Se.name===R.trim()})&&(se.name=v({id:"labeling-job-create.wizard.configuration.ontology.landmark.name.exist"})):se.name=v({id:"labeling-job-create.wizard.configuration.ontology.title.class-error"}),!k||!T)se.range=v({id:"labeling-job-create.wizard.configuration.ontology.landmark.range.empty"});else{if(zn(k)&&zn(T)){var te=parseInt(k,10),le=parseInt(T,10);!Number.isNaN(te)&&!Number.isNaN(le)&&te>=0&&le>=te&&a.every(function(Se,De){return De===ye||te>Se.range[1]||le<Se.range[0]})&&(Fe.push(te),Fe.push(le))}Fe.length<2&&(se.range=v({id:"labeling-job-create.wizard.configuration.ontology.landmark.range.error"}))}if(H){var oe=H.split(",");oe.some(function(Se){if(zn(Se)){var De=parseInt(Se,10);return Number.isNaN(De)||Fe.length===2&&(De<Fe[0]||De>Fe[1])}return!0})?se.keys=v({id:"labeling-job-create.wizard.configuration.ontology.landmark.keys.error"}):oe.forEach(function(Se){return ht.push(parseInt(Se,10))})}if(Object.keys(se).length>0){Qe(se);return}var pe={name:R,range:Fe,keys:ht,reference:l,isConnect:re,displayColor:he},Ie=ye<0?[].concat(ee()(a),[pe]):[].concat(ee()(a.slice(0,ye)),[pe],ee()(a.slice(ye+1)));M(Ie),Et()};return(0,e.jsxs)(Ge.Z,{gutter:8,style:{marginBottom:8},children:[(0,e.jsx)(ae.Z,{span:3,children:A?(0,e.jsx)(B.Z.Item,s()(s()(s()({},ke.name&&{validateStatus:"error",help:ke.name}),nt),{},{children:(0,e.jsx)(ne.Z,{ref:j,placeholder:v({id:"labeling-job-create.wizard.configuration.ontology.landmark.name.placeholder"}),value:R,onChange:function(ye){return D(ye.target.value)},onPressEnter:function(){return f.current.focus()}})})):n==null?void 0:n.name}),(0,e.jsx)(ae.Z,{span:6,children:A?(0,e.jsx)(B.Z.Item,s()(s()(s()({},ke.range&&{validateStatus:"error",help:ke.range}),nt),{},{children:(0,e.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[(0,e.jsx)(ne.Z,{ref:f,placeholder:v({id:"labeling-job-create.wizard.configuration.ontology.landmark.rang.start.placeholder"}),value:k,onChange:function(ye){return G(ye.target.value)},onPressEnter:function(){return x.current.focus()}}),(0,e.jsx)("span",{style:{margin:"0 4px"},children:"-"}),(0,e.jsx)(ne.Z,{ref:x,placeholder:v({id:"labeling-job-create.wizard.configuration.ontology.landmark.rang.end.placeholder"}),value:T,onChange:function(ye){return E(ye.target.value)},onPressEnter:function(){return y.current.focus()}})]})})):(0,e.jsx)(e.Fragment,{children:n==null?void 0:n.range.join("-")})}),(0,e.jsx)(ae.Z,{span:6,children:A?(0,e.jsx)(B.Z.Item,s()(s()(s()({},ke.keys&&{validateStatus:"error",help:ke.keys}),nt),{},{children:(0,e.jsx)(ne.Z,{ref:y,placeholder:v({id:"labeling-job-create.wizard.configuration.ontology.landmark.keys.placeholder"}),value:H,onChange:function(ye){return V(ye.target.value)},onPressEnter:it})})):(0,e.jsx)(e.Fragment,{children:n==null?void 0:n.keys.join(",")})}),(0,e.jsx)(ae.Z,{span:3,children:A?(0,e.jsx)(B.Z.Item,s()(s()({},nt),{},{children:(0,e.jsx)(Ye.Z,{checked:re,onChange:ce})})):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("span",{style:Kr,children:v({id:n&&n.isConnect===!1?"labeling-job-create.wizard.configuration.ontology.landmark.notconnected":"labeling-job-create.wizard.configuration.ontology.landmark.connected"})})})}),(0,e.jsx)(ae.Z,{span:2,children:A?(0,e.jsx)(B.Z.Item,s()(s()({},nt),{},{children:(0,e.jsx)(Mt.Z,{trigger:["click"],overlay:function(){return(0,e.jsx)(hn.Ie,{color:he,onChangeComplete:St})},visible:at,children:(0,e.jsx)(J.ZP,{onClick:function(){Ee(!0)},children:(0,e.jsx)("span",{style:{display:"inline-block",width:12,height:12,backgroundColor:he,margin:2}})})})})):(0,e.jsx)("span",{style:{display:"inline-block",width:12,height:12,backgroundColor:he,margin:"6px 2px"}})}),(0,e.jsx)(ae.Z,{span:4,children:A?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.ZP,{style:{padding:0,marginRight:8},type:"link",onClick:function(){c(!0)},children:(0,e.jsx)("img",{src:Rr,className:"icon"})}),(0,e.jsx)(J.ZP,{style:{padding:0,marginRight:8},type:"link",onClick:it,children:v({id:"common.save"})}),(0,e.jsx)(J.ZP,{style:{padding:0},type:"link",onClick:Et,children:v({id:"common.cancel"})})]}):!u&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"8px"},children:(0,e.jsx)("img",{src:n.reference?Wr:Br,className:"icon"})}),(0,e.jsx)(J.ZP,{style:{height:"auto",padding:0,marginRight:8},type:"link",onClick:cn,children:v({id:"common.edit"})}),(0,e.jsx)(J.ZP,{style:{height:"auto",padding:0,color:"#df3636"},type:"link",onClick:Gt,children:v({id:"common.delete"})})]})})]},w)}var qr=$r,Ct={"ontology-item":"ontology-item___XEB11","ontology-label":"ontology-label___Puv4k",color:"color___u4jHS",name:"name___THvsC","rich-text-container":"rich-text-container___a8vcL","action-btn":"action-btn___GgxHJ","ontology-groups":"ontology-groups___dbc0m"},eo=Object.defineProperty,Ea=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable,Sa=(t,a,n)=>a in t?eo(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,ao=(t,a)=>{for(var n in a||(a={}))to.call(a,n)&&Sa(t,n,a[n]);if(Ea)for(var n of Ea(a))no.call(a,n)&&Sa(t,n,a[n]);return t};const Cd=t=>React.createElement("svg",ao({width:12,height:12,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("path",{d:"M10.5 0a1.5 1.5 0 1 1-.646 2.854L3.217 9.49l3.787-1.082.003-.051a1.5 1.5 0 1 1 .27 1.014l-4.281 1.222-.003.052a1.5 1.5 0 1 1-1.675-1.633l1.386-6.24A1.499 1.499 0 0 1 3.5 0a1.5 1.5 0 0 1 .182 2.99L2.36 8.93l6.785-6.785A1.5 1.5 0 0 1 10.5 0z",fill:"#42526E",fillRule:"evenodd"}));var io="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEwLjUgMGExLjUgMS41IDAgMSAxLS42NDYgMi44NTRMMy4yMTcgOS40OWwzLjc4Ny0xLjA4Mi4wMDMtLjA1MWExLjUgMS41IDAgMSAxIC4yNyAxLjAxNGwtNC4yODEgMS4yMjItLjAwMy4wNTJhMS41IDEuNSAwIDEgMS0xLjY3NS0xLjYzM2wxLjM4Ni02LjI0QTEuNDk5IDEuNDk5IDAgMCAxIDMuNSAwYTEuNSAxLjUgMCAwIDEgLjE4MiAyLjk5TDIuMzYgOC45M2w2Ljc4NS02Ljc4NUExLjUgMS41IDAgMCAxIDEwLjUgMHoiIGZpbGw9IiM0MjUyNkUiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",ro=Object.defineProperty,ba=Object.getOwnPropertySymbols,oo=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,Ta=(t,a,n)=>a in t?ro(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,so=(t,a)=>{for(var n in a||(a={}))oo.call(a,n)&&Ta(t,n,a[n]);if(ba)for(var n of ba(a))lo.call(a,n)&&Ta(t,n,a[n]);return t};const jd=t=>React.createElement("svg",so({width:12,height:12,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("path",{fill:"#42526E",d:"M0 2h12v8H0z",fillRule:"evenodd"}));var uo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzQyNTI2RSIgZD0iTTAgMmgxMnY4SDB6IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=";function co(t){var a=t.index,n=t.ontology,r=t.activateItem,i=t.colorEnabled,o=t.descriptionType,u=t.dragType,l=t.moveOntology,m=t.handleMouseHover,c=t.handleMouseLeave,g=t.handleEditClick,h=t.handleLandmarkGroup,p=t.handleDelete,M=t.handleGroupDelete,C=t.onFormEdit,v=(0,X.useIntl)(),j=v.formatMessage,f=(0,d.useRef)(null),x=(0,ia.L)({accept:u,hover:function(A,N){var z;if(f.current){var Z=A.index,k=a;if(Z!==k){var G=(z=f.current)===null||z===void 0?void 0:z.getBoundingClientRect(),Y=(G.bottom-G.top)/2,L=N.getClientOffset(),T=L.y-G.top;Z<k&&T<Y||Z>k&&T>Y||(l(Z,k),A.index=k)}}}}),y=P()(x,2),w=y[1],b=(0,ra.c)({type:u,collect:function(A){return{isDragging:A.isDragging()}},item:function(){return{index:a}}}),S=P()(b,2),R=S[0].isDragging,D=S[1],O=R?0:1;return D(w(f)),(0,e.jsxs)("div",{ref:f,className:Ct["ontology-item"],style:{opacity:O},onMouseOver:function(A){A.preventDefault(),m(n.key)},onMouseLeave:function(A){A.preventDefault(),c()},onFocus:function(A){return A.preventDefault()},children:[(0,e.jsxs)("div",{className:Ct["ontology-label"],children:[(0,e.jsxs)("div",{style:{width:"30%"},children:[i&&(0,e.jsx)("span",{className:Ct.color,style:{background:n.display_color}}),(0,e.jsx)("span",{className:Ct.name,children:n.class_name}),(0,e.jsx)("span",{className:Ct.name,children:n.display_name})]}),(0,e.jsx)("div",{style:{width:"50%"},children:o==="text"?n.description:(0,e.jsx)("div",{className:Ct["rich-text-container"],dangerouslySetInnerHTML:{__html:n.description}})}),(0,e.jsx)("div",{style:{width:"20%",textAlign:"right"},children:r===n.key&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(an.Z,{onClick:function(A){A.preventDefault(),h(n.key)}}),(0,e.jsx)(Rt.Z,{type:"vertical"}),(0,e.jsx)(kt.Z,{onClick:function(A){A.preventDefault(),g(n)}}),(0,e.jsx)(Rt.Z,{type:"vertical"}),(0,e.jsx)(lt.Z,{onClick:function(A){A.preventDefault(),p(n.key)}})]})})]}),(0,e.jsx)("div",{className:Ct["ontology-groups"],children:Array.isArray(n.children)&&n.children.map(function(I){return(0,e.jsxs)("div",{className:"ontology-group",children:[(0,e.jsx)("img",{className:"icon",src:I.type===Je.KEYPOINT?io:uo}),(0,e.jsxs)("div",{className:"name",children:[j({id:"labeling-job-create.wizard.configuration.landmark.group.title.name"}),"\uFF1A",I.name]}),(0,e.jsx)("div",{className:"description",children:I.type===Je.KEYPOINT&&(0,e.jsxs)(e.Fragment,{children:[j({id:"labeling-job-create.wizard.configuration.ontology.title.group.total"}),"\uFF1A",I.categories.reduce(function(A,N){return A+(N.range[1]-N.range[0]+1)},0)]})}),(0,e.jsxs)("div",{className:"action-box",children:[I.type===Je.KEYPOINT&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.ZP,{size:"small",type:"link",onClick:function(){C(n.class_name,I.key,vn.POINT,I.point_label_config)},children:j({id:"labeling-job-create.wizard.configuration.landmark.group.points-attributes"})}),(0,e.jsx)(Rt.Z,{type:"vertical"})]}),(0,e.jsx)(J.ZP,{size:"small",type:"link",onClick:function(){C(n.class_name,I.key,vn.GROUP,I.label_config)},children:j({id:"labeling-job-create.wizard.configuration.landmark.group.group-attributes"})}),(0,e.jsx)(Rt.Z,{type:"vertical"}),(0,e.jsx)(kt.Z,{onClick:function(N){N.preventDefault(),h(n.key,I.key)}}),(0,e.jsx)(Rt.Z,{type:"vertical"}),(0,e.jsx)(lt.Z,{onClick:function(N){N.preventDefault(),M(n.key,I.key)}})]})]},I.key)})})]})}var go=co,vn=function(t){return t.GROUP="group",t.POINT="point",t}({});function mo(t,a){var n=t.type,r=t.ontologies,i=r===void 0?[]:r,o=t.options,u=(0,X.useIntl)(),l=u.formatMessage,m=(0,d.useState)([]),c=P()(m,2),g=c[0],h=c[1],p=(0,d.useState)(""),M=P()(p,2),C=M[0],v=M[1],j=(0,d.useState)(null),f=P()(j,2),x=f[0],y=f[1],w=(0,d.useState)(null),b=P()(w,2),S=b[0],R=b[1],D=(0,d.useState)(!1),O=P()(D,2),I=O[0],A=O[1],N=(0,d.useState)(!1),z=P()(N,2),Z=z[0],k=z[1],G=(0,d.useState)(!1),Y=P()(G,2),L=Y[0],T=Y[1],E=(0,d.useState)(),F=P()(E,2),Q=F[0],H=F[1],V=(0,d.useState)(""),K=P()(V,2),$=K[0],re=K[1],ce=(o==null?void 0:o.colorEnabled)===void 0||(o==null?void 0:o.colorEnabled),fe=(o==null?void 0:o.descriptionEnabled)===void 0||(o==null?void 0:o.descriptionEnabled),je=(o==null?void 0:o.descriptionType)==="richtext"?"richtext":"text",he=(o==null?void 0:o.sizeEnabled)===!0,xe=(o==null?void 0:o.limitsEnabled)===!0;(0,d.useEffect)(function(){if(Array.isArray(i)&&i.length>0){var se=[];i[0].range?se=[{class_name:"Ontology",display_name:"Ontology",key:"".concat(+new Date,"-",0),children:[{name:"default",display_name:"default",key:"".concat(+new Date,"-0-0"),count:i.reduce(function(te,le){return te+(le.range[1]-le.range[0]+1)},0),type:Je.KEYPOINT,categories:i,reference:""}]}]:se=i.map(function(te,le){return s()(s()({},te),{},{key:te.key||"".concat(+new Date,"-").concat(le),children:te.children&&te.children.map(function(oe,pe){return s()(s()({},oe),{},{name:oe.name||oe.group_name||"default",type:oe.type==="point"?Je.KEYPOINT:oe.type,key:oe.key||"".concat(+new Date,"-").concat(le,"-").concat(pe)})})})}),h(se)}},[i]);var Ue=function(te,le){var oe=te.className,pe=te.groupKey,Ie=te.editType,Se=ee()(g),De=Se.find(function(me){return me.class_name===oe}),pt=De&&De.children.find(function(me){return me.key===pe});pt&&(Ie===vn.GROUP?pt.label_config=le:Ie===vn.POINT&&(pt.point_label_config=le),h(Se))};(0,d.useImperativeHandle)(a,function(){return{updateOntology:Ue,getData:function(){if(g.find(function(le){return!le.children||le.children.length===0})){var te=l({id:"labeling-job-create.wizard.configuration.ontology.group.required"});throw new Error(te)}return g}}});var gt=(0,d.useCallback)(function(se,te){var le=g[se],oe=[].concat(ee()(g.slice(0,se)),ee()(g.slice(se+1))),pe=[].concat(ee()(oe.slice(0,te)),[le],ee()(oe.slice(te)));h(pe)},[g]),at=function(te){v(te)},Ee=function(){v("")},mt=function(te){var le=g.filter(function(oe){return oe.key!==te});h(le)},Ht=function(te){y(te),A(!0)},ke=function(te){te.preventDefault(),y({class_name:"",display_color:"",description:"",children:[]}),A(!0)},Qe=function(te){var le;te.key?le=g.map(function(oe){return oe.key===te.key?s()(s()({},oe),te):oe}):le=[].concat(ee()(g),[s()(s()({},te),{},{key:"".concat(+new Date),children:[]})]),h(le),y(null),A(!1)},Et=function(){y(null),A(!1)},cn=function(te){return g.every(function(le){return le.key===te.key||le.class_name!==te.class_name})},Gt=function(te,le){var oe=g.find(function(Ie){return Ie.key===te}),pe={key:"".concat(+new Date),name:""};le&&oe&&(pe=oe.children.find(function(Ie){return Ie.key===le})),R(pe),y(oe),k(!0)},St=function(){R(null),y(null),k(!1)},it=function(te,le){var oe=s()({},te);oe.type===Je.KEYPOINT&&(oe.count=oe.categories.reduce(function(De,pt){return De+(pt.range[1]-pt.range[0]+1)},0));var pe=ee()(g),Ie=pe.findIndex(function(De){return De.key===le}),Se=pe[Ie].children?pe[Ie].children.findIndex(function(De){return De.key===oe.key}):-1;Se>=0?pe[Ie].children[Se]=oe:pe[Ie].children=pe[Ie].children?[].concat(ee()(pe[Ie].children),[oe]):[oe],h(pe),St()},Te=function(te,le){var oe=ee()(g),pe=oe.findIndex(function(Ie){return Ie.key===te});pe>=0&&(oe[pe].children=oe[pe].children.filter(function(Ie){return Ie.key!==le}))},ye=function(){T(!1),H(null),re("")},Fe=function(te,le,oe){var pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";H({className:te,groupKey:le,editType:oe}),re(pe),T(!0)},ht=function(te){te&&(Ue(Q,te),ye())};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(na.W,{backend:aa.PD,context:window,children:g.map(function(se,te){return(0,e.jsx)(go,{index:te,ontology:se,activateItem:C,colorEnabled:ce,sizeEnabled:he,descriptionType:je,handleMouseHover:at,handleMouseLeave:Ee,handleEditClick:Ht,handleLandmarkGroup:Gt,handleDelete:mt,moveOntology:gt,handleGroupDelete:Te,onFormEdit:Fe,dragType:"ONTOLOGY-".concat(n)},se.key)})}),(0,e.jsx)(J.ZP,{block:!0,type:"dashed",onClick:ke,children:l({id:"labeling-job-create.wizard.configuration.ontology.editor.add"})}),(0,e.jsx)(sa,{ontology:x,visible:I,onOk:Qe,onCancel:Et,colorEnabled:ce,descriptionEnabled:fe,descriptionType:je,sizeEnabled:he,limitsEnabled:xe,validate:cn}),(0,e.jsx)(qr,{editItem:x,editGroup:S,visible:Z,onOk:it,onCancel:St}),(0,e.jsx)(Re.Z,{destroyOnClose:!0,width:960,bodyStyle:{padding:"45px 8px 8px"},visible:L,footer:null,onCancel:ye,children:(0,e.jsx)(Dn,{config:$,ontologySyncDisabled:!1,defaultOntology:g,onSave:ht})})]})}var ho=(0,d.forwardRef)(mo),Ne={container:"container___Hed4K",list:"list___HB7fx",editor:"editor___tRih0",header:"header___B78Q8",ontology:"ontology___kXTmN","ontology-info":"ontology-info___HpHgH",selected:"selected___JNOSC",child:"child___fS9r5","color-dot":"color-dot___gI0TK",add:"add___Lgbk1","tool-selector":"tool-selector___W095z","tool-selector-dropdown":"tool-selector-dropdown___lXLl4","point-selector":"point-selector___qKGSF","point-selector-item":"point-selector-item___fQdaF","edge-selector":"edge-selector___YYyKE","edge-selector-item":"edge-selector-item___Cgc81",styler:"styler____JAlp",title:"title___QLUPB",content:"content____7TD9",item:"item___hBtTR","item-title":"item-title___oV_7T","styler-btns":"styler-btns___pWvp0","attr-item-add":"attr-item-add___t4WpX",disabled:"disabled___jQTc9","attr-item":"attr-item___y8FDm","point-edge-item":"point-edge-item___RbTQo"},po=function(a){var n=a.child,r=a.selected,i=a.onSelected;return(0,e.jsxs)("div",{className:zt()(Ne.child,W()({},Ne.selected,r)),onClick:i,children:[(0,e.jsx)("div",{className:Ne["color-dot"],style:{backgroundColor:n.display_color,border:"none"}}),n.name]})},fo=po,vo=function(a){var n=a.ontologyItem,r=a.editType,i=a.editItem,o=a.editChild,u=a.onItemSelected,l=a.onChildSelected,m=a.onChildAdd,c=(0,X.useIntl)(),g=c.formatMessage,h=n.key,p=n.class_name,M=n.display_name,C=n.display_color,v=n.children,j=v===void 0?[]:v,f=n.multiple,x=i&&i.key===h;return(0,e.jsxs)("div",{className:Ne.ontology,children:[(0,e.jsxs)("div",{className:zt()(Ne["ontology-info"],W()({},Ne.selected,x&&r==="ontology")),onClick:u,children:[(0,e.jsx)("div",s()({className:Ne["color-dot"]},!f&&{style:{backgroundColor:C,border:"none"}})),M||p]}),f&&(0,e.jsxs)("div",{children:[j.map(function(y){return(0,e.jsx)(fo,{child:y,selected:x&&r==="child"&&o&&o.key===y.key,onSelected:function(){return l(y)}},y.key)}),(0,e.jsxs)("div",{className:Ne.child,onClick:m,children:[(0,e.jsx)("div",{className:Ne["color-dot"],style:{borderStyle:"dashed"}}),(0,e.jsx)("a",{children:g({id:"tool.general-image.child.add"})})]})]})]})},yo=vo,Mo=function(a){var n=a.value,r=a.onChange,i=(0,X.useIntl)(),o=i.formatMessage,u=(0,d.useState)(!1),l=P()(u,2),m=l[0],c=l[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{color:"#7A869A",marginRight:12},children:o({id:n?"tool.general-image.config.been-set":"tool.general-image.config.empty"})}),(0,e.jsx)(J.ZP,{onClick:function(){return c(!0)},children:o({id:"tool.general-image.config.set"})}),(0,e.jsx)(Re.Z,{destroyOnClose:!0,width:960,bodyStyle:{padding:"45px 8px 8px"},visible:m,footer:null,onCancel:function(){return c(!1)},children:(0,e.jsx)(Dn,{config:n,ontologySyncDisabled:!0,onSave:function(h){r&&r(h),c(!1)}})})]})},Un=Mo,He=_(81399),ze=function(t){return t.EQUAL="equal_to",t.GREATER_EQUAL="greater_than_or_equal_to",t.LESS_EQUAL="less_than_or_equal_to",t.BETWEEN="between",t}(ze||{}),Io=Me.Z.Option,Co=function(a){var n=a.count,r=a.min_count,i=a.max_count,o=a.onChange,u=(0,X.useIntl)(),l=u.formatMessage,m=(0,d.useState)(ze.EQUAL),c=P()(m,2),g=c[0],h=c[1],p=(0,d.useState)(null),M=P()(p,2),C=M[0],v=M[1],j=(0,d.useState)(null),f=P()(j,2),x=f[0],y=f[1],w=(0,d.useRef)(!1);(0,d.useEffect)(function(){if(w.current=!1,!(0,He.kK)(n)&&!Number.isNaN(n))h(ze.EQUAL),v(n);else{var D=!(0,He.kK)(r)&&!Number.isNaN(r),O=!(0,He.kK)(i)&&!Number.isNaN(i);D&&!O?(h(ze.GREATER_EQUAL),v(r)):O&&!D?(h(ze.LESS_EQUAL),v(i)):O&&O?(h(ze.BETWEEN),v(r),y(i)):(h(ze.EQUAL),v(null),y(null))}},[n,r,i]),(0,d.useEffect)(function(){w.current&&(g===ze.EQUAL?o({count:C,min_count:null,max_count:null}):g===ze.GREATER_EQUAL?o({count:null,min_count:C,max_count:null}):g===ze.LESS_EQUAL?o({count:null,min_count:null,max_count:C}):g===ze.BETWEEN&&o({count:null,min_count:C,max_count:x}))},[g,C,x]);var b=function(O){w.current=!0,h(O)},S=function(O){w.current=!0,v(O)},R=function(O){w.current=!0,y(O)};return(0,e.jsxs)(Ge.Z,{gutter:8,children:[(0,e.jsx)(ae.Z,{span:4,children:(0,e.jsx)(Me.Z,{value:g,onChange:b,children:(0,e.jsx)(Io,{value:ze.EQUAL,children:"="})})}),(0,e.jsx)(ae.Z,{span:8,children:g===ze.BETWEEN?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(st.Z,{style:{width:"50%",transition:"none"},placeholder:l({id:"tool.general-image.child.count.min-count"}),min:1,precision:0,value:C,onChange:S}),(0,e.jsx)(st.Z,{style:{width:"50%",transition:"none"},placeholder:l({id:"tool.general-image.child.count.max-count"}),min:1,precision:0,value:x,onChange:R})]}):(0,e.jsx)(st.Z,{style:{width:"100%",transition:"none"},placeholder:l({id:"tool.general-image.child.count.placeholder"}),min:1,precision:0,value:C,onChange:S})})]})},jo=Co,xd=function(t){return t.POINTS_COLOR="points_color",t.POINTS_TYPE="points_type",t.EDGES_COLOR="edges_color",t.EDGES_TYPE="edges_type",t.FILL_COLOR="fill_color",t.POINT_COLOR="point_color",t.POINT_TYPE="point_type",t.EDGE_COLOR="edge_color",t.EDGE_TYPE="edge_type",t.EDGE_BOLD="edge_bold",t}({}),ge=function(t){return t.RECTANGLE="rectangle",t.FOUR_DOTS_RECTANGLE="four-dots-rectangle",t.CENTERLINE_RECTANGLE="centerline-rectangle",t.ELLIPSE="ellipse",t.POLYGON="polygon",t.LINE="line",t.DOT="dot",t.CUBOID="cuboid",t.LSHAPE="l-shape",t.OCR="ocr",t.OCR_POLYGON="ocr-polygon",t.GRID="grid",t.RECOGNITION="recognition",t.ARROW="arrow",t.TWO_SIDES_CUBOID="two-sides-cuboid",t}({}),xo=Object.defineProperty,Da=Object.getOwnPropertySymbols,Ao=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable,Na=(t,a,n)=>a in t?xo(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,So=(t,a)=>{for(var n in a||(a={}))Ao.call(a,n)&&Na(t,n,a[n]);if(Da)for(var n of Da(a))Eo.call(a,n)&&Na(t,n,a[n]);return t};const Ad=t=>React.createElement("svg",So({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M20 4a2 2 0 0 1 1.001 3.732v8.536a2 2 0 1 1-2.733 2.733H5.732A2 2 0 1 1 3 16.268V7.732A2 2 0 1 1 5.732 5h12.536A2 2 0 0 1 20 4ZM4 17a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm16 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM18 6H6a2 2 0 0 1-2 2v8a2 2 0 0 1 2 2h12a2 2 0 0 1 2-2V8a2 2 0 0 1-2-2ZM4 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm16 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",fill:"#7A869A",fillRule:"nonzero"}));var bo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIwIDRhMiAyIDAgMCAxIDEuMDAxIDMuNzMydjguNTM2YTIgMiAwIDEgMS0yLjczMyAyLjczM0g1LjczMkEyIDIgMCAxIDEgMyAxNi4yNjhWNy43MzJBMiAyIDAgMSAxIDUuNzMyIDVoMTIuNTM2QTIgMiAwIDAgMSAyMCA0Wk00IDE3YTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMlptMTYgMGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaTTE4IDZINmEyIDIgMCAwIDEtMiAydjhhMiAyIDAgMCAxIDIgMmgxMmEyIDIgMCAwIDEgMi0yVjhhMiAyIDAgMCAxLTItMlpNNCA1YTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMlptMTYgMGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaIiBmaWxsPSIjN0E4NjlBIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",To=Object.defineProperty,La=Object.getOwnPropertySymbols,Do=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable,_a=(t,a,n)=>a in t?To(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Lo=(t,a)=>{for(var n in a||(a={}))Do.call(a,n)&&_a(t,n,a[n]);if(La)for(var n of La(a))No.call(a,n)&&_a(t,n,a[n]);return t};const Ed=t=>React.createElement("svg",Lo({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M12 16.5a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm0 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM3.5 10a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm17 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm-17 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm17 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM12 3.5a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm0 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM11.5 7h1v2h-1V7Zm0 8h1v2h-1v-2ZM4 13v5h7v1H3v-6h1Zm17 0v6h-8v-1h7v-5h1Zm-8.5-2.5v3h-1v-3h1ZM11 5v1H4v5H3V5h8Zm10 0v6h-1V6h-7V5h8Z",fill:"#7A869A",fillRule:"nonzero"}));var _o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDE2LjVhMiAyIDAgMSAxIDAgNCAyIDIgMCAwIDEgMC00Wm0wIDFhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWk0zLjUgMTBhMiAyIDAgMSAxIDAgNCAyIDIgMCAwIDEgMC00Wm0xNyAwYTIgMiAwIDEgMSAwIDQgMiAyIDAgMCAxIDAtNFptLTE3IDFhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWm0xNyAwYTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMlpNMTIgMy41YTIgMiAwIDEgMSAwIDQgMiAyIDAgMCAxIDAtNFptMCAxYTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMlpNMTEuNSA3aDF2MmgtMVY3Wm0wIDhoMXYyaC0xdi0yWk00IDEzdjVoN3YxSDN2LTZoMVptMTcgMHY2aC04di0xaDd2LTVoMVptLTguNS0yLjV2M2gtMXYtM2gxWk0xMSA1djFINHY1SDNWNWg4Wm0xMCAwdjZoLTFWNmgtN1Y1aDhaIiBmaWxsPSIjN0E4NjlBIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",wo=Object.defineProperty,wa=Object.getOwnPropertySymbols,Oo=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,Oa=(t,a,n)=>a in t?wo(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,ko=(t,a)=>{for(var n in a||(a={}))Oo.call(a,n)&&Oa(t,n,a[n]);if(wa)for(var n of wa(a))Po.call(a,n)&&Oa(t,n,a[n]);return t};const Sd=t=>React.createElement("svg",ko({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M20 4a2 2 0 0 1 1.001 3.732v8.536a2 2 0 1 1-2.733 2.733H5.732A2 2 0 1 1 3 16.268V7.732A2 2 0 1 1 5.732 5h12.536A2 2 0 0 1 20 4ZM4 17a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm16 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM6 6a2 2 0 0 1-2 2v8a2 2 0 0 1 2 2h4V6H6ZM4 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm16 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-9 13h7a2 2 0 0 1 2-2V8a2 2 0 0 1-2-2h-7v12Z",fill:"#7A869A",fillRule:"nonzero"}));var Ro="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIwIDRhMiAyIDAgMCAxIDEuMDAxIDMuNzMydjguNTM2YTIgMiAwIDEgMS0yLjczMyAyLjczM0g1LjczMkEyIDIgMCAxIDEgMyAxNi4yNjhWNy43MzJBMiAyIDAgMSAxIDUuNzMyIDVoMTIuNTM2QTIgMiAwIDAgMSAyMCA0Wk00IDE3YTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMlptMTYgMGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaTTYgNmEyIDIgMCAwIDEtMiAydjhhMiAyIDAgMCAxIDIgMmg0VjZINlpNNCA1YTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMlptMTYgMGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJabS05IDEzaDdhMiAyIDAgMCAxIDItMlY4YTIgMiAwIDAgMS0yLTJoLTd2MTJaIiBmaWxsPSIjN0E4NjlBIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",Zo=Object.defineProperty,Pa=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,ka=(t,a,n)=>a in t?Zo(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Fo=(t,a)=>{for(var n in a||(a={}))zo.call(a,n)&&ka(t,n,a[n]);if(Pa)for(var n of Pa(a))Uo.call(a,n)&&ka(t,n,a[n]);return t};const bd=t=>React.createElement("svg",Fo({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M11.5 4c4.65 0 8.52 2.813 9.34 6.529l.098.02A2 2 0 0 1 20.5 14.5h.027c-1.046 2.68-3.73 4.736-7.054 5.327l.003-.015a2 2 0 0 1-3.928.126l-.021-.111C5.227 19.063 2 15.849 2 12c0-4.418 4.253-8 9.5-8Zm0 14.5a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm0-13.5C6.771 5 3 8.176 3 12c0 3.3 2.808 6.117 6.616 6.827.222-.62.74-1.098 1.384-1.264V17h1l.001.563c.655.17 1.18.662 1.394 1.297l-.011-.034c2.899-.54 5.219-2.301 6.16-4.568l.042.021a2.004 2.004 0 0 1-1.023-1.278L17 13v-1h1.563a2.004 2.004 0 0 1 1.306-1.398l-.038.013C19.052 7.439 15.644 5 11.5 5Zm0 5.5a2 2 0 0 1 1.937 1.5H15v1l-1.563.001A2.004 2.004 0 0 1 12 14.437L12 15h-1v-.563a2 2 0 0 1 .5-3.937Zm0 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",fill:"#7A869A",fillRule:"nonzero"}));var Bo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTExLjUgNGM0LjY1IDAgOC41MiAyLjgxMyA5LjM0IDYuNTI5bC4wOTguMDJBMiAyIDAgMCAxIDIwLjUgMTQuNWguMDI3Yy0xLjA0NiAyLjY4LTMuNzMgNC43MzYtNy4wNTQgNS4zMjdsLjAwMy0uMDE1YTIgMiAwIDAgMS0zLjkyOC4xMjZsLS4wMjEtLjExMUM1LjIyNyAxOS4wNjMgMiAxNS44NDkgMiAxMmMwLTQuNDE4IDQuMjUzLTggOS41LThabTAgMTQuNWExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJabTAtMTMuNUM2Ljc3MSA1IDMgOC4xNzYgMyAxMmMwIDMuMyAyLjgwOCA2LjExNyA2LjYxNiA2LjgyNy4yMjItLjYyLjc0LTEuMDk4IDEuMzg0LTEuMjY0VjE3aDFsLjAwMS41NjNjLjY1NS4xNyAxLjE4LjY2MiAxLjM5NCAxLjI5N2wtLjAxMS0uMDM0YzIuODk5LS41NCA1LjIxOS0yLjMwMSA2LjE2LTQuNTY4bC4wNDIuMDIxYTIuMDA0IDIuMDA0IDAgMCAxLTEuMDIzLTEuMjc4TDE3IDEzdi0xaDEuNTYzYTIuMDA0IDIuMDA0IDAgMCAxIDEuMzA2LTEuMzk4bC0uMDM4LjAxM0MxOS4wNTIgNy40MzkgMTUuNjQ0IDUgMTEuNSA1Wm0wIDUuNWEyIDIgMCAwIDEgMS45MzcgMS41SDE1djFsLTEuNTYzLjAwMUEyLjAwNCAyLjAwNCAwIDAgMSAxMiAxNC40MzdMMTIgMTVoLTF2LS41NjNhMiAyIDAgMCAxIC41LTMuOTM3Wm0wIDFhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWm05IDBhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWiIgZmlsbD0iIzdBODY5QSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+",Vo=Object.defineProperty,Ra=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,Ho=Object.prototype.propertyIsEnumerable,Za=(t,a,n)=>a in t?Vo(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Go=(t,a)=>{for(var n in a||(a={}))Yo.call(a,n)&&Za(t,n,a[n]);if(Ra)for(var n of Ra(a))Ho.call(a,n)&&Za(t,n,a[n]);return t};const Td=t=>React.createElement("svg",Go({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M13 2a2 2 0 0 1 1.652 3.128l4.449 5.085A2 2 0 1 1 20 14l-.067-.003-1.215 4.136A2 2 0 1 1 16.268 21H7.732a2 2 0 1 1-2.736-2.731l-1.21-8.281a2 2 0 1 1 1.78-3.232l5.461-2.427A2 2 0 0 1 13 2ZM6 19a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM11.434 5.244 5.973 7.67a2 2 0 0 1-1.198 2.174L5.968 18H6a2 2 0 0 1 2 2h8a2 2 0 0 1 1.707-1.979l1.267-4.304a1.999 1.999 0 0 1-.626-2.845L13.9 5.787a1.995 1.995 0 0 1-2.36-.421l-.105-.122ZM20 11a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM4 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm9-4a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",fill:"#7A869A",fillRule:"nonzero"}));var Wo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEzIDJhMiAyIDAgMCAxIDEuNjUyIDMuMTI4bDQuNDQ5IDUuMDg1QTIgMiAwIDEgMSAyMCAxNGwtLjA2Ny0uMDAzLTEuMjE1IDQuMTM2QTIgMiAwIDEgMSAxNi4yNjggMjFINy43MzJhMiAyIDAgMSAxLTIuNzM2LTIuNzMxbC0xLjIxLTguMjgxYTIgMiAwIDEgMSAxLjc4LTMuMjMybDUuNDYxLTIuNDI3QTIgMiAwIDAgMSAxMyAyWk02IDE5YTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMlptMTIgMGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaTTExLjQzNCA1LjI0NCA1Ljk3MyA3LjY3YTIgMiAwIDAgMS0xLjE5OCAyLjE3NEw1Ljk2OCAxOEg2YTIgMiAwIDAgMSAyIDJoOGEyIDIgMCAwIDEgMS43MDctMS45NzlsMS4yNjctNC4zMDRhMS45OTkgMS45OTkgMCAwIDEtLjYyNi0yLjg0NUwxMy45IDUuNzg3YTEuOTk1IDEuOTk1IDAgMCAxLTIuMzYtLjQyMWwtLjEwNS0uMTIyWk0yMCAxMWExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaTTQgN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJabTktNGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaIiBmaWxsPSIjN0E4NjlBIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",Jo=Object.defineProperty,za=Object.getOwnPropertySymbols,Qo=Object.prototype.hasOwnProperty,Ko=Object.prototype.propertyIsEnumerable,Ua=(t,a,n)=>a in t?Jo(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,$o=(t,a)=>{for(var n in a||(a={}))Qo.call(a,n)&&Ua(t,n,a[n]);if(za)for(var n of za(a))Ko.call(a,n)&&Ua(t,n,a[n]);return t};const Dd=t=>React.createElement("svg",$o({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M20.8 4c.11 0 .2.09.2.2v10.405a.2.2 0 0 1-.044.125l-4.066 5.082a.499.499 0 0 1-.39.188h-13a.5.5 0 0 1-.5-.5v-11c0-.145.061-.275.16-.366l.063-.05 6.075-4.05A.2.2 0 0 1 9.41 4H20.8ZM16 9H4v10h12V9Zm3.999-3.293L17 8.706v9.367l3-3.75-.001-8.616ZM16.292 8l3-3H9.651l-4.5 3h11.141Z",fill:"#7A869A",fillRule:"nonzero"}));var Xo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIwLjggNGMuMTEgMCAuMi4wOS4yLjJ2MTAuNDA1YS4yLjIgMCAwIDEtLjA0NC4xMjVsLTQuMDY2IDUuMDgyYS40OTkuNDk5IDAgMCAxLS4zOS4xODhoLTEzYS41LjUgMCAwIDEtLjUtLjV2LTExYzAtLjE0NS4wNjEtLjI3NS4xNi0uMzY2bC4wNjMtLjA1IDYuMDc1LTQuMDVBLjIuMiAwIDAgMSA5LjQxIDRIMjAuOFpNMTYgOUg0djEwaDEyVjlabTMuOTk5LTMuMjkzTDE3IDguNzA2djkuMzY3bDMtMy43NS0uMDAxLTguNjE2Wk0xNi4yOTIgOGwzLTNIOS42NTFsLTQuNSAzaDExLjE0MVoiIGZpbGw9IiM3QTg2OUEiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==",qo=Object.defineProperty,Fa=Object.getOwnPropertySymbols,el=Object.prototype.hasOwnProperty,tl=Object.prototype.propertyIsEnumerable,Ba=(t,a,n)=>a in t?qo(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,nl=(t,a)=>{for(var n in a||(a={}))el.call(a,n)&&Ba(t,n,a[n]);if(Fa)for(var n of Fa(a))tl.call(a,n)&&Ba(t,n,a[n]);return t};const Nd=t=>React.createElement("svg",nl({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"m15.5 4 6.235 2.405a.4.4 0 0 1 .256.294l.009.083v9.47a.4.4 0 0 1-.158.32l-.063.039L15.5 20H2.4a.4.4 0 0 1-.4-.4V4.4c0-.22.18-.4.4-.4h13.1ZM9 17v2h6V5H9v2H8V5H3v14h5v-2h1Zm7-11.582v12.964l5-2.5V7.204l-5-1.786ZM9 9v2H8V9h1Zm-1 4h1v2H8v-2Z",fill:"#7A869A",fillRule:"nonzero"}));var al="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTE1LjUgNCA2LjIzNSAyLjQwNWEuNC40IDAgMCAxIC4yNTYuMjk0bC4wMDkuMDgzdjkuNDdhLjQuNCAwIDAgMS0uMTU4LjMybC0uMDYzLjAzOUwxNS41IDIwSDIuNGEuNC40IDAgMCAxLS40LS40VjQuNGMwLS4yMi4xOC0uNC40LS40aDEzLjFaTTkgMTd2Mmg2VjVIOXYySDhWNUgzdjE0aDV2LTJoMVptNy0xMS41ODJ2MTIuOTY0bDUtMi41VjcuMjA0bC01LTEuNzg2Wk05IDl2Mkg4VjloMVptLTEgNGgxdjJIOHYtMloiIGZpbGw9IiM3QTg2OUEiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==",il=Object.defineProperty,Va=Object.getOwnPropertySymbols,rl=Object.prototype.hasOwnProperty,ol=Object.prototype.propertyIsEnumerable,Ya=(t,a,n)=>a in t?il(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,ll=(t,a)=>{for(var n in a||(a={}))rl.call(a,n)&&Ya(t,n,a[n]);if(Va)for(var n of Va(a))ol.call(a,n)&&Ya(t,n,a[n]);return t};const Ld=t=>React.createElement("svg",ll({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M19.5 2.5a2 2 0 0 1 .501 3.937v11.126a2 2 0 1 1-2.438 2.438H6.437A2 2 0 1 1 4 17.563V6.437A2 2 0 1 1 6.437 4h11.126A2 2 0 0 1 19.5 2.5Zm-15 16a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm15 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM17.563 5.001H6.437A2.004 2.004 0 0 1 5 6.437v11.126A2.004 2.004 0 0 1 6.437 19h11.126A2.003 2.003 0 0 1 19 17.563V6.437a2.004 2.004 0 0 1-1.437-1.436ZM12.783 7.8 16 16.212h-1.473l-.766-2.109H10.24l-.766 2.11H8L11.216 7.8h1.568Zm-.754 1.485h-.047l-1.331 3.687h2.698l-1.32-3.687ZM4.5 3.5a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm15 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",fill:"#7A869A",fillRule:"nonzero"}));var sl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE5LjUgMi41YTIgMiAwIDAgMSAuNTAxIDMuOTM3djExLjEyNmEyIDIgMCAxIDEtMi40MzggMi40MzhINi40MzdBMiAyIDAgMSAxIDQgMTcuNTYzVjYuNDM3QTIgMiAwIDEgMSA2LjQzNyA0aDExLjEyNkEyIDIgMCAwIDEgMTkuNSAyLjVabS0xNSAxNmExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJabTE1IDBhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWk0xNy41NjMgNS4wMDFINi40MzdBMi4wMDQgMi4wMDQgMCAwIDEgNSA2LjQzN3YxMS4xMjZBMi4wMDQgMi4wMDQgMCAwIDEgNi40MzcgMTloMTEuMTI2QTIuMDAzIDIuMDAzIDAgMCAxIDE5IDE3LjU2M1Y2LjQzN2EyLjAwNCAyLjAwNCAwIDAgMS0xLjQzNy0xLjQzNlpNMTIuNzgzIDcuOCAxNiAxNi4yMTJoLTEuNDczbC0uNzY2LTIuMTA5SDEwLjI0bC0uNzY2IDIuMTFIOEwxMS4yMTYgNy44aDEuNTY4Wm0tLjc1NCAxLjQ4NWgtLjA0N2wtMS4zMzEgMy42ODdoMi42OThsLTEuMzItMy42ODdaTTQuNSAzLjVhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWm0xNSAwYTEgMSAwIDEgMCAwIDIgMSAxIDAgMCAwIDAtMloiIGZpbGw9IiM3QTg2OUEiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==",dl=Object.defineProperty,Ha=Object.getOwnPropertySymbols,ul=Object.prototype.hasOwnProperty,cl=Object.prototype.propertyIsEnumerable,Ga=(t,a,n)=>a in t?dl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,gl=(t,a)=>{for(var n in a||(a={}))ul.call(a,n)&&Ga(t,n,a[n]);if(Ha)for(var n of Ha(a))cl.call(a,n)&&Ga(t,n,a[n]);return t};const _d=t=>React.createElement("svg",gl({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M16 3a2 2 0 0 1 1.07 3.69l2.813 10.313L20 17a2 2 0 1 1-1.732 3.001H5.732A2 2 0 1 1 4 17l.116.004L6.93 6.69A2 2 0 1 1 9.732 4h4.536A2 2 0 0 1 16 3ZM4 18a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm16 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM14 5h-4a2 2 0 0 1-2 2l-.117-.005L5.07 17.31c.559.354.93.979.93 1.69h12c0-.711.371-1.336.93-1.69L16.116 6.997A2 2 0 0 1 14 5Zm-1.216 3L16 16.412h-1.473l-.766-2.109H10.24l-.766 2.11H8L11.216 8h1.568Zm-.755 1.485h-.047l-1.331 3.687h2.698l-1.32-3.687ZM8 4a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm8 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",fill:"#7A869A",fillRule:"nonzero"}));var ml="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE2IDNhMiAyIDAgMCAxIDEuMDcgMy42OWwyLjgxMyAxMC4zMTNMMjAgMTdhMiAyIDAgMSAxLTEuNzMyIDMuMDAxSDUuNzMyQTIgMiAwIDEgMSA0IDE3bC4xMTYuMDA0TDYuOTMgNi42OUEyIDIgMCAxIDEgOS43MzIgNGg0LjUzNkEyIDIgMCAwIDEgMTYgM1pNNCAxOGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJabTE2IDBhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWk0xNCA1aC00YTIgMiAwIDAgMS0yIDJsLS4xMTctLjAwNUw1LjA3IDE3LjMxYy41NTkuMzU0LjkzLjk3OS45MyAxLjY5aDEyYzAtLjcxMS4zNzEtMS4zMzYuOTMtMS42OUwxNi4xMTYgNi45OTdBMiAyIDAgMCAxIDE0IDVabS0xLjIxNiAzTDE2IDE2LjQxMmgtMS40NzNsLS43NjYtMi4xMDlIMTAuMjRsLS43NjYgMi4xMUg4TDExLjIxNiA4aDEuNTY4Wm0tLjc1NSAxLjQ4NWgtLjA0N2wtMS4zMzEgMy42ODdoMi42OThsLTEuMzItMy42ODdaTTggNGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJabTggMGExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaIiBmaWxsPSIjN0E4NjlBIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",hl=Object.defineProperty,Wa=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,Ja=(t,a,n)=>a in t?hl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,vl=(t,a)=>{for(var n in a||(a={}))pl.call(a,n)&&Ja(t,n,a[n]);if(Wa)for(var n of Wa(a))fl.call(a,n)&&Ja(t,n,a[n]);return t};const wd=t=>React.createElement("svg",vl({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M18 4a2 2 0 1 1-1.016 3.723l-9.261 9.26a2 2 0 1 1-.707-.707l9.261-9.26A2 2 0 0 1 18 4ZM6 17a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM18 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",fill:"#7A869A",fillRule:"nonzero"}));var yl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE4IDRhMiAyIDAgMSAxLTEuMDE2IDMuNzIzbC05LjI2MSA5LjI2YTIgMiAwIDEgMS0uNzA3LS43MDdsOS4yNjEtOS4yNkEyIDIgMCAwIDEgMTggNFpNNiAxN2ExIDEgMCAxIDAgMCAyIDEgMSAwIDAgMCAwLTJaTTE4IDVhMSAxIDAgMSAwIDAgMiAxIDEgMCAwIDAgMC0yWiIgZmlsbD0iIzdBODY5QSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+",Ml=Object.defineProperty,Qa=Object.getOwnPropertySymbols,Il=Object.prototype.hasOwnProperty,Cl=Object.prototype.propertyIsEnumerable,Ka=(t,a,n)=>a in t?Ml(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,jl=(t,a)=>{for(var n in a||(a={}))Il.call(a,n)&&Ka(t,n,a[n]);if(Qa)for(var n of Qa(a))Cl.call(a,n)&&Ka(t,n,a[n]);return t};const Od=t=>React.createElement("svg",jl({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M12 5a7 7 0 1 1 0 14 7 7 0 0 1 0-14Zm0 1a6 6 0 1 0 0 12 6 6 0 0 0 0-12Zm0 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Z",fill:"#7A869A",fillRule:"evenodd"}));var xl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDVhNyA3IDAgMSAxIDAgMTQgNyA3IDAgMCAxIDAtMTRabTAgMWE2IDYgMCAxIDAgMCAxMiA2IDYgMCAwIDAgMC0xMlptMCAzYTMgMyAwIDEgMSAwIDYgMyAzIDAgMCAxIDAtNloiIGZpbGw9IiM3QTg2OUEiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",Al=Object.defineProperty,$a=Object.getOwnPropertySymbols,El=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable,Xa=(t,a,n)=>a in t?Al(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,bl=(t,a)=>{for(var n in a||(a={}))El.call(a,n)&&Xa(t,n,a[n]);if($a)for(var n of $a(a))Sl.call(a,n)&&Xa(t,n,a[n]);return t};const Pd=t=>React.createElement("svg",bl({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M19 4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h14ZM9 15H5v4h4v-4Zm5 0h-4v4h4v-4Zm5 0h-4v4h4v-4ZM9 10H5v4h4v-4Zm5 0h-4v4h4v-4Zm5 0h-4v4h4v-4ZM9 5H5v4h4V5Zm5 0h-4v4h4V5Zm5 0h-4v4h4V5Z",fill:"#7A869A",fillRule:"nonzero"}));var Tl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE5IDRhMSAxIDAgMCAxIDEgMXYxNGExIDEgMCAwIDEtMSAxSDVhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTRaTTkgMTVINXY0aDR2LTRabTUgMGgtNHY0aDR2LTRabTUgMGgtNHY0aDR2LTRaTTkgMTBINXY0aDR2LTRabTUgMGgtNHY0aDR2LTRabTUgMGgtNHY0aDR2LTRaTTkgNUg1djRoNFY1Wm01IDBoLTR2NGg0VjVabTUgMGgtNHY0aDRWNVoiIGZpbGw9IiM3QTg2OUEiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==",Dl=Object.defineProperty,qa=Object.getOwnPropertySymbols,Nl=Object.prototype.hasOwnProperty,Ll=Object.prototype.propertyIsEnumerable,ei=(t,a,n)=>a in t?Dl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,_l=(t,a)=>{for(var n in a||(a={}))Nl.call(a,n)&&ei(t,n,a[n]);if(qa)for(var n of qa(a))Ll.call(a,n)&&ei(t,n,a[n]);return t};const kd=t=>React.createElement("svg",_l({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"m13.712 13.712 7.641 2.547a.2.2 0 0 1 .025.37L18.11 18.22a.2.2 0 0 0-.091.091l-1.643 3.323a.2.2 0 0 1-.37-.025l-2.548-7.645a.2.2 0 0 1 .253-.253ZM12 3a9 9 0 0 1 8.996 8.735L21 12h-1a8 8 0 1 0-8.25 7.996L12 20v1a9 9 0 0 1 0-18Zm2.914 12.167 1.427 4.283.964-1.948 1.873-.913-4.264-1.422ZM12 8a4 4 0 0 1 3.995 3.8L16 12h-1a3 3 0 1 0-3.176 2.995L12 15v1a4 4 0 1 1 0-8Z",fill:"#7A869A",fillRule:"nonzero"}));var wl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTEzLjcxMiAxMy43MTIgNy42NDEgMi41NDdhLjIuMiAwIDAgMSAuMDI1LjM3TDE4LjExIDE4LjIyYS4yLjIgMCAwIDAtLjA5MS4wOTFsLTEuNjQzIDMuMzIzYS4yLjIgMCAwIDEtLjM3LS4wMjVsLTIuNTQ4LTcuNjQ1YS4yLjIgMCAwIDEgLjI1My0uMjUzWk0xMiAzYTkgOSAwIDAgMSA4Ljk5NiA4LjczNUwyMSAxMmgtMWE4IDggMCAxIDAtOC4yNSA3Ljk5NkwxMiAyMHYxYTkgOSAwIDAgMSAwLTE4Wm0yLjkxNCAxMi4xNjcgMS40MjcgNC4yODMuOTY0LTEuOTQ4IDEuODczLS45MTMtNC4yNjQtMS40MjJaTTEyIDhhNCA0IDAgMCAxIDMuOTk1IDMuOEwxNiAxMmgtMWEzIDMgMCAxIDAtMy4xNzYgMi45OTVMMTIgMTV2MWE0IDQgMCAxIDEgMC04WiIgZmlsbD0iIzdBODY5QSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+",Ol=Object.defineProperty,ti=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,kl=Object.prototype.propertyIsEnumerable,ni=(t,a,n)=>a in t?Ol(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Rl=(t,a)=>{for(var n in a||(a={}))Pl.call(a,n)&&ni(t,n,a[n]);if(ti)for(var n of ti(a))kl.call(a,n)&&ni(t,n,a[n]);return t};const Rd=t=>React.createElement("svg",Rl({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"m18.955 4 1.465 4.255-.946.325-.918-2.665-2.243 4.486c.386.336.642.818.682 1.36l.005.149a2 2 0 0 1-3.937.5h-2.126a2 2 0 0 1-2.356 1.456L7.313 16.4a2 2 0 1 1-.894-.448l1.268-2.535a2 2 0 1 1 3.25-2.01h2.127a2 2 0 0 1 2.354-1.455L17.64 5.51l-2.614.9-.326-.945L18.955 4ZM6 16.91h-.011l-.05.003-.056.003a1 1 0 1 0 .961.458l-.01-.015-.065-.088a1.006 1.006 0 0 0-.077-.083l.048.05a1.006 1.006 0 0 0-.092-.09l.044.04a1.006 1.006 0 0 0-.082-.07l.038.03a1.004 1.004 0 0 0-.092-.07l.054.04a1.002 1.002 0 0 0-.096-.066l.042.026a1 1 0 0 0-.1-.059l.058.033a.997.997 0 0 0-.11-.057l.051.024a.995.995 0 0 0-.096-.043l.045.019a.993.993 0 0 0-.114-.043l.069.024a.992.992 0 0 0-.124-.038l.055.014a.993.993 0 0 0-.093-.023l.038.009a.996.996 0 0 0-.116-.021l.078.012A1.005 1.005 0 0 0 6 16.91Zm3-6a1 1 0 0 0-.694 1.72l-.042-.044c.027.03.057.059.088.085l-.046-.042c.026.026.055.05.084.073l-.038-.03c.03.024.06.048.092.07l-.054-.04c.032.025.065.047.1.068l-.046-.029a1 1 0 0 0 .092.055l-.046-.026a.997.997 0 0 0 .12.06l-.074-.034a.995.995 0 0 0 .103.047l-.029-.012a.992.992 0 0 0 .113.04l-.084-.028a.992.992 0 0 0 .116.037l-.032-.01c.035.01.071.02.108.025l-.076-.015c.041.01.083.018.126.023l-.05-.008c.055.01.111.015.169.015l.061-.005.056-.002a1.001 1.001 0 0 0 .84-.7l-.026.073a.992.992 0 0 0 .038-.118l-.013.045a.993.993 0 0 0 .029-.118l-.016.073a.996.996 0 0 0 .023-.124l-.007.05c.01-.056.015-.115.015-.174l-.008-.125a.999.999 0 0 0-.024-.127l.017.08a.993.993 0 0 0-.03-.124l.013.044a.992.992 0 0 0-.038-.116l.026.072a.993.993 0 0 0-.042-.11l.016.038a.995.995 0 0 0-.053-.114l.037.076A1 1 0 0 0 9 10.91Zm5.883.006a1.001 1.001 0 0 0-.838.698l.025-.072a.992.992 0 0 0-.038.116l.013-.044a.993.993 0 0 0-.03.124l.017-.08a.996.996 0 0 0-.024.127l.007-.047c-.01.055-.015.113-.015.172l.008.124a.998.998 0 0 0 .023.124l-.016-.073c.007.04.017.08.029.119l-.013-.046c.01.04.023.08.038.118l-.025-.072a.993.993 0 0 0 .042.111l-.017-.039c.016.04.034.078.054.115l-.037-.076a1 1 0 1 0 1.758-.941l-.01-.015-.065-.088a1.006 1.006 0 0 0-.077-.083l.048.05a1.006 1.006 0 0 0-.092-.09l.044.04a1.006 1.006 0 0 0-.082-.07l.038.03a1.004 1.004 0 0 0-.092-.07l.054.04a1.002 1.002 0 0 0-.096-.066l.042.026a1 1 0 0 0-.1-.059l.058.033a.997.997 0 0 0-.11-.057l.051.024a.995.995 0 0 0-.096-.043l.045.019a.993.993 0 0 0-.114-.043l.069.024a.992.992 0 0 0-.124-.038l.055.014a.993.993 0 0 0-.093-.023l.038.009a.996.996 0 0 0-.116-.021L15 10.91l-.062.003-.055.003Z",fill:"#7A869A",fillRule:"nonzero"}));var Zl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTE4Ljk1NSA0IDEuNDY1IDQuMjU1LS45NDYuMzI1LS45MTgtMi42NjUtMi4yNDMgNC40ODZjLjM4Ni4zMzYuNjQyLjgxOC42ODIgMS4zNmwuMDA1LjE0OWEyIDIgMCAwIDEtMy45MzcuNWgtMi4xMjZhMiAyIDAgMCAxLTIuMzU2IDEuNDU2TDcuMzEzIDE2LjRhMiAyIDAgMSAxLS44OTQtLjQ0OGwxLjI2OC0yLjUzNWEyIDIgMCAxIDEgMy4yNS0yLjAxaDIuMTI3YTIgMiAwIDAgMSAyLjM1NC0xLjQ1NUwxNy42NCA1LjUxbC0yLjYxNC45LS4zMjYtLjk0NUwxOC45NTUgNFpNNiAxNi45MWgtLjAxMWwtLjA1LjAwMy0uMDU2LjAwM2ExIDEgMCAxIDAgLjk2MS40NThsLS4wMS0uMDE1LS4wNjUtLjA4OGExLjAwNiAxLjAwNiAwIDAgMC0uMDc3LS4wODNsLjA0OC4wNWExLjAwNiAxLjAwNiAwIDAgMC0uMDkyLS4wOWwuMDQ0LjA0YTEuMDA2IDEuMDA2IDAgMCAwLS4wODItLjA3bC4wMzguMDNhMS4wMDQgMS4wMDQgMCAwIDAtLjA5Mi0uMDdsLjA1NC4wNGExLjAwMiAxLjAwMiAwIDAgMC0uMDk2LS4wNjZsLjA0Mi4wMjZhMSAxIDAgMCAwLS4xLS4wNTlsLjA1OC4wMzNhLjk5Ny45OTcgMCAwIDAtLjExLS4wNTdsLjA1MS4wMjRhLjk5NS45OTUgMCAwIDAtLjA5Ni0uMDQzbC4wNDUuMDE5YS45OTMuOTkzIDAgMCAwLS4xMTQtLjA0M2wuMDY5LjAyNGEuOTkyLjk5MiAwIDAgMC0uMTI0LS4wMzhsLjA1NS4wMTRhLjk5My45OTMgMCAwIDAtLjA5My0uMDIzbC4wMzguMDA5YS45OTYuOTk2IDAgMCAwLS4xMTYtLjAyMWwuMDc4LjAxMkExLjAwNSAxLjAwNSAwIDAgMCA2IDE2LjkxWm0zLTZhMSAxIDAgMCAwLS42OTQgMS43MmwtLjA0Mi0uMDQ0Yy4wMjcuMDMuMDU3LjA1OS4wODguMDg1bC0uMDQ2LS4wNDJjLjAyNi4wMjYuMDU1LjA1LjA4NC4wNzNsLS4wMzgtLjAzYy4wMy4wMjQuMDYuMDQ4LjA5Mi4wN2wtLjA1NC0uMDRjLjAzMi4wMjUuMDY1LjA0Ny4xLjA2OGwtLjA0Ni0uMDI5YTEgMSAwIDAgMCAuMDkyLjA1NWwtLjA0Ni0uMDI2YS45OTcuOTk3IDAgMCAwIC4xMi4wNmwtLjA3NC0uMDM0YS45OTUuOTk1IDAgMCAwIC4xMDMuMDQ3bC0uMDI5LS4wMTJhLjk5Mi45OTIgMCAwIDAgLjExMy4wNGwtLjA4NC0uMDI4YS45OTIuOTkyIDAgMCAwIC4xMTYuMDM3bC0uMDMyLS4wMWMuMDM1LjAxLjA3MS4wMi4xMDguMDI1bC0uMDc2LS4wMTVjLjA0MS4wMS4wODMuMDE4LjEyNi4wMjNsLS4wNS0uMDA4Yy4wNTUuMDEuMTExLjAxNS4xNjkuMDE1bC4wNjEtLjAwNS4wNTYtLjAwMmExLjAwMSAxLjAwMSAwIDAgMCAuODQtLjdsLS4wMjYuMDczYS45OTIuOTkyIDAgMCAwIC4wMzgtLjExOGwtLjAxMy4wNDVhLjk5My45OTMgMCAwIDAgLjAyOS0uMTE4bC0uMDE2LjA3M2EuOTk2Ljk5NiAwIDAgMCAuMDIzLS4xMjRsLS4wMDcuMDVjLjAxLS4wNTYuMDE1LS4xMTUuMDE1LS4xNzRsLS4wMDgtLjEyNWEuOTk5Ljk5OSAwIDAgMC0uMDI0LS4xMjdsLjAxNy4wOGEuOTkzLjk5MyAwIDAgMC0uMDMtLjEyNGwuMDEzLjA0NGEuOTkyLjk5MiAwIDAgMC0uMDM4LS4xMTZsLjAyNi4wNzJhLjk5My45OTMgMCAwIDAtLjA0Mi0uMTFsLjAxNi4wMzhhLjk5NS45OTUgMCAwIDAtLjA1My0uMTE0bC4wMzcuMDc2QTEgMSAwIDAgMCA5IDEwLjkxWm01Ljg4My4wMDZhMS4wMDEgMS4wMDEgMCAwIDAtLjgzOC42OThsLjAyNS0uMDcyYS45OTIuOTkyIDAgMCAwLS4wMzguMTE2bC4wMTMtLjA0NGEuOTkzLjk5MyAwIDAgMC0uMDMuMTI0bC4wMTctLjA4YS45OTYuOTk2IDAgMCAwLS4wMjQuMTI3bC4wMDctLjA0N2MtLjAxLjA1NS0uMDE1LjExMy0uMDE1LjE3MmwuMDA4LjEyNGEuOTk4Ljk5OCAwIDAgMCAuMDIzLjEyNGwtLjAxNi0uMDczYy4wMDcuMDQuMDE3LjA4LjAyOS4xMTlsLS4wMTMtLjA0NmMuMDEuMDQuMDIzLjA4LjAzOC4xMThsLS4wMjUtLjA3MmEuOTkzLjk5MyAwIDAgMCAuMDQyLjExMWwtLjAxNy0uMDM5Yy4wMTYuMDQuMDM0LjA3OC4wNTQuMTE1bC0uMDM3LS4wNzZhMSAxIDAgMSAwIDEuNzU4LS45NDFsLS4wMS0uMDE1LS4wNjUtLjA4OGExLjAwNiAxLjAwNiAwIDAgMC0uMDc3LS4wODNsLjA0OC4wNWExLjAwNiAxLjAwNiAwIDAgMC0uMDkyLS4wOWwuMDQ0LjA0YTEuMDA2IDEuMDA2IDAgMCAwLS4wODItLjA3bC4wMzguMDNhMS4wMDQgMS4wMDQgMCAwIDAtLjA5Mi0uMDdsLjA1NC4wNGExLjAwMiAxLjAwMiAwIDAgMC0uMDk2LS4wNjZsLjA0Mi4wMjZhMSAxIDAgMCAwLS4xLS4wNTlsLjA1OC4wMzNhLjk5Ny45OTcgMCAwIDAtLjExLS4wNTdsLjA1MS4wMjRhLjk5NS45OTUgMCAwIDAtLjA5Ni0uMDQzbC4wNDUuMDE5YS45OTMuOTkzIDAgMCAwLS4xMTQtLjA0M2wuMDY5LjAyNGEuOTkyLjk5MiAwIDAgMC0uMTI0LS4wMzhsLjA1NS4wMTRhLjk5My45OTMgMCAwIDAtLjA5My0uMDIzbC4wMzguMDA5YS45OTYuOTk2IDAgMCAwLS4xMTYtLjAyMUwxNSAxMC45MWwtLjA2Mi4wMDMtLjA1NS4wMDNaIiBmaWxsPSIjN0E4NjlBIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=",zl=Object.defineProperty,ai=Object.getOwnPropertySymbols,Ul=Object.prototype.hasOwnProperty,Fl=Object.prototype.propertyIsEnumerable,ii=(t,a,n)=>a in t?zl(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Bl=(t,a)=>{for(var n in a||(a={}))Ul.call(a,n)&&ii(t,n,a[n]);if(ai)for(var n of ai(a))Fl.call(a,n)&&ii(t,n,a[n]);return t};const Zd=t=>React.createElement("svg",Bl({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},t),React.createElement("title",null,"Slice"),React.createElement("path",{d:"M16 16v2h2v1h-2v2h-1v-2h-2v-1h2v-2h1Zm0-7v4h3V5H8v4h8Zm-1 5v-4H4v8h7v1H3V9h4V4h13v10h-5Z",fill:"#7A869A",fillRule:"nonzero"}));var Vl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE2IDE2djJoMnYxaC0ydjJoLTF2LTJoLTJ2LTFoMnYtMmgxWm0wLTd2NGgzVjVIOHY0aDhabS0xIDV2LTRINHY4aDd2MUgzVjloNFY0aDEzdjEwaC01WiIgZmlsbD0iIzdBODY5QSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+",Fn,Yl=(Fn={},W()(W()(W()(W()(W()(W()(W()(W()(W()(W()(Fn,ge.RECTANGLE,bo),ge.FOUR_DOTS_RECTANGLE,_o),ge.CENTERLINE_RECTANGLE,Ro),ge.ELLIPSE,Bo),ge.POLYGON,Wo),ge.CUBOID,Xo),ge.LSHAPE,al),ge.OCR,sl),ge.OCR_POLYGON,ml),ge.LINE,yl),W()(W()(W()(W()(W()(Fn,ge.DOT,xl),ge.GRID,Tl),ge.RECOGNITION,wl),ge.ARROW,Zl),ge.TWO_SIDES_CUBOID,Vl)),Hl=function(a){var n=a.tool,r=Yl[n];return r?(0,e.jsx)("img",{src:r,alt:n}):null},Gl=Hl,Wl=Me.Z.Option,Jl=function(a){var n=a.value,r=a.onChange,i=(0,X.useIntl)(),o=i.formatMessage;return(0,e.jsx)(Me.Z,{className:Ne["tool-selector"],dropdownClassName:Ne["tool-selector-dropdown"],value:n,onChange:r,children:[ge.RECTANGLE,ge.POLYGON,ge.LINE,ge.DOT].map(function(u){return(0,e.jsxs)(Wl,{value:u,children:[(0,e.jsx)(Gl,{tool:u}),(0,e.jsx)("span",{children:o({id:"tool.general-image.tool.".concat(u)})})]},u)})})},Ql=Jl;function Kl(t){return t.fill_color!==void 0||t.point_color!==void 0||t.points_color!==void 0||t.point_type!==void 0||t.points_type!==void 0||t.edge_color!==void 0||t.edges_color!==void 0||t.edge_type!==void 0||t.edges_type!==void 0||t.edge_bold!==void 0||t.edges_bold!==void 0}var $l=d.forwardRef(function(t,a){var n,r,i=t.multipleMode,o=i===void 0?!0:i,u=t.child,l=t.onChange,m=t.onDelete,c=t.validateChildName,g=(0,X.useIntl)(),h=g.formatMessage,p=B.Z.useForm(),M=P()(p,1),C=M[0],v=(0,d.useState)(ge.RECTANGLE),j=P()(v,2),f=j[0],x=j[1],y=(0,d.useState)(!1),w=P()(y,2),b=w[0],S=w[1],R=(0,d.useState)(!1),D=P()(R,2),O=D[0],I=D[1],A=(0,d.useState)(null),N=P()(A,2),z=N[0],Z=N[1],k=(0,d.useRef)(!1),G=((n=u.label_config_groups)===null||n===void 0?void 0:n.length)>0||((r=u.label_config_point_groups)===null||r===void 0?void 0:r.length)>0||Kl(u.tools[0]),Y=function(){var K=u.tools[0].edges;[ge.POLYGON,ge.LINE,ge.ARROW].includes(f)&&K!==void 0&&K!==null?(I(!0),Z(f===ge.POLYGON?Math.max(K,3):K)):(I(!1),Z(null))};(0,d.useEffect)(function(){k.current=!1,C.resetFields(),x(u.tools[0].type),S(u.tools[0].models||!1),Y()},[u]),(0,d.useEffect)(function(){S(f===ge.POLYGON?!!u.tools[0].models:!1),Y()},[f]),(0,d.useEffect)(function(){if(k.current){var V=s()({},u.tools[0]);V.type=f,V.models=b,O?V.edges=z:delete V.edges,l(s()(s()({},u),{},{tools:[V]}))}},[f,b,O,z]),(0,d.useImperativeHandle)(a,function(){return{validate:function(){return new Promise(function(K){C.validateFields().then(function(){return K(!0)}).catch(function(){return K(!1)})})}}});var L=function(){C.validateFields().then(function(K){l(s()(s()({},u),K))})},T=function(K){var $=s()({},K);delete $.name,$.label_config&&delete u.label_config_groups,$.label_config_point&&delete u.label_config_point_groups,Object.keys($).length>0&&l(s()(s()({},u),$))},E=function(K){G?Re.Z.confirm({title:h({id:"tool.general-image.child.tool.change.confirm"}),onOk:function(){k.current=!0,x(K),u.tools[0]={type:u.tools[0].type,edges:u.tools[0].edges},delete u.label_config_groups,delete u.label_config_point_groups}}):(k.current=!0,x(K))},F=function(K){k.current=!0;var $=K.target.checked;S($)},Q=function(K){k.current=!0;var $=K.target.checked;I($),$&&Z(5)},H=function(K){k.current=!0,Z(K)};return(0,e.jsxs)(e.Fragment,{children:[o&&(0,e.jsx)("div",{className:Ne.header,children:(0,e.jsx)(qt.Z,{title:h({id:"tool.general-image.child.delete.confirm"}),placement:"bottomLeft",onConfirm:function(){m&&m(u.key)},children:(0,e.jsx)(J.ZP,{type:"link",danger:!0,children:h({id:"tool.general-image.child.delete"})})})}),(0,e.jsx)(B.Z,{form:C,layout:"vertical",requiredMark:!1,initialValues:u,onValuesChange:T,children:(0,e.jsxs)(Ge.Z,{gutter:16,children:[o&&(0,e.jsx)(ae.Z,{span:12,children:(0,e.jsx)(B.Z.Item,{name:"name",label:h({id:"tool.general-image.child.name.label"}),rules:[{required:!0,message:h({id:"tool.general-image.child.name.required"})},{validator:function(K,$){return!$||!c||c(u.key,$)?Promise.resolve():Promise.reject(new Error(h({id:"tool.general-image.child.name.exist"})))}}],children:(0,e.jsx)(ne.Z,{placeholder:h({id:"tool.general-image.child.name.placeholder"}),onBlur:L})})}),(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsx)(B.Z.Item,{name:"label_config",label:h({id:o?"tool.general-image.child.attr.label":"tool.general-image.child.attr.label-simple"}),children:(0,e.jsx)(Un,{})})}),o&&(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsx)(B.Z.Item,{label:h({id:"tool.general-image.child.count.label"}),children:(0,e.jsx)(jo,{count:u.count,max_count:u.max_count,min_count:u.min_count,onChange:function(K){return l(s()(s()({},u),K))}})})}),(0,e.jsx)(ae.Z,{span:12,children:(0,e.jsx)(B.Z.Item,{label:h({id:o?"tool.general-image.child.tool.label":"tool.general-image.child.tool.label-simple"}),children:(0,e.jsx)(Ql,{value:f,onChange:E})})}),(0,e.jsx)(ae.Z,{span:12,style:{display:"flex"},children:(0,e.jsx)(B.Z.Item,{name:"display_color",label:" ",children:(0,e.jsx)(ua,{})})}),[ge.POLYGON,ge.LINE,ge.ARROW].includes(f)&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsx)(B.Z.Item,{name:"label_config_point",label:h({id:"tool.general-image.child.point-attr.label"}),children:(0,e.jsx)(Un,{})})})})]})})]})}),ri=$l,Xl=d.forwardRef(function(t,a){var n=t.ontologyItem,r=t.onChange,i=t.onDelete,o=t.validateOntologyClass,u=(0,X.useIntl)(),l=u.formatMessage,m=B.Z.useForm(),c=P()(m,1),g=c[0];(0,d.useEffect)(function(){g.resetFields()},[n]),(0,d.useImperativeHandle)(a,function(){return{validate:function(){return new Promise(function(v){g.validateFields().then(function(){return v(!0)}).catch(function(){return v(!1)})})}}});var h=function(){g.validateFields().then(function(v){r(s()(s()({},n),v))})},p=function(v){var j=s()({},v);delete j.class_name,delete j.display_name;var f=s()(s()({},n),j);j.multiple!==void 0?Re.Z.confirm({title:l({id:"tool.general-image.ontology.multiple.confirm"}),onOk:function(){j.multiple?delete f.children:f.children=[{key:(0,We.x0)(),name:l({id:"tool.general-image.new-child"}),count:1,display_color:f.display_color,tools:[{type:ge.RECTANGLE}]}],r(f)},onCancel:function(){f.multiple=!f.multiple,r(f)}}):Object.keys(j).length>0&&r(f)},M=function(v){r(s()(s()({},n),{},{display_color:v.display_color,children:[v]}))};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Ne.header,children:(0,e.jsx)(qt.Z,{title:l({id:"tool.general-image.ontology.delete.confirm"}),placement:"bottomLeft",onConfirm:function(){return i(n.key)},children:(0,e.jsx)(J.ZP,{type:"link",danger:!0,children:l({id:"tool.general-image.ontology.delete"})})})}),(0,e.jsx)(B.Z,{form:g,layout:"vertical",requiredMark:!1,initialValues:n,onValuesChange:p,children:(0,e.jsxs)(Ge.Z,{gutter:16,children:[(0,e.jsx)(ae.Z,{span:12,children:(0,e.jsx)(B.Z.Item,{name:"class_name",label:l({id:"tool.general-image.ontology.class-name.label"}),rules:[{required:!0,message:l({id:"tool.general-image.ontology.class-name.required"})},{validator:function(v,j){return!j||o(n.key,j)?Promise.resolve():Promise.reject(new Error(l({id:"tool.general-image.ontology.class-name.exist"})))}}],children:(0,e.jsx)(ne.Z,{placeholder:l({id:"tool.general-image.ontology.class-name.placeholder"}),onBlur:h})})}),(0,e.jsx)(ae.Z,{span:12,children:(0,e.jsx)(B.Z.Item,{name:"display_name",label:l({id:"tool.general-image.ontology.display-name.label"}),children:(0,e.jsx)(ne.Z,{placeholder:l({id:"tool.general-image.ontology.display-name.placeholder"}),onBlur:h})})}),(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsx)(B.Z.Item,{name:"label_config",label:l({id:"tool.general-image.ontology.attr.label"}),children:(0,e.jsx)(Un,{})})}),(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsx)(B.Z.Item,{name:"multiple",label:l({id:"tool.general-image.ontology.multiple.label"}),valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})})]})}),!n.multiple&&(0,e.jsx)(ri,{multipleMode:!1,child:n.children[0],onChange:M})]})}),ql=Xl,es=d.forwardRef(function(t,a){var n=t.ontologies,r=(0,X.useIntl)(),i=r.formatMessage,o=(0,d.useState)([]),u=P()(o,2),l=u[0],m=u[1],c=(0,d.useState)("ontology"),g=P()(c,2),h=g[0],p=g[1],M=(0,d.useState)(null),C=P()(M,2),v=C[0],j=C[1],f=(0,d.useState)(null),x=P()(f,2),y=x[0],w=x[1],b=(0,d.useRef)(),S=(0,d.useRef)();(0,d.useEffect)(function(){var L=[];Array.isArray(n)&&n.length>0&&n.forEach(function(T){var E=s()({},T);if(E.key||(E.key=(0,We.x0)()),E.multiple===void 0&&(E.multiple=!0),E.children){var F=[];E.children.forEach(function(Q){var H=s()({},Q);if(H.key||(H.key=(0,We.x0)()),H.display_color||(H.display_color=E.display_color),!H.tools&&H.type){var V=H.type.split(",").map(function(K){return{type:K,edges:H.edges}});delete H.type,delete H.edges,F.push.apply(F,ee()(V.map(function(K,$){return s()(s()({},H),{},{key:(0,We.x0)(),count:1,name:V.length===1||$===0?H.name:"".concat(H.name," ").concat($+1),tools:[K]})})))}else F.push(H)}),E.children=F}L.push(E)}),m(L),L.length>0&&(p("ontology"),j(L[0]),w(null))},[n]),(0,d.useImperativeHandle)(a,function(){return{getData:function(){return l}}});var R=function(T,E){return l.every(function(F){return F.key===T||F.class_name!==E})},D=function(T,E){return!v||!v.children?!0:v.children.every(function(F){return F.key===T||F.name!==E})},O=function(){return h==="ontology"&&v&&b.current?b.current.validate():h==="child"&&y&&S.current?S.current.validate():Promise.resolve(!0)},I=function(){var L=Pe()(ve()().mark(function T(E){var F,Q,H=arguments;return ve()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(F=H.length>1&&H[1]!==void 0?H[1]:!1,K.t0=F,K.t0){K.next=6;break}return K.next=5,O();case 5:K.t0=K.sent;case 6:Q=K.t0,Q&&(p("ontology"),j(E),w(null));case 8:case"end":return K.stop()}},T)}));return function(E){return L.apply(this,arguments)}}(),A=function(){var L=Pe()(ve()().mark(function T(E,F){var Q,H,V=arguments;return ve()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Q=V.length>2&&V[2]!==void 0?V[2]:!1,$.t0=Q,$.t0){$.next=6;break}return $.next=5,O();case 5:$.t0=$.sent;case 6:H=$.t0,H&&(p("child"),j(E),w(F));case 8:case"end":return $.stop()}},T)}));return function(E,F){return L.apply(this,arguments)}}(),N=function(){var L=Pe()(ve()().mark(function T(){var E,F,Q;return ve()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,O();case 2:E=V.sent,E&&(F=_n()(),Q={key:(0,We.x0)(),class_name:i({id:"tool.general-image.new-ontology"}),display_color:F,multiple:!1,children:[{key:(0,We.x0)(),name:i({id:"tool.general-image.new-child"}),count:1,display_color:F,tools:[{type:ge.RECTANGLE}]}]},m([].concat(ee()(l),[Q])),I(Q,!0));case 4:case"end":return V.stop()}},T)}));return function(){return L.apply(this,arguments)}}(),z=function(){var L=Pe()(ve()().mark(function T(E){var F,Q,H,V;return ve()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,O();case 2:F=$.sent,F&&(Q={key:(0,We.x0)(),name:i({id:"tool.general-image.new-child"}),display_color:E.display_color,tools:[{type:ge.RECTANGLE}]},H=ee()(l),V=H.findIndex(function(re){return re.key===E.key}),V>=0&&(H[V].children||(H[V].children=[]),H[V].children.push(Q)),m(H),A(E,Q,!0));case 4:case"end":return $.stop()}},T)}));return function(E){return L.apply(this,arguments)}}(),Z=function(T){var E=ee()(l),F=E.findIndex(function(Q){return Q.key===T.key});F>=0&&(E[F]=s()({},T),I(E[F])),m(E)},k=function(T){var E=ee()(l),F=E.findIndex(function(H){return H.key===v.key});if(F>=0){var Q=E[F].children.findIndex(function(H){return H.key===T.key});Q>=0&&(E[F].children[Q]=s()({},T),A(v,E[F].children[Q]))}m(E)},G=function(T){var E=ee()(l),F=E.findIndex(function(H){return H.key===T});F>=0&&E.splice(F,1),m(E);var Q=E[Math.max(F,0)];I(Q,!0)},Y=function(T){var E=ee()(l),F=E.findIndex(function(H){return H.key===v.key});if(F>=0){var Q=E[F].children.findIndex(function(H){return H.key===T});Q>=0&&E[F].children.splice(Q,1)}m(E),I(v,!0)};return(0,e.jsxs)("div",{className:Ne.container,children:[(0,e.jsxs)("div",{className:Ne.list,children:[l.map(function(L){return(0,e.jsx)(yo,{ontologyItem:L,editType:h,editItem:v,editChild:y,onItemSelected:function(){return I(L)},onChildSelected:function(E){return A(L,E)},onChildAdd:function(){return z(L)}},L.key)}),(0,e.jsx)("div",{className:Ne.add,onClick:N,children:(0,e.jsx)("a",{children:i({id:"tool.general-image.ontology.add"})})})]}),(0,e.jsxs)("div",{className:Ne.editor,children:[h==="ontology"&&v&&(0,e.jsx)(ql,{ref:b,ontologyItem:v,onChange:Z,onDelete:G,validateOntologyClass:R}),h==="child"&&y&&(0,e.jsx)(ri,{ref:S,child:y,onChange:k,onDelete:Y,validateChildName:D})]})]})}),ts=es,ln=_(73095),oi=_(4798),ns=_(68873);function as(t,a){var n=t.loading,r=n===void 0?!1:n,i=t.problemTypes,o=(0,X.useIntl)(),u=o.formatMessage,l=(0,d.useState)([]),m=P()(l,2),c=m[0],g=m[1];(0,d.useEffect)(function(){g(i.map(function(C){return{key:(0,We.x0)(),value:C}}))},[i]),(0,d.useImperativeHandle)(a,function(){var C=c.map(function(j){return j.value}),v=Array.from(new Set(C));return v.filter(function(j){return!!j})});var h=function(){g([].concat(ee()(c),[{key:(0,We.x0)(),value:""}]))},p=function(v){var j=c.filter(function(f){return f.key!==v});g(j)},M=function(v,j){var f=c.map(function(x){return j===x.key?{key:j,value:v.target.value}:x});g(f)};return(0,e.jsxs)(ns.Z,{loading:r,children:[c.map(function(C){return(0,e.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,e.jsx)(ne.Z,{style:{width:"90%"},placeholder:u({id:"template.qa.problem.config.placeholder"}),value:C.value,onChange:function(j){return M(j,C.key)}}),(0,e.jsx)(J.ZP,{type:"link",icon:(0,e.jsx)(lt.Z,{}),onClick:function(){return p(C.key)}})]},C.key)}),(0,e.jsx)(J.ZP,{block:!0,type:"dashed",onClick:h,style:{width:"90%"},children:u({id:"template.qa.problem.config.add"})})]})}var is=(0,d.forwardRef)(as);function rs(t,a,n){switch(n){case U.WY.TRANSCRIPTION:return(0,e.jsx)(wn,{ref:t,type:n,ontologies:a});case U.WY.TEXT:return(0,e.jsx)(Nr,{ref:t,config:a});case U.WY.LIDAR:return(0,e.jsx)(wn,{ref:t,type:n,ontologies:a,options:{descriptionType:"richtext",sizeEnabled:!0}});case U.WY.LIDAR_SSE:return(0,e.jsx)(wn,{ref:t,type:n,ontologies:a,options:{descriptionType:"richtext"}});case U.WY.LANDMARK:return(0,e.jsx)(ho,{ref:t,type:n,ontologies:a});case U.WY.GENERAL_IMAGE:return(0,e.jsx)(ts,{ref:t,ontologies:a});default:return null}}var os=function(a){var n=a.templateInfo,r=a.dispatch,i=a.ontologyEditorRef,o=a.issueTypeEditorRef,u=a.previewScope,l=a.onSave,m=(0,X.useIntl)(),c=m.formatMessage;console.log("templateInfo.type",n.type);var g=(0,qe.Z)(),h=g.query,p=h.action,M=h.projectId,C=(0,d.useState)("editor"),v=P()(C,2),j=v[0],f=v[1],x=(0,d.useState)(null),y=P()(x,2),w=y[0],b=y[1];(0,d.useEffect)(function(){n&&f(n.type===U.WY.CUSTOM?"editor":"config")},[]);var S=function(I){var A=[];try{if(i.current){var N;A=(N=i.current)===null||N===void 0?void 0:N.getData(),I&&I(A)}}catch(z){ue.ZP.error(z.message)}return A},R=function(){S(function(I){var A={type:n.type,ontology:I},N="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(A)));(0,He.Sv)({url:N,fileName:"config-".concat(n.id,".json")})})},D=function(){var I=document.createElement("input");I.type="file",I.accept=".json, .txt",I.onchange=function(A){var N=A.target.files,z=N===void 0?[]:N;if(z.length>0){var Z=new FileReader;Z.onload=function(k){var G;try{G=JSON.parse(k.target.result)}catch(Y){console.log(Y.message);return}if(G.type!==n.type){ue.ZP.error(c({id:"labeling-job-create.wizard.configuration.ontology.import.not-match"}));return}(0,He.zU)(G.type,G.ontology)?r({type:"setOntology",payload:JSON.stringify(G.ontology)}):ue.ZP.error(c({id:"labeling-job-create.wizard.configuration.ontology.import.invalid"}))},Z.readAsText(z[0])}else ue.ZP.error(c({id:"labeling-job-create.wizard.configuration.ontology.import.no-file"}))},I.click()};return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{position:"absolute",right:24,zIndex:100},children:[(0,e.jsx)(J.ZP,{icon:(0,e.jsx)(vt.Z,{}),style:{marginRight:12},disabled:p==="CREATE",onClick:function(I){I.preventDefault(),b(n)},children:c({id:"common.preview"})}),(0,e.jsx)(J.ZP,{icon:(0,e.jsx)(et.Z,{}),type:"primary",onClick:function(I){I.preventDefault(),l().then(function(A){A.status===ln.o.OK?r({type:"init",payload:A.data}):ue.ZP.error(A.message)})},children:c({id:"common.save"})})]}),(0,e.jsxs)(Be.Z,{activeKey:j,onChange:function(I){(0,He.qJ)(n.type)?S(function(A){r({type:"setOntology",payload:JSON.stringify(A)}),f(I)}):f(I)},children:[(0,e.jsx)(Be.Z.TabPane,{tab:c({id:"job.content.script.template_editor"}),children:(0,e.jsx)(Kn,{editorMode:U.je.CODE,content:n.content,onContentChange:function(I){r({type:"setContent",payload:I})},jsCode:n.js,onJsCodeChange:function(I){r({type:"setJS",payload:I})},cssCode:n.css,onCssCodeChange:function(I){r({type:"setCSS",payload:I})},sourceFileHeaders:[],error:""})},"editor"),(0,e.jsx)(Be.Z.TabPane,{tab:c({id:"labeling-job-create.wizard.configuration.settings.title"}),children:(0,e.jsxs)(Oe.Z,{defaultActiveKey:["ontology","property"],children:[(0,e.jsxs)(Oe.Z.Panel,{header:c({id:"ontology-config"}),children:[(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(J.ZP,{type:"link",style:{paddingRight:0},onClick:R,children:(0,e.jsx)(X.FormattedMessage,{id:"labeling-job-create.wizard.configuration.ontology.export"})}),(0,e.jsx)(J.ZP,{type:"link",style:{paddingRight:0},onClick:D,children:(0,e.jsx)(X.FormattedMessage,{id:"labeling-job-create.wizard.configuration.ontology.import"})})]}),rs(i,n.ontology?JSON.parse(n.ontology):null,n.type)]},"ontology"),(0,e.jsx)(Oe.Z.Panel,{header:c({id:"property-config"}),children:(0,e.jsx)(tr,{templateType:n.type,templateInfo:n,attributes:n.attributes,onAttributesChange:function(I){S(function(A){r({type:"setOntology",payload:JSON.stringify(A)})}),r({type:"setAttributes",payload:I})},getOntology:function(){return i.current.getData()}})},"property")]})},"config"),(0,e.jsx)(Be.Z.TabPane,{tab:c({id:"job.qa.problem-type"}),children:(0,e.jsx)("div",{style:{maxWidth:600},children:(0,e.jsx)(is,{problemTypes:o.current,ref:o})})},"issueTypes")]}),(0,e.jsx)(oi.Z,{template:w,onCancel:function(){b(null)},onOk:function(I){(0,He.aZ)({templateId:w.id,projectId:M,source:(0,tn.h$)(I),scope:u}),b(null)}})]})},ls=os,ss=function(a){var n=a.visible,r=a.templateInfo,i=a.dispatch,o=a.onPre,u=a.onNext,l=a.onSave,m=a.ontologyEditorRef,c=a.issueTypeEditorRef,g=(0,X.useIntl)(),h=g.formatMessage;return(0,e.jsxs)("div",{style:n?void 0:{display:"none"},children:[(0,e.jsx)(ls,{templateInfo:r,dispatch:i,ontologyEditorRef:m,issueTypeEditorRef:c,previewScope:"PRIVATE",onSave:l}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:24},children:[(0,e.jsx)(J.ZP,{onClick:o,style:{marginRight:48},children:h({id:"common.prev-step"})}),(0,e.jsx)(J.ZP,{type:"primary",onClick:u,children:h({id:"common.complete"})})]})]})},ds=ss,sn=_(22217);function us(t,a){switch(a.type){case"init":return a.payload;case"setContent":return s()(s()({},t),{},{content:a.payload});case"setTitle":return s()(s()({},t),{},{title:a.payload});case"setInstruction":return s()(s()({},t),{},{instruction:a.payload});case"setDataType":return s()(s()({},t),{},{dataType:a.payload});case"setCSS":return s()(s()({},t),{},{css:a.payload});case"setJS":return s()(s()({},t),{},{js:a.payload});case"setAttributes":return s()(s()({},t),{},{attributes:a.payload});case"setOntology":return s()(s()({},t),{},{ontology:a.payload});case"setVersion":return s()(s()({},t),{},{version:a.payload});case"setIsSupportedByApp":return s()(s()({},t),{},{isSupportedByApp:a.payload});case"setsupportedLowestIOSVersion":return s()(s()({},t),{},{supportedLowestIOSVersion:a.payload});case"setSupportedLowestAndroidVersion":return s()(s()({},t),{},{supportedLowestAndroidVersion:a.payload});default:return t}}function cs(t){var a=t.templateId,n=(0,d.useReducer)(us,{title:"",content:"",instruction:"",type:U.WY.CUSTOM,js:"",css:"",attributes:"",ontology:"",isSupportedByApp:!1,supportedLowestIOSVersion:"",supportedLowestAndroidVersion:""}),r=P()(n,2),i=r[0],o=r[1],u=(0,d.useState)(!1),l=P()(u,2),m=l[0],c=l[1],g=function(){var h=Pe()(ve()().mark(function p(M){var C;return ve()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return c(!0),j.next=3,(0,sn.l3)(M);case 3:C=j.sent,o({type:"init",payload:C.data}),c(!1);case 6:case"end":return j.stop()}},p)}));return function(M){return h.apply(this,arguments)}}();return(0,d.useEffect)(function(){a&&g(a)},[a]),[i,o,m]}var gs=_(17078),Ut=function(t){return t.LLM_CONVERSATION="LLM_CONVERSATION",t.LLM_QUESTION_ANSWER="LLM_QUESTION_ANSWER",t}({}),Bn=function(t){return t.INVALID="invalid",t.TYPE_NOT_MATCH="type-not-match",t}({}),de=function(t){return t.BASIC_INFO="basic-info",t.DATA_SOURCE="data-source",t.LABEL_SUBJECT="label-subject",t.LABEL_VIEW="label-view",t.LABEL_ASSIST="label-assist",t.LABEL_CHECK="label-check",t.QA="qa",t}({}),ms=W()(W()(W()(W()(W()(W()(W()({},de.BASIC_INFO,{key:de.BASIC_INFO,titleKey:"BASIC_TITLE",subTitleKey:"BASIC_SUB_TITLE"}),de.DATA_SOURCE,{key:de.DATA_SOURCE,titleKey:"DATA_SOURCE_TITLE",subTitleKey:"DATA_SOURCE_SUB_TITLE"}),de.LABEL_SUBJECT,{key:de.LABEL_SUBJECT,titleKey:"LABEL_SUBJECT_TITLE",subTitleKey:"LABEL_SUBJECT_SUB_TITLE_GENERAL_IMAGE"}),de.LABEL_VIEW,{key:de.LABEL_VIEW,titleKey:"LABEL_VIEW_TITLE",subTitleKey:"LABEL_VIEW_SUB_TITLE"}),de.LABEL_ASSIST,{key:de.LABEL_ASSIST,titleKey:"LABEL_ASSIST_TITLE",subTitleKey:"LABEL_ASSIST_SUB_TITLE"}),de.LABEL_CHECK,{key:de.LABEL_CHECK,titleKey:"LABEL_CHECK_TITLE",subTitleKey:"LABEL_CHECK_SUB_TITLE"}),de.QA,{key:de.QA,titleKey:"QA_TITLE",subTitleKey:"QA_SUB_TITLE"}),hs=_(9504),li=_.n(hs),ps=_(38836),si=_.n(ps),fs=_(31759),vs=_.n(fs),ys=_(16483),Ms=_.n(ys),Is=["attributes","ontology","questionType"],Cs=["attributes","ontology","questionType"];function js(t){var a=t.substring(1),n={};if(a.length===0)return n;for(var r=a.split("?")[1]||"",i=r.split("&"),o=0;o<i.length;o++){var u=i[o].split("=");n[u[0]]=decodeURIComponent(u[1])}return n}var di=function(){function t(a){pn()(this,t),W()(this,"attributes",void 0),W()(this,"ontology",void 0),W()(this,"questionType",[]),W()(this,"baseInfo",void 0);var n=a.attributes,r=a.ontology,i=a.questionType,o=en()(a,Is);this.baseInfo=o;var u=js(location.hash).action;if(u==="CREATE"){var l=(0,Ae.$q)(o);l+="[".concat(Ms()().format("YYYY-MM-DD hh:mm:ss"),"]"),this.baseInfo.title=l}console.log("this.baseInfo.title",this.baseInfo.title),this.parseQuestionType(a)}return fn()(t,[{key:"update",value:function(n){var r=n.attributes,i=n.ontology,o=n.questionType,u=en()(n,Cs);this.baseInfo=u,this.parseQuestionType(n),this.parseAttributes(n),this.parseOntology(n)}},{key:"format",value:function(){return s()(s()({},this.baseInfo),{},{attributes:this.formatAttributes(),ontology:this.formatOntology(),questionType:this.formatQuestionType()})}},{key:"parsed",value:function(){return s()(s()({},this.baseInfo),{},{parsedAttributes:this.attributes,ontology:this.ontology,questionType:this.questionType})}},{key:"import",value:function(n){if(!n||!n.type)return{success:!1,error:Bn.INVALID};if(n.type!==this.type)return{success:!1,error:Bn.TYPE_NOT_MATCH};if(Array.isArray(n.questionType)){var r=new Set;n.questionType.forEach(function(i){vs()(i)!=="object"&&r.add("".concat(i).trim())}),this.questionType=Array.from(r)}return{success:!0}}},{key:"parseQuestionType",value:function(n){var r=[];try{var i=JSON.parse(n.questionType);Array.isArray(i)&&i.forEach(function(o){var u="".concat(o).trim();u&&!r.includes(u)&&r.push(u)})}catch(o){}this.questionType=r}},{key:"formatQuestionType",value:function(){var n=new Set(this.questionType.map(function(r){return r.trim()}).filter(function(r){return!!r}));return JSON.stringify(Array.from(n))}}]),t}();function jt(t,a){return a?t!=="false"&&t!==!1:t==="true"||t===!0}function xs(t,a,n){if(t==null||t==="")return a;var r=Number(t);return Number.isNaN(r)?a:((n==null?void 0:n.min)!==void 0&&(r=Math.max(n.min,r)),(n==null?void 0:n.max)!==void 0&&(r=Math.min(n.max,r)),r)}function xt(t,a,n){if(Array.isArray(a)){var r;return typeof t=="string"?r=t.split(",").map(function(i){return i.trim()}).filter(function(i){return!!i}):Array.isArray(t)&&(r=t.map(function(i){return"".concat(i)})),r?r.filter(function(i){return!n||n.includes(i)}):a}return!n||n.includes("".concat(t))?"".concat(t):a}function zd(t){if(typeof t=="string")return base64Decode(t)}var Vn=function(t){return t.NONUSE="nonuse",t}({}),As=function(t){return t.EQUAL="equal_to",t.GREATER="greater_than",t.LESS="less_than",t}({}),ui=function(t){return t.SCORE="score",t.MARK="mark",t}({}),Ud=function(t){return t.CODE="code",t.GRAPH="graph",t}({}),Fd=function(t){return t.DRAGGABLE="draggable",t.BOUNDARY_CHECK="boundary_check",t.ROTATABLE="rotatable",t.AUTO_SNAP="auto_snap",t.AUTO_SNAP_POINT="auto_snap_point",t}({}),Bd=function(t){return t.EMPTY_AREA_CHECK="empty_area_check",t.FULLY_COVERED_CHECK="fully_covered_check",t.ATTR_CHECK="attr_check",t.INSTANCE_ITEM_COUNT_CHECK="instance_item_count_check",t.FRAME_VALID_CHECK="frame_valid_annotate_check",t.FRAME_COMMON_VALID_CHECK="frame_common_valid_annotate_check",t}({}),ct=function(t){return t.SCORE="score",t.MARK="mark",t}({}),Ft=function(t){return t.EQUAL="equal_to",t.GREATER="greater_than",t.GREATER_EQUAL="greater_than_or_equal_to",t.LESS="less_than",t.LESS_EQUAL="less_than_or_equal_to",t}({}),Vd="N/A",ci=[{label:"TEMPLATE_SUBJECT_RANKING_TYPE_SCORE",value:ct.SCORE},{label:"TEMPLATE_SUBJECT_RANKING_TYPE_MARK_ERROR",value:ct.MARK}],Yd=[{label:"=",value:Ft.EQUAL},{label:">",value:Ft.GREATER},{label:"<",value:Ft.LESS}],Hd=[{label:"=",value:Ft.EQUAL},{label:"\u2265",value:Ft.GREATER_EQUAL},{label:"\u2264",value:Ft.LESS_EQUAL}],gi="{{{pre_annotation}}}",Es="{{{question}}}",yn={editable:!1,addible:!1,ranking:!1},Yn=function(t){On()(n,t);var a=Pn()(n);function n(r){var i;return pn()(this,n),i=a.call(this,r),W()(be()(i),"type",Ut.LLM_CONVERSATION),i.parseAttributes(r),i}return fn()(n,[{key:"parseAttributes",value:function(i){var o=i.attributes,u;try{u=JSON.parse(o)}catch(l){}this.setAttributes(u)}},{key:"parseOntology",value:function(){}},{key:"formatAttributes",value:function(){var i=s()({},this.attributes);return i.addible?(i.add_model_flag||delete i.add_model,i.add_limit_flag||(delete i.add_limit,delete i.add_limit_operator)):(delete i.add_model,delete i.add_limit,delete i.add_limit_operator),delete i.add_model_flag,delete i.add_limit_flag,i.ranking||(delete i.ranking_type,delete i.ranking_options),i.ranking_options&&(i.ranking_options=i.ranking_options.join(",")),i.review_from=gi,Object.keys(i).forEach(function(o){var u=i[o];(typeof u=="number"||typeof u=="boolean")&&(i[o]=u==null?void 0:u.toString())}),JSON.stringify(i)}},{key:"formatOntology",value:function(){}},{key:"import",value:function(i){var o=li()(si()(n.prototype),"import",this).call(this,i);return o.success&&this.setAttributes(i.attributes),o}},{key:"setAttributes",value:function(i){i?(this.attributes={},this.attributes.editable=jt(i.editable,yn.editable),this.attributes.addible=jt(i.addible,yn.addible),this.attributes.addible&&(this.attributes.add_model=xt(i.add_model,Vn.NONUSE,Object.values(Vn)),this.attributes.add_model!==Vn.NONUSE?this.attributes.add_model_flag=!0:(this.attributes.add_model_flag=!1,this.attributes.add_model=void 0),this.attributes.add_limit=xs(i.add_limit,-1,{min:0}),this.attributes.add_limit_operator=xt(i.add_limit_operator,void 0,Object.values(As)),this.attributes.add_limit>=0&&this.attributes.add_limit_operator?this.attributes.add_limit_flag=!0:(this.attributes.add_limit_flag=!1,this.attributes.add_limit=void 0,this.attributes.add_limit_operator=void 0)),this.attributes.attributes_config=i.attributes_config,this.attributes.ranking=jt(i.ranking,yn.ranking),this.attributes.ranking&&(this.attributes.ranking_type=xt(i.ranking_type,ui.SCORE,Object.values(ui)),this.attributes.ranking_options=xt(i.ranking_options,[])),this.attributes.item_attributes_config=i.item_attributes_config,this.attributes.subjects=i.subjects):this.attributes=s()({},yn)}}]),n}(di);W()(Yn,"tabKeys",[de.BASIC_INFO,de.LABEL_SUBJECT,de.QA]);var Hn=function(t){return t.NONUSE="nonuse",t}({}),Gd=function(t){return t.EQUAL="equal_to",t.GREATER="greater_than",t.LESS="less_than",t}({}),mi=function(t){return t.SCORE="score",t.MARK="mark",t}({}),dn={sortable:!1,editable:!1,addible:!1,ranking:!1},Gn=function(t){On()(n,t);var a=Pn()(n);function n(r){var i;return pn()(this,n),i=a.call(this,r),W()(be()(i),"type",Ut.LLM_QUESTION_ANSWER),i.parseAttributes(r),i}return fn()(n,[{key:"parseAttributes",value:function(i){var o=i.attributes,u;try{u=JSON.parse(o)}catch(l){}this.setAttributes(u)}},{key:"parseOntology",value:function(){}},{key:"formatAttributes",value:function(){var i=s()({},this.attributes);return i.addible?(i.add_model_flag||delete i.add_model,i.add_limit_flag||(delete i.add_limit,delete i.add_limit_operator)):(delete i.add_model,delete i.add_limit,delete i.add_limit_operator),delete i.add_model_flag,delete i.add_limit_flag,i.ranking||(delete i.ranking_type,delete i.ranking_options),i.ranking_options&&(i.ranking_options=i.ranking_options.join(",")),i.review_from=gi,i.question=Es,Object.keys(i).forEach(function(o){var u=i[o];(typeof u=="number"||typeof u=="boolean")&&(i[o]=u==null?void 0:u.toString())}),JSON.stringify(i)}},{key:"formatOntology",value:function(){}},{key:"import",value:function(i){var o=li()(si()(n.prototype),"import",this).call(this,i);return o.success&&this.setAttributes(i.attributes),o}},{key:"setAttributes",value:function(i){i?(this.attributes={},this.attributes.sortable=jt(i.sortable,dn.sortable),this.attributes.editable=jt(i.editable,dn.editable),this.attributes.addible=jt(i.addible,dn.addible),this.attributes.addible&&(this.attributes.add_model=xt(i.add_model,Hn.NONUSE,Object.values(Hn)),this.attributes.add_model!==Hn.NONUSE?this.attributes.add_model_flag=!0:(this.attributes.add_model_flag=!1,this.attributes.add_model=void 0)),this.attributes.attributes_config=i.attributes_config,this.attributes.ranking=jt(i.ranking,dn.ranking),this.attributes.ranking&&(this.attributes.ranking_type=xt(i.ranking_type,mi.SCORE,Object.values(mi)),this.attributes.ranking_options=xt(i.ranking_options,[])),this.attributes.item_attributes_config=i.item_attributes_config,this.attributes.subjects=i.subjects):this.attributes=s()({},dn)}}]),n}(di);W()(Gn,"tabKeys",[de.BASIC_INFO,de.LABEL_SUBJECT,de.QA]);function Ss(t){var a=t.type;switch(a){case Ut.LLM_CONVERSATION:return new Yn(t);case Ut.LLM_QUESTION_ANSWER:return new Gn(t);default:}}function bs(t){var a=[];switch(t){case Ut.LLM_CONVERSATION:a=Yn.tabKeys;break;case Ut.LLM_QUESTION_ANSWER:a=Gn.tabKeys;break;default:}return a.reduce(function(n,r){return s()(s()({},n),{},W()({},r,ms[r]))},{})}var Ts=function(a){var n=a.updateCurrentTabValues,r=a.handelSave,i=a.menu,o=(0,X.useIntl)(),u=o.formatMessage,l=(0,d.useState)(!1),m=P()(l,2),c=m[0],g=m[1],h=(0,d.useContext)(At),p=h.template,M=h.templateInfo,C=h.dispatch,v=(0,qe.Z)(),j=v.query,f=function(){if(p){var D=p.format(),O=D.id,I=D.type,A=D.attributes,N=D.ontology,z=N===void 0?"[]":N,Z=D.questionType,k={type:I,attributes:JSON.parse(A),ontology:JSON.parse(z),questionType:JSON.parse(Z)},G="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(k)));(0,Ae.Sv)({url:G,fileName:"config-attributes".concat(O,".json")})}},x=function(){if(i==="CONFIG"&&n){var D;(D=n())===null||D===void 0||D.then(function(){return f()}).catch(function(O){console.log(O)})}else f()},y=function(){if(p){var D=document.createElement("input");D.type="file",D.accept=".json, .txt",D.onchange=function(O){var I=O.target.files,A=I===void 0?[]:I;if(A.length>0){var N=new FileReader;N.onload=function(z){var Z;try{Z=JSON.parse(z.target.result)}catch(E){}if(Z){var k=p.import(Z),G=k.success,Y=k.error,L=k.errorInfo;if(G)C==null||C({type:"init",payload:p.parsed()}),ue.ZP.success(u({id:"template.configuration.ontology.import.success"}));else{var T=null;L?T=L.map(function(E){var F=E.path,Q=E.invalidNames,H=Q===void 0?[]:Q,V=E.duplicatedNames,K=V===void 0?[]:V;return(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{style:{fontWeight:"bold"},children:F}),H.length>0&&(0,e.jsx)("span",{children:"".concat(u({id:"template.configuration.ontology.import.invalid-names"}),": ").concat(H.toString())}),K.length>0&&(0,e.jsx)("span",{children:"".concat(u({id:"template.configuration.ontology.import.duplicated-names"}),": ").concat(K.toString())}),H.length===0&&K.length===0&&(0,e.jsx)("span",{children:u({id:"template.configuration.ontology.import.invalid-name"})})]},F)}):Y===Bn.TYPE_NOT_MATCH&&(T=u({id:"template.configuration.ontology.import.not-match"})),Re.Z.error({title:u({id:"template.configuration.ontology.import.invalid"}),content:T,okText:u({id:"COMMON_OK"}),okType:"danger"})}}},N.readAsText(A[0])}else ue.ZP.error(u({id:"template.configuration.ontology.import.no-file"}))},D.click()}},w=function(){if(i==="CONFIG"&&n){var D;(D=n())===null||D===void 0||D.then(function(){return y()}).catch(function(O){console.log(O)})}else y()},b=function(){g(!0)},S=function(){if(i==="CONFIG"&&n){var D;(D=n())===null||D===void 0||D.then(function(){return r()}).catch(function(O){console.log(O)})}else r()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"template-config-toolbar",children:[(0,e.jsx)("div",{className:"title",children:" ".concat(j.action==="CREATE"?u({id:"COMMON_TEMPLATE_CREATE"}):u({id:"COMMON_TEMPLATE_EDIT"}),": ").concat((M==null?void 0:M.title)||"")}),(0,e.jsxs)("div",{className:"operations",children:[(0,e.jsx)(J.ZP,{type:"link",style:{paddingRight:0},onClick:x,children:u({id:"template.configuration.ontology.export"})}),(0,e.jsx)(J.ZP,{type:"link",style:{paddingRight:0,marginRight:12},onClick:w,children:u({id:"template.configuration.ontology.import"})}),(0,e.jsx)(J.ZP,{icon:(0,e.jsx)(vt.Z,{}),style:{marginRight:12},disabled:j.action==="CREATE",type:"primary",ghost:!0,onClick:function(D){D.preventDefault(),b()},children:u({id:"COMMON_PREVIEW"})}),(0,e.jsx)(J.ZP,{icon:(0,e.jsx)(et.Z,{}),type:"primary",onClick:function(D){D.preventDefault(),S()},children:u({id:"COMMON_SAVE"})})]})]}),c&&(M==null?void 0:M.id)&&(0,e.jsx)(oi.Z,{template:M,onCancel:function(){g(!1)},onOk:function(D){(0,Ae.aZ)({templateId:M.id,projectId:M.projectId,projectDisplayId:j.projectDisplayId||void 0,source:(0,tn.h$)(D),scope:"PRIVATE"}),g(!1)}})]})},Ds=Ts,Ns=_(68505),Bt=_(85193),Vt=_(50728),Ls=_(94721),_s=(0,d.forwardRef)(function(t,a){var n=t.onNext,r=(0,X.useIntl)(),i=r.formatMessage,o=B.Z.useForm(),u=P()(o,1),l=u[0],m=(0,d.useContext)(At),c=m.templateInfo,g=m.dispatch,h=function(){return new Promise(function(M,C){l.validateFields().then(function(v){g==null||g({type:"baseInfo",payload:v}),setTimeout(function(){M("success")},0)},function(){C("error")})})};return(0,d.useImperativeHandle)(a,function(){return{updateValues:h}},[l]),(0,d.useEffect)(function(){if(c){var p={title:c.title,instruction:c.instruction,dataType:c.dataType,isSupportedByApp:c.isSupportedByApp};l.setFieldsValue(p)}},[c]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"common-panel basic-info-panel",children:(0,e.jsxs)(B.Z,{form:l,labelCol:{sm:6,lg:5,xl:4,xxl:3},wrapperCol:{sm:18,lg:19,xl:19,xxl:20},colon:!1,children:[(0,e.jsx)(B.Z.Item,{name:"title",label:i({id:"TEMPLATE_TITLE"}),rules:[{required:!0}],children:(0,e.jsx)(ne.Z,{})}),(0,e.jsx)(B.Z.Item,{name:"dataType",label:i({id:"TEMPLATE_DATA_TYPE"}),rules:[{required:!0}],children:(0,e.jsx)(Me.Z,{disabled:!0,children:Object.values(Xe.g).map(function(p){return(0,e.jsx)(Me.Z.Option,{value:p,children:i({id:"TEMPLATE_DATA_TYPE_".concat(p)})},p)})})}),(0,e.jsx)(B.Z.Item,{name:"instruction",label:(0,e.jsxs)(e.Fragment,{children:[i({id:"TEMPLATE_INSTRUCTION"}),(0,e.jsx)(Bt.Z,{placement:"top",content:i({id:"TEMPLATE_INSTRUCTION_TIP"}),children:(0,e.jsx)(Vt.Z,{})})]}),rules:[{required:!0}],children:(0,e.jsx)(Le.Z,{height:380,imageApi:Ls.t9})})]})}),(0,e.jsx)("div",{className:"common-footer",children:(0,e.jsx)(J.ZP,{type:"primary",onClick:function(M){M.preventDefault(),n()},children:i({id:"COMMON_NEXT_STEP"})})})]})}),ws=_s,Os=(0,d.forwardRef)(function(t,a){var n=t.onFinish,r=t.onPrev,i=(0,X.useIntl)(),o=i.formatMessage,u=B.Z.useForm(),l=P()(u,1),m=l[0],c=(0,d.useContext)(At),g=c.templateInfo,h=c.dispatch,p=function(){return new Promise(function(C,v){m.validateFields().then(function(j){var f=[];if(j.questionType){var x=j.questionType.map(function(y){return y.trim()});f=Array.from(new Set(x))}h==null||h({type:"baseInfo",payload:{questionType:f}}),setTimeout(function(){C("success")},0)},function(){v("error")})})};return(0,d.useImperativeHandle)(a,function(){return{updateValues:p}},[m]),(0,d.useEffect)(function(){m.setFieldValue("questionType",g==null?void 0:g.questionType)},[g]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"common-wrapper",children:(0,e.jsx)(B.Z,{form:m,colon:!1,children:(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_QA_PRESET_REJECT_REASON"}),(0,e.jsx)(Bt.Z,{placement:"top",content:o({id:"TEMPLATE_QA_PRESET_REJECT_REASON_TIP"}),children:(0,e.jsx)(Vt.Z,{})})]}),(0,e.jsx)("div",{className:"common-panel",children:(0,e.jsx)(B.Z.List,{name:"questionType",children:function(C,v,j){var f=v.add,x=v.remove,y=j.errors;return(0,e.jsxs)(e.Fragment,{children:[C.map(function(w){return(0,e.jsxs)(B.Z.Item,{children:[(0,e.jsx)(B.Z.Item,s()(s()({},w),{},{validateTrigger:["onBlur","onChange"],rules:[{required:!0,whitespace:!0,message:o({id:"TEMPLATE_QA_PRESET_REJECT_REASON_REQUIRED"})}],noStyle:!0,children:(0,e.jsx)(ne.Z,{autoFocus:!0,placeholder:o({id:"COMMON_PLACEHOLDER"}),style:{width:520,marginRight:12}})})),(0,e.jsx)(nn.Z,{className:"dynamic-delete-button",onClick:function(){return x(w.name)}})]},w.key)}),(0,e.jsxs)(B.Z.Item,{children:[(0,e.jsx)(J.ZP,{type:"dashed",onClick:function(){return f()},style:{width:520},children:o({id:"COMMON_ADD_BY_CLICK"})}),(0,e.jsx)(B.Z.ErrorList,{errors:y})]})]})}})})]})})}),(0,e.jsxs)("div",{className:"common-footer",children:[(0,e.jsx)(J.ZP,{style:{marginRight:16},onClick:function(C){C.preventDefault(),r==null||r()},children:o({id:"COMMON_PREV_STEP"})}),(0,e.jsx)(J.ZP,{type:"primary",onClick:function(C){C.preventDefault(),n==null||n()},children:o({id:"COMMON_SAVE_CLOSE"})})]})]})}),Ps=Os,ks=["size"],un=function(t){return t.DEFAULT="default",t.SMALL="small",t.LARGE="large",t}(un||{}),Wn="ef-ontology";function Rs(t,a){var n=s()({fields:[]},t),r=a.map(function(o){return{value:o.class_name,label:o.class_name}}),i=n.fields.find(function(o){return o.name===Wn});return i?(i.type="RADIO",i.valueType="string",i.options=r):n.fields.splice(0,0,{name:Wn,type:"RADIO",valueType:"string",options:r}),n}function Zs(t){var a=t.config,n=t.ontologySyncDisabled,r=t.defaultOntology,i=t.getOntology,o=t.onSave,u=t.onCancel,l=t.uploadUrl,m=t.needOptionReference,c=m===void 0?!1:m,g=t.title,h=(0,X.useIntl)(),p=h.formatMessage,M=(0,d.useState)(),C=P()(M,2),v=C[0],j=C[1],f=(0,d.useState)(un.DEFAULT),x=P()(f,2),y=x[0],w=x[1],b=(0,d.useState)([]),S=P()(b,2),R=S[0],D=S[1];(0,d.useEffect)(function(){var N=(0,tn.tV)(a||"");if(N){var z=N.size,Z=en()(N,ks);j(Z),z&&Object.values(un).includes(z)?w(z):w(un.DEFAULT)}else j(void 0),w(un.DEFAULT)},[a]),(0,d.useEffect)(function(){var N=r;!N&&i&&(N=i()),D(N||[])},[r,i]);var O=function(z){var Z=s()(s()({},z),{},{size:y});Z.fields.length===0?o(void 0):o((0,tn.h$)(Z))},I=function(z){var Z=z.fields.findIndex(function(Y){return Y.name===Wn});if(Z>=0&&!n){var k=z.fields[Z].options,G=k===void 0?[]:k;if(G.some(function(Y){return R.findIndex(function(L){return L.class_name===Y.value})<0})||G.length!==R.length){Re.Z.confirm({title:p({id:"labeling-job-create.wizard.configuration.attributes.form.ontology.alert"}),onOk:function(){return O(z)},okText:p({id:"common.confirm"})});return}}O(z)},A=function(){n||(j(Rs(v,R)),ue.ZP.success(p({id:"labeling-job-create.wizard.configuration.attributes.form.sync.success"})))};return(0,e.jsxs)(e.Fragment,{children:[!n&&(0,e.jsx)("div",{style:{padding:16,display:"flex",justifyContent:"flex-end"},children:(0,e.jsx)(qt.Z,{placement:"bottomRight",title:p({id:"labeling-job-create.wizard.configuration.attributes.form.sync.alert"}),onConfirm:A,okText:p({id:"common.confirm"}),cancelText:p({id:"common.cancel"}),children:(0,e.jsx)(J.ZP,{children:p({id:"labeling-job-create.wizard.configuration.attributes.form.sync"})})})}),(0,e.jsx)($n.AO,{locale:(0,X.getLocale)(),config:v,onSubmit:I,onCancel:u,needOptionReference:c,uploadUrl:l,title:g})]})}var zs=Zs,Us="/api-gw/project/file/img-upload",Fs=function(a){var n=a.open,r=a.title,i=a.config,o=a.onSave,u=a.onCancel,l=a.getOntology;return(0,e.jsx)(Re.Z,{destroyOnClose:!0,centered:!0,closable:!1,width:"calc(100% - 48px)",wrapClassName:"form-config-modal",style:{padding:0,height:"calc(100vh - 48px)",overflow:"hidden"},open:n,footer:null,onCancel:u,children:(0,e.jsx)(zs,{title:r,config:i,onSave:o,onCancel:u,needOptionReference:!0,uploadUrl:Us,ontologySyncDisabled:l===void 0,getOntology:l})})},Bs=Fs;function Vs(t){var a=t.value,n=t.onChange,r=(0,X.useIntl)(),i=r.formatMessage,o=(0,d.useState)(!1),u=P()(o,2),l=u[0],m=u[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{color:"#7A869A",marginRight:12},children:i({id:a?"COMMON_SETTED":"COMMON_EMPTY"})}),(0,e.jsx)(J.ZP,{type:"primary",ghost:!0,onClick:function(){return m(!0)},children:i({id:"COMMON_SET"})}),(0,e.jsx)(Bs,{open:l,config:a,onSave:function(g){n&&n(g),m(!1)},onCancel:function(){return m(!1)}}),(0,e.jsx)("input",{"data-easyform":"true",style:{display:"none"},value:a})]})}var Mn=Vs,Ys=_(50025),hi=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=a.trim().replace(/+/g,",");return n};function Hs(t){var a=t.placeholder,n=t.onChange,r=t.value,i=(0,X.useIntl)(),o=i.formatMessage,u=(0,d.useState)(!1),l=P()(u,2),m=l[0],c=l[1],g=(0,d.useState)(),h=P()(g,2),p=h[0],M=h[1];(0,d.useEffect)(function(){if(r!==p){var f=hi(r);M(f),f!==r&&n&&n(f)}},[r]);var C=function(x){var y=(p==null?void 0:p.split(/[,+]|[+]/).filter(function(b){return b}))||[];y==null||y.splice(x,1);var w=y?y.join(","):void 0;M(w),n&&n(w)},v=function(){return p==null?void 0:p.split(/[,+]|[+]/).filter(function(x){return x}).map(function(x,y){return(0,e.jsx)(Ys.Z,{closable:!0,onClose:function(b){b.preventDefault(),C(y)},onClick:function(b){b.stopPropagation()},children:x},"".concat(x,"-").concat(10+y))})},j=function(x){var y=hi(x.target.value);M(y),n&&n(y)};return(0,e.jsxs)("div",{children:[m&&(0,e.jsx)(ne.Z,{value:p,autoFocus:!0,placeholder:a||o({id:"COMMON_PLACEHOLDER"}),style:{maxWidth:680},onChange:j,onBlur:function(){return c(!1)},onPressEnter:function(x){c(!1),j(x)}}),!m&&(0,e.jsxs)("div",{className:zt()("template-config-prefix-input input-tag-wrapper",{tags:p}),onClick:function(){return c(!0)},children:[p&&(0,e.jsx)("span",{children:v()}),!p&&(0,e.jsx)("div",{className:"input-tag-placeholder",children:a||o({id:"COMMON_PLACEHOLDER"})})]})]})}var pi=Hs,fi=W()(W()({},ct.SCORE,"TEMPLATE_SUBJECT_COMMENT_DEMENSION"),ct.MARK,"TEMPLATE_SUBJECT_ERROR_TYPE"),Gs=(0,d.forwardRef)(function(t,a){var n=t.onNext,r=t.onPrev,i=(0,X.useIntl)(),o=i.formatMessage,u=B.Z.useForm(),l=P()(u,1),m=l[0],c=B.Z.useWatch("ranking_type",m),g=(0,d.useContext)(At),h=g.templateInfo,p=g.dispatch;(0,d.useImperativeHandle)(a,function(){return{updateValues:M}}),(0,d.useEffect)(function(){if(h!=null&&h.parsedAttributes){var v=h.parsedAttributes,j=v.editable,f=v.addible,x=v.add_model,y=v.add_model_flag,w=v.add_limit_flag,b=v.add_limit,S=v.add_limit_operator,R=v.ranking,D=v.ranking_type,O=v.ranking_options,I=v.subjects,A=v.attributes_config,N=v.item_attributes_config;m.setFieldsValue({editable:j,addible:f,add_model:x,add_model_flag:y,add_limit_flag:w,add_limit:b,add_limit_operator:S,ranking:R,ranking_type:D,ranking_options:O,subjects:I,attributes_config:A,item_attributes_config:N})}},[h==null?void 0:h.parsedAttributes]);var M=function(){return new Promise(function(j,f){m.validateFields().then(function(x){var y=x.editable,w=x.addible,b=x.ranking,S=x.attributes_config,R=x.item_attributes_config;if(!(y||w||b||S||R)){ue.ZP.error(o({id:"TEMPLATE_SUBJECT_ANSWER_ERROR"})),f("error");return}p==null||p({type:"parsedAttributes",payload:x}),setTimeout(function(){j("success")},0)},function(x){console.log("error",x),f("error")})})},C=(0,d.useMemo)(function(){return c&&fi[c]?o({id:fi[c]}):""},[c]);return(0,e.jsxs)(B.Z,{form:m,colon:!1,children:[(0,e.jsxs)("div",{className:"common-wrapper",children:[(0,e.jsx)("div",{className:"form-block",children:(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_SUBJECT_ANSWER_WRITEABLE"}),(0,e.jsx)(B.Z.Item,{name:"editable",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})]})}),(0,e.jsx)("div",{className:"form-block",children:(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_SUBJECT_ROUND_CONVERSATION_EDITABLE"}),(0,e.jsx)(B.Z.Item,{name:"addible",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})]})}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_GLOBAL_ATTRIBUTES"}),(0,e.jsx)(Bt.Z,{placement:"top",content:o({id:"TEMPLATE_GLOBAL_ATTRIBUTES_TIP"}),children:(0,e.jsx)(Vt.Z,{})})]}),(0,e.jsx)(B.Z.Item,{name:"attributes_config",children:(0,e.jsx)(Mn,{})})]}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsxs)("div",{className:"form-title form-title-inline",style:{marginBottom:0},children:[o({id:"TEMPLATE_SUBJECT_RANKING"}),(0,e.jsx)(B.Z.Item,{name:"ranking",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})]}),(0,e.jsx)("div",{className:"form-title-sub",style:{marginBottom:16},children:o({id:"TEMPLATE_SUBJECT_RANKING_SUB"})}),(0,e.jsx)(B.Z.Item,{shouldUpdate:function(j,f){return f.ranking!==j.ranking},noStyle:!0,children:function(j){var f=j.getFieldValue;return f("ranking")&&(0,e.jsxs)("div",{className:"common-panel",children:[(0,e.jsx)(B.Z.Item,{labelCol:{sm:8,lg:6,xl:5},wrapperCol:{sm:16,lg:18,xl:19},initialValue:ct.SCORE,name:"ranking_type",rules:[{required:!0,message:o({id:"TEMPLATE_SUBJECT_RANKING_TYPE_REQUIRED"})}],label:o({id:"TEMPLATE_SUBJECT_RANKING_TYPE"}),children:(0,e.jsx)(tt.ZP.Group,{children:ci.map(function(x){return(0,e.jsx)(tt.ZP,{value:x.value,children:o({id:x.label})},x.value)})})}),(0,e.jsx)(B.Z.Item,{labelCol:{sm:8,lg:6,xl:5},wrapperCol:{sm:16,lg:18,xl:19},label:C,children:(0,e.jsx)(B.Z.List,{name:"ranking_options",rules:[{validator:function(){var x=Pe()(ve()().mark(function w(b,S){return ve()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!S||S.length<1)){D.next=2;break}return D.abrupt("return",Promise.reject(new Error(o({id:"TEMPLATE_SUBJECT_ANSWER_COMMENT_DEMENSION_REQUIRED"}))));case 2:case"end":return D.stop()}},w)}));function y(w,b){return x.apply(this,arguments)}return y}()}],children:function(y,w,b){var S=w.add,R=w.remove,D=b.errors;return(0,e.jsxs)(e.Fragment,{children:[y.map(function(O){return(0,e.jsxs)(B.Z.Item,{required:!0,children:[(0,e.jsx)(B.Z.Item,s()(s()({},O),{},{validateTrigger:["onBlur","onChange"],rules:[{required:!0,whitespace:!0,message:o({id:"TEMPLATE_SUBJECT_ANSWER_COMMENT_DEMENSION_ITEM_EMPTY"})}],noStyle:!0,children:(0,e.jsx)(ne.Z,{autoFocus:!0,placeholder:o({id:"COMMON_PLACEHOLDER"}),style:{width:520,marginRight:12}})})),(0,e.jsx)(nn.Z,{className:"dynamic-delete-button",onClick:function(){return R(O.name)}})]},O.key)}),(0,e.jsxs)(B.Z.Item,{children:[(0,e.jsx)(J.ZP,{style:{padding:0},type:"link",onClick:function(){return S()},children:o({id:"COMMON_ADD_BY_CLICK"})}),(0,e.jsx)(B.Z.ErrorList,{errors:D})]})]})}})})]})}})]}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_SINGLE_ATTRIBUTES"}),(0,e.jsx)(Bt.Z,{placement:"top",content:o({id:"TEMPLATE_SINGLE_ATTRIBUTES_TIP"}),children:(0,e.jsx)(Vt.Z,{})})]}),(0,e.jsx)(B.Z.Item,{name:"item_attributes_config",children:(0,e.jsx)(Mn,{})})]}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsx)("div",{className:"form-title form-title-inline",style:{marginBottom:0},children:o({id:"TEMPLATE_SUBJECT_ANSWER_TOPIC"})}),(0,e.jsx)("div",{className:"form-title-sub",style:{marginBottom:16},children:o({id:"TEMPLATE_SUBJECT_ANSWER_TOPIC_SUB"})}),(0,e.jsx)(B.Z.Item,{name:"subjects",rules:[function(){return{validator:function(j,f){if(f){var x=f.split(",").filter(function(w){return w}),y=Array.from(new Set(x)).length;if(x.length!==y)return Promise.reject(new Error(o({id:"TEMPLATE_COMMON_ERROR_DUPLICATE"})))}return Promise.resolve()}}}],children:(0,e.jsx)(pi,{placeholder:o({id:"COMMON_PLACEHOLDER"})})}),(0,e.jsx)("div",{className:"form-item-control-sub",children:o({id:"TEMPLATE_SUBJECT_ANSWER_TOPIC_EXAMPLE"})})]})]}),(0,e.jsxs)("div",{className:"common-footer",children:[(0,e.jsx)(J.ZP,{style:{marginRight:16},onClick:function(j){j.preventDefault(),r()},children:o({id:"COMMON_PREV_STEP"})}),(0,e.jsx)(J.ZP,{type:"primary",onClick:function(j){j.preventDefault(),n()},children:o({id:"COMMON_NEXT_STEP"})})]})]})}),Ws=Gs,vi=W()(W()({},ct.SCORE,"TEMPLATE_SUBJECT_COMMENT_DEMENSION"),ct.MARK,"TEMPLATE_SUBJECT_ERROR_TYPE"),Js=(0,d.forwardRef)(function(t,a){var n=t.onNext,r=t.onPrev,i=(0,X.useIntl)(),o=i.formatMessage,u=B.Z.useForm(),l=P()(u,1),m=l[0],c=B.Z.useWatch("ranking_type",m),g=(0,d.useContext)(At),h=g.templateInfo,p=g.dispatch;(0,d.useImperativeHandle)(a,function(){return{updateValues:M}}),(0,d.useEffect)(function(){if(h!=null&&h.parsedAttributes){var v=h.parsedAttributes,j=v.sortable,f=v.editable,x=v.addible,y=v.add_model,w=v.add_model_flag,b=v.add_limit_flag,S=v.add_limit,R=v.add_limit_operator,D=v.ranking,O=v.ranking_type,I=v.ranking_options,A=v.subjects,N=v.attributes_config,z=v.item_attributes_config;m.setFieldsValue({sortable:j,editable:f,addible:x,add_model:y,add_model_flag:w,add_limit_flag:b,add_limit:S,add_limit_operator:R,ranking:D,ranking_type:O,ranking_options:I,subjects:A,attributes_config:N,item_attributes_config:z})}},[h==null?void 0:h.parsedAttributes]);var M=function(){return new Promise(function(j,f){m.validateFields().then(function(x){var y=x.sortable,w=x.editable,b=x.addible,S=x.ranking,R=x.attributes_config,D=x.item_attributes_config;if(!(y||w||b||S||R||D)){ue.ZP.error(o({id:"TEMPLATE_SUBJECT_ANSWER_ERROR"})),f("error");return}p==null||p({type:"parsedAttributes",payload:x}),setTimeout(function(){j("success")},0)},function(){f("error")})})},C=(0,d.useMemo)(function(){return c&&vi[c]?o({id:vi[c]}):""},[c]);return(0,e.jsxs)(B.Z,{form:m,colon:!1,children:[(0,e.jsxs)("div",{className:"common-wrapper",children:[(0,e.jsx)("div",{className:"form-block",children:(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_SUBJECT_ANSWER_SORTABLE"}),(0,e.jsx)(B.Z.Item,{name:"sortable",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})]})}),(0,e.jsx)("div",{className:"form-block",children:(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_SUBJECT_ANSWER_WRITEABLE"}),(0,e.jsx)(B.Z.Item,{name:"editable",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})]})}),(0,e.jsx)("div",{className:"form-block",children:(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_SUBJECT_ANSWER_EDITABLE"}),(0,e.jsx)(B.Z.Item,{name:"addible",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})]})}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_GLOBAL_ATTRIBUTES"}),(0,e.jsx)(Bt.Z,{placement:"top",content:o({id:"TEMPLATE_GLOBAL_ATTRIBUTES_TIP"}),children:(0,e.jsx)(Vt.Z,{})})]}),(0,e.jsx)(B.Z.Item,{name:"attributes_config",children:(0,e.jsx)(Mn,{})})]}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsxs)("div",{className:"form-title form-title-inline",style:{marginBottom:0},children:[o({id:"TEMPLATE_SUBJECT_RANKING"}),(0,e.jsx)(B.Z.Item,{name:"ranking",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})]}),(0,e.jsx)("div",{className:"form-title-sub",style:{marginBottom:16},children:o({id:"TEMPLATE_SUBJECT_RANKING_SUB"})}),(0,e.jsx)(B.Z.Item,{shouldUpdate:function(j,f){return f.ranking!==j.ranking},noStyle:!0,children:function(j){var f=j.getFieldValue;return f("ranking")&&(0,e.jsxs)("div",{className:"common-panel",children:[(0,e.jsx)(B.Z.Item,{labelCol:{sm:8,lg:6,xl:5},wrapperCol:{sm:16,lg:18,xl:19},initialValue:ct.SCORE,name:"ranking_type",rules:[{required:!0,message:o({id:"TEMPLATE_SUBJECT_RANKING_TYPE_REQUIRED"})}],label:o({id:"TEMPLATE_SUBJECT_RANKING_TYPE"}),children:(0,e.jsx)(tt.ZP.Group,{children:ci.map(function(x){return(0,e.jsx)(tt.ZP,{value:x.value,children:o({id:x.label})},x.value)})})}),(0,e.jsx)(B.Z.Item,{labelCol:{sm:8,lg:6,xl:5},wrapperCol:{sm:16,lg:18,xl:19},label:C,children:(0,e.jsx)(B.Z.List,{name:"ranking_options",rules:[{validator:function(){var x=Pe()(ve()().mark(function w(b,S){return ve()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!S||S.length<1)){D.next=2;break}return D.abrupt("return",Promise.reject(new Error(o({id:"TEMPLATE_SUBJECT_ANSWER_COMMENT_DEMENSION_REQUIRED"}))));case 2:case"end":return D.stop()}},w)}));function y(w,b){return x.apply(this,arguments)}return y}()}],children:function(y,w,b){var S=w.add,R=w.remove,D=b.errors;return(0,e.jsxs)(e.Fragment,{children:[y.map(function(O){return(0,e.jsxs)(B.Z.Item,{required:!0,children:[(0,e.jsx)(B.Z.Item,s()(s()({},O),{},{validateTrigger:["onBlur","onChange"],rules:[{required:!0,whitespace:!0,message:o({id:"TEMPLATE_SUBJECT_ANSWER_COMMENT_DEMENSION_ITEM_EMPTY"})}],noStyle:!0,children:(0,e.jsx)(ne.Z,{autoFocus:!0,placeholder:o({id:"COMMON_PLACEHOLDER"}),style:{width:520,marginRight:12}})})),(0,e.jsx)(nn.Z,{className:"dynamic-delete-button",onClick:function(){return R(O.name)}})]},O.key)}),(0,e.jsxs)(B.Z.Item,{children:[(0,e.jsx)(J.ZP,{style:{padding:0},type:"link",onClick:function(){return S()},children:o({id:"COMMON_ADD_BY_CLICK"})}),(0,e.jsx)(B.Z.ErrorList,{errors:D})]})]})}})})]})}})]}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsxs)("div",{className:"form-title form-title-inline",children:[o({id:"TEMPLATE_SINGLE_ATTRIBUTES"}),(0,e.jsx)(Bt.Z,{placement:"top",content:o({id:"TEMPLATE_SINGLE_ATTRIBUTES_TIP"}),children:(0,e.jsx)(Vt.Z,{})})]}),(0,e.jsx)(B.Z.Item,{name:"item_attributes_config",children:(0,e.jsx)(Mn,{})})]}),(0,e.jsxs)("div",{className:"form-block",children:[(0,e.jsx)("div",{className:"form-title form-title-inline",style:{marginBottom:0},children:o({id:"TEMPLATE_SUBJECT_ANSWER_TOPIC"})}),(0,e.jsx)("div",{className:"form-title-sub",style:{marginBottom:16},children:o({id:"TEMPLATE_SUBJECT_ANSWER_TOPIC_SUB"})}),(0,e.jsx)(B.Z.Item,{name:"subjects",rules:[function(){return{validator:function(j,f){if(f){var x=f.split(",").filter(function(w){return w}),y=Array.from(new Set(x)).length;if(x.length!==y)return Promise.reject(new Error(o({id:"TEMPLATE_COMMON_ERROR_DUPLICATE"})))}return Promise.resolve()}}}],children:(0,e.jsx)(pi,{placeholder:o({id:"COMMON_PLACEHOLDER"})})}),(0,e.jsx)("div",{className:"form-item-control-sub",children:o({id:"TEMPLATE_SUBJECT_ANSWER_TOPIC_EXAMPLE"})})]})]}),(0,e.jsxs)("div",{className:"common-footer",children:[(0,e.jsx)(J.ZP,{style:{marginRight:16},onClick:function(j){j.preventDefault(),r()},children:o({id:"COMMON_PREV_STEP"})}),(0,e.jsx)(J.ZP,{type:"primary",onClick:function(j){j.preventDefault(),n()},children:o({id:"COMMON_NEXT_STEP"})})]})]})}),Qs=Js,Ks=(0,d.forwardRef)(function(t,a){var n=t.templateType,r=t.tabItem,i=t.onNext,o=t.onPrev,u=t.onFinish,l=(0,X.useIntl)(),m=l.formatMessage,c=r.titleKey,g=r.subTitleKey,h=r.key,p=(0,d.useRef)(null),M=(0,d.useRef)(null),C=(0,d.useRef)(null),v=(0,d.useRef)(null),j=W()(W()(W()(W()({},de.BASIC_INFO,p),de.LABEL_SUBJECT,M),de.LABEL_CHECK,C),de.QA,v);(0,d.useImperativeHandle)(a,function(){return{refMap:j}});var f=function(){var b;(b=j[h])===null||b===void 0||(b=b.current)===null||b===void 0||b.updateValues().then(function(S){S==="success"&&o()},function(S){console.log(S)})},x=function(){var b;(b=j[h])===null||b===void 0||(b=b.current)===null||b===void 0||b.updateValues().then(function(S){S==="success"&&i()},function(S){console.log(S)})},y=function(){var b;(b=j[h])===null||b===void 0||(b=b.current)===null||b===void 0||b.updateValues().then(function(S){S==="success"&&u()},function(S){console.log(S)})};return(0,e.jsxs)("div",{className:"template-config-content",children:[(0,e.jsxs)("div",{className:"template-config-content-top",children:[(0,e.jsx)("div",{className:"template-config-content-top-title",children:m({id:c})}),(0,e.jsx)("div",{className:"template-config-content-top-tip",children:m({id:g})})]}),h===de.BASIC_INFO&&(0,e.jsx)(ws,{onNext:x,ref:p,activeKey:h}),h===de.LABEL_SUBJECT&&(0,e.jsxs)(e.Fragment,{children:[n===U.WY.LLM_QUESTION_ANSWER&&(0,e.jsx)(Qs,{onNext:x,onPrev:f,ref:M}),n===U.WY.LLM_CONVERSATION&&(0,e.jsx)(Ws,{onNext:x,onPrev:f,ref:M})]}),h===de.QA&&(0,e.jsx)(Ps,{onFinish:y,onPrev:f,ref:v})]})}),$s=Ks,Xs=(0,d.forwardRef)(function(t,a){var n=t.tabItemsConfig,r=t.onFinish,i=(0,X.useIntl)(),o=i.formatMessage,u=(0,d.useContext)(At),l=u.templateInfo,m=u.locale,c=(0,d.useState)(de.BASIC_INFO),g=P()(c,2),h=g[0],p=g[1],M=n?Object.values(n):[],C=(0,d.useRef)(null),v=(0,d.useRef)(null),j=(0,d.useRef)(null),f=(0,d.useRef)(null),x=(0,d.useRef)(null),y=(0,d.useRef)(null),w=(0,d.useRef)(null),b=W()(W()(W()(W()(W()(W()(W()({},de.BASIC_INFO,C),de.DATA_SOURCE,v),de.LABEL_SUBJECT,j),de.LABEL_VIEW,f),de.LABEL_ASSIST,x),de.LABEL_CHECK,y),de.QA,w),S=(0,d.useRef)(0);(0,d.useEffect)(function(){var Z,k=(Z=document.querySelector(".template-config"))===null||Z===void 0?void 0:Z.offsetTop;S.current=k},[]);var R=function(){var k,G=((k=document.querySelector("html"))===null||k===void 0?void 0:k.scrollTop)||0;if(G>(S==null?void 0:S.current)){var Y;(Y=document.querySelector("html"))===null||Y===void 0||Y.scrollTo(0,(S==null?void 0:S.current)+24)}},D=function(){var k;return(k=b[h].current)===null||k===void 0||(k=k.refMap)===null||k===void 0||(k=k[h])===null||k===void 0||(k=k.current)===null||k===void 0?void 0:k.updateValues()};(0,d.useImperativeHandle)(a,function(){return{updateCurrentTabValues:D}},[h,b]);var O=function(k){k+1<M.length&&(p(M[k+1].key),R())},I=function(k){k>0&&(p(M[k-1].key),R())},A=function(){r&&r()},N=(0,d.useMemo)(function(){return l?M.map(function(Z,k){return{label:o({id:Z.titleKey}),key:Z.key,forceRender:!0,children:(0,e.jsx)($s,{templateType:l.type,ref:b[Z.key],tabItem:Z,onNext:function(){return O(k)},onPrev:function(){return I(k)},onFinish:A})}}):[]},[l,m]),z=function(k,G){return(0,e.jsx)(Ns.Z,{style:{zIndex:1},offsetTop:48,children:d.createElement(G,k)})};return(0,e.jsx)(Be.Z,{activeKey:h,tabPosition:"left",items:N,onTabClick:function(k){var G;(G=b[h].current)===null||G===void 0||(G=G.refMap)===null||G===void 0||(G=G[h])===null||G===void 0||(G=G.current)===null||G===void 0||G.updateValues().then(function(Y){Y==="success"&&(p(k),R())})},renderTabBar:z})}),qs=["parsedAttributes","ontology","questionType"],At=d.createContext({});function ed(t,a){switch(a.type){case"init":return a.payload;case"parsedAttributes":return s()(s()({},t),{},{parsedAttributes:s()(s()({},t.parsedAttributes),a.payload)});case"ontologies":return s()(s()({},t),{},{ontology:a.payload});case"baseInfo":return s()(s()({},t),a.payload);case"setContent":return s()(s()({},t),{},{content:a.payload});case"setJS":return s()(s()({},t),{},{js:a.payload});case"setCSS":return s()(s()({},t),{},{css:a.payload});default:return t}}var td=function(a){var n=a.handleSave,r=a.templateInfo,i=(0,X.useIntl)(),o=i.formatMessage,u=(0,d.useState)("CONFIG"),l=P()(u,2),m=l[0],c=l[1],g=(0,d.useReducer)(ed,{}),h=P()(g,2),p=h[0],M=h[1],C=(0,d.useRef)(),v=(0,d.useRef)(null),j=(0,d.useRef)(null),f=function(S){return new Promise(function(R,D){if(!S){D("template info is null");return}C.current?C.current.update(S):C.current=Ss(S),M({type:"init",payload:C.current.parsed()}),setTimeout(function(){R("success")},0)})};(0,d.useEffect)(function(){r&&f(r)},[r]);var x=(0,d.useCallback)(function(){var b;return(b=j.current)===null||b===void 0?void 0:b.updateCurrentTabValues()},[j]);(0,d.useEffect)(function(){if(p&&Object.keys(p).length>0){var b=p.parsedAttributes,S=p.ontology,R=p.questionType,D=en()(p,qs);C.current&&(C.current.attributes=b,C.current.ontology=S,C.current.questionType=R,C.current.baseInfo=D)}},[p]);var y=function(){var S,R=(S=C.current)===null||S===void 0?void 0:S.format();return R||null},w=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;setTimeout(function(){var R=y();R&&n(S,R)},0)};return(0,e.jsx)(At.Provider,{value:{locale:(0,X.getLocale)(),template:C.current,templateInfo:p,dispatch:M},children:(0,e.jsxs)("div",{ref:v,className:"template-config-wrapper",children:[p&&(0,e.jsx)(Ds,{menu:m,updateCurrentTabValues:x,handelSave:function(){return w(!1)}}),p&&Object.keys(p).length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"template-config-button",children:[m==="CONFIG"&&(0,e.jsx)("div",{children:(0,e.jsxs)("span",{onClick:function(){var S;(S=j.current)===null||S===void 0||S.updateCurrentTabValues().then(function(){c("EDITOR")}).catch(function(R){console.log(R)})},children:["</>",o({id:"BACK_TO_EDITOR"})]})}),m==="EDITOR"&&(0,e.jsx)("div",{children:(0,e.jsxs)("span",{onClick:function(){return c("CONFIG")},children:[(0,e.jsx)(gs.Z,{}),o({id:"BACK_TO_CONFIG"})]})})]}),(0,e.jsxs)("div",{className:"template-config",children:[m==="EDITOR"&&(0,e.jsx)(Kn,{editorMode:U.je.CODE,content:p==null?void 0:p.content,onContentChange:function(S){M({type:"setContent",payload:S})},jsCode:p==null?void 0:p.js,onJsCodeChange:function(S){M({type:"setJS",payload:S})},cssCode:p==null?void 0:p.css,onCssCodeChange:function(S){M({type:"setCSS",payload:S})},sourceFileHeaders:[],error:""}),m==="CONFIG"&&(0,e.jsx)(Xs,{ref:j,tabItemsConfig:bs(p.type),onFinish:w})]})]}):(0,e.jsx)("div",{children:o({id:"COMMON_TEMPLATE_INFO_LOAD_ERROR"})})]})})},nd=td,ad=[U.WY.LLM_CONVERSATION,U.WY.LLM_QUESTION_ANSWER],Yt=function(t){return t.BasicInfoStep="step1",t.ConfigStep="step2",t}(Yt||{}),id=function(){var a=(0,X.useIntl)(),n=a.formatMessage,r=(0,qe.Z)(),i=r.query,o=i.templateId,u=i.action,l=r.pathname,m=(0,Kt.Bo)("/projects/:projectId/template-center/edit").exec(l)||[],c=P()(m,2),g=c[1],h=(0,d.useState)(Yt.BasicInfoStep),p=P()(h,2),M=p[0],C=p[1],v=cs({templateId:o}),j=P()(v,3),f=j[0],x=j[1],y=j[2],w=(0,d.useRef)(null),b=(0,d.useRef)([]),S=(0,d.useMemo)(function(){return f.type},[f]);(0,d.useEffect)(function(){f.questionType&&(b.current=JSON.parse(f.questionType))},[f.questionType]);var R=function(){return new Promise(function(I,A){try{var N,z=((N=w.current)===null||N===void 0?void 0:N.getData())||"";u==="UPDATE"?(0,sn.hV)(s()(s()({},f),{},{ontology:JSON.stringify(z),questionType:JSON.stringify(b.current||[])})).then(I).catch(A):(0,sn.$p)(s()(s()({},f),{},{id:null,ontology:JSON.stringify(z),questionType:JSON.stringify(b.current||[])}),g).then(function(Z){Z.status===ln.o.OK?(X.history.replace({pathname:l,search:(0,He.PS)({action:"UPDATE",templateId:Z.data.id})}),I(Z)):ue.ZP.error(Z.message)}).catch(A)}catch(Z){A(Z)}})},D=function(I){return new Promise(function(A,N){try{u==="CREATE"?(delete I.id,(0,sn.$p)(s()(s()({},I),{},{type:I.type,deleted:I.deleted?1:0,scope:"PRIVATE"}),g||"").then(function(z){z.status===ln.o.OK?(X.history.replace({pathname:l,search:(0,He.PS)({action:"UPDATE",templateId:z.data.id})}),A(z)):ue.ZP.error(z.message)}).catch(N)):(I.projectId=g||"",(0,sn.hV)(s()({},I)).then(A).catch(N))}catch(z){N(z)}})};return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{marginBottom:24},children:(0,e.jsx)(J.ZP,{onClick:function(I){I.preventDefault(),X.history.replace({pathname:"/projects/".concat(g,"/template-center")})},children:n({id:"common.back"})})}),ad.includes(S)?(0,e.jsx)(nd,{templateInfo:f,handleSave:function(I,A){D(A).then(function(N){N.status===ln.o.OK?I?X.history.replace("/projects/".concat(g,"/template-center")):(x({type:"init",payload:N.data}),ue.ZP.success(n({id:"common.message.success.save"}))):ue.ZP.error((0,He.R$)(N))}).catch(function(N){return ue.ZP.error(N.message)})}}):(0,e.jsxs)(Qt.Z,{title:n({id:"labeling-job-wizard.step.template"}),loading:y,children:[(0,e.jsx)(Xt,{templateInfo:f,visible:M===Yt.BasicInfoStep,onNext:function(I){x({type:"setTitle",payload:I.title}),x({type:"setInstruction",payload:I.instruction}),x({type:"setDataType",payload:I.dataType}),x({type:"setIsSupportedByApp",payload:I.isSupportedByApp}),x({type:"setsupportedLowestIOSVersion",payload:I.supportedLowestIOSVersion}),x({type:"setSupportedLowestAndroidVersion",payload:I.supportedLowestAndroidVersion}),C(Yt.ConfigStep)}}),(0,e.jsx)(ds,{templateInfo:f,dispatch:x,ontologyEditorRef:w,issueTypeEditorRef:b,visible:M===Yt.ConfigStep,onPre:function(){return C(Yt.BasicInfoStep)},onSave:function(){return R().then(function(I){return ue.ZP.success(n({id:"common.message.success.save"})),I}).catch(function(I){return ue.ZP.error(I.message)})},onNext:function(){R().then(function(I){I.status===ln.o.OK?X.history.replace("/projects/".concat(g,"/template-center")):ue.ZP.error((0,He.R$)(I))}).catch(function(I){return ue.ZP.error(I.message)})}})]})]})},rd=id},4798:function(Jn,bt,_){"use strict";var Jt=_(48305),s=_.n(Jt),Tt=_(75271),P=_(96394),d=_(32109),ue=_(66830),J=_(90966),Qt=_(70576),Kt=_(28227),X=_(73095),B=_(48111),ne=_(52676),Me=function(ft){var Le=ft.template,U=ft.onOk,Xe=ft.onCancel,qe=(0,Qt.useIntl)(),Ae=qe.formatMessage,e=P.Z.useForm(),Dt=s()(e,1),Nt=Dt[0],Xt=(0,Tt.useState)(!1),vt=s()(Xt,2),et=vt[0],Be=vt[1],Oe=(0,Tt.useState)(""),Lt=s()(Oe,2),ve=Lt[0],_e=Lt[1],Pe=function(){Nt.validateFields().then(function(_t){Be(!0),(0,Kt.XZ)({recordId:_t.recordId,projectId:Le.projectId}).then(function(wt){if(wt.status===X.o.OK)if(wt.data){if(wt.data.oriState===B.ST.DELETED){_e(Ae({id:"preview-data-not-found"}));return}if(wt.data.dataType!==Le.dataType){_e(Ae({id:"data-type-mismatch"}));return}U==null||U({recordId:_t.recordId,projectId:Le.projectId})}else _e(Ae({id:"preview-data-not-found"}));else _e(Ae({id:"preview-data-not-found"}))}).finally(function(){Be(!1)})}).catch(function(_t){console.log(_t)})},yt=function(){_e(""),Xe==null||Xe()};return(0,ne.jsx)(d.Z,{title:Ae({id:"choose-preview-data"}),className:"custom-modal",visible:!!(Le!=null&&Le.id),onCancel:yt,onOk:Pe,maskClosable:!1,okText:Ae({id:"common.confirm"}),children:(0,ne.jsx)(ue.Z,{spinning:et,children:(0,ne.jsxs)(P.Z,{layout:"vertical",form:Nt,children:[(0,ne.jsx)(P.Z.Item,{label:Ae({id:"project.detail.data-center.add-data.data-type"}),children:Le!=null&&Le.dataType?(0,ne.jsx)("span",{children:Ae({id:"data.type.".concat(Le.dataType)})}):(0,ne.jsx)("span",{children:"N/A"})}),(0,ne.jsx)(P.Z.Item,{name:"recordId",initialValue:"1",label:Ae({id:"common.column.recordId"}),extra:ve&&(0,ne.jsx)("span",{style:{color:"#df3636"},children:ve}),rules:[{required:!0}],children:(0,ne.jsx)(J.Z,{onChange:function(){ve&&_e("")}})})]})})})};bt.Z=Me},84232:function(){},14050:function(){}}]);
