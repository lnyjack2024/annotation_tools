"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4055],{65167:function(q,j,e){e.d(j,{Z:function(){return Z}});var C=e(82092),l=e.n(C),I=e(26068),n=e.n(I),u=e(48305),g=e.n(u),_=e(75271),s=e(45269),p=e(96394),r=e(90966),x=e(3973),N=e(34749),m=e(61234),v=e(21103),d=e(66063),H=e(70576),K=e(18023),i=e(52676);function Z(R){var c=(0,H.useIntl)(),M=c.formatMessage,h=R||{},A=h.formLayout,k=A===void 0?"inline":A,U=h.formItems,Q=U===void 0?[]:U,F=h.formStyle,D=F===void 0?{marginBottom:15}:F,V=h.formItemStyle,L=V===void 0?{}:V,f=h.buttonStyle,z=f===void 0?{}:f,J=h.children,y=h.extraItems,$=h.initialValue,Y=$===void 0?{}:$,P=h.value,B=h.onFilterValueChange,G=h.onReset,ee=h.searchMode,E=ee===void 0?"change":ee,T=h.isReset,te=T===void 0?!0:T,se=(0,_.useState)(Y),ne=g()(se,2),O=ne[0],oe=ne[1],re=(0,K.Z)(B,1e3),W=function(t,a){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;oe(n()(n()({},O),{},l()({},t.key,a))),E==="change"&&(ae?re(n()(n()({},O),{},l()({},t.key,a))):B(n()(n()({},O),{},l()({},t.key,a)))),t.onChange&&t.onChange(a)},X=function(){B(O)},le=function(){oe({}),B({}),G&&G()};return(0,_.useEffect)(function(){P&&oe(P)},[P]),(0,i.jsxs)(p.Z,{layout:k,style:D,children:[y,Q.map(function(o){return(0,i.jsx)(p.Z.Item,{colon:!!(o!=null&&o.label),label:(0,i.jsx)("span",{style:{color:"#42526e"},children:o==null?void 0:o.label}),style:n()({marginBottom:16},L),children:function(){switch(o.type){case s.aH.Text:return(0,i.jsx)(r.Z,{allowClear:o.allowClear||!1,disabled:o.disabled||!1,value:O[o.key],onChange:function(a){return W(o,a.target.value,!0)},placeholder:o.placeholder||M({id:"common.input.placeholder"}),style:o.style||{width:220}});case s.aH.Single:return(0,i.jsx)(x.Z,{allowClear:o.allowClear||!1,disabled:o.disabled||!1,value:O[o.key],showSearch:"showSearch"in o?o.showSearch:!0,optionFilterProp:"children",filterOption:function(a,ae){return ae.props.children.toLowerCase().indexOf(a.toLowerCase())>=0},onChange:function(a){return W(o,a)},style:o.style||{width:220},placeholder:o.placeholder||M({id:"common.select.placeholder"}),children:o.options.map(function(t){return(0,i.jsx)(x.Z.Option,{value:o.optionValueKey?t[o.optionValueKey]:t,children:o.optionLabelKey?t[o.optionLabelKey]:o.optionLabel(t)},o.optionValueKey?t[o.optionValueKey]:t)})});case s.aH.Multiple:return(0,i.jsx)(x.Z,{allowClear:o.allowClear||!1,disabled:o.disabled||!1,mode:"multiple",showArrow:!0,value:O[o.key]||[],maxTagCount:o.maxTagCount||100,showSearch:"showSearch"in o?o.showSearch:!0,optionFilterProp:o.optionFilterProp||"children",filterOption:"optionFilterProp"in o||function(t,a){return a.props.children.toLowerCase().indexOf(t.toLowerCase())>=0},onChange:function(a){return W(o,a,!0)},style:o.style||{width:220},placeholder:o.placeholder||M({id:"common.select.placeholder"}),children:o.options.map(function(t){return(0,i.jsx)(x.Z.Option,{value:o.optionValueKey?t[o.optionValueKey]:t,label:o.optionLabelKey?t[o.optionLabelKey]:t,children:o.optionLabel?o.optionLabel(t):t[o.optionLabelKey]},o.optionValueKey?t[o.optionValueKey]:t)})});case s.aH.Cascader:return(0,i.jsx)(N.Z,{options:o.options,value:O[o.key]||[],fieldNames:o.fieldNames,style:o.style||{width:240},changeOnSelect:!0,showSearch:o.showSearch,onChange:function(a){return W(o,a,!0)}});case s.aH.CascaderMultiple:return(0,i.jsx)(N.Z,{options:o.options,value:O[o.key]||[],fieldNames:o.fieldNames,style:o.style||{width:240},changeOnSelect:!0,multiple:!0,maxTagCount:2,placeholder:M({id:"common.select.placeholder"}),showSearch:o.showSearch,onChange:function(a){return W(o,a,!0)}});case s.aH.Radio:return(0,i.jsx)(m.ZP.Group,{value:O[o.key],style:o.style,onChange:function(a){W(o,a.target.value,!0)},children:o.options.map(function(t){return(0,i.jsx)(m.ZP,{value:o.optionValueKey?t[o.optionValueKey]:t,children:o.optionLabelKey?t[o.optionLabelKey]:o.optionLabel(t)},o.optionValueKey?t[o.optionValueKey]:t)})});case s.aH.DateRanger:return(0,i.jsx)(v.Z.RangePicker,{style:o.style||{width:240},allowClear:o.allowClear,value:O[o.key],onChange:function(a){return W(o,a,!0)},disabledDate:o.disabledDate});default:return null}}()},o.key||JSON.stringify(o))}),E==="click"&&(0,i.jsxs)("div",{style:z,children:[(0,i.jsx)(d.ZP,{type:"primary",className:"btn-width",style:{margin:"0 16px 0 0"},onClick:X,children:M({id:"common.search"})}),te&&(0,i.jsx)(d.ZP,{className:"btn-width",onClick:le,children:M({id:"common.reset"})})]}),J]})}},37704:function(q,j,e){e.d(j,{Z:function(){return m}});var C=e(26068),l=e.n(C),I=e(67825),n=e.n(I),u=e(15409),g=e(32109),_=e(66063),s=e(70576),p={title:"title___HzaYw",close:"close___VzstS",buttons:"buttons___tNcsM"},r=e(52676),x=["width","visible","title","children","showFooter","onSave","onClose","saveLoading","disabled","isCancelBtnShow"];function N(v){var d=v.width,H=d===void 0?500:d,K=v.visible,i=v.title,Z=v.children,R=v.showFooter,c=R===void 0?!0:R,M=v.onSave,h=v.onClose,A=v.saveLoading,k=A===void 0?!1:A,U=v.disabled,Q=U===void 0?!1:U,F=v.isCancelBtnShow,D=F===void 0?!0:F,V=n()(v,x),L=(0,s.useIntl)(),f=L.formatMessage;return(0,r.jsxs)(g.Z,l()(l()({width:H,visible:K,closable:!1,destroyOnClose:!0,title:null,footer:null},V),{},{children:[(0,r.jsxs)("h2",{className:p.title,children:[i,(0,r.jsx)(_.ZP,{type:"link",icon:(0,r.jsx)(u.Z,{}),className:p.close,onClick:h})]}),Z,c&&(0,r.jsxs)("div",{className:p.buttons,children:[D&&(0,r.jsx)(_.ZP,{className:p.cancel,disabled:Q,onClick:h,children:f({id:"common.cancel"})}),(0,r.jsx)(_.ZP,{className:p.save,type:"primary",loading:k,disabled:Q,onClick:function(){M&&M()},children:f({id:"common.ok"})})]})]}))}var m=N},18023:function(q,j,e){var C=e(75271),l=function(n,u){var g=(0,C.useRef)({callback:n,timer:null}),_=g.current;return(0,C.useEffect)(function(){_.callback=n},[n]),(0,C.useCallback)(function(){for(var s=arguments.length,p=new Array(s),r=0;r<s;r++)p[r]=arguments[r];_.timer&&clearTimeout(_.timer),_.timer=setTimeout(function(){_.callback.apply(_,p)},u)},[])};j.Z=l},10089:function(q,j,e){e.d(j,{Z:function(){return g}});var C=e(26068),l=e.n(C),I=e(15944),n=e.n(I),u=e(70576);function g(_){var s=(0,u.useLocation)();return l()(l()({},s),{},{query:n().parse(s.search,_||{ignoreQueryPrefix:!0})})}},79282:function(q,j,e){var C=e(26068),l=e.n(C),I=e(75271),n=e(70576),u=e(52676),g=function(s){var p=s.style,r=(0,n.useIntl)(),x=r.formatMessage;return(0,u.jsx)("span",{style:l()({padding:2,background:"rgba(245, 108, 108, 0.1)",borderRadius:2,color:"#F56C6C",textAlign:"center",fontSize:14},p),children:x({id:"v3.test"})})};j.Z=g},39399:function(q,j,e){var C=e(26068),l=e.n(C),I=e(15558),n=e.n(I),u=e(48305),g=e.n(u),_=e(75271),s=e(66063),p=e(33917),r=e(56138),x=e(70576),N=e(37704),m=e(52676);function v(d){var H=d.style,K=H===void 0?{}:H,i=d.selectAllButton,Z=d.actions,R=Z===void 0?null:Z,c=d.columns,M=c===void 0?[]:c,h=d.onDeselect,A=d.disabled,k=A===void 0?!1:A,U=d.barVisible,Q=U===void 0?!1:U,F=d.onClear,D=d.selectedData,V=d.pagination,L=(0,x.useIntl)(),f=L.formatMessage,z=(0,_.useState)(!1),J=g()(z,2),y=J[0],$=J[1],Y=[].concat(n()(M),[{title:f({id:"common.operation"}),render:function(B){return(0,m.jsx)(s.ZP,{danger:!0,type:"link",style:{padding:0},onClick:function(){return h(B)},children:f({id:"common.select-cancel"})})}}]);return D.length===0&&!Q?null:(0,m.jsxs)("div",{className:"footer-bar",style:l()({position:"fixed",right:0,bottom:0,padding:"16px 24px 18px",backgroundColor:"white",boxShadow:"0px -4px 8px 0px rgba(122, 134, 154, 0.24)",zIndex:2},K),children:[(0,m.jsxs)("div",{children:[i,(0,m.jsx)(s.ZP,{type:"link",style:{padding:0},disabled:k||D.length===0,onClick:function(){return $(!0)},children:(0,m.jsx)("span",{style:{textDecoration:"underline"},children:f({id:"common.selected"},{count:D.length})})}),(0,m.jsx)(s.ZP,{danger:!0,disabled:D.length===0,type:"link",style:{padding:0,marginLeft:16},onClick:F,children:f({id:"common.clear.selection"})}),V&&(0,m.jsx)(p.Z,l()({style:{float:"right"}},V))]}),R&&(0,m.jsx)("div",{style:{marginTop:16},children:R}),(0,m.jsx)(N.Z,{visible:y,title:f({id:"common.selected"},{count:D==null?void 0:D.length}),width:800,footer:null,maskClosable:!1,onClose:function(){return $(!1)},children:(0,m.jsx)(r.Z,{scroll:{x:"max-content"},className:"tableStriped",rowKey:"id",columns:Y,dataSource:D})})]})}j.Z=v},42775:function(q,j,e){e.r(j),e.d(j,{default:function(){return V}});var C=e(26068),l=e.n(C),I=e(48305),n=e.n(I),u=e(75271),g=e(42400),_=e(66063),s=e(66830),p=e(33917),r=e(70576),x=e(77960),N=e(62135),m=e(28227),v=e(94721),d=e(81399),H=e(65167),K=e(45269),i=e(14659),Z=e(79266),R=e(73095),c=e(52676);function M(L){var f=L.projectId,z=L.onFilterChange,J=(0,r.useIntl)(),y=J.formatMessage,$=(0,u.useState)([]),Y=n()($,2),P=Y[0],B=Y[1],G=Object.keys(Z.cy).map(function(E){return{label:y({id:"workflow.job-type.team.".concat(E.toLowerCase())}),value:E,children:E===Z.cy.COMPANY?P.map(function(T){return{value:T.bpoId,label:T.name}}):[]}}),ee=[{key:"flowName",type:K.aH.Text,label:y({id:"project.detail.data-center.filter.process-data.workflow"}),placeholder:y({id:"common.input.placeholder"})},{key:"flowStatus",type:K.aH.Single,label:y({id:"workflow.status"}),options:Object.values(i.XB),optionLabel:function(T){return y({id:"workflow.status.".concat(T==null?void 0:T.toLowerCase())})},style:{width:160}},{key:"jobDisplayId",type:K.aH.Text,label:y({id:"jobDisplayId"}),placeholder:y({id:"common.input.placeholder"})},{key:"jobTeamType",type:K.aH.Cascader,label:y({id:"workflow.team"}),options:G,optionValueKey:"value",optionLabelKey:"label",style:{width:160}}];return(0,u.useEffect)(function(){f&&(0,m.bQ)(f).then(function(E){E.status===R.o.OK&&B(E.data)}).catch(function(E){return g.ZP.error((0,d.R$)(E))})},[f]),(0,c.jsx)(H.Z,{searchMode:"click",formStyle:{marginTop:16},buttonStyle:{marginBottom:24},formItems:ee,initialValue:{},onFilterValueChange:z})}var h=M,A=e(60300),k=e(75122),U=e(20388),Q=e(10089),F=function(f){var z=f.isReadonly,J=(0,r.useIntl)(),y=J.formatMessage,$=(0,U.Bo)("#/projects/:projectId/workflow").exec(window.location.hash.split("?")[0])||[],Y=n()($,2),P=Y[1],B=(0,Q.Z)(),G=B.query.projectDisplayId,ee=(0,u.useState)(!1),E=n()(ee,2),T=E[0],te=E[1],se=(0,u.useState)(!1),ne=n()(se,2),O=ne[0],oe=ne[1],re=(0,u.useState)({pageSize:v.L8,pageIndex:0,projectId:""}),W=n()(re,2),X=W[0],le=W[1],o=(0,u.useState)([]),t=n()(o,2),a=t[0],ae=t[1],he=(0,u.useState)(!1),de=n()(he,2),fe=de[0],ie=de[1],me=(0,u.useState)(0),ue=n()(me,2),ve=ue[0],pe=ue[1],_e=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return S&&ie(!0),(0,m.Ff)(l()(l()({},X),{},{projectId:P})).then(function(b){b.data&&(ae(b.data.results||[]),pe(b.data.totalElements||0))}).catch(function(b){return g.ZP.error((0,d.R$)(b))}).finally(function(){return ie(!1)})};return(0,u.useEffect)(function(){_e()},[X]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",height:48,lineHeight:"32px",borderBottom:"1px solid #dcdfe3",margin:"0 -24px",padding:"0 24px"},children:[(0,c.jsx)("span",{style:{fontSize:16,color:"#42526e",fontWeight:"bold"},children:y({id:"workflow.list"})}),(0,c.jsx)(_.ZP,{type:"primary",disabled:z,onClick:function(S){S.preventDefault(),te(!0)},children:y({id:"workflow.create"})})]}),(0,c.jsx)(h,{projectId:P,onFilterChange:function(S){var b=S.jobTeamType,be=b===void 0?[]:b,ce=n()(be,2),ge=ce[0],ye=ce[1];le(l()(l()({},S),{},{jobTeamType:ge,bpoId:ye,pageIndex:0,pageSize:X.pageSize}))}}),(0,c.jsxs)(s.Z,{spinning:fe,children:[a.map(function(w){return(0,c.jsx)(N.Z,{workflow:w,projectId:P,projectDisplayId:G,onRefresh:_e,readonly:z},w==null?void 0:w.id)}),(0,c.jsx)(p.Z,{style:{width:"100%",marginTop:20,textAlign:"right"},showTotal:function(S){return(0,c.jsx)(c.Fragment,{children:y({id:"bpo-project-invitation.total"},{total:S})})},current:X.pageIndex+1,total:ve,pageSize:X.pageSize,pageSizeOptions:v.TJ,showSizeChanger:!0,onChange:function(S,b){le(l()(l()({},X),{},{pageIndex:S-1,pageSize:b}))}})]}),(0,c.jsx)(A.Z,{loading:O,projectId:P,visible:T,onCancel:function(){te(!1)},onOk:function(S){oe(!0),(0,k.BU)(S).then(function(b){te(!1),b.status===R.o.OK?r.history.push({pathname:"/workflows/".concat(b.data.id,"/detail"),search:(0,d.PS)({projectDisplayId:G,projectId:b.data.projectId})}):g.ZP.error((0,d.R$)(b))}).catch(function(b){return g.ZP.error((0,d.R$)(b))}).finally(function(){oe(!1)})}})]})};function D(L){var f=L.projectAccess;return{isReadonly:f.projectAccess===null||f.projectAccess==="VIEW"}}var V=(0,x.$j)(D)(F)}}]);
