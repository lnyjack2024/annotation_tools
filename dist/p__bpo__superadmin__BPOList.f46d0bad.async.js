"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3802],{10089:function(he,q,t){t.d(q,{Z:function(){return R}});var V=t(26068),C=t.n(V),se=t(15944),g=t.n(se),s=t(70576);function R(me){var ie=(0,s.useLocation)();return C()(C()({},ie),{},{query:g().parse(ie.search,me||{ignoreQueryPrefix:!0})})}},21890:function(he,q,t){t.r(q),t.d(q,{default:function(){return rt}});var V=t(26068),C=t.n(V),se=t(48305),g=t.n(se),s=t(42400),R=t(66063),me=t(93579),ie=t(41388),Se=t(99434),p=t(75271),c=t(70576),Ze=t(77960),Ne=t(65167),Me=t(93844),U=t(40769),_=t(45269),B=t(4637),xe=t(94721),H=t(81399),re=t(73095),De=t(15558),Le=t.n(De),Oe=t(63091),pe=t(65715),Ae=t(37610),Ve=t(56138),Ce=t(32109),e=t(52676),Fe=function(l){var m=l.record,j=l.onClick,i=l.updating,M=(0,c.useIntl)(),E=M.formatMessage,Z=function(P){P.preventDefault();var v=m.activeStatus===B.Xh.ACTIVE?B.Xh.INACTIVE:B.Xh.ACTIVE;v===B.Xh.INACTIVE?Ce.Z.confirm({title:E({id:"bpo-list.company.status.inactive-tip"},{name:m.name}),onOk:function(){j(m.bpoId,v)},okText:E({id:"common.ok"}),cancelText:E({id:"common.cancel"})}):j(m.bpoId,v)};return(0,e.jsx)(R.ZP,{type:"link",style:{color:m.activeStatus===B.Xh.ACTIVE&&"#F56C6C",padding:0},disabled:i,onClick:Z,children:E({id:m.activeStatus===B.Xh.ACTIVE?"bpo-list.bpo.status.inactive":"bpo-list.bpo.operation.activate"})})},Re=Fe,Be=t(13554),Ge=t(26569),je=t(50025),Ue=t(11428),S=t(82162),$e=t(34375);function ze(a){var l=a.tags,m=(0,c.useIntl)(),j=m.formatMessage,i=function(E){return(0,e.jsx)(e.Fragment,{children:E.map(function(Z){return(0,e.jsx)(je.Z,{className:"".concat(S.Z.bpoTag," text-ellipsis"),children:Z.name},Z.id)})})};return(0,e.jsx)(e.Fragment,{children:l.length<=3?i(l):(0,e.jsx)(Ue.Z,{content:(0,e.jsx)("div",{style:{width:400},children:i(l)}),trigger:"hover",placement:"topRight",children:(0,e.jsxs)("span",{className:$e.Z["primary-color"],style:{cursor:"pointer",display:"flex",alignItems:"center"},children:[i(l.slice(0,3)),(0,e.jsx)("span",{style:{marginLeft:5},children:j({id:"common.etc"},{count:l.length})})]})})})}var Ye=t(11333),We=t.n(Ye);function He(a,l){var m={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo"}),render:function(r){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#42526e"},children:r.name}),(0,e.jsx)("p",{style:{margin:0,color:"#7a869a"},children:r.bpoCode}),(0,e.jsx)("div",{style:{margin:0},children:(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,e.jsx)(ze,{tags:r.tags||[]}),(0,e.jsx)(R.ZP,{type:"link",icon:(0,e.jsx)(Be.Z,{}),onClick:function(){return l(r)}})]})})]})}},j={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.contact"}),render:function(r){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#42526e"},children:r.contact}),(0,e.jsx)("p",{style:{margin:0,color:"#7a869a"},children:r.contactEmail}),(0,e.jsx)("p",{style:{margin:0,color:"#7a869a"},children:r.contactPhone})]})}},i={title:(0,e.jsx)(c.FormattedMessage,{id:"common.createdTime"}),dataIndex:"createdTime",render:function(r){if(!r)return(0,e.jsx)(c.FormattedMessage,{id:"common.nothing-symbol"});var y=We()(r).format("YYYY-MM-DD HH:mm").split(" "),h=g()(y,2),D=h[0],$=h[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{style:{color:"#42526e",margin:0},children:D}),(0,e.jsx)("p",{style:{color:"#42526e",margin:0},children:$})]})}},M={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.codename"}),dataIndex:"bpoDisplayId"},E={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.name"}),dataIndex:"name"},Z={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.contactName"}),dataIndex:"contact"},n={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.contactPhone"}),dataIndex:"contactPhone"},P={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.contactEmail"}),dataIndex:"contactEmail"},v={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.workerNum"}),dataIndex:"workerNumber",render:function(r,y){return(0,e.jsxs)(e.Fragment,{children:[y.currentWorkerNumber||0,"/",r,(0,e.jsx)(R.ZP,{type:"link",style:{padding:"0 4px"},onClick:function(){return c.history.push("/bpo/".concat(y.bpoId,"/workforce"))},children:(0,e.jsx)(c.FormattedMessage,{id:"common.view"})})]})}},I={title:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.status"}),dataIndex:"activeStatus",render:function(r){return(0,e.jsx)(e.Fragment,{children:r?(0,e.jsx)(Ge.Z,{color:r===B.Xh.ACTIVE?"green":"red",text:(0,e.jsx)(c.FormattedMessage,{id:"bpo-list.bpo.status.".concat(r.toLowerCase())})}):(0,e.jsx)(c.FormattedMessage,{id:"common.nothing-symbol"})})}};return a==="approved"?[m,j,i,v,I]:a==="invited"?[M,E,Z,n,P,v]:[]}var Xe=t(887);function Ke(a){var l=a.pagination,m=a.bpoList,j=a.editTag,i=a.updateBPOActiveStatus,M=a.updating,E=a.loading,Z=a.onUpdate,n=a.onDelete,P=(0,c.useIntl)(),v=P.formatMessage,I=[].concat(Le()(He("approved",j)),[{title:v({id:"common.operation"}),fixed:"right",render:function(r){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Re,{record:r,updating:M,onClick:i}),(0,e.jsx)(Oe.Z,{placement:"bottomRight",trigger:["hover"],overlay:(0,e.jsxs)(pe.Z,{style:{textAlign:"center"},children:[(0,e.jsx)(pe.Z.Item,{onClick:function(){Z(r.bpoId)},children:(0,e.jsx)(R.ZP,{type:"link",children:v({id:"common.update"})})},"release"),(0,e.jsx)(Ae.Z,{title:v({id:"common.confirm.delete"}),onConfirm:function(){n(r.bpoId)},children:(0,e.jsx)(pe.Z.Item,{children:(0,e.jsx)(R.ZP,{type:"link",danger:!0,children:v({id:"common.delete"})})})})]}),children:(0,e.jsx)(Xe.Z,{style:{cursor:"pointer",fontSize:20,marginLeft:8}})})]})}}]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Ve.Z,{scroll:{x:"max-content"},className:"tableStriped",rowKey:"bpoId",columns:I,dataSource:m||[],pagination:l,loading:E})})}var ee=t(90966),Te=t(27253),de=t(62057),X=t(43718);function Qe(a){var l,m=a.visible,j=a.onCancel,i=a.tags,M=a.selectedTags,E=a.updateTags,Z=a.updating,n=(0,c.useIntl)(),P=n.formatMessage,v=(0,p.useState)([]),I=g()(v,2),N=I[0],r=I[1],y=(0,p.useState)([]),h=g()(y,2),D=h[0],$=h[1],ne=(0,p.useState)(),G=g()(ne,2),T=G[0],K=G[1],Q=(0,p.useState)([]),k=g()(Q,2),z=k[0],oe=k[1];(0,p.useEffect)(function(){r(i)},[i]),(0,p.useEffect)(function(){$(M.map(function(L){return L.id}))},[M]);var J=function(W){var f=W.target.value;K(f);var x=N.filter(function(A){return A.name.indexOf(f)!==-1})||[];oe(x)},le=function(){K(null)},Y=function(W){var f=[];T&&(f=N.filter(function(x){return x.name.indexOf(T)===-1&&D.indexOf(x.name)!==-1}).map(function(x){return x.id})),$(f.concat(W))};return(0,e.jsxs)(Ce.Z,{title:P({id:"bpo-list.bpo.tag.modal.title"}),visible:m,footer:null,centered:!0,maskClosable:!1,onCancel:j,afterClose:le,children:[(0,e.jsx)(ee.Z,{className:"margin-bottom-4",size:"small",value:T,placeholder:P({id:"bpo-list.bpo.tag.modal.placeholder"}),onChange:J,allowClear:!0}),(0,e.jsx)("div",{className:"flex-between margin-top-2 margin-bottom-2",children:P({id:"bpo-list.bpo.tag.modal.tag.list"})}),(0,e.jsx)(Te.Z.Group,{value:D,onChange:Y,style:{width:500},children:(0,e.jsx)(de.Z,{gutter:[10,10],children:(l=T?z:N)===null||l===void 0?void 0:l.map(function(L){return(0,e.jsx)(X.Z,{span:12,children:(0,e.jsx)(Te.Z,{value:L.id,style:{display:"flex",alignItems:"center"},children:(0,e.jsx)(je.Z,{className:"".concat(S.Z.bpoTag," text-ellipsis"),children:L.name})})},L.id)})})}),(0,e.jsxs)("div",{className:"text-right margin-top-4",children:[T&&(0,e.jsx)("span",{style:{marginRight:10,fontSize:12},children:P({id:"bpo-list.bpo.tag.error"})}),(0,e.jsx)(R.ZP,{disabled:!!T,type:"primary",onClick:function(){return E(D)},loading:Z,children:P({id:"common.save"})})]})]})}var ke=t(27141),Je=t(90228),te=t.n(Je),we=t(87999),ge=t.n(we),ve=t(96394),qe=t(54833),_e=t(57499),et=t(37704),Ee=t(42697),tt=t(99076),ae=ve.Z.Item;function at(a){var l=a.allTags,m=l===void 0?[]:l,j=a.visible,i=a.bpoId,M=a.onSave,E=a.onClose,Z=(0,c.useIntl)(),n=Z.formatMessage,P=(0,p.useState)(),v=g()(P,2),I=v[0],N=v[1],r=(0,p.useState)(!1),y=g()(r,2),h=y[0],D=y[1],$=ve.Z.useForm(),ne=g()($,1),G=ne[0],T=I||{},K=T.name,Q=T.bpoCode,k=T.contact,z=T.contactEmail,oe=T.contactPhone,J=T.workerNumber,le=T.tags,Y=function(){var f=ge()(te()().mark(function x(){return te()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:G.validateFields().then(function(d){Object.assign(d,{name:d.name.trim()}),L(C()(C()({},d),{},{tags:(d.tags||[]).map(function(o){return m.find(function(fe){return fe.id===o})})}))});case 1:case"end":return O.stop()}},x)}));return function(){return f.apply(this,arguments)}}(),L=function(){var f=ge()(te()().mark(function x(A){var O;return te()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(D(!0),o.prev=1,!i){o.next=8;break}return o.next=5,(0,U.RE)(C()(C()({},I),A));case 5:o.t0=o.sent,o.next=11;break;case 8:return o.next=10,(0,U.zo)(A);case 10:o.t0=o.sent;case 11:O=o.t0,O.status!==re.o.OK?s.ZP.error((0,H.R$)(O)):(s.ZP.success(n({id:"common.message.success.create"})),M(O.data)),o.next=18;break;case 15:o.prev=15,o.t1=o.catch(1),s.ZP.error((0,H.R$)(o.t1));case 18:return o.prev=18,D(!1),o.finish(18);case 21:case"end":return o.stop()}},x,null,[[1,15,18,21]])}));return function(A){return f.apply(this,arguments)}}(),W=function(){var f=ge()(te()().mark(function x(){var A;return te()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,D(!0),d.next=4,(0,U.Nj)(i);case 4:A=d.sent,N(A.data),d.next=11;break;case 8:d.prev=8,d.t0=d.catch(0),s.ZP.error((0,H.R$)(d.t0));case 11:return d.prev=11,D(!1),d.finish(11);case 14:case"end":return d.stop()}},x,null,[[0,8,11,14]])}));return function(){return f.apply(this,arguments)}}();return(0,p.useEffect)(function(){I&&G.setFieldsValue({name:K,bpoCode:Q,contact:k,contactEmail:z,contactPhone:oe,workerNumber:J,tags:(le||[]).map(function(f){return f.id})})},[I]),(0,p.useEffect)(function(){i&&j?W():(N(null),G.resetFields())},[j,i]),(0,e.jsx)(et.Z,{title:n({id:"bpo-list.bpo.".concat(i?"update":"create")}),visible:j,onSave:Y,onClose:E,saveLoading:h,children:(0,e.jsxs)(ve.Z,{layout:"vertical",form:G,children:[(0,e.jsx)(de.Z,{gutter:[24,24],children:(0,e.jsx)(X.Z,{span:24,children:(0,e.jsx)(ae,{label:(0,e.jsx)("span",{className:S.Z["form-label"],children:n({id:"bpo-list.bpo.name"})}),colon:!1,className:S.Z["form-item"],name:"name",initialValue:K,rules:[{required:!0,message:n({id:"common.input.placeholder.with-label"},{label:n({id:"bpo-list.bpo.name"})})}],children:(0,e.jsx)(ee.Z,{})})})}),(0,e.jsx)(de.Z,{gutter:[24,24],children:(0,e.jsx)(X.Z,{span:24,children:(0,e.jsx)(ae,{label:(0,e.jsx)("span",{className:S.Z["form-label"],children:n({id:"bpo-list.bpo.codename"})}),colon:!1,className:S.Z["form-item"],name:"bpoCode",initialValue:Q,rules:[{required:!0,message:n({id:"common.input.placeholder.with-label"},{label:n({id:"bpo-list.bpo.codename"})})},{pattern:Ee.y,message:n({id:"common.format.error"})}],extra:(0,e.jsxs)("p",{style:{margin:0,color:"#42526e"},children:[(0,e.jsx)(_e.Z,{style:{marginRight:4}}),n({id:"bpo-list.bpo.codename.tip"})]}),children:(0,e.jsx)(ee.Z,{disabled:!!i})})})}),(0,e.jsxs)(de.Z,{gutter:[24,24],children:[(0,e.jsx)(X.Z,{span:12,children:(0,e.jsx)(ae,{label:(0,e.jsx)("span",{className:S.Z["form-label"],children:n({id:"bpo-list.bpo.contactName"})}),colon:!1,className:S.Z["form-item"],name:"contact",initialValue:k,rules:[{required:!0,message:n({id:"bpo-list.bpo.contactName-require"})}],children:(0,e.jsx)(ee.Z,{})})}),(0,e.jsx)(X.Z,{span:12,children:(0,e.jsx)(ae,{label:(0,e.jsx)("span",{className:S.Z["form-label"],children:n({id:"bpo-list.bpo.contactEmail"})}),colon:!1,className:S.Z["form-item"],name:"contactEmail",initialValue:z,rules:[{required:!0,message:n({id:"bpo-list.bpo.contactEmail-require"})},{validator:Ee.on}],children:(0,e.jsx)(ee.Z,{disabled:!!i&&(0,tt.mC)()})})}),(0,e.jsx)(X.Z,{span:12,children:(0,e.jsx)(ae,{label:(0,e.jsx)("span",{className:S.Z["form-label"],children:n({id:"bpo-list.bpo.contactPhone"})}),colon:!1,className:S.Z["form-item"],name:"contactPhone",initialValue:oe,rules:[{required:!0,message:n({id:"bpo-list.bpo.contactPhone-require"})}],children:(0,e.jsx)(ee.Z,{})})}),(0,e.jsx)(X.Z,{span:12,children:(0,e.jsx)(ae,{label:(0,e.jsx)("span",{className:S.Z["form-label"],children:n({id:"bpo-list.bpo.workerNum"})}),colon:!1,className:S.Z["form-item"],name:"workerNumber",initialValue:J,rules:[{required:!0,message:n({id:"bpo-list.bpo.workerNum-require"})}],children:(0,e.jsx)(qe.Z,{min:0,style:{width:"100%"}})})})]})]})})}var nt=at,ot=t(10089),st=t(70370);function lt(a){var l=a.globalTags,m=a.totalCount,j=a.bpoList,i=a.dispatch,M=a.loadingBPO,E=a.loadingGlobalTags,Z=(0,c.useIntl)(),n=Z.formatMessage,P=(0,ot.Z)(),v=P.query.queryParams,I=v===void 0?"":v,N={bpoDisplayId:null,bpoName:null,contactName:null,contactPhone:null,contactEmail:null,province:[],tags:[],activeStatus:null,pageIndex:0,pageSize:xe.L8},r=(0,p.useState)(I?JSON.parse(I):N),y=g()(r,2),h=y[0],D=y[1],$=(0,p.useState)(!1),ne=g()($,2),G=ne[0],T=ne[1],K=(0,p.useState)(!1),Q=g()(K,2),k=Q[0],z=Q[1],oe=(0,p.useState)(!1),J=g()(oe,2),le=J[0],Y=J[1],L=(0,p.useState)(),W=g()(L,2),f=W[0],x=W[1],A=(0,p.useState)(!1),O=g()(A,2),d=O[0],o=O[1],fe=(0,p.useState)(null),Pe=g()(fe,2),dt=Pe[0],be=Pe[1],ut=(0,p.useState)(null),Ie=g()(ut,2),w=Ie[0],ye=Ie[1],ct=[{key:"bpoCode",label:n({id:"bpo-list.bpo.codename"}),type:_.aH.Text,allowClear:!0},{key:"bpoName",label:n({id:"bpo-list.bpo.name"}),type:_.aH.Text,allowClear:!0},{key:"contactName",label:n({id:"bpo-list.bpo.contactName"}),type:_.aH.Text,allowClear:!0},{key:"contactPhone",label:n({id:"bpo-list.bpo.contactPhone"}),type:_.aH.Text,allowClear:!0},{key:"contactEmail",label:n({id:"bpo-list.bpo.contactEmail"}),type:_.aH.Text,allowClear:!0},{key:"activeStatus",label:n({id:"bpo-list.bpo.status"}),type:_.aH.Single,options:Object.keys(B.Xh),optionLabel:function(u){return n({id:"bpo-list.bpo.status.".concat(u.toLowerCase())})},allowClear:!0}],mt={pageSizeOptions:xe.TJ,showSizeChanger:!0,current:h.pageIndex+1,pageSize:h.pageSize,total:m,onChange:function(u,F){return D(C()(C()({},h),{},{pageIndex:u-1,pageSize:F}))},showTotal:function(u){return n({id:"common.total.items"},{items:u})}},ue=function(){i({type:"bpoManagement/getBPOList",payload:C()({},h)})},pt=function(){i({type:"bpoManagement/getGlobalTags"})};(0,p.useEffect)(function(){pt()},[]),(0,p.useEffect)(function(){ue()},[h,i]);var gt=function(u){x(u),z(!0)},vt=function(u){o(!0),(0,U.it)(f.bpoId,u).then(function(){i({type:"bpoManagement/getBPOList",payload:C()(C()({},h),{},{bpoStatusList:B.oG.APPROVED})}),i({type:"bpoManagement/getGlobalTags"}),z(!1)}).finally(function(){return o(!1)})},ft=function(u,F){o(!0),(0,U.xV)(u,F).then(function(ce){ce.status===re.o.OK?ue():s.ZP.error((0,H.R$)(ce))}).catch(function(ce){return s.ZP.error((0,H.R$)(ce))}).finally(function(){return o(!1)})},bt=function(u){(0,U.M$)(u).then(function(){ue()}).finally()},ht=function(u){o(!0),(0,U.zl)(u).then(function(F){F.status===re.o.OK||F.status===40023?i({type:"bpoManagement/getGlobalTags"}):s.ZP.error((0,H.R$)(F))}).finally(function(){o(!1)})},xt=function(u){o(!0),(0,U.Qz)(u).then(function(F){F.status!==re.o.OK?s.ZP.error((0,H.R$)(F)):i({type:"bpoManagement/getGlobalTags"})}).finally(function(){o(!1)})};return(0,e.jsx)(Me.Z,{title:n({id:"menu.vm.bpo-list"}),titleIcon:(0,e.jsx)(Se.Z,{}),actions:[(0,e.jsx)(R.ZP,{style:{marginLeft:8},onClick:function(){return Y(!0)},children:n({id:"bpo-list.bpo.create"})},"create")],children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(me.Z,{bordered:!1,className:"with-shadow",style:{marginTop:20},children:[(0,e.jsx)(Ne.Z,{formItems:ct,formStyle:{marginBottom:0},formItemStyle:{marginBottom:15},initialValue:h,onFilterValueChange:function(u){return D(C()(C()({},u),{},{pageIndex:0,pageSize:h.pageSize}))},searchMode:"click"}),(0,e.jsx)(ie.Z,{style:{margin:"0 0 15px"}}),(0,e.jsx)(Ke,{pagination:mt,bpoList:j,editTag:gt,updateBPOActiveStatus:ft,updating:d,loading:M,onUpdate:function(u){be(u),Y(!0)},onDelete:bt})]}),(0,e.jsx)(Qe,{visible:k,tags:l,selectedTags:(f==null?void 0:f.tags)||[],onCancel:function(){return z(!1)},updateTags:vt,updating:d}),(0,e.jsx)(ke.Z,{visible:G,tags:l,onCancel:function(){return T(!1)},addGlobalTag:ht,deleteGlobalTag:xt,updating:d}),(0,e.jsx)(nt,{bpoId:dt,allTags:l,visible:le,onSave:function(u){be(null),Y(!1),ye(u),ue()},onClose:function(){be(null),Y(!1)}}),(0,e.jsx)(st.Z,{username:w==null?void 0:w.uniqueName,password:w==null?void 0:w.initialPassword,visible:!!w,onClose:function(){return ye(null)}})]})})}function it(a){var l=a.bpoManagement,m=a.loading;return{totalCount:l.bpoCount,bpoList:l.bpoList,globalTags:l.globalTags,loadingBPO:m.effects["bpoManagement/getBPOList"],loadingGlobalTags:m.effects["bpoManagement/getGlobalTags"]}}var rt=(0,Ze.$j)(it)(lt)},4637:function(he,q,t){t.d(q,{Xh:function(){return se},oG:function(){return C}});var V=function(s){return s.APPLYING="APPLYING",s.DECLINED="DECLINED",s.APPLYING_DECLINED="APPLYING_DECLINED",s.UPDATED_DECLINED="UPDATED_DECLINED",s.APPROVED="APPROVED",s.UPDATED="UPDATED",s.RESUBMITTED="RESUBMITTED",s.APPLY="APPLY",s.MODIFY="UPDATE",s}({}),C={APPROVED:[V.APPROVED],APPLYING:[V.APPLYING,V.UPDATED,V.RESUBMITTED],DECLINED:[V.APPLYING_DECLINED,V.UPDATED_DECLINED]},se=function(s){return s.ACTIVE="ACTIVE",s.INACTIVE="INACTIVE",s}({}),g=function(s){return s.ONE_PERCENT="ONE_PERCENT",s.THREE_PERCENT="THREE_PERCENT",s.SIX_PERCENT="SIX_PERCENT",s}({})}}]);
